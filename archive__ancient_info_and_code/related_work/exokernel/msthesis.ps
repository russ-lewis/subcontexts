%!PS-Adobe-2.0
%%Creator: dvips 5.495 Copyright 1986, 1992 Radical Eye Software
%%Pages: 108
%%PageOrder: Ascend
%%BoundingBox: 0 0 612 792
%%EndComments
%DVIPSCommandLine: dvips -f
%DVIPSSource:  TeX output 1995.02.03:1554
%%BeginProcSet: tex.pro
%!
/TeXDict 250 dict def TeXDict begin /N{def}def /B{bind def}N /S{exch}N /X{S N}
B /TR{translate}N /isls false N /vsize 11 72 mul N /@rigin{isls{[0 -1 1 0 0 0]
concat}if 72 Resolution div 72 VResolution div neg scale isls{Resolution hsize
-72 div mul 0 TR}if Resolution VResolution vsize -72 div 1 add mul TR matrix
currentmatrix dup dup 4 get round 4 exch put dup dup 5 get round 5 exch put
setmatrix}N /@landscape{/isls true N}B /@manualfeed{statusdict /manualfeed
true put}B /@copies{/#copies X}B /FMat[1 0 0 -1 0 0]N /FBB[0 0 0 0]N /nn 0 N
/IE 0 N /ctr 0 N /df-tail{/nn 8 dict N nn begin /FontType 3 N /FontMatrix
fntrx N /FontBBox FBB N string /base X array /BitMaps X /BuildChar{
CharBuilder}N /Encoding IE N end dup{/foo setfont}2 array copy cvx N load 0 nn
put /ctr 0 N[}B /df{/sf 1 N /fntrx FMat N df-tail}B /dfs{div /sf X /fntrx[sf 0
0 sf neg 0 0]N df-tail}B /E{pop nn dup definefont setfont}B /ch-width{ch-data
dup length 5 sub get}B /ch-height{ch-data dup length 4 sub get}B /ch-xoff{128
ch-data dup length 3 sub get sub}B /ch-yoff{ch-data dup length 2 sub get 127
sub}B /ch-dx{ch-data dup length 1 sub get}B /ch-image{ch-data dup type
/stringtype ne{ctr get /ctr ctr 1 add N}if}B /id 0 N /rw 0 N /rc 0 N /gp 0 N
/cp 0 N /G 0 N /sf 0 N /CharBuilder{save 3 1 roll S dup /base get 2 index get
S /BitMaps get S get /ch-data X pop /ctr 0 N ch-dx 0 ch-xoff ch-yoff ch-height
sub ch-xoff ch-width add ch-yoff setcachedevice ch-width ch-height true[1 0 0
-1 -.1 ch-xoff sub ch-yoff .1 add]{ch-image}imagemask restore}B /D{/cc X dup
type /stringtype ne{]}if nn /base get cc ctr put nn /BitMaps get S ctr S sf 1
ne{dup dup length 1 sub dup 2 index S get sf div put}if put /ctr ctr 1 add N}
B /I{cc 1 add D}B /bop{userdict /bop-hook known{bop-hook}if /SI save N @rigin
0 0 moveto /V matrix currentmatrix dup 1 get dup mul exch 0 get dup mul add
.99 lt{/QV}{/RV}ifelse load def pop pop}N /eop{SI restore showpage userdict
/eop-hook known{eop-hook}if}N /@start{userdict /start-hook known{start-hook}
if pop /VResolution X /Resolution X 1000 div /DVImag X /IE 256 array N 0 1 255
{IE S 1 string dup 0 3 index put cvn put}for 65781.76 div /vsize X 65781.76
div /hsize X}N /p{show}N /RMat[1 0 0 -1 0 0]N /BDot 260 string N /rulex 0 N
/ruley 0 N /v{/ruley X /rulex X V}B /V{}B /RV statusdict begin /product where{
pop product dup length 7 ge{0 7 getinterval dup(Display)eq exch 0 4
getinterval(NeXT)eq or}{pop false}ifelse}{false}ifelse end{{gsave TR -.1 -.1
TR 1 1 scale rulex ruley false RMat{BDot}imagemask grestore}}{{gsave TR -.1
-.1 TR rulex ruley scale 1 1 false RMat{BDot}imagemask grestore}}ifelse B /QV{
gsave transform round exch round exch itransform moveto rulex 0 rlineto 0
ruley neg rlineto rulex neg 0 rlineto fill grestore}B /a{moveto}B /delta 0 N
/tail{dup /delta X 0 rmoveto}B /M{S p delta add tail}B /b{S p tail}B /c{-4 M}
B /d{-3 M}B /e{-2 M}B /f{-1 M}B /g{0 M}B /h{1 M}B /i{2 M}B /j{3 M}B /k{4 M}B
/w{0 rmoveto}B /l{p -4 w}B /m{p -3 w}B /n{p -2 w}B /o{p -1 w}B /q{p 1 w}B /r{
p 2 w}B /s{p 3 w}B /t{p 4 w}B /x{0 S rmoveto}B /y{3 2 roll p a}B /bos{/SS save
N}B /eos{SS restore}B end
%%EndProcSet
%%BeginProcSet: special.pro
%!
TeXDict begin /SDict 200 dict N SDict begin /@SpecialDefaults{/hs 612 N /vs
792 N /ho 0 N /vo 0 N /hsc 1 N /vsc 1 N /ang 0 N /CLIP 0 N /rwiSeen false N
/rhiSeen false N /letter{}N /note{}N /a4{}N /legal{}N}B /@scaleunit 1 N
/@hscale{@scaleunit div /hsc X}B /@vscale{@scaleunit div /vsc X}B /@hsize{/hs
X /CLIP 1 N}B /@vsize{/vs X /CLIP 1 N}B /@clip{/CLIP 2 N}B /@hoffset{/ho X}B
/@voffset{/vo X}B /@angle{/ang X}B /@rwi{10 div /rwi X /rwiSeen true N}B /@rhi
{10 div /rhi X /rhiSeen true N}B /@llx{/llx X}B /@lly{/lly X}B /@urx{/urx X}B
/@ury{/ury X}B /magscale true def end /@MacSetUp{userdict /md known{userdict
/md get type /dicttype eq{userdict begin md length 10 add md maxlength ge{/md
md dup length 20 add dict copy def}if end md begin /letter{}N /note{}N /legal{
}N /od{txpose 1 0 mtx defaultmatrix dtransform S atan/pa X newpath clippath
mark{transform{itransform moveto}}{transform{itransform lineto}}{6 -2 roll
transform 6 -2 roll transform 6 -2 roll transform{itransform 6 2 roll
itransform 6 2 roll itransform 6 2 roll curveto}}{{closepath}}pathforall
newpath counttomark array astore /gc xdf pop ct 39 0 put 10 fz 0 fs 2
F/|______Courier fnt invertflag{PaintBlack}if}N /txpose{pxs pys scale ppr
aload pop por{noflips{pop S neg S TR pop 1 -1 scale}if xflip yflip and{pop S
neg S TR 180 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0
get neg sub neg TR}if xflip yflip not and{pop S neg S TR pop 180 rotate ppr 3
get ppr 1 get neg sub neg 0 TR}if yflip xflip not and{ppr 1 get neg ppr 0 get
neg TR}if}{noflips{TR pop pop 270 rotate 1 -1 scale}if xflip yflip and{TR pop
pop 90 rotate 1 -1 scale ppr 3 get ppr 1 get neg sub neg ppr 2 get ppr 0 get
neg sub neg TR}if xflip yflip not and{TR pop pop 90 rotate ppr 3 get ppr 1 get
neg sub neg 0 TR}if yflip xflip not and{TR pop pop 270 rotate ppr 2 get ppr 0
get neg sub neg 0 S TR}if}ifelse scaleby96{ppr aload pop 4 -1 roll add 2 div 3
1 roll add 2 div 2 copy TR .96 dup scale neg S neg S TR}if}N /cp{pop pop
showpage pm restore}N end}if}if}N /normalscale{Resolution 72 div VResolution
72 div neg scale magscale{DVImag dup scale}if 0 setgray}N /psfts{S 65781.76
div N}N /startTexFig{/psf$SavedState save N userdict maxlength dict begin
/magscale false def normalscale currentpoint TR /psf$ury psfts /psf$urx psfts
/psf$lly psfts /psf$llx psfts /psf$y psfts /psf$x psfts currentpoint /psf$cy X
/psf$cx X /psf$sx psf$x psf$urx psf$llx sub div N /psf$sy psf$y psf$ury
psf$lly sub div N psf$sx psf$sy scale psf$cx psf$sx div psf$llx sub psf$cy
psf$sy div psf$ury sub TR /showpage{}N /erasepage{}N /copypage{}N /p 3 def
@MacSetUp}N /doclip{psf$llx psf$lly psf$urx psf$ury currentpoint 6 2 roll
newpath 4 copy 4 2 roll moveto 6 -1 roll S lineto S lineto S lineto closepath
clip newpath moveto}N /endTexFig{end psf$SavedState restore}N /@beginspecial{
SDict begin /SpecialSave save N gsave normalscale currentpoint TR
@SpecialDefaults count /ocount X /dcount countdictstack N}N /@setspecial{CLIP
1 eq{newpath 0 0 moveto hs 0 rlineto 0 vs rlineto hs neg 0 rlineto closepath
clip}if ho vo TR hsc vsc scale ang rotate rwiSeen{rwi urx llx sub div rhiSeen{
rhi ury lly sub div}{dup}ifelse scale llx neg lly neg TR}{rhiSeen{rhi ury lly
sub div dup scale llx neg lly neg TR}if}ifelse CLIP 2 eq{newpath llx lly
moveto urx lly lineto urx ury lineto llx ury lineto closepath clip}if
/showpage{}N /erasepage{}N /copypage{}N newpath}N /@endspecial{count ocount
sub{pop}repeat countdictstack dcount sub{end}repeat grestore SpecialSave
restore end}N /@defspecial{SDict begin}N /@fedspecial{end}B /li{lineto}B /rl{
rlineto}B /rc{rcurveto}B /np{/SaveX currentpoint /SaveY X N 1 setlinecap
newpath}N /st{stroke SaveX SaveY moveto}N /fil{fill SaveX SaveY moveto}N
/ellipse{/endangle X /startangle X /yrad X /xrad X /savematrix matrix
currentmatrix N TR xrad yrad scale 0 0 1 startangle endangle arc savematrix
setmatrix}N end
%%EndProcSet
TeXDict begin 40258431 52099146 1000 300 300 () @start /Fa
2 63 df<0000038000000F0000003C000000F0000003C000000F0000003C000000F0000003C000
000F0000003C000000F0000000F00000003C0000000F00000003C0000000F00000003C0000000F
00000003C0000000F00000003C0000000F000000038019187D9520>60 D<E0000000780000001E
0000000780000001E0000000780000001E0000000780000001E0000000780000001E0000000780
0000078000001E00000078000001E00000078000001E00000078000001E00000078000001E0000
0078000000E000000019187D9520>62 D E /Fb 5 104 df<FFFFFF80FFFFFF8019027D8A20>0
D<01800180018001804182F18F399C0FF003C003C00FF0399CF18F418201800180018001801012
7E9215>3 D<000001800000078000001E00000078000001E00000078000001E00000078000001
E00000078000001E00000078000000E0000000780000001E0000000780000001E0000000780000
001E0000000780000001E0000000780000001E0000000780000001800000000000000000000000
00000000000000000000000000000000007FFFFF00FFFFFF8019227D9920>20
D<003C00E001C00180038003800380038003800380038003800380038003800380038003000700
1C00F0001C00070003000380038003800380038003800380038003800380038003800380018001
C000E0003C0E297D9E15>102 D<F0001C00070003000380038003800380038003800380038003
800380038003800380018001C000E0003C00E001C0018003800380038003800380038003800380
03800380038003800380030007001C00F0000E297D9E15>I E /Fc 2 16
df<FFFFFFC0FFFFFFC01A027C8B23>0 D<03C00FF01FF83FFC7FFE7FFEFFFFFFFFFFFFFFFFFFFF
FFFF7FFE7FFE3FFC1FF80FF003C010127D9317>15 D E /Fd 78 127 df<007E1F0001C1B18003
03E3C00703C3C00E03C1800E01C0000E01C0000E01C0000E01C0000E01C0000E01C000FFFFFC00
0E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0
000E01C0000E01C0000E01C0000E01C0000E01C0000E01C0007F87FC001A1D809C18>11
D<007E0001C1800301800703C00E03C00E01800E00000E00000E00000E00000E0000FFFFC00E01
C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01
C00E01C00E01C07F87F8151D809C17>I<00030180000301800003018000060300000603000006
03000006030000060300000C0600000C0600000C0600000C060000180C007FFFFFF8FFFFFFFC00
30180000301800003018000030180000603000006030000060300000603000FFFFFFFC7FFFFFF8
00C060000180C0000180C0000180C0000180C00003018000030180000301800003018000060300
0006030000060300001E257E9C23>35 D<00E00000019000000308000003080000070800000708
000007080000070800000710000007100000072000000740000003C03FE003800F000380060003
80040005C0040009C0080010E0100030E010006070200060702000E0384000E03C4000E01C8000
E00F0020E0070020700780403009C0401830E18007C03E001B1F7E9D20>38
D<004000800100020006000C000C0018001800300030007000600060006000E000E000E000E000
E000E000E000E000E000E000E000E000600060006000700030003000180018000C000C00060002
000100008000400A2A7D9E10>40 D<800040002000100018000C000C0006000600030003000380
01800180018001C001C001C001C001C001C001C001C001C001C001C001C0018001800180038003
000300060006000C000C00180010002000400080000A2A7E9E10>I<0006000000060000000600
000006000000060000000600000006000000060000000600000006000000060000000600000006
0000FFFFFFE0FFFFFFE00006000000060000000600000006000000060000000600000006000000
06000000060000000600000006000000060000000600001B1C7E9720>43
D<60F0F0701010101020204080040C7C830C>I<FFE0FFE00B0280890E>I<60F0F06004047C830C
>I<00010003000600060006000C000C000C0018001800180030003000300060006000C000C000
C0018001800180030003000300060006000C000C000C0018001800180030003000300060006000
6000C000C00010297E9E15>I<03C00C301818300C300C700E60066006E007E007E007E007E007
E007E007E007E007E007E007E007E00760066006700E300C300C18180C3007E0101D7E9B15>I<
030007003F00C70007000700070007000700070007000700070007000700070007000700070007
000700070007000700070007000F80FFF80D1C7C9B15>I<07C01830201C400C400EF00FF80FF8
07F8077007000F000E000E001C001C00380070006000C00180030006010C01180110023FFE7FFE
FFFE101C7E9B15>I<07E01830201C201C781E780E781E381E001C001C00180030006007E00030
001C001C000E000F000F700FF80FF80FF80FF00E401C201C183007E0101D7E9B15>I<000C0000
0C00001C00003C00003C00005C0000DC00009C00011C00031C00021C00041C000C1C00081C0010
1C00301C00201C00401C00C01C00FFFFC0001C00001C00001C00001C00001C00001C00001C0001
FFC0121C7F9B15>I<300C3FF83FF03FC020002000200020002000200023E024302818301C200E
000E000F000F000F600FF00FF00FF00F800E401E401C2038187007C0101D7E9B15>I<00F0030C
06040C0E181E301E300C700070006000E3E0E430E818F00CF00EE006E007E007E007E007E00760
0760077006300E300C18180C3003E0101D7E9B15>I<4000007FFF807FFF007FFF004002008004
0080040080080000100000100000200000600000400000C00000C00001C0000180000180000380
00038000038000038000078000078000078000078000078000078000030000111D7E9B15>I<03
E00C301008200C20066006600660067006780C3E083FB01FE007F007F818FC307E601E600FC007
C003C003C003C00360026004300C1C1007E0101D7E9B15>I<03C00C301818300C700C600EE006
E006E007E007E007E007E0076007700F300F18170C2707C700060006000E300C780C7818701020
3030C00F80101D7E9B15>I<60F0F0600000000000000000000060F0F06004127C910C>I<60F0F0
600000000000000000000060F0F0701010101020204080041A7C910C>I<7FFFFFC0FFFFFFE000
00000000000000000000000000000000000000000000000000000000000000FFFFFFE07FFFFFC0
1B0C7E8F20>61 D<0FE03038401CE00EF00EF00EF00E000C001C0030006000C000800180010001
0001000100010001000000000000000000000003000780078003000F1D7E9C14>63
D<000600000006000000060000000F0000000F0000000F00000017800000178000001780000023
C0000023C0000023C0000041E0000041E0000041E0000080F0000080F0000180F8000100780001
FFF80003007C0002003C0002003C0006003E0004001E0004001E000C001F001E001F00FF80FFF0
1C1D7F9C1F>65 D<FFFFC00F00F00F00380F003C0F001C0F001E0F001E0F001E0F001E0F001C0F
003C0F00780F01F00FFFE00F00780F003C0F001E0F000E0F000F0F000F0F000F0F000F0F000F0F
001E0F001E0F003C0F0078FFFFE0181C7E9B1D>I<001F808000E0618001801980070007800E00
03801C0003801C00018038000180780000807800008070000080F0000000F0000000F0000000F0
000000F0000000F0000000F0000000F0000000700000807800008078000080380000801C000100
1C0001000E000200070004000180080000E03000001FC000191E7E9C1E>I<FFFFC0000F00F000
0F003C000F000E000F0007000F0007000F0003800F0003C00F0001C00F0001C00F0001E00F0001
E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001E00F0001C00F0001C00F0003C00F00
03800F0007800F0007000F000E000F001C000F007000FFFFC0001B1C7E9B20>I<FFFFFC0F003C
0F000C0F00040F00040F00060F00020F00020F02020F02000F02000F02000F06000FFE000F0600
0F02000F02000F02000F02010F00010F00020F00020F00020F00060F00060F000C0F003CFFFFFC
181C7E9B1C>I<FFFFF80F00780F00180F00080F00080F000C0F00040F00040F02040F02000F02
000F02000F06000FFE000F06000F02000F02000F02000F02000F00000F00000F00000F00000F00
000F00000F00000F8000FFF800161C7E9B1B>I<001F808000E0618001801980070007800E0003
801C0003801C00018038000180780000807800008070000080F0000000F0000000F0000000F000
0000F0000000F0000000F000FFF0F0000F80700007807800078078000780380007801C0007801C
0007800E00078007000B800180118000E06080001F80001C1E7E9C21>I<FFF3FFC00F003C000F
003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C00
0F003C000FFFFC000F003C000F003C000F003C000F003C000F003C000F003C000F003C000F003C
000F003C000F003C000F003C000F003C000F003C00FFF3FFC01A1C7E9B1F>I<FFF00F000F000F
000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F000F00
0F000F000F000F00FFF00C1C7F9B0F>I<FFF03FE00F000F000F000C000F0008000F0010000F00
20000F0040000F0080000F0100000F0200000F0400000F0E00000F1F00000F2F00000F2780000F
4780000F83C0000F01E0000F01E0000F00F0000F00F8000F0078000F003C000F003C000F001E00
0F001F000F001F80FFF07FF01C1C7E9B20>75 D<FFF8000F80000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00080F
00080F00080F00180F00180F00100F00300F00700F01F0FFFFF0151C7E9B1A>I<FF8000FF800F
8000F8000F8000F8000BC00178000BC00178000BC001780009E002780009E002780008F0047800
08F004780008F0047800087808780008780878000878087800083C107800083C107800083C1078
00081E207800081E207800081E207800080F407800080F40780008078078000807807800080780
780008030078001C03007800FF8307FF80211C7E9B26>I<FF007FC00F800E000F8004000BC004
0009E0040009E0040008F0040008F8040008780400083C0400083C0400081E0400080F0400080F
0400080784000807C4000803C4000801E4000801E4000800F40008007C0008007C0008003C0008
003C0008001C0008000C001C000C00FF8004001A1C7E9B1F>I<003F800000E0E0000380380007
001C000E000E001C0007003C00078038000380780003C0780003C0700001C0F00001E0F00001E0
F00001E0F00001E0F00001E0F00001E0F00001E0F00001E0700001C0780003C0780003C0380003
803C0007801C0007000E000E0007001C000380380000E0E000003F80001B1E7E9C20>I<FFFF80
0F00E00F00780F003C0F001C0F001E0F001E0F001E0F001E0F001E0F001C0F003C0F00780F00E0
0FFF800F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F0000
FFF000171C7E9B1C>I<FFFF00000F01E0000F0078000F003C000F001C000F001E000F001E000F
001E000F001E000F001C000F003C000F0078000F01E0000FFF00000F03C0000F00E0000F00F000
0F0078000F0078000F0078000F0078000F0078000F0078000F0078100F0078100F0038100F003C
20FFF01C20000007C01C1D7E9B1F>82 D<07E0801C1980300580700380600180E00180E00080E0
0080E00080F00000F800007C00007FC0003FF8001FFE0007FF0000FF80000F800007C00003C000
01C08001C08001C08001C0C00180C00180E00300D00200CC0C0083F800121E7E9C17>I<7FFFFF
C0700F01C0600F00C0400F0040400F0040C00F0020800F0020800F0020800F0020000F0000000F
0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F000000
0F0000000F0000000F0000000F0000000F0000000F0000001F800003FFFC001B1C7F9B1E>I<FF
F07FC00F000E000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F000400
0F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004000F0004
000F0004000F0004000700080007800800038010000180100000C020000070C000001F00001A1D
7E9B1F>I<FFE00FF01F0003C00F0001800F0001000F800300078002000780020003C0040003C0
040003C0040001E0080001E0080001F0080000F0100000F0100000F83000007820000078200000
3C4000003C4000003C4000001E8000001E8000001F8000000F0000000F00000006000000060000
000600001C1D7F9B1F>I<FFE0FFE0FF1F001F003C1E001E00180F001F00100F001F00100F001F
001007801F00200780278020078027802003C027804003C043C04003C043C04003E043C04001E0
81E08001E081E08001E081E08000F100F10000F100F10000F100F100007900FA00007A007A0000
7A007A00003E007C00003C003C00003C003C00003C003C00001800180000180018000018001800
281D7F9B2B>I<7FF0FFC00FC03E000780180003C0180003E0100001E0200001F0600000F04000
00788000007D8000003D0000001E0000001F0000000F0000000F8000000F80000013C0000023E0
000021E0000041F00000C0F8000080780001007C0003003C0002001E0006001F001F003F80FFC0
FFF01C1C7F9B1F>I<7FFFF07C01F07001E06003C06003C0400780400F80400F00401E00001E00
003C00007C0000780000F00000F00001E00003E00003C0100780100780100F00101F00301E0020
3C00203C00607800E0F803E0FFFFE0141C7E9B19>90 D<FEFEC0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0FEFE07297C9E0C>I<FEFE0606060606
0606060606060606060606060606060606060606060606060606060606060606FEFE0729809E0C
>93 D<0C0012002100408080400A057B9B15>I<1FC000307000783800781C00301C00001C0000
1C0001FC000F1C00381C00701C00601C00E01C40E01C40E01C40603C40304E801F870012127E91
15>97 D<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C7C
001D86001E03001C01801C01C01C00C01C00E01C00E01C00E01C00E01C00E01C00E01C00C01C01
C01C01801E030019060010F800131D7F9C17>I<07E00C301878307870306000E000E000E000E0
00E000E00060007004300418080C3007C00E127E9112>I<003F00000700000700000700000700
00070000070000070000070000070000070003E7000C1700180F00300700700700600700E00700
E00700E00700E00700E00700E00700600700700700300700180F000C370007C7E0131D7E9C17>
I<03E00C301818300C700E6006E006FFFEE000E000E000E00060007002300218040C1803E00F12
7F9112>I<00F8018C071E061E0E0C0E000E000E000E000E000E00FFE00E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E007FE00F1D809C0D>I<00038003C4C00C38
C01C3880181800381C00381C00381C00381C001818001C38000C300013C0001000003000001800
001FF8001FFF001FFF803003806001C0C000C0C000C0C000C06001803003001C0E0007F800121C
7F9215>I<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C
7C001C87001D03001E03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C
03801C03801C03801C0380FF9FF0141D7F9C17>I<18003C003C00180000000000000000000000
00000000FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C00FF
80091D7F9C0C>I<00C001E001E000C000000000000000000000000000000FE000E000E000E000
E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E060E0F0C0F1C0
61803E000B25839C0D>I<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C
00001C00001C3FC01C0F001C0C001C08001C10001C20001C40001CE0001DE0001E70001C78001C
38001C3C001C1C001C0E001C0F001C0F80FF9FE0131D7F9C16>I<FC001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C00FF80091D7F9C0C>I<FC7E07E0001C838838001D019018001E01E01C001C01C01C00
1C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C001C01C01C
001C01C01C001C01C01C001C01C01C001C01C01C00FF8FF8FF8021127F9124>I<FC7C001C8700
1D03001E03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C0380
1C03801C0380FF9FF014127F9117>I<03F0000E1C00180600300300700380600180E001C0E001
C0E001C0E001C0E001C0E001C06001807003803003001806000E1C0003F00012127F9115>I<FC
7C001D86001E03001C01801C01C01C00C01C00E01C00E01C00E01C00E01C00E01C00E01C01C01C
01C01C01801E03001D06001CF8001C00001C00001C00001C00001C00001C00001C0000FF800013
1A7F9117>I<03C1000C3300180B00300F00700700700700E00700E00700E00700E00700E00700
E00700600700700700300F00180F000C370007C700000700000700000700000700000700000700
000700003FE0131A7E9116>I<FCE01D301E781E781C301C001C001C001C001C001C001C001C00
1C001C001C001C00FFC00D127F9110>I<1F9030704030C010C010E010F8007F803FE00FF000F8
80388018C018C018E010D0608FC00D127F9110>I<04000400040004000C000C001C003C00FFE0
1C001C001C001C001C001C001C001C001C001C101C101C101C101C100C100E2003C00C1A7F9910
>I<FC1F801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C03801C
03801C03801C07800C07800E1B8003E3F014127F9117>I<FF07E03C03801C01001C01000E0200
0E020007040007040007040003880003880003D80001D00001D00000E00000E00000E000004000
13127F9116>I<FF3FCFE03C0F03801C0701801C0701001C0B01000E0B82000E0B82000E118200
0711C4000711C4000720C40003A0E80003A0E80003C0680001C0700001C0700001803000008020
001B127F911E>I<7F8FF00F03800F030007020003840001C80001D80000F00000700000780000
F800009C00010E00020E000607000403801E07C0FF0FF81512809116>I<FF07E03C03801C0100
1C01000E02000E020007040007040007040003880003880003D80001D00001D00000E00000E000
00E000004000004000008000008000F08000F10000F300006600003C0000131A7F9116>I<7FFC
70386038407040F040E041C003C0038007000F040E041C043C0C380870087038FFF80E127F9112
>I<1C043F0843F080E00E047D9B15>126 D E /Fe 32 122 df<FFE0FFE0FFE0FFE00B047F8A10
>45 D<00038000000380000007C0000007C0000007C000000FE000000FE000001FF000001BF000
001BF0000031F8000031F8000061FC000060FC0000E0FE0000C07E0000C07E0001803F0001FFFF
0003FFFF8003001F8003001F8006000FC006000FC00E000FE00C0007E0FFC07FFEFFC07FFE1F1C
7E9B24>65 D<FFFFF800FFFFFF000FC01FC00FC007E00FC001F00FC001F80FC000F80FC000FC0F
C0007C0FC0007C0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E0FC0007E
0FC0007C0FC0007C0FC0007C0FC000F80FC000F80FC001F00FC007E00FC01FC0FFFFFF00FFFFF8
001F1C7E9B25>68 D<FFFFFF00FFFFFF000FC01F000FC007000FC003000FC003800FC003800FC1
81800FC181800FC181800FC180000FC380000FFF80000FFF80000FC380000FC180000FC180000F
C180600FC180600FC000E00FC000C00FC000C00FC001C00FC001C00FC003C00FC00F80FFFFFF80
FFFFFF801B1C7E9B1F>I<FFC00003FFFFE00007FF0FE00007F00DF0000DF00DF0000DF00DF000
0DF00CF80019F00CF80019F00C7C0031F00C7C0031F00C3E0061F00C3E0061F00C1F00C1F00C1F
00C1F00C1F00C1F00C0F8181F00C0F8181F00C07C301F00C07C301F00C03E601F00C03E601F00C
01FC01F00C01FC01F00C01FC01F00C00F801F00C00F801F0FFC0701FFFFFC0701FFF281C7E9B2D
>77 D<FFE003FFFFE003FF0FF000300FF800300DFC00300CFE00300C7E00300C3F00300C1F8030
0C1FC0300C0FE0300C07F0300C03F0300C01F8300C01FC300C00FE300C007F300C003F300C001F
B00C001FF00C000FF00C0007F00C0003F00C0001F00C0000F00C0000F0FFC00070FFC00030201C
7E9B25>I<003FE00001F07C0003C01E000F800F801F0007C01E0003C03E0003E07E0003F07C00
01F07C0001F0FC0001F8FC0001F8FC0001F8FC0001F8FC0001F8FC0001F8FC0001F8FC0001F87C
0001F07E0003F07E0003F03E0003E03F0007E01F0007C00F800F8003C01E0001F07C00003FE000
1D1C7D9B24>I<FFFFF800FFFFFE000FC03F800FC00F800FC007C00FC007E00FC007E00FC007E0
0FC007E00FC007E00FC007C00FC007C00FC00F800FC03F000FFFFC000FC000000FC000000FC000
000FC000000FC000000FC000000FC000000FC000000FC000000FC000000FC00000FFFC0000FFFC
00001B1C7E9B21>I<FFFC01FF80FFFC01FF800FC000180007E000300007E000300007F0007000
03F000600003F800E00001F800C00001FC00C00000FC01800000FC018000007E030000007E0300
00007F070000003F060000003F8E0000001F8C0000001FCC0000000FD80000000FD800000007F0
00000007F000000007F000000003E000000003E000000001C000000001C00000211C7F9B24>86
D<0FF8001C1E003E0F803E07803E07C01C07C00007C0007FC007E7C01F07C03C07C07C07C0F807
C0F807C0F807C0780BC03E13F80FE1F815127F9117>97 D<FF0000FF00001F00001F00001F0000
1F00001F00001F00001F00001F00001F00001F3F801FE1E01F80701F00781F003C1F003C1F003E
1F003E1F003E1F003E1F003E1F003E1F003C1F003C1F00781F80701EC1E01C3F00171D7F9C1B>
I<03FC000E0E001C1F003C1F00781F00780E00F80000F80000F80000F80000F80000F800007800
007801803C01801C03000E0E0003F80011127E9115>I<000FF0000FF00001F00001F00001F000
01F00001F00001F00001F00001F00001F001F9F00F07F01C03F03C01F07801F07801F0F801F0F8
01F0F801F0F801F0F801F0F801F07801F07801F03C01F01C03F00F0FFE03F9FE171D7E9C1B>I<
01FC000F07001C03803C01C07801C07801E0F801E0F801E0FFFFE0F80000F80000F80000780000
7C00603C00601E00C00F038001FC0013127F9116>I<007F0001E38003C7C00787C00F87C00F83
800F80000F80000F80000F80000F8000FFF800FFF8000F80000F80000F80000F80000F80000F80
000F80000F80000F80000F80000F80000F80000F80000F80007FF8007FF800121D809C0F>I<03
F8F00E0F381E0F381C07303C07803C07803C07803C07801C07001E0F000E0E001BF80010000018
00001800001FFF001FFFC00FFFE01FFFF07801F8F00078F00078F000787000707800F01E03C007
FF00151B7F9118>I<FF0000FF00001F00001F00001F00001F00001F00001F00001F00001F0000
1F00001F0FC01F31E01F40F01F80F81F80F81F00F81F00F81F00F81F00F81F00F81F00F81F00F8
1F00F81F00F81F00F81F00F8FFE7FFFFE7FF181D7F9C1B>I<1E003F003F003F003F001E000000
00000000000000000000FF00FF001F001F001F001F001F001F001F001F001F001F001F001F001F
001F00FFE0FFE00B1E7F9D0E>I<007800FC00FC00FC00FC007800000000000000000000000003
FC03FC007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C007C
707CF87CF878F8F070E01F800E26839D0F>I<FF0000FF00001F00001F00001F00001F00001F00
001F00001F00001F00001F00001F0FF81F0FF81F03801F07001F0C001F18001F70001FF8001FFC
001FBC001F3E001F1F001F0F001F0F801F07C01F03E0FFC7FCFFC7FC161D7F9C19>I<FF00FF00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F00FFE0FFE00B1D7F9C0E>I<FF0FC07E00FF31E18F001F40F207801F80
FC07C01F80FC07C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F00F807C01F
00F807C01F00F807C01F00F807C01F00F807C01F00F807C0FFE7FF3FF8FFE7FF3FF825127F9128
>I<FF0FC0FF31E01F40F01F80F81F80F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F
00F81F00F81F00F81F00F8FFE7FFFFE7FF18127F911B>I<01FC000F07801C01C03C01E07800F0
7800F0F800F8F800F8F800F8F800F8F800F8F800F87800F07800F03C01E01E03C00F078001FC00
15127F9118>I<FF3F80FFE1E01F80F01F00781F007C1F003C1F003E1F003E1F003E1F003E1F00
3E1F003E1F003C1F007C1F00781F80F01FC1E01F3F001F00001F00001F00001F00001F00001F00
00FFE000FFE000171A7F911B>I<FE3E00FE47001E8F801E8F801E8F801F07001F00001F00001F
00001F00001F00001F00001F00001F00001F00001F0000FFF000FFF00011127F9114>114
D<1FD830786018E018E018F000FF807FE07FF01FF807FC007CC01CC01CE01CE018F830CFC00E12
7E9113>I<0300030003000300070007000F000F003FFCFFFC1F001F001F001F001F001F001F00
1F001F001F0C1F0C1F0C1F0C0F08079803F00E1A7F9913>I<FF07F8FF07F81F00F81F00F81F00
F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F01F80F01F80786FF01F8
FF18127F911B>I<FFC1FCFFC1FC1F00601F80E00F80C00FC0C007C18007C18003E30003E30001
F60001F60001FE0000FC0000FC0000780000780000300016127F9119>I<FFC7FCFFC7FC1F8180
0F838007C70003EE0001FC0001F80000F800007C0000FE0001DF00039F00070F800607C00C03E0
FF07FCFF07FC16127F9119>120 D<FFC1FCFFC1FC1F00601F80E00F80C00FC0C007C18007C180
03E30003E30001F70001F60000FE0000FC0000FC00007800007800003000003000007000706000
F86000F8C000F980007300003E0000161A7F9119>I E /Ff 39 123 df<00FC00018200070300
0607000E02000E00000E00000E00000E00000E0000FFFF000E07000E07000E07000E07000E0700
0E07000E07000E07000E07000E07000E07000E07000E07000E07007F0FE0131A809915>12
D<00800100020004000C00080018003000300030006000600060006000E000E000E000E000E000
E000E000E000E000E0006000600060006000300030003000180008000C00040002000100008009
267D9B0F>40 D<8000400020001000180008000C00060006000600030003000300030003800380
0380038003800380038003800380038003000300030003000600060006000C0008001800100020
004000800009267E9B0F>I<60F0F07010101020204080040B7D830B>44
D<FFC0FFC00A0280880D>I<60F0F06004047D830B>I<60F0F060000000000000000060F0F06004
107D8F0B>58 D<000C0000000C0000000C0000001E0000001E0000003F00000027000000270000
0043800000438000004380000081C0000081C0000081C0000100E0000100E00001FFE000020070
000200700006007800040038000400380008001C0008001C001C001E00FF00FFC01A1A7F991D>
65 D<FFFFE00E00E00E00600E00200E00300E00100E00100E00100E04000E04000E04000E0C00
0FFC000E0C000E04000E04000E04000E00000E00000E00000E00000E00000E00000E00000E0000
FFF000141A7E9919>70 D<FFE00E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E00FFE00B1A7F990E>73
D<FE01FF0F00380F00100B80100B801009C01008E01008E010087010087010083810081C10081C
10080E10080E100807100803900803900801D00801D00800F00800700800700800301C0030FF80
10181A7E991D>78 D<007F000001C1C000070070000E0038001C001C003C001E0038000E007800
0F0070000700F0000780F0000780F0000780F0000780F0000780F0000780F0000780F000078078
000F0078000F0038000E003C001E001C001C000E0038000700700001C1C000007F0000191A7E99
1E>I<FFFF000E03C00E00E00E00700E00700E00780E00780E00780E00780E00700E00700E00E0
0E03C00FFF000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0000
FFE000151A7E991A>I<FFFC00000E0780000E01C0000E00E0000E00F0000E00F0000E00F0000E
00F0000E00F0000E00E0000E01C0000E0780000FFC00000E0600000E0300000E0180000E01C000
0E01C0000E01C0000E01E0000E01E0000E01E0000E01E0800E00F0800E007100FFE03E00191A7E
991C>82 D<7FFFFF00701C0700401C0100401C0100C01C0180801C0080801C0080801C0080001C
0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C0000001C000000
1C0000001C0000001C0000001C0000001C0000001C0000001C000003FFE000191A7F991C>84
D<3F8070C070E020700070007007F01C7030707070E070E071E071E0F171FB1E3C10107E8F13>
97 D<FC00001C00001C00001C00001C00001C00001C00001C00001C00001C00001CF8001F0E00
1E07001C03801C01801C01C01C01C01C01C01C01C01C01C01C01C01C03801C03001E07001B0C00
10F000121A7F9915>I<07F80C1C381C30087000E000E000E000E000E000E0007000300438080C
1807E00E107F8F11>I<007E00000E00000E00000E00000E00000E00000E00000E00000E00000E
0003CE000C3E00380E00300E00700E00E00E00E00E00E00E00E00E00E00E00E00E00600E00700E
00381E001C2E0007CFC0121A7F9915>I<07C01C3030187018600CE00CFFFCE000E000E000E000
6000300438080C1807E00E107F8F11>I<01F0031807380E100E000E000E000E000E000E00FFC0
0E000E000E000E000E000E000E000E000E000E000E000E000E000E007FE00D1A80990C>I<0FCE
187330307038703870387038303018602FC02000600070003FF03FFC1FFE600FC003C003C003C0
036006381C07E010187F8F13>I<FC00001C00001C00001C00001C00001C00001C00001C00001C
00001C00001CF8001D0C001E0E001E0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C
0E001C0E001C0E001C0E00FF9FC0121A7F9915>I<18003C003C00180000000000000000000000
0000FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C00FF80091A80990A
>I<FC001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C
001C001C001C001C001C001C00FF80091A80990A>108 D<FC7C1F001D8E63801E0781C01E0781
C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C0701C01C07
01C01C0701C0FF9FE7F81D107F8F20>I<FCF8001D0C001E0E001E0E001C0E001C0E001C0E001C
0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E00FF9FC012107F8F15>I<07E01C38300C
700E6006E007E007E007E007E007E0076006700E381C1C3807E010107F8F13>I<FCF8001F0E00
1E07001C03801C03801C01C01C01C01C01C01C01C01C01C01C01C01C03801C03001E07001F0C00
1CF0001C00001C00001C00001C00001C00001C0000FF800012177F8F15>I<03C2000C2600381E
00300E00700E00E00E00E00E00E00E00E00E00E00E00E00E00700E00700E00381E001C2E0007CE
00000E00000E00000E00000E00000E00000E00007FC012177F8F14>I<FCE01D701E701E201C00
1C001C001C001C001C001C001C001C001C001C00FFC00C107F8F0F>I<1F2060E04020C020C020
F0007F003FC01FE000F080708030C030C020F0408F800C107F8F0F>I<0400040004000C000C00
1C003C00FFC01C001C001C001C001C001C001C001C001C201C201C201C201C200E4003800B177F
960F>I<FC7E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E001C0E
001C0E001C1E000C2E0007CFC012107F8F15>I<FF1F803C06001C04001C04001E0C000E08000E
080007100007100007900003A00003A00001C00001C00001C00000800011107F8F14>I<FF3F9F
803C0E0700380E06001C1604001C1704001E170C000E2308000E2388000F239800074190000741
D00003C1E0000380E0000380E0000180C0000100400019107F8F1C>I<FF3F803C1C001C18000E
100007200007600003C00001C00001E00003E000027000043800083800181C00381E00FC3FC012
107F8F14>I<FF1F803C06001C04001C04001E0C000E08000E080007100007100007900003A000
03A00001C00001C00001C000008000008000010000010000E10000E20000E4000078000011177F
8F14>I<7FF86070407040E041C041C00380070007000E081C081C08381070107030FFF00D107F
8F11>I E /Fg 1 50 df<0C003C00CC000C000C000C000C000C000C000C000C000C000C000C00
0C00FF8009107E8F0F>49 D E /Fh 1 50 df<03000700FF000700070007000700070007000700
07000700070007000700070007000700070007007FF00C157E9412>49 D
E /Fi 13 117 df<00001E000000003E00000000FE00000003FE0000003FFE0000FFFFFE0000FF
FFFE0000FFFFFE0000FFCFFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000
000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE00
00000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE
0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000F
FE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE000000
0FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE0000000FFE00007FFFFFFFC0
7FFFFFFFC07FFFFFFFC07FFFFFFFC0223879B731>49 D<0007FE0000007FFFE00001FFFFF80003
FFFFFE0007F01FFF000F8007FF801F0001FFC03E0000FFE07F8000FFF07FC0007FF0FFE0007FF8
FFF0003FF8FFF0003FFCFFF0003FFCFFF0003FFCFFF0003FFC7FE0003FFC3FC0003FFC1F80003F
FC0000003FFC0000003FF80000007FF80000007FF00000007FF0000000FFE0000000FFC0000001
FF80000001FF00000003FE00000007FC00000007F80000000FF00000001FC00000003F80000000
7F00000000FC00000001F800000001F0003C0003E0003C0007C0003C000F000078001E00007800
3C00007800780000F800F00000F801FFFFFFF803FFFFFFF007FFFFFFF00FFFFFFFF01FFFFFFFF0
3FFFFFFFF07FFFFFFFF0FFFFFFFFF0FFFFFFFFE0FFFFFFFFE0FFFFFFFFE026387BB731>I<0003
FF8000001FFFF000007FFFFE0000FE03FF0001F000FF8003C000FFC00780007FE00FF0007FF00F
F8007FF01FFC007FF81FFE007FF81FFE007FF81FFE007FF81FFE007FF81FFE007FF80FFC007FF0
07F8007FF003F0007FF0000000FFE0000000FFC0000001FF80000001FF00000003FE00000007FC
0000001FF000000FFFC000000FFF8000000FFFF800000003FE00000000FF800000007FE0000000
3FF00000003FF80000003FFC0000001FFC0000001FFE0000001FFE0200001FFF1FC0001FFF3FE0
001FFF7FF0001FFF7FF0001FFFFFF8001FFFFFF8001FFFFFF8001FFEFFF8001FFEFFF0001FFE7F
F0003FFC7FE0003FFC3FC0003FF81F80007FF01FE000FFE007FC03FFC003FFFFFF0001FFFFFE00
003FFFF0000007FF800028397CB731>I<00000007C0000000000FC0000000000FC0000000001F
C0000000003FC0000000007FC000000000FFC000000000FFC000000001FFC000000003FFC00000
0007FFC00000000FFFC00000000FFFC00000001EFFC00000003CFFC00000007CFFC0000000F8FF
C0000000F0FFC0000001E0FFC0000003C0FFC0000007C0FFC000000F80FFC000000F00FFC00000
1E00FFC000003C00FFC000007C00FFC00000F800FFC00000F000FFC00001E000FFC00003C000FF
C00007C000FFC0000F8000FFC0000F0000FFC0001E0000FFC0003C0000FFC0007C0000FFC000F8
0000FFC000FFFFFFFFFFC0FFFFFFFFFFC0FFFFFFFFFFC0FFFFFFFFFFC0000001FFC000000001FF
C000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC00000
0001FFC000000001FFC0000007FFFFFFC00007FFFFFFC00007FFFFFFC00007FFFFFFC02A377DB6
31>I<04000000C00F800007C00FF8007FC00FFFFFFF800FFFFFFF000FFFFFFE000FFFFFFC000F
FFFFF8000FFFFFF0000FFFFFE0000FFFFF80000FFFFE00000FFFF800000F800000000F80000000
0F800000000F800000000F800000000F800000000F800000000F800000000F81FF00000F8FFFE0
000FBFFFF8000FFE03FE000FF000FF000FC000FF800F80007FC00F00007FE00700007FF0000000
3FF00000003FF80000003FF80000003FF80000003FFC0000003FFC0600003FFC1F80003FFC3FC0
003FFC7FE0003FFCFFE0003FFCFFF0003FFCFFF0003FFCFFF0003FF8FFE0003FF8FFE0003FF87F
C0007FF07F00007FF03C00007FE03E0000FFC01F0000FF800FC003FF0007F00FFE0003FFFFFC00
01FFFFF000007FFFC000000FFC000026397BB731>I<00000FF80000007FFF000003FFFF80000F
FC07C0001FE001E0003FC001F0007F0007F000FF000FF001FE001FF803FC003FF807FC003FF80F
FC003FF80FF8003FF81FF8001FF01FF8000FE03FF80007C03FF00000003FF00000007FF0000000
7FF00000007FF00000007FF07FF000FFF0FFFE00FFF1F7FF00FFF3807F80FFF6003FE0FFFE001F
F0FFFC001FF0FFFC000FF8FFF8000FFCFFF8000FFCFFF8000FFEFFF8000FFEFFF0000FFEFFF000
0FFFFFF0000FFFFFF0000FFF7FF0000FFF7FF0000FFF7FF0000FFF7FF0000FFF7FF0000FFF3FF0
000FFF3FF0000FFE3FF0000FFE1FF0000FFE1FF8000FFC0FF8000FFC0FF8001FF807FC001FF003
FC001FF001FE003FE000FF80FFC0007FFFFF00001FFFFE000007FFF8000000FFC00028397CB731
>I<0000001FFF000030000001FFFFE000F000000FFFFFFC01F000007FFFFFFE03F00001FFFE00
7F87F00003FFE0000FCFF0000FFF000003FFF0001FFC000001FFF0003FF80000007FF0007FF000
00003FF000FFC00000003FF001FFC00000001FF003FF800000000FF007FF000000000FF00FFF00
00000007F00FFE0000000007F01FFE0000000003F01FFE0000000003F03FFC0000000003F03FFC
0000000001F03FFC0000000001F07FFC0000000001F07FF80000000001F07FF80000000000007F
F8000000000000FFF8000000000000FFF8000000000000FFF8000000000000FFF8000000000000
FFF8000000000000FFF8000000000000FFF8000000000000FFF8000000000000FFF80000000000
00FFF8000000000000FFF80000000000007FF80000000000007FF80000000000007FF800000000
00007FFC0000000000F03FFC0000000000F03FFC0000000000F03FFC0000000000F01FFE000000
0000F01FFE0000000001E00FFE0000000001E00FFF0000000001E007FF0000000003C003FF8000
000003C001FFC0000000078000FFE00000000F00007FF00000001F00003FF80000003E00001FFC
0000007C00000FFF000001F8000003FFE00007F0000001FFFE003FC00000007FFFFFFF00000000
0FFFFFFC0000000001FFFFF000000000001FFF0000003C3D7BBB47>67 D<001FFF00000001FFFF
F0000003FFFFFC000007F007FE00000FF801FF00001FFC00FF80001FFC007FC0001FFC007FE000
1FFC003FE0000FF8003FF0000FF8003FF00007F0003FF00001C0003FF0000000003FF000000000
3FF0000000003FF0000000FFFFF000000FFFFFF000007FF83FF00001FF803FF00007FE003FF000
0FF8003FF0001FF0003FF0003FE0003FF0007FE0003FF0007FE0003FF000FFC0003FF000FFC000
3FF000FFC0003FF000FFC0003FF000FFC0007FF0007FE0007FF0007FE000DFF0003FF0039FF800
1FFC0F0FFFF007FFFE0FFFF001FFFC07FFF0003FE000FFF02C267DA530>97
D<0001FFC000000FFFF800003FFFFE0000FF80FF0001FE003F8007FC001FC00FF8000FE00FF800
0FF01FF00007F03FF00007F83FF00007F87FE00007F87FE00003FC7FE00003FC7FE00003FCFFE0
0003FCFFFFFFFFFCFFFFFFFFFCFFFFFFFFFCFFE0000000FFE0000000FFE0000000FFE00000007F
E00000007FE00000007FE00000003FE00000003FF000003C1FF000003C1FF000003C0FF8000078
07FC0000F803FE0001F001FF0007E000FFC03FC0003FFFFF000007FFFC000000FFE00026267DA5
2D>101 D<00FF00000000FFFF00000000FFFF00000000FFFF00000000FFFF0000000007FF0000
000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003
FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000
000003FF0000000003FF0000000003FF0000000003FF007FC00003FF01FFF80003FF07FFFC0003
FF0F03FE0003FF1C01FF0003FF3001FF8003FF6000FF8003FFE000FFC003FFC000FFC003FF8000
FFC003FF8000FFC003FF8000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003
FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000
FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003
FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC003FF0000FFC0FFFFFC3FFFFFFFFFFC3F
FFFFFFFFFC3FFFFFFFFFFC3FFFFF303C7CBB37>104 D<00FF01FF8000FFFF0FFFF000FFFF3FFF
FC00FFFFFE03FF00FFFFF000FF8003FFC0007FC003FF80003FE003FF00003FF003FF00001FF803
FF00001FFC03FF00000FFC03FF00000FFE03FF00000FFE03FF000007FE03FF000007FF03FF0000
07FF03FF000007FF03FF000007FF03FF000007FF03FF000007FF03FF000007FF03FF000007FF03
FF000007FF03FF000007FE03FF000007FE03FF00000FFE03FF00000FFC03FF00000FFC03FF0000
1FF803FF00001FF803FF00003FF003FF80003FE003FFC0007FC003FFF001FF8003FFFC07FF0003
FF3FFFFC0003FF0FFFF00003FF01FF000003FF0000000003FF0000000003FF0000000003FF0000
000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003FF0000000003
FF0000000003FF0000000003FF00000000FFFFFC000000FFFFFC000000FFFFFC000000FFFFFC00
000030377DA537>112 D<00FE03F000FFFE0FFE00FFFE1FFF00FFFE3C3F80FFFE707FC007FE60
FFE003FEE0FFE003FEC0FFE003FFC0FFE003FF807FC003FF807FC003FF803F8003FF800E0003FF
00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003
FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF00000003FF000000
03FF00000003FF00000003FF00000003FF00000003FF000000FFFFFE0000FFFFFE0000FFFFFE00
00FFFFFE000023267DA529>114 D<0007800000078000000780000007800000078000000F8000
000F8000000F8000000F8000001F8000001F8000003F8000003F8000007F800000FF800001FF80
0007FF80001FFFFFF0FFFFFFF0FFFFFFF0FFFFFFF001FF800001FF800001FF800001FF800001FF
800001FF800001FF800001FF800001FF800001FF800001FF800001FF800001FF800001FF800001
FF800001FF800001FF800001FF800001FF800001FF803C01FF803C01FF803C01FF803C01FF803C
01FF803C01FF803C01FF803C00FF807800FFC078007FC070003FE0E0001FFFC00007FF800001FF
001E377EB626>116 D E /Fj 58 126 df<007000F001E003C007800F001E001C003800380070
00700070007000E000E000E000E000E000E000E000E0007000700070007000380038001C001E00
0F00078003C001F000F000700C24799F18>40 D<6000F00078003C001E000F000780038001C001
C000E000E000E000E00070007000700070007000700070007000E000E000E000E001C001C00380
07800F001E003C007800F00060000C247C9F18>I<01C00001C00001C00001C000C1C180F1C780
F9CF807FFF001FFC0007F00007F0001FFC007FFF00F9CF80F1C780C1C18001C00001C00001C000
01C00011147D9718>I<1C3E7E7F3F1F070E1E7CF860080C788518>44 D<7FFF00FFFF80FFFF80
7FFF0011047D8F18>I<01F00007FC000FFE001F1F001C07003803807803C07001C07001C0E000
E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0E000E0F001E07001C07001C07803C03803
801C07001F1F000FFE0007FC0001F000131C7E9B18>48 D<01800380038007800F803F80FF80FB
80438003800380038003800380038003800380038003800380038003800380038003807FFCFFFE
7FFC0F1C7B9B18>I<03F0000FFE003FFF007C0F807003C0E001C0F000E0F000E06000E00000E0
0000E00001C00001C00003C0000780000F00001E00003C0000780000F00001E00007C0000F8000
1E00E03C00E07FFFE0FFFFE07FFFE0131C7E9B18>I<007E0001FF0007FF800F83C01E03C01C03
C0380180380000700000700000E1F800E7FE00FFFF00FE0780F803C0F001C0F000E0E000E0F000
E07000E07000E07000E03801C03C03C01E07800FFF0007FE0001F800131C7E9B18>54
D<E00000FFFFE0FFFFE0FFFFE0E003C0E00780000700000E00001E00001C000038000038000070
0000700000E00000E00000E00001C00001C00001C00001C00003C0000380000380000380000380
00038000038000038000131D7E9C18>I<183C7E7E3C180000000000000000183C7E7E3E1E0E1C
3C78F060071A789318>59 D<00700000F80000F80000D80000D80001DC0001DC0001DC00018C00
038E00038E00038E00038E000306000707000707000707000707000FFF800FFF800FFF800E0380
0E03801C01C01C01C07F07F0FF8FF87F07F0151C7F9B18>65 D<FFFC00FFFF00FFFF801C03C01C
01C01C00E01C00E01C00E01C00E01C01E01C01C01C07C01FFF801FFF001FFFC01C03C01C00E01C
00F01C00701C00701C00701C00701C00F01C00E01C03E0FFFFC0FFFF80FFFE00141C7F9B18>I<
00F8E003FEE007FFE00F07E01E03E03C01E03800E07000E07000E0700000E00000E00000E00000
E00000E00000E00000E00000E000007000007000E07000E03800E03C00E01E01C00F07C007FF80
03FE0000F800131C7E9B18>I<7FF800FFFE007FFF001C0F801C03C01C03C01C01E01C00E01C00
E01C00F01C00701C00701C00701C00701C00701C00701C00701C00701C00F01C00E01C00E01C01
E01C01C01C03C01C0F807FFF00FFFE007FF800141C7F9B18>I<FFFFF0FFFFF0FFFFF01C00701C
00701C00701C00701C00001C00001C0E001C0E001C0E001FFE001FFE001FFE001C0E001C0E001C
0E001C00001C00001C00381C00381C00381C00381C0038FFFFF8FFFFF8FFFFF8151C7F9B18>I<
FFFFE0FFFFE0FFFFE01C00E01C00E01C00E01C00E01C00001C00001C1C001C1C001C1C001FFC00
1FFC001FFC001C1C001C1C001C1C001C00001C00001C00001C00001C00001C00001C0000FFC000
FFC000FFC000131C7E9B18>I<01F1C003FDC00FFFC01F0FC01C03C03803C03801C07001C07001
C0700000E00000E00000E00000E00000E00000E00FF0E01FF0E00FF07001C07001C07003C03803
C03803C01C07C01F0FC00FFFC003FDC001F1C0141C7E9B18>I<7FFF00FFFF807FFF0001C00001
C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001C00001
C00001C00001C00001C00001C00001C00001C00001C0007FFF00FFFF807FFF00111C7D9B18>73
D<7FE000FFE0007FE0000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00
000E00000E00000E00000E00000E00000E00000E00000E00700E00700E00700E00700E00707FFF
F0FFFFF07FFFF0141C7F9B18>76 D<FC01F8FE03F8FE03F83B06E03B06E03B06E03B06E03B8EE0
3B8EE0398CE0398CE039DCE039DCE039DCE038D8E038D8E038F8E03870E03870E03800E03800E0
3800E03800E03800E03800E0FE03F8FE03F8FE03F8151C7F9B18>I<7E07F0FF0FF87F07F01D81
C01D81C01D81C01DC1C01CC1C01CC1C01CE1C01CE1C01CE1C01C61C01C71C01C71C01C31C01C39
C01C39C01C39C01C19C01C19C01C1DC01C0DC01C0DC01C0DC07F07C0FF87C07F03C0151C7F9B18
>I<0FF8003FFE007FFF00780F00700700F00780E00380E00380E00380E00380E00380E00380E0
0380E00380E00380E00380E00380E00380E00380E00380E00380E00380F00780700700780F007F
FF003FFE000FF800111C7D9B18>I<FFFE00FFFF80FFFFC01C03C01C01E01C00E01C00701C0070
1C00701C00701C00701C00E01C01E01C03C01FFFC01FFF801FFE001C00001C00001C00001C0000
1C00001C00001C00001C0000FF8000FF8000FF8000141C7F9B18>I<7FF800FFFE007FFF001C0F
801C03801C03C01C01C01C01C01C01C01C03C01C03801C0F801FFF001FFE001FFE001C0F001C07
001C03801C03801C03801C03801C03801C039C1C039C1C039C7F01F8FF81F87F00F0161C7F9B18
>82 D<03F3801FFF803FFF807C0F80700780E00380E00380E00380E000007000007800003F0000
1FF00007FE0000FF00000F800003C00001C00000E00000E06000E0E000E0E001E0F001C0F80780
FFFF80FFFE00E7F800131C7E9B18>I<7FFFF8FFFFF8FFFFF8E07038E07038E07038E070380070
000070000070000070000070000070000070000070000070000070000070000070000070000070
0000700000700000700000700007FF0007FF0007FF00151C7F9B18>I<FF83FEFF83FEFF83FE1C
00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C00701C
00701C00701C00701C00701C00701C00700E00E00F01E00783C003FF8001FF00007C00171C809B
18>I<FF07F8FF07F8FF07F81C01C01C01C01C01C01C01C00E03800E03800E03800E03800F0780
070700070700070700070700038E00038E00038E00038E00018C0001DC0001DC0001DC0000D800
00F80000F800007000151C7F9B18>I<7F8FE07F9FE07F8FE00E07000F0700070E00078E00039C
0003DC0001F80001F80000F00000F00000700000F00000F80001F80001DC00039E00038E00070F
000707000E07800E03801E03C07F07F0FF8FF87F07F0151C7F9B18>88 D<FF07F8FF07F8FF07F8
1C01C01E03C00E03800F0780070700070700038E00038E0001DC0001DC0001DC0000F80000F800
00700000700000700000700000700000700000700000700000700001FC0003FE0001FC00151C7F
9B18>I<7FFF00FFFF80FFFF807FFF0011047D7F18>95 D<1FE0003FF8007FFC00781E00300E00
00070000070000FF0007FF001FFF007F0700780700E00700E00700E00700F00F00781F003FFFF0
1FFBF007E1F014147D9318>97 D<7E0000FE00007E00000E00000E00000E00000E00000E00000E
3E000EFF800FFFC00FC1E00F80E00F00700E00700E00380E00380E00380E00380E00380E00380F
00700F00700F80E00FC1E00FFFC00EFF80063E00151C809B18>I<01FE0007FF001FFF803E0780
380300700000700000E00000E00000E00000E00000E00000E000007000007001C03801C03E03C0
1FFF8007FF0001FC0012147D9318>I<001F80003F80001F800003800003800003800003800003
8003E3800FFB801FFF803C1F80380F80700780700380E00380E00380E00380E00380E00380E003
80700780700780380F803C1F801FFFF00FFBF803E3F0151C7E9B18>I<01F00007FC001FFE003E
0F00380780700380700380E001C0E001C0FFFFC0FFFFC0FFFFC0E000007000007001C03801C03E
03C01FFF8007FF0001FC0012147D9318>I<001F80007FC000FFE000E1E001C0C001C00001C000
01C0007FFFC0FFFFC0FFFFC001C00001C00001C00001C00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C0007FFF007FFF007FFF00131C7F9B18>I<01E1F007FFF80FFF
F81E1E301C0E003807003807003807003807003807001C0E001E1E001FFC001FF80039E0003800
001C00001FFE001FFFC03FFFE07801F0700070E00038E00038E00038E000387800F07E03F01FFF
C00FFF8001FC00151F7F9318>I<7E0000FE00007E00000E00000E00000E00000E00000E00000E
3E000EFF800FFFC00FC1C00F80E00F00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E
00E00E00E00E00E00E00E07FC3FCFFE7FE7FC3FC171C809B18>I<03800007C00007C00007C000
0380000000000000000000000000007FC000FFC0007FC00001C00001C00001C00001C00001C000
01C00001C00001C00001C00001C00001C00001C00001C00001C000FFFF00FFFF80FFFF00111D7C
9C18>I<0038007C007C007C003800000000000000000FFC1FFC0FFC001C001C001C001C001C00
1C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C001C6038F078FFF0
7FE03F800E277E9C18>I<FE0000FE0000FE00000E00000E00000E00000E00000E00000E3FF00E
7FF00E3FF00E07800E0F000E1E000E3C000E78000EF0000FF8000FFC000F9C000F0E000E0F000E
07000E03800E03C0FFC7F8FFC7F8FFC7F8151C7F9B18>I<7FE000FFE0007FE00000E00000E000
00E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E000
00E00000E00000E00000E00000E00000E00000E0007FFFC0FFFFE07FFFC0131C7E9B18>I<7CE0
E000FFFBF8007FFFF8001F1F1C001E1E1C001E1E1C001C1C1C001C1C1C001C1C1C001C1C1C001C
1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C001C1C1C007F1F1F00FFBFBF807F1F1F00
1914819318>I<7E3E00FEFF807FFFC00FC1C00F80E00F00E00E00E00E00E00E00E00E00E00E00
E00E00E00E00E00E00E00E00E00E00E00E00E07FC3FCFFE7FE7FC3FC1714809318>I<01F0000F
FE001FFF003E0F803803807001C07001C0E000E0E000E0E000E0E000E0E000E0F001E07001C078
03C03C07803E0F801FFF000FFE0001F00013147E9318>I<7E3E00FEFF807FFFC00FC1E00F80E0
0F00700E00700E00380E00380E00380E00380E00380E00380F00700F00700F80E00FC1E00FFFC0
0EFF800E3E000E00000E00000E00000E00000E00000E00000E00007FC000FFE0007FC000151E80
9318>I<7F87E0FF9FF07FBFF803F87803F03003E00003C00003C0000380000380000380000380
000380000380000380000380000380007FFE00FFFF007FFE0015147F9318>114
D<07F7003FFF007FFF00780F00E00700E00700E007007C00007FE0001FFC0003FE00001F006007
80E00380E00380F00380F80F00FFFF00FFFC00E7F00011147D9318>I<01800003800003800003
80000380007FFFC0FFFFC0FFFFC003800003800003800003800003800003800003800003800003
80000380400380E00380E00380E001C1C001FFC000FF80003E0013197F9818>I<7E07E0FE0FE0
7E07E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E00E0
0E01E00F03E007FFFC03FFFE01FCFC1714809318>I<7F8FF0FF8FF87F8FF01E03C00E03800E03
800E0380070700070700070700038E00038E00038E00038E0001DC0001DC0001DC0000F80000F8
0000700015147F9318>I<FF8FF8FF8FF8FF8FF83800E03800E03800E01C01C01C01C01C71C01C
F9C01CF9C01CD9C01CD9C00DDD800DDD800DDD800D8D800F8F800F8F8007070015147F9318>I<
7F8FF07F9FF07F8FF0070700078E00039E0001DC0001F80000F80000700000F00000F80001DC00
039E00038E000707000F07807F8FF0FF8FF87F8FF015147F9318>I<7F8FF0FF8FF87F8FF00E01
C00E03800E0380070380070700070700038700038600038E0001CE0001CE0000CC0000CC0000DC
0000780000780000780000700000700000700000F00000E00079E0007BC0007F80003F00001E00
00151E7F9318>I<0007E0001FE0007FE000780000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00001E0007FC000FF8000FF80007FC00001E00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E000007800007FE0001FE00007E013
247E9F18>123 D<7C0000FF0000FFC00003C00000E00000E00000E00000E00000E00000E00000
E00000E00000E00000E00000E00000F000007FC0003FE0003FE0007FC000F00000E00000E00000
E00000E00000E00000E00000E00000E00000E00000E00000E00003C000FFC000FF00007C000013
247E9F18>125 D E /Fk 2 62 df<70F8F8F87005057C840D>58 D<0001000300030006000600
06000C000C000C00180018001800300030003000600060006000C000C000C00180018001800300
030003000600060006000C000C000C00180018001800300030003000600060006000C000C000C0
00102D7DA117>61 D E /Fl 71 127 df<000FF07F00007FF9FF8000F83FC7C001E07F8FC003E0
7F0FC007C07F0FC007C03F078007C01F000007C01F000007C01F000007C01F000007C01F0000FF
FFFFF800FFFFFFF80007C01F000007C01F000007C01F000007C01F000007C01F000007C01F0000
07C01F000007C01F000007C01F000007C01F000007C01F000007C01F000007C01F000007C01F00
0007C01F000007C01F00003FF8FFF0003FF8FFF0002220809F1F>11 D<000FE000007FF80000F8
1C0001E07C0003E07C0007C07C0007C07C0007C0380007C0000007C0000007C0000007C1FE00FF
FFFE00FFFFFE0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E00
07C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E003FF9FFC03FF9FF
C01A20809F1D>I<000FFE00007FFE0000F87E0001E0FE0003E0FE0007C07E0007C07E0007C03E
0007C03E0007C03E0007C03E0007C03E00FFFFFE00FFFFFE0007C03E0007C03E0007C03E0007C0
3E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007C03E0007
C03E0007C03E0007C03E003FF9FFC03FF9FFC01A20809F1D>I<000FF01FC000007FF8FFF00000
F81FE0780001E03F80F80003E07F80F80007C07F00F80007C07F00F80007C03F00700007C01F00
000007C01F00000007C01F00000007C01F03FC00FFFFFFFFFC00FFFFFFFFFC0007C01F007C0007
C01F007C0007C01F007C0007C01F007C0007C01F007C0007C01F007C0007C01F007C0007C01F00
7C0007C01F007C0007C01F007C0007C01F007C0007C01F007C0007C01F007C0007C01F007C0007
C01F007C0007C01F007C003FF8FFE3FF803FF8FFE3FF802920809F2C>I<3807007C0F80FE1FC0
FF1FE0FF1FE07F0FE03B07600300600300600600C00600C00E01C00C0180180300700E00200400
13107E9F1B>34 D<387CFEFFFF7F3B030306060E0C18702008107C9F0F>39
D<0018007000E001C00380038007000E000E001E001C003C003C007800780078007800F800F000
F000F000F000F000F000F000F000F000F80078007800780078003C003C001C001E000E000E0007
000380038001C000E0007000180D2D7DA114>I<C000700038001C000E000E0007000380038003
C001C001E001E000F000F000F000F000F800780078007800780078007800780078007800F800F0
00F000F000F001E001E001C003C00380038007000E000E001C0038007000C0000D2D7DA114>I<
387CFEFFFF7F3B030306060E0C18702008107C860F>44 D<FFF0FFF0FFF0FFF00C047F8B11>I<
387CFEFEFE7C3807077C860F>I<0000600000E00000E00001C00001C000038000038000038000
0700000700000700000E00000E00001C00001C00001C0000380000380000380000700000700000
E00000E00000E00001C00001C0000380000380000380000700000700000700000E00000E00001C
00001C00001C0000380000380000380000700000700000E00000E00000C00000132D7DA11A>I<
01FC0007FF001F07C01E03C03E03E07C01F07C01F07C01F0FC01F8FC01F8FC01F8FC01F8FC01F8
FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC01F8FC01F87C01F07C01F07C01F03E03E01E03C0
1F8FC007FF0001FC00151D7E9C1A>I<00E00001E0000FE000FFE000F3E00003E00003E00003E0
0003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E00003E0
0003E00003E00003E00003E00003E00003E000FFFF80FFFF80111D7C9C1A>I<07F0001FFE0038
3F007C1F80FE0FC0FE0FC0FE0FE0FE07E07C07E03807E0000FE0000FC0000FC0001F80001F0000
3E0000780000F00000E00001C0000380600700600E00601C00E01FFFC03FFFC07FFFC0FFFFC0FF
FFC0131D7D9C1A>I<01FC0007FF000E0F801E0FC03F07E03F07E03F07E03F07E01E0FC0000FC0
000F80001F0001FC0001FC00000F800007C00003E00003F00003F83803F87C03F8FE03F8FE03F8
FE03F0FC03F07807E03C0FC01FFF8003FC00151D7E9C1A>I<0001C00003C00007C00007C0000F
C0001FC0003BC00073C00063C000C3C00183C00383C00703C00E03C00C03C01803C03803C07003
C0E003C0FFFFFEFFFFFE0007C00007C00007C00007C00007C00007C000FFFE00FFFE171D7F9C1A
>I<3803803FFF803FFF003FFE003FFC003FF0003F800030000030000030000030000033F80037
FE003C1F00380F801007C00007C00007E00007E07807E0FC07E0FC07E0FC07E0FC07C0780FC060
0F80381F001FFC0007F000131D7D9C1A>I<003F0001FFC007E0E00F81E01F03F01E03F03E03F0
7C03F07C01E07C0000FC1000FCFF00FDFFC0FD03E0FE01F0FE01F0FC01F8FC01F8FC01F8FC01F8
7C01F87C01F87C01F83C01F03E01F01E03E00F07C007FF8001FE00151D7E9C1A>I<6000007FFF
F87FFFF87FFFF07FFFE07FFFC0E00180C00300C00300C00600000C000018000038000038000078
0000700000F00000F00001F00001F00001F00001F00003F00003F00003F00003F00003F00003F0
0001E00000C000151E7D9D1A>I<01FC0007FF000F07801E03C01C01E03C01E03C01E03E01E03F
01E03FC3C01FE3801FFF000FFE0007FF8007FFC01FFFE03C3FF0780FF07803F8F001F8F000F8F0
0078F00078F000707800707C00E03E03C00FFF8003FC00151D7E9C1A>I<01FC000FFF001F0780
3E03C07C03E07C01E0FC01F0FC01F0FC01F0FC01F8FC01F8FC01F8FC01F87C03F87C03F83E05F8
1FFDF807F9F80041F80001F03C01F07E01F07E03E07E03E07E07C03C0780381F001FFC0007F000
151D7E9C1A>I<387CFEFEFE7C38000000000000387CFEFEFE7C3807147C930F>I<07F8001FFE00
381F80780F80FC0FC0FC0FC0FC0FC0780FC0301F80001F00003E00007C0000700000E00000E000
00C00000C00000C00000C00000C00000C00000000000000000000000000001C00003E00007F000
07F00007F00003E00001C00012207D9F19>63 D<0000E000000000E000000001F000000001F000
000001F000000003F800000003F800000006FC00000006FC0000000EFE0000000C7E0000000C7E
000000183F000000183F000000303F800000301F800000701FC00000600FC00000600FC00000C0
07E00000FFFFE00001FFFFF000018003F000018003F000030001F800030001F800060001FC0006
0000FC000E0000FE00FFE00FFFE0FFE00FFFE0231F7E9E28>65 D<FFFFFE00FFFFFFC007C007E0
07C003F007C001F807C001FC07C001FC07C001FC07C001FC07C001FC07C001F807C003F807C007
F007C00FE007FFFF8007FFFFC007C003F007C001F807C001FC07C000FC07C000FE07C000FE07C0
00FE07C000FE07C000FE07C000FC07C001FC07C003F807C007F0FFFFFFE0FFFFFF001F1F7E9E25
>I<0007FC02003FFF0E00FE03DE03F000FE07E0003E0FC0001E1F80001E3F00000E3F00000E7F
0000067E0000067E000006FE000000FE000000FE000000FE000000FE000000FE000000FE000000
7E0000007E0000067F0000063F0000063F00000C1F80000C0FC0001807E0003803F0007000FE01
C0003FFF800007FC001F1F7D9E26>I<FFFFFE0000FFFFFFC00007E007F00007E001F80007E000
FC0007E0007E0007E0003F0007E0003F0007E0001F8007E0001F8007E0001F8007E0001FC007E0
001FC007E0001FC007E0001FC007E0001FC007E0001FC007E0001FC007E0001FC007E0001FC007
E0001F8007E0001F8007E0001F8007E0003F0007E0003F0007E0007E0007E000FC0007E001F800
07E007F000FFFFFFC000FFFFFE0000221F7E9E28>I<FFFFFFE0FFFFFFE007E007E007E001E007
E000E007E0006007E0007007E0003007E0003007E0603007E0603007E0600007E0E00007E1E000
07FFE00007FFE00007E1E00007E0E00007E0600007E0600C07E0600C07E0000C07E0001807E000
1807E0001807E0003807E0007807E000F807E003F0FFFFFFF0FFFFFFF01E1F7E9E22>I<FFFFFF
E0FFFFFFE007E007E007E001E007E000E007E0006007E0007007E0003007E0003007E0603007E0
603007E0600007E0E00007E1E00007FFE00007FFE00007E1E00007E0E00007E0600007E0600007
E0600007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E00000FFFF8000
FFFF80001C1F7E9E21>I<FFFF0FFFF0FFFF0FFFF007E0007E0007E0007E0007E0007E0007E000
7E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0
007E0007FFFFFE0007FFFFFE0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007
E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E0007E00
FFFF0FFFF0FFFF0FFFF0241F7E9E29>72 D<FFFFFFFF07E007E007E007E007E007E007E007E007
E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E007E0FFFF
FFFF101F7E9E14>I<FFFF8000FFFF800007E0000007E0000007E0000007E0000007E0000007E0
000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007
E0000007E0000007E000C007E000C007E000C007E001C007E001C007E001C007E0038007E00380
07E00F8007E01F80FFFFFF80FFFFFF801A1F7E9E1F>76 D<FFE000003FF8FFF000007FF807F000
007F0006F80000DF0006F80000DF0006F80000DF00067C00019F00067C00019F00063E00031F00
063E00031F00061F00061F00061F00061F00060F800C1F00060F800C1F000607C0181F000607C0
181F000607C0181F000603E0301F000603E0301F000601F0601F000601F0601F000600F8C01F00
0600F8C01F0006007D801F0006007D801F0006003F001F0006003F001F0006003F001F0006001E
001F00FFF01E03FFF8FFF00C03FFF82D1F7E9E32>I<FFE000FFF0FFF000FFF007F000060007F8
00060006FC000600067E000600063F000600063F800600061F800600060FC006000607E0060006
03F006000601F806000601FC06000600FC060006007E060006003F060006001F860006001FC600
06000FE600060007E600060003F600060001FE00060000FE00060000FE000600007E000600003E
000600001E000600000E00FFF0000600FFF0000600241F7E9E29>I<001FF80000FFFF0001F81F
8007E007E00FC003F01F8001F81F0000F83F0000FC7F0000FE7E00007E7E00007EFE00007FFE00
007FFE00007FFE00007FFE00007FFE00007FFE00007FFE00007FFE00007F7E00007E7F0000FE7F
0000FE3F0000FC3F8001FC1F8001F80FC003F007E007E001F81F8000FFFF00001FF800201F7D9E
27>I<FFFFFE00FFFFFF8007E00FE007E003F007E001F807E001F807E001FC07E001FC07E001FC
07E001FC07E001FC07E001F807E001F807E003F007E00FE007FFFF8007FFFE0007E0000007E000
0007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0
0000FFFF0000FFFF00001E1F7E9E24>I<FFFFF80000FFFFFF000007E01FC00007E007E00007E0
03F00007E003F00007E003F80007E003F80007E003F80007E003F80007E003F00007E003F00007
E007E00007E01FC00007FFFF000007FFFC000007E03E000007E01F000007E00F800007E00F8000
07E00FC00007E00FC00007E00FC00007E00FE00007E00FE00007E00FE00007E00FE03007E007F0
3007E003F860FFFF01FFC0FFFF007F80241F7E9E27>82 D<03FC080FFF381E03F83800F8700078
700038F00038F00018F00018F80000FC00007FC0007FFE003FFF801FFFE00FFFF007FFF000FFF8
0007F80000FC00007C00003CC0003CC0003CC0003CE00038E00078F80070FE01E0E7FFC081FF00
161F7D9E1D>I<7FFFFFFC7FFFFFFC7C07E07C7007E01C6007E00C6007E00CE007E00EC007E006
C007E006C007E006C007E0060007E0000007E0000007E0000007E0000007E0000007E0000007E0
000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007E0000007
E00003FFFFC003FFFFC01F1E7E9D24>I<FFFF01FFE0FFFF01FFE007E0000C0007E0000C0007E0
000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007
E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C0007E0000C00
07E0000C0007E0000C0007E0000C0007E0000C0003E000180001F000180001F000300000F80060
00007E03C000001FFF80000003FC0000231F7E9E28>I<FFFE003FF8FFFE003FF807E000038007
E000030007F000070003F000060003F8000E0001F8000C0001FC000C0000FC00180000FC001800
007E003000007E003000003F006000003F006000003F80E000001F80C000001FC1C000000FC180
00000FE180000007E300000007E300000003F600000003F600000003FE00000001FC00000001FC
00000000F800000000F8000000007000000000700000251F7F9E28>I<FFFE0FFFC0FFE0FFFE0F
FFC0FFE00FC000FC000E000FE000FC000E0007E000FE000C0007E000FE000C0003F000FE001800
03F001FF00180003F001BF00180001F801BF00300001F8031F80300001FC031F80700000FC031F
80600000FC060FC06000007E060FC0C000007E0E0FE0C000007E0C07E0C000003F0C07E1800000
3F1803F18000003F9803F38000001F9803F30000001FB001FB0000000FF001FE0000000FF001FE
0000000FE000FE00000007E000FC00000007C0007C00000007C0007C00000003C0007800000003
800038000000018000300000331F7F9E36>I<0400800E01C0180300300600700E00600C00600C
00C01800C01800DC1B80FE1FC0FF1FE0FF1FE07F0FE03E07C01C038013107B9F1B>92
D<07FC001FFF003F0F803F07C03F03E03F03E00C03E00003E0007FE007FBE01F03E03C03E07C03
E0F803E0F803E0F803E0FC05E07E0DE03FF8FE0FE07E17147F9319>97 D<FF0000FF00001F0000
1F00001F00001F00001F00001F00001F00001F00001F00001F00001F1FC01F7FF01FE0F81F807C
1F007E1F003E1F003E1F003F1F003F1F003F1F003F1F003F1F003F1F003E1F003E1F007C1F807C
1EC1F81C7FE0181F8018207E9F1D>I<01FE0007FF801F0FC03E0FC03E0FC07C0FC07C0300FC00
00FC0000FC0000FC0000FC0000FC00007C00007E00003E00603F00C01F81C007FF0001FC001314
7E9317>I<0007F80007F80000F80000F80000F80000F80000F80000F80000F80000F80000F800
00F801F8F80FFEF81F83F83E01F87E00F87C00F87C00F8FC00F8FC00F8FC00F8FC00F8FC00F8FC
00F87C00F87C00F87E00F83E01F81F07F80FFEFF03F8FF18207E9F1D>I<01FE0007FF800F83C0
1E01E03E00F07C00F07C00F8FC00F8FFFFF8FFFFF8FC0000FC0000FC00007C00007C00003E0018
1E00180F807007FFE000FF8015147F9318>I<001F8000FFC001F3E003E7E003C7E007C7E007C3
C007C00007C00007C00007C00007C000FFFC00FFFC0007C00007C00007C00007C00007C00007C0
0007C00007C00007C00007C00007C00007C00007C00007C00007C00007C0003FFC003FFC001320
7F9F10>I<01FC3C07FFFE0F079E1E03DE3E03E03E03E03E03E03E03E03E03E01E03C00F07800F
FF0009FC001800001800001C00001FFF800FFFF007FFF81FFFFC3C007C70003EF0001EF0001EF0
001E78003C78003C3F01F80FFFE001FF00171E7F931A>I<FF0000FF00001F00001F00001F0000
1F00001F00001F00001F00001F00001F00001F00001F0FC01F3FE01F61F01FC0F81F80F81F00F8
1F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F8FFE3FF
FFE3FF18207D9F1D>I<1C003E003F007F003F003E001C00000000000000000000000000FF00FF
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B21
7EA00E>I<0038007C00FE00FE00FE007C003800000000000000000000000001FE01FE003E003E
003E003E003E003E003E003E003E003E003E003E003E003E003E003E003E003E003E003E303E78
3EFC3CFC7C78783FF01FC00F2A83A010>I<FF0000FF00001F00001F00001F00001F00001F0000
1F00001F00001F00001F00001F00001F01FE1F01FE1F00F01F00C01F03801F07001F0C001F1800
1F7C001FFC001F9E001F0F001E0F801E07C01E03C01E01E01E01F01E00F8FFC3FFFFC3FF18207E
9F1C>I<FF00FF001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B207E9F0E>I<FE0FE0
3F80FE1FF07FC01E70F9C3E01E407D01F01E807E01F01F807E01F01F007C01F01F007C01F01F00
7C01F01F007C01F01F007C01F01F007C01F01F007C01F01F007C01F01F007C01F01F007C01F01F
007C01F01F007C01F0FFE3FF8FFEFFE3FF8FFE27147D932E>I<FE0FC0FE3FE01E61F01EC0F81E
80F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F
00F8FFE3FFFFE3FF18147D931D>I<01FF0007FFC01F83F03E00F83E00F87C007C7C007CFC007E
FC007EFC007EFC007EFC007EFC007E7C007C7C007C3E00F83E00F81F83F007FFC001FF0017147F
931A>I<FF1FC0FF7FF01FE1F81F80FC1F007E1F007E1F003E1F003F1F003F1F003F1F003F1F00
3F1F003F1F003E1F007E1F007C1F80FC1FC1F81F7FE01F1F801F00001F00001F00001F00001F00
001F00001F0000FFE000FFE000181D7E931D>I<01F81807FE381F87783F01F83E01F87E00F87C
00F8FC00F8FC00F8FC00F8FC00F8FC00F8FC00F87C00F87E00F87E00F83F01F81F87F80FFEF803
F8F80000F80000F80000F80000F80000F80000F80000F80007FF0007FF181D7E931C>I<FE3E00
FE7F801ECFC01E8FC01E8FC01F8FC01F03001F00001F00001F00001F00001F00001F00001F0000
1F00001F00001F00001F0000FFF000FFF00012147E9316>I<0FE63FFE701E600EE006E006F800
FFC07FF83FFC1FFE03FE001FC007C007E007F006F81EFFFCC7F010147E9315>I<018001800180
03800380038007800F803F80FFFCFFFC0F800F800F800F800F800F800F800F800F800F800F860F
860F860F860F8607CC03F801F00F1D7F9C14>I<FF07F8FF07F81F00F81F00F81F00F81F00F81F
00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F00F81F01F81F01F80F06F807FCFF03
F8FF18147D931D>I<FFE07F80FFE07F801F001C000F8018000F80180007C0300007C0300003E0
600003E0600001F0C00001F0C00001F9C00000F9800000FF8000007F0000007F0000003E000000
3E0000001C0000001C000019147F931C>I<FFE7FE1FE0FFE7FE1FE01F00F003001F00F803000F
80F806000F80F8060007C1BC0C0007C1BC0C0007C1BE0C0003E31E180003E31E180001F60F3000
01F60F300001F60FB00000FC07E00000FC07E000007803C000007803C000007803C00000300180
0023147F9326>I<FFE1FF00FFE1FF000F80700007C0E00007E0C00003E1800001F3800000FF00
00007E0000003E0000003F0000007F8000006F800000C7C0000183E0000381F0000701F8000E00
FC00FF81FF80FF81FF8019147F931C>I<FFE07F80FFE07F801F001C000F8018000F80180007C0
300007C0300003E0600003E0600001F0C00001F0C00001F9C00000F9800000FF8000007F000000
7F0000003E0000003E0000001C0000001C0000001800000018000078300000FC300000FC600000
C0E00000E1C000007F8000001E000000191D7F931C>I<3FFFE03FFFE03C07C0380F80701F8060
3F00603E00607C0000F80001F80003F00003E06007C0600F80601F80E03F00C03E01C07C03C0FF
FFC0FFFFC013147F9317>I<0F01001F83803FFF007FFE00E0FC0040780011067C9F1A>126
D E /Fm 36 122 df<FFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFFFFFEFFFF
FFFEFFFFFFFEFFFFFFFE1F0A7F9B28>45 D<0000000003E000000000000000000007F000000000
000000000007F00000000000000000000FF80000000000000000000FF80000000000000000000F
F80000000000000000001FFC0000000000000000001FFC0000000000000000003FFE0000000000
000000003FFE0000000000000000007FFF0000000000000000007FFF0000000000000000007FFF
000000000000000000FFFF800000000000000000FFFF800000000000000001FFFFC00000000000
000001FFFFC00000000000000001FFFFC00000000000000003FFFFE00000000000000003EFFFE0
0000000000000007EFFFF00000000000000007CFFFF00000000000000007C7FFF0000000000000
000FC7FFF8000000000000000F83FFF8000000000000001F83FFFC000000000000001F03FFFC00
0000000000001F01FFFC000000000000003F01FFFE000000000000003E00FFFE00000000000000
7E00FFFF000000000000007C007FFF00000000000000FC007FFF80000000000000F8007FFF8000
0000000000F8003FFF80000000000001F8003FFFC0000000000001F0001FFFC0000000000003F0
001FFFE0000000000003E0001FFFE0000000000003E0000FFFE0000000000007E0000FFFF00000
00000007C00007FFF000000000000FC00007FFF800000000000F800007FFF800000000000F8000
03FFF800000000001F800003FFFC00000000001F000001FFFC00000000003FFFFFFFFFFE000000
00003FFFFFFFFFFE00000000007FFFFFFFFFFF00000000007FFFFFFFFFFF00000000007FFFFFFF
FFFF0000000000FC0000007FFF8000000000F80000003FFF8000000001F80000003FFFC0000000
01F00000003FFFC000000001F00000001FFFC000000003F00000001FFFE000000003E00000000F
FFE000000007E00000000FFFF000000007C00000000FFFF000000007C000000007FFF00000000F
C000000007FFF80000000F8000000003FFF80000001F8000000003FFFC0000001F0000000003FF
FC0000007FC000000001FFFC0000FFFFFFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF80FFFFFF
C00007FFFFFFFF80FFFFFFC00007FFFFFFFF80FFFFFFC00007FFFFFFFF8051487CC75A>65
D<FFFFFFFFFFFFE00000FFFFFFFFFFFFFE0000FFFFFFFFFFFFFFC000FFFFFFFFFFFFFFF000FFFF
FFFFFFFFFFF800001FFF800001FFFE00001FFF8000007FFF00001FFF8000003FFF80001FFF8000
001FFFC0001FFF8000000FFFC0001FFF80000007FFE0001FFF80000007FFF0001FFF80000007FF
F0001FFF80000003FFF0001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001F
FF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF80000003FFF8001FFF8000
0003FFF8001FFF80000003FFF0001FFF80000007FFF0001FFF80000007FFE0001FFF8000000FFF
E0001FFF8000000FFFC0001FFF8000001FFF80001FFF8000003FFF00001FFF8000007FFE00001F
FF800001FFFC00001FFF800007FFF000001FFFFFFFFFFFC000001FFFFFFFFFFE0000001FFFFFFF
FFFF8000001FFFFFFFFFFFF000001FFF800000FFFC00001FFF8000003FFF00001FFF8000000FFF
C0001FFF80000007FFE0001FFF80000003FFF0001FFF80000003FFF8001FFF80000001FFF8001F
FF80000001FFFC001FFF80000000FFFC001FFF80000000FFFE001FFF80000000FFFE001FFF8000
0000FFFE001FFF80000000FFFF001FFF800000007FFF001FFF800000007FFF001FFF800000007F
FF001FFF800000007FFF001FFF80000000FFFF001FFF80000000FFFF001FFF80000000FFFF001F
FF80000000FFFE001FFF80000000FFFE001FFF80000001FFFE001FFF80000001FFFC001FFF8000
0003FFFC001FFF80000007FFF8001FFF80000007FFF0001FFF8000001FFFE0001FFF8000003FFF
E0001FFF800001FFFF80FFFFFFFFFFFFFFFF00FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFF000FFFF
FFFFFFFFFFC000FFFFFFFFFFFFF8000048477CC654>I<000000003FFE00000E0000000FFFFFC0
001E0000007FFFFFF8003E000003FFFFFFFE00FE00000FFFFFFFFF81FE00003FFFF800FFC3FE00
00FFFF80000FF7FE0001FFFC000003FFFE0007FFF0000001FFFE000FFFC00000007FFE001FFF80
0000003FFE003FFF000000001FFE007FFE000000000FFE00FFFC0000000007FE01FFF800000000
07FE03FFF00000000003FE03FFF00000000001FE07FFE00000000001FE07FFE00000000000FE0F
FFC00000000000FE0FFFC000000000007E1FFFC000000000007E1FFF8000000000007E3FFF8000
000000007E3FFF8000000000003E3FFF8000000000003E7FFF8000000000003E7FFF0000000000
003E7FFF000000000000007FFF00000000000000FFFF00000000000000FFFF00000000000000FF
FF00000000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF0000
0000000000FFFF00000000000000FFFF00000000000000FFFF00000000000000FFFF0000000000
0000FFFF00000000000000FFFF000000000000007FFF000000000000007FFF000000000000007F
FF000000000000007FFF8000000000003E3FFF8000000000003E3FFF8000000000003E3FFF8000
000000003E1FFF8000000000003E1FFFC000000000003E0FFFC000000000007C0FFFC000000000
007C07FFE000000000007C07FFE00000000000F803FFF00000000000F803FFF00000000001F801
FFF80000000001F000FFFC0000000003E0007FFE0000000007E0003FFF000000000FC0001FFF80
0000001F80000FFFC00000003F000007FFF0000000FE000001FFFC000001FC000000FFFF80000F
F80000003FFFF8007FF00000000FFFFFFFFFC000000003FFFFFFFF00000000007FFFFFFC000000
00000FFFFFE00000000000003FFE000000474979C756>I<FFFFFFFFFFFFC0000000FFFFFFFFFF
FFFE000000FFFFFFFFFFFFFFC00000FFFFFFFFFFFFFFF00000FFFFFFFFFFFFFFFC0000001FFF80
0007FFFF0000001FFF8000007FFF8000001FFF8000000FFFE000001FFF80000007FFF000001FFF
80000001FFF800001FFF80000000FFFC00001FFF800000007FFE00001FFF800000003FFF00001F
FF800000001FFF00001FFF800000000FFF80001FFF800000000FFFC0001FFF8000000007FFC000
1FFF8000000007FFE0001FFF8000000003FFE0001FFF8000000003FFF0001FFF8000000003FFF0
001FFF8000000003FFF8001FFF8000000001FFF8001FFF8000000001FFF8001FFF8000000001FF
FC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001
FFFC001FFF8000000001FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF80000000
00FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF800000
0000FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000000000FFFE001FFF8000
000000FFFE001FFF8000000000FFFE001FFF8000000001FFFE001FFF8000000001FFFC001FFF80
00000001FFFC001FFF8000000001FFFC001FFF8000000001FFFC001FFF8000000001FFF8001FFF
8000000001FFF8001FFF8000000001FFF8001FFF8000000003FFF0001FFF8000000003FFF0001F
FF8000000003FFF0001FFF8000000007FFE0001FFF8000000007FFE0001FFF800000000FFFC000
1FFF800000000FFF80001FFF800000001FFF80001FFF800000003FFF00001FFF800000003FFE00
001FFF800000007FFC00001FFF80000001FFF800001FFF80000003FFF000001FFF8000000FFFE0
00001FFF8000007FFFC000001FFF800003FFFF0000FFFFFFFFFFFFFFFE0000FFFFFFFFFFFFFFF8
0000FFFFFFFFFFFFFFC00000FFFFFFFFFFFFFE000000FFFFFFFFFFFFC00000004F477CC65B>I<
FFFFFFFFFFFFFFFE00FFFFFFFFFFFFFFFE00FFFFFFFFFFFFFFFE00FFFFFFFFFFFFFFFE00FFFFFF
FFFFFFFFFF00001FFFC00001FFFF00001FFFC000001FFF00001FFFC0000007FF00001FFFC00000
03FF00001FFFC0000000FF00001FFFC00000007F00001FFFC00000007F00001FFFC00000003F00
001FFFC00000003F80001FFFC00000001F80001FFFC00000001F80001FFFC00000001F80001FFF
C00000000F80001FFFC00000000F80001FFFC0007C000F80001FFFC0007C000F80001FFFC0007C
0007C0001FFFC0007C0007C0001FFFC0007C0007C0001FFFC0007C0007C0001FFFC000FC000000
001FFFC000FC000000001FFFC000FC000000001FFFC001FC000000001FFFC003FC000000001FFF
C01FFC000000001FFFFFFFFC000000001FFFFFFFFC000000001FFFFFFFFC000000001FFFFFFFFC
000000001FFFFFFFFC000000001FFFC01FFC000000001FFFC003FC000000001FFFC001FC000000
001FFFC000FC000000001FFFC000FC000000001FFFC000FC000000001FFFC0007C00007C001FFF
C0007C00007C001FFFC0007C00007C001FFFC0007C0000F8001FFFC0007C0000F8001FFFC0007C
0000F8001FFFC000000000F8001FFFC000000001F8001FFFC000000001F0001FFFC000000001F0
001FFFC000000001F0001FFFC000000003F0001FFFC000000003F0001FFFC000000007F0001FFF
C000000007E0001FFFC00000000FE0001FFFC00000001FE0001FFFC00000003FE0001FFFC00000
007FE0001FFFC0000000FFE0001FFFC0000003FFC0001FFFC000000FFFC0001FFFC00000FFFFC0
FFFFFFFFFFFFFFFFC0FFFFFFFFFFFFFFFFC0FFFFFFFFFFFFFFFF80FFFFFFFFFFFFFFFF80FFFFFF
FFFFFFFFFF8046467CC54E>I<FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFFC
00FFFFFFFFFFFFFFFC00FFFFFFFFFFFFFFFE00001FFFC00003FFFE00001FFFC000003FFE00001F
FFC000000FFE00001FFFC0000003FE00001FFFC0000001FE00001FFFC0000000FE00001FFFC000
0000FE00001FFFC00000007E00001FFFC00000007F00001FFFC00000003F00001FFFC00000003F
00001FFFC00000001F00001FFFC00000001F00001FFFC00000001F00001FFFC00000001F00001F
FFC0007C001F00001FFFC0007C000F80001FFFC0007C000F80001FFFC0007C000F80001FFFC000
7C000F80001FFFC0007C000000001FFFC000FC000000001FFFC000FC000000001FFFC000FC0000
00001FFFC001FC000000001FFFC003FC000000001FFFC01FFC000000001FFFFFFFFC000000001F
FFFFFFFC000000001FFFFFFFFC000000001FFFFFFFFC000000001FFFFFFFFC000000001FFFC01F
FC000000001FFFC003FC000000001FFFC001FC000000001FFFC000FC000000001FFFC000FC0000
00001FFFC000FC000000001FFFC0007C000000001FFFC0007C000000001FFFC0007C000000001F
FFC0007C000000001FFFC0007C000000001FFFC0007C000000001FFFC00000000000001FFFC000
00000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000000000
00001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001F
FFC00000000000001FFFC00000000000001FFFC00000000000001FFFC00000000000001FFFC000
00000000001FFFC00000000000FFFFFFFFFF00000000FFFFFFFFFF00000000FFFFFFFFFF000000
00FFFFFFFFFF00000000FFFFFFFFFF0000000041467CC54B>I<FFFFFFFFFEFFFFFFFFFEFFFFFF
FFFEFFFFFFFFFEFFFFFFFFFE000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000F
FFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE00000
0FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000
000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE0
00000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFF
E000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000F
FFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE00000
0FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000000FFFE000
000FFFE000FFFFFFFFFEFFFFFFFFFEFFFFFFFFFEFFFFFFFFFEFFFFFFFFFE27477DC62D>73
D<FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF000000FFFFFFFFFF00
0000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000
000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0
00000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFF
C000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001F
FFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC00000000000
1FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000
001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC0000000
00001FFFC000000000001FFFC000000000001FFFC000000000001FFFC000000000001FFFC00000
00F8001FFFC0000000F8001FFFC0000000F8001FFFC0000000F8001FFFC0000001F0001FFFC000
0001F0001FFFC0000001F0001FFFC0000001F0001FFFC0000001F0001FFFC0000003F0001FFFC0
000003F0001FFFC0000003F0001FFFC0000007F0001FFFC0000007F0001FFFC000000FE0001FFF
C000001FE0001FFFC000001FE0001FFFC000003FE0001FFFC000007FE0001FFFC00000FFE0001F
FFC00003FFE0001FFFC0000FFFE0001FFFC0007FFFE0FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC0FF
FFFFFFFFFFFFC0FFFFFFFFFFFFFFC0FFFFFFFFFFFFFFC03D477CC647>76
D<00000003FFF0000000000000007FFFFF80000000000003FFFFFFF000000000000FFFFFFFFC00
000000003FFF807FFF0000000000FFF80007FFC000000003FFE00001FFF000000007FFC00000FF
F80000000FFF0000003FFC0000001FFE0000001FFE0000003FFC0000000FFF0000007FFC000000
0FFF800000FFF800000007FFC00001FFF000000003FFE00003FFF000000003FFF00003FFE00000
0001FFF00007FFE000000001FFF80007FFC000000000FFF8000FFFC000000000FFFC000FFFC000
000000FFFC001FFF80000000007FFE001FFF80000000007FFE003FFF80000000007FFF003FFF80
000000007FFF003FFF80000000007FFF007FFF00000000003FFF807FFF00000000003FFF807FFF
00000000003FFF807FFF00000000003FFF807FFF00000000003FFF80FFFF00000000003FFFC0FF
FF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0
FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFF
C0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003FFFC0FFFF00000000003F
FFC0FFFF00000000003FFFC07FFF00000000003FFF807FFF00000000003FFF807FFF8000000000
7FFF807FFF80000000007FFF803FFF80000000007FFF003FFF80000000007FFF003FFF80000000
007FFF001FFFC000000000FFFE001FFFC000000000FFFE001FFFC000000000FFFE000FFFE00000
0001FFFC000FFFE000000001FFFC0007FFE000000001FFF80003FFF000000003FFF00003FFF800
000007FFF00001FFF800000007FFE00000FFFC0000000FFFC000007FFE0000001FFF8000007FFF
0000003FFF8000003FFF8000007FFF0000000FFFC00000FFFC00000007FFF00003FFF800000003
FFFC000FFFF000000000FFFF807FFFC0000000007FFFFFFFFF80000000000FFFFFFFFC00000000
0003FFFFFFF00000000000007FFFFF8000000000000003FFF0000000004A4979C759>79
D<FFFFFFFFFFFC0000000000FFFFFFFFFFFFF000000000FFFFFFFFFFFFFE00000000FFFFFFFFFF
FFFF80000000FFFFFFFFFFFFFFE0000000001FFF80001FFFF8000000001FFF800001FFFC000000
001FFF8000007FFF000000001FFF8000003FFF800000001FFF8000001FFF800000001FFF800000
0FFFC00000001FFF8000000FFFE00000001FFF8000000FFFE00000001FFF80000007FFF0000000
1FFF80000007FFF00000001FFF80000007FFF80000001FFF80000007FFF80000001FFF80000007
FFF80000001FFF80000007FFF80000001FFF80000007FFF80000001FFF80000007FFF80000001F
FF80000007FFF80000001FFF80000007FFF80000001FFF80000007FFF00000001FFF80000007FF
F00000001FFF8000000FFFE00000001FFF8000000FFFE00000001FFF8000000FFFC00000001FFF
8000001FFF800000001FFF8000003FFF000000001FFF800000FFFE000000001FFF800003FFF800
0000001FFF80001FFFF0000000001FFFFFFFFFFFC0000000001FFFFFFFFFFE00000000001FFFFF
FFFFF800000000001FFFFFFFFFFE00000000001FFF80007FFF80000000001FFF80001FFFC00000
00001FFF800007FFE0000000001FFF800003FFF0000000001FFF800001FFF8000000001FFF8000
01FFFC000000001FFF800000FFFE000000001FFF800000FFFE000000001FFF8000007FFE000000
001FFF8000007FFF000000001FFF8000007FFF000000001FFF8000007FFF000000001FFF800000
7FFF000000001FFF8000007FFF000000001FFF8000007FFF000000001FFF8000007FFF00000000
1FFF8000007FFF800000001FFF8000007FFF800000001FFF8000007FFF800000001FFF8000007F
FF800000001FFF8000007FFF800000001FFF8000007FFF8000E0001FFF8000007FFF8001F0001F
FF8000007FFFC001F0001FFF8000007FFFC001F0001FFF8000003FFFC001F0001FFF8000003FFF
C003F0001FFF8000001FFFE003E0001FFF8000000FFFE007E0FFFFFFFFF00007FFF007C0FFFFFF
FFF00003FFFC1F80FFFFFFFFF00001FFFFFF00FFFFFFFFF000007FFFFE00FFFFFFFFF000001FFF
FC000000000000000000FFF00054487CC659>82 D<00007FF00007000007FFFF000F00001FFFFF
C01F00007FFFFFF03F0000FFFFFFFC7F0003FFC00FFEFF0007FE0000FFFF0007FC00003FFF000F
F000001FFF001FF0000007FF001FE0000003FF003FE0000001FF003FC0000001FF007FC0000000
FF007FC00000007F007FC00000007F00FFC00000003F00FFC00000003F00FFC00000003F00FFE0
0000003F00FFE00000001F00FFF00000001F00FFF80000001F00FFFC0000001F00FFFF00000000
007FFFC0000000007FFFFE000000007FFFFFE00000003FFFFFFF0000003FFFFFFFF000001FFFFF
FFFC00001FFFFFFFFF00000FFFFFFFFFC00007FFFFFFFFE00007FFFFFFFFF00003FFFFFFFFF800
00FFFFFFFFFC00007FFFFFFFFE00003FFFFFFFFE00000FFFFFFFFF000001FFFFFFFF0000003FFF
FFFF80000001FFFFFF800000000FFFFFC000000000FFFFC0000000001FFFC0000000000FFFE000
00000007FFE00000000003FFE07800000001FFE0F800000000FFE0F800000000FFE0F800000000
7FE0F8000000007FE0F8000000007FE0FC000000007FE0FC000000007FC0FC000000007FC0FE00
0000007FC0FE000000007F80FF00000000FF80FF80000000FF80FFC0000000FF00FFE0000001FE
00FFF8000003FE00FFFE000007FC00FFFF80000FF800FFFFFC007FF000FE3FFFFFFFE000FC0FFF
FFFF8000F803FFFFFF0000F0007FFFF80000E00003FFC00000334979C742>I<FFFFFFFFC03FFF
FFFFF0001FFFFFF0FFFFFFFFC03FFFFFFFF0001FFFFFF0FFFFFFFFC03FFFFFFFF0001FFFFFF0FF
FFFFFFC03FFFFFFFF0001FFFFFF0FFFFFFFFC03FFFFFFFF0001FFFFFF0007FFF0000001FFFE000
00000FF800007FFF0000000FFFE000000003E000007FFF8000000FFFE000000007E000003FFF80
00000FFFF000000007C000003FFFC0000007FFF000000007C000003FFFC0000007FFF80000000F
C000001FFFC0000003FFF80000000F8000001FFFE0000003FFF80000001F8000000FFFE0000003
FFFC0000001F0000000FFFE0000001FFFC0000001F0000000FFFF0000001FFFE0000003F000000
07FFF0000001FFFE0000003E00000007FFF8000001FFFE0000007E00000003FFF8000003FFFF00
00007C00000003FFF8000003FFFF0000007C00000003FFFC000003FFFF000000FC00000001FFFC
000007FFFF800000F800000001FFFE000007FFFF800000F800000001FFFE000007FFFFC00001F8
00000000FFFE00000F9FFFC00001F000000000FFFF00000F9FFFC00003F0000000007FFF00001F
9FFFE00003E0000000007FFF00001F0FFFE00003E0000000007FFF80001F0FFFE00007E0000000
003FFF80003F0FFFF00007C0000000003FFFC0003E07FFF00007C0000000001FFFC0007E07FFF8
000F80000000001FFFC0007C03FFF8000F80000000001FFFE0007C03FFF8001F80000000000FFF
E000FC03FFFC001F00000000000FFFE000F801FFFC001F00000000000FFFF000F801FFFE003F00
0000000007FFF001F801FFFE003E000000000007FFF801F000FFFE007E000000000003FFF803F0
00FFFF007C000000000003FFF803E0007FFF007C000000000003FFFC03E0007FFF00FC00000000
0001FFFC07E0007FFF80F8000000000001FFFE07C0003FFF80F8000000000001FFFE0FC0003FFF
C1F8000000000000FFFE0F80001FFFC1F0000000000000FFFF0F80001FFFC3F00000000000007F
FF1F80001FFFE3E00000000000007FFF1F00000FFFE3E00000000000007FFF9F00000FFFF7E000
00000000003FFFBF00000FFFF7C00000000000003FFFFE000007FFFFC00000000000001FFFFE00
0007FFFF800000000000001FFFFC000003FFFF800000000000001FFFFC000003FFFF8000000000
00000FFFFC000003FFFF000000000000000FFFF8000001FFFF000000000000000FFFF8000001FF
FF0000000000000007FFF0000000FFFE0000000000000007FFF0000000FFFE0000000000000003
FFF0000000FFFC0000000000000003FFE00000007FFC0000000000000003FFE00000007FFC0000
000000000001FFE00000007FF80000000000000001FFC00000003FF80000000000000001FFC000
00003FF80000000000000000FF800000001FF00000000000000000FF800000001FF00000000000
0000007F800000001FE000000000000000007F000000000FE000000000000000007F000000000F
E000000000000000003E0000000007C00000000074487DC67B>87 D<0007FFFC000000007FFFFF
C0000001FFFFFFF8000003FFFFFFFE000007FE001FFF000007FF0003FFC0000FFF8001FFE0000F
FF8000FFF0000FFF80007FF0000FFF80007FF8000FFF80007FF80007FF00003FFC0007FF00003F
FC0003FE00003FFC0000F800003FFC00000000003FFC00000000003FFC00000000003FFC000000
00003FFC00000007FFFFFC000000FFFFFFFC000007FFFFFFFC00003FFFE03FFC0000FFFE003FFC
0003FFF0003FFC0007FFC0003FFC000FFF00003FFC001FFE00003FFC003FFC00003FFC007FF800
003FFC007FF800003FFC00FFF000003FFC00FFF000003FFC00FFF000003FFC00FFF000003FFC00
FFF000003FFC00FFF000007FFC007FF80000FFFC007FF80001EFFC003FFC0003EFFC003FFF0007
CFFF000FFFC03F8FFFF807FFFFFF07FFFC01FFFFFC03FFFC007FFFF001FFFC0003FF80007FF836
2E7DAD3A>97 D<007FC00000000000FFFFC00000000000FFFFC00000000000FFFFC00000000000
FFFFC00000000000FFFFC0000000000003FFC0000000000001FFC0000000000001FFC000000000
0001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000
000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000
00000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000
0000000001FFC0000000000001FFC0000000000001FFC00FFC00000001FFC07FFFC0000001FFC3
FFFFF0000001FFCFFFFFFC000001FFDFF00FFF000001FFFF8003FF800001FFFE0001FFC00001FF
F800007FE00001FFF000007FF00001FFE000003FF80001FFE000001FFC0001FFE000001FFC0001
FFE000001FFE0001FFE000001FFE0001FFE000000FFF0001FFE000000FFF0001FFE000000FFF00
01FFE000000FFF0001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF
8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000F
FF8001FFE000000FFF8001FFE000000FFF0001FFE000000FFF0001FFE000000FFF0001FFE00000
1FFE0001FFE000001FFE0001FFE000001FFC0001FFE000001FFC0001FFE000003FF80001FFF000
003FF80001FFF800007FF00001FFFC0000FFE00001FFFE0001FFC00001FFBF0007FF800001FF1F
E01FFE000001FE0FFFFFFC000001FC03FFFFF0000001F800FFFF80000001F0001FF80000003948
7CC742>I<00001FFFC0000000FFFFF8000007FFFFFE00001FFFFFFF80007FFC00FFC000FFE001
FFC001FFC003FFE003FF8003FFE007FF0003FFE00FFE0003FFE00FFE0003FFE01FFC0001FFC01F
FC0001FFC03FFC0000FF803FFC00003E007FF8000000007FF8000000007FF800000000FFF80000
0000FFF800000000FFF800000000FFF800000000FFF800000000FFF800000000FFF800000000FF
F800000000FFF800000000FFF8000000007FF8000000007FF8000000007FFC000000003FFC0000
00003FFC000000001FFC000000F81FFE000000F80FFE000000F80FFF000001F007FF800003F003
FFC00007E001FFE0000FC000FFF0001F80007FFE00FF00001FFFFFFE000007FFFFF8000000FFFF
E00000001FFE00002D2E7CAD35>I<00000000007FC00000000000FFFFC00000000000FFFFC000
00000000FFFFC00000000000FFFFC00000000000FFFFC0000000000003FFC0000000000001FFC0
000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FF
C0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001
FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC00000000000
01FFC0000000000001FFC0000000000001FFC0000000000001FFC00000000FFC01FFC0000000FF
FF81FFC0000007FFFFE1FFC000001FFFFFF9FFC000007FFC03FFFFC00000FFF0007FFFC00001FF
C0001FFFC00003FF80000FFFC00007FF000007FFC0000FFE000003FFC0000FFE000003FFC0001F
FC000003FFC0001FFC000003FFC0003FFC000003FFC0003FFC000003FFC0007FF8000003FFC000
7FF8000003FFC0007FF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC0
00FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FFC000FFF8000003FF
C000FFF8000003FFC000FFF8000003FFC0007FF8000003FFC0007FF8000003FFC0007FF8000003
FFC0003FF8000003FFC0003FFC000003FFC0003FFC000003FFC0001FFC000003FFC0001FFC0000
03FFC0000FFE000007FFC00007FF00000FFFC00003FF00001FFFC00001FFC0003FFFC00000FFE0
00FFFFE000007FF807FBFFFF80001FFFFFF3FFFF800007FFFFC3FFFF800001FFFF03FFFF800000
1FF803FFFF8039487CC742>I<00001FFE00000001FFFFE0000007FFFFF800001FFFFFFE00007F
FC07FF0000FFE001FF8001FFC0007FC003FF80003FE007FF00003FF00FFE00001FF01FFE00000F
F81FFC00000FF83FFC00000FFC3FFC000007FC7FFC000007FC7FF8000007FC7FF8000007FE7FF8
000007FEFFF8000007FEFFF8000007FEFFFFFFFFFFFEFFFFFFFFFFFEFFFFFFFFFFFEFFFFFFFFFF
FCFFF800000000FFF800000000FFF800000000FFF8000000007FF8000000007FF8000000007FFC
000000003FFC000000003FFC000000003FFC0000001C1FFE0000003E0FFE0000003E07FF000000
7E07FF000000FC03FF800001F801FFC00003F0007FF0001FE0003FFE00FFC0001FFFFFFF800007
FFFFFE000000FFFFF80000000FFF80002F2E7DAD36>I<000000FFC000000007FFF80000003FFF
FC000000FFFFFF000001FFC1FF000007FF03FF80000FFC03FF80000FF807FFC0001FF807FFC000
3FF007FFC0003FF007FFC0003FE003FF80007FE003FF80007FE001FF00007FE000FE00007FE000
3800007FE0000000007FE0000000007FE0000000007FE0000000007FE0000000007FE000000000
7FE0000000007FE0000000007FE0000000007FE0000000FFFFFFFE0000FFFFFFFE0000FFFFFFFE
0000FFFFFFFE0000FFFFFFFE0000007FF0000000007FF0000000007FF0000000007FF000000000
7FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000
0000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000000000
7FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000
0000007FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF000000000
7FF0000000007FF0000000007FF0000000007FF0000000007FF0000000007FF00000003FFFFFF8
00003FFFFFF800003FFFFFF800003FFFFFF800003FFFFFF800002A487DC724>I<00000000001F
8000007FF000FFE00007FFFF03FFF0001FFFFFC7FFF0007FFFFFFFC7F800FFE03FFE0FF801FF80
0FFC0FF803FF0007FE0FF807FE0003FF07F007FE0003FF07F00FFC0001FF81C00FFC0001FF8000
0FFC0001FF80001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001FFC0001
FFC0001FFC0001FFC0000FFC0001FF80000FFC0001FF80000FFC0001FF800007FE0003FF000007
FE0003FF000003FF0007FE000001FF800FFC000000FFE03FF8000001FFFFFFF0000001DFFFFFC0
000003C7FFFF00000003C07FF000000007C0000000000007C0000000000007C0000000000007C0
000000000007E0000000000007F0000000000007F8000000000007FFFFFFF0000007FFFFFFFF00
0003FFFFFFFFE00003FFFFFFFFF80001FFFFFFFFFE0001FFFFFFFFFF0000FFFFFFFFFF80007FFF
FFFFFF8003FFFFFFFFFFC00FFFFFFFFFFFC01FF800001FFFE03FE0000001FFE07FC00000007FF0
7FC00000003FF0FF800000001FF0FF800000001FF0FF800000001FF0FF800000001FF0FF800000
001FF07FC00000003FE07FC00000003FE03FE00000007FC03FF0000000FFC01FFC000003FF800F
FF00000FFF0003FFF000FFFC0000FFFFFFFFF000003FFFFFFFC0000007FFFFFE000000003FFFC0
000035447DAE3B>I<007FC00000000000FFFFC00000000000FFFFC00000000000FFFFC0000000
0000FFFFC00000000000FFFFC0000000000003FFC0000000000001FFC0000000000001FFC00000
00000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC000
0000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0
000000000001FFC0000000000001FFC0000000000001FFC0000000000001FFC0000000000001FF
C0000000000001FFC0000000000001FFC0000000000001FFC001FFC0000001FFC00FFFF8000001
FFC03FFFFE000001FFC0FFFFFF000001FFC1FC07FF800001FFC3E003FFC00001FFC7C001FFC000
01FFCF0001FFE00001FFDE0000FFE00001FFDC0000FFE00001FFFC0000FFF00001FFF80000FFF0
0001FFF00000FFF00001FFF00000FFF00001FFF00000FFF00001FFE00000FFF00001FFE00000FF
F00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000
FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF000FF
FFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0
3B487CC742>I<00FC0001FF0003FF8007FFC00FFFC01FFFE01FFFE01FFFE01FFFE01FFFE01FFF
E00FFFC007FFC003FF8001FF0000FC000000000000000000000000000000000000000000000000
00000000000000000000007FC0FFFFC0FFFFC0FFFFC0FFFFC0FFFFC003FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FFC001FF
C001FFC001FFC001FFC001FFC001FFC0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF18497CC820>I<00
7FC000000000FFFFC000000000FFFFC000000000FFFFC000000000FFFFC000000000FFFFC00000
000003FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FF
C00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC0000000
0001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC00000000001FFC0
0000000001FFC00000000001FFC00000000001FFC00000000001FFC0007FFFF801FFC0007FFFF8
01FFC0007FFFF801FFC0007FFFF801FFC0007FFFF801FFC0000FFE0001FFC00007F00001FFC000
0FE00001FFC0003FC00001FFC0007F800001FFC000FE000001FFC001FC000001FFC007F8000001
FFC00FF0000001FFC01FC0000001FFC03F80000001FFC0FF00000001FFC1FE00000001FFC3FF00
000001FFCFFF80000001FFDFFFC0000001FFFFFFC0000001FFFFFFE0000001FFFFFFF0000001FF
FCFFF8000001FFF87FFC000001FFE03FFC000001FFC01FFE000001FFC01FFF000001FFC00FFF80
0001FFC007FFC00001FFC003FFC00001FFC001FFE00001FFC001FFF00001FFC000FFF80001FFC0
007FFC0001FFC0003FFC0001FFC0001FFE0001FFC0000FFF0001FFC0000FFF8001FFC0000FFFC0
FFFFFF807FFFFFFFFFFF807FFFFFFFFFFF807FFFFFFFFFFF807FFFFFFFFFFF807FFFFF38487CC7
3F>107 D<007FC000FFFFC000FFFFC000FFFFC000FFFFC000FFFFC00003FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC000
01FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC0
0001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FF
C00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001
FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC00001FFC000
FFFFFF80FFFFFF80FFFFFF80FFFFFF80FFFFFF8019487CC720>I<007FC001FFC00000FFE00000
FFFFC00FFFF80007FFFC0000FFFFC03FFFFE001FFFFF0000FFFFC0FFFFFF007FFFFF8000FFFFC1
FC07FF80FE03FFC000FFFFC3E003FFC1F001FFE00003FFC7C001FFC3E000FFE00001FFCF0001FF
E78000FFF00001FFDE0000FFEF00007FF00001FFDC0000FFEE00007FF00001FFFC0000FFFE0000
7FF80001FFF80000FFFC00007FF80001FFF00000FFF800007FF80001FFF00000FFF800007FF800
01FFF00000FFF800007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE0
0000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FF
F000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF00000
7FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF800
01FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE0
0000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FF
F000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF00000
7FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF80001FFE00000FFF000007FF800
01FFE00000FFF000007FF800FFFFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF0FFFFFF
C07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF0FFFFFFC07FFFFFE03FFFFFF05C2E7CAD65>
I<007FC001FFC00000FFFFC00FFFF80000FFFFC03FFFFE0000FFFFC0FFFFFF0000FFFFC1FC07FF
8000FFFFC3E003FFC00003FFC7C001FFC00001FFCF0001FFE00001FFDE0000FFE00001FFDC0000
FFE00001FFFC0000FFF00001FFF80000FFF00001FFF00000FFF00001FFF00000FFF00001FFF000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001
FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF000
01FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF0
0001FFE00000FFF00001FFE00000FFF000FFFFFFC07FFFFFE0FFFFFFC07FFFFFE0FFFFFFC07FFF
FFE0FFFFFFC07FFFFFE0FFFFFFC07FFFFFE03B2E7CAD42>I<00000FFF0000000000FFFFF00000
0007FFFFFE0000001FFFFFFF8000003FFC03FFC00000FFE0007FF00001FF80001FF80003FF0000
0FFC0007FE000007FE000FFE000007FF000FFC000003FF001FFC000003FF803FFC000003FFC03F
F8000001FFC03FF8000001FFC07FF8000001FFE07FF8000001FFE07FF8000001FFE0FFF8000001
FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8
000001FFF0FFF8000001FFF0FFF8000001FFF0FFF8000001FFF07FF8000001FFE07FF8000001FF
E07FF8000001FFE07FF8000001FFE03FFC000003FFC03FFC000003FFC01FFC000003FF801FFE00
0007FF800FFE000007FF0007FF00000FFE0003FF80001FFC0001FFC0003FF80000FFE0007FF000
007FFC03FFE000001FFFFFFF80000007FFFFFE00000000FFFFF0000000000FFF000000342E7DAD
3B>I<007FC00FFC000000FFFFC07FFFC00000FFFFC3FFFFF00000FFFFCFFFFFFC0000FFFFDFF0
1FFF0000FFFFFF8007FF800003FFFE0001FFC00001FFF80000FFE00001FFF00000FFF00001FFE0
00007FF80001FFE000003FFC0001FFE000003FFC0001FFE000003FFE0001FFE000001FFE0001FF
E000001FFF0001FFE000001FFF0001FFE000001FFF0001FFE000000FFF0001FFE000000FFF8001
FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF80
01FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF8001FFE000000FFF
0001FFE000001FFF0001FFE000001FFF0001FFE000001FFE0001FFE000001FFE0001FFE000003F
FC0001FFE000003FFC0001FFE000007FF80001FFF000007FF80001FFF80000FFF00001FFFC0001
FFE00001FFFE0003FFC00001FFFF0007FF800001FFFFE03FFE000001FFEFFFFFFC000001FFE3FF
FFF0000001FFE0FFFF80000001FFE01FF800000001FFE0000000000001FFE0000000000001FFE0
000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FF
E0000000000001FFE0000000000001FFE0000000000001FFE0000000000001FFE0000000000001
FFE0000000000001FFE0000000000001FFE00000000000FFFFFFC000000000FFFFFFC000000000
FFFFFFC000000000FFFFFFC000000000FFFFFFC00000000039427CAD42>I<00FF803F8000FFFF
80FFF000FFFF83FFFC00FFFF87FFFE00FFFF8FC3FF00FFFF8F07FF0003FF9E0FFF8001FFBC0FFF
8001FFB80FFF8001FFF80FFF8001FFF00FFF8001FFF007FF0001FFF007FF0001FFE003FE0001FF
E000F80001FFE000000001FFE000000001FFC000000001FFC000000001FFC000000001FFC00000
0001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FF
C000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC00000
0001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FFC000000001FF
C0000000FFFFFFE00000FFFFFFE00000FFFFFFE00000FFFFFFE00000FFFFFFE00000292E7CAD31
>114 D<000FFF00E0007FFFF3E001FFFFFFE007FFFFFFE00FF800FFE01FC0001FE03F80000FE0
3F000007E07F000003E07F000003E0FF000003E0FF000003E0FF800003E0FFC0000000FFF00000
00FFFE000000FFFFF800007FFFFFC0007FFFFFF0003FFFFFFC001FFFFFFF000FFFFFFF8007FFFF
FFC003FFFFFFE000FFFFFFF0003FFFFFF00003FFFFF800001FFFF8000000FFFC0000001FFC7800
000FFCF8000007FCF8000003FCFC000003FCFC000003FCFE000003F8FE000003F8FF000003F8FF
800007F0FFC0000FF0FFF0001FE0FFFC00FFC0FFFFFFFF80FC7FFFFE00F81FFFF800E003FF8000
262E7CAD2F>I<0001F000000001F000000001F000000001F000000001F000000001F000000003
F000000003F000000003F000000007F000000007F000000007F00000000FF00000000FF0000000
1FF00000003FF00000003FF00000007FF0000001FFF0000003FFF000000FFFFFFFC0FFFFFFFFC0
FFFFFFFFC0FFFFFFFFC0FFFFFFFFC000FFF0000000FFF0000000FFF0000000FFF0000000FFF000
0000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0
000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FFF0000000FF
F0000000FFF0000000FFF0000000FFF001F000FFF001F000FFF001F000FFF001F000FFF001F000
FFF001F000FFF001F000FFF001F000FFF001F0007FF001E0007FF803E0003FF803E0003FFC07C0
001FFE0F80000FFFFF800007FFFE000001FFFC0000001FF00024427EC12E>I<007FE000003FF0
00FFFFE0007FFFF000FFFFE0007FFFF000FFFFE0007FFFF000FFFFE0007FFFF000FFFFE0007FFF
F00003FFE00001FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000
FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE000
00FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE0
0000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FF
E00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001
FFE00000FFF00001FFE00000FFF00001FFE00000FFF00001FFE00001FFF00001FFE00001FFF000
01FFE00001FFF00001FFE00003FFF00000FFE00007FFF00000FFE0000F7FF000007FE0001F7FF0
00007FF0003E7FF800003FFC00FC7FFFE0001FFFFFF87FFFE00007FFFFE07FFFE00001FFFF807F
FFE000003FFE007FFFE03B2E7CAD42>I<FFFFFF8001FFFFFFFFFF8001FFFFFFFFFF8001FFFFFF
FFFF8001FFFFFFFFFF8001FFFF01FFE000001FC001FFF000001F8001FFF000001F8000FFF80000
1F0000FFF800003F00007FF800003E00007FFC00007E00003FFC00007C00003FFE0000FC00001F
FE0000F800001FFF0001F800000FFF0001F000000FFF8003F0000007FF8003E0000007FFC007E0
000007FFC007E0000003FFE007C0000003FFE00FC0000001FFE00F80000001FFF01F80000000FF
F01F00000000FFF83F000000007FF83E000000007FFC7E000000003FFC7C000000003FFEFC0000
00001FFEF8000000001FFFF8000000001FFFF8000000000FFFF0000000000FFFF00000000007FF
E00000000007FFE00000000003FFC00000000003FFC00000000001FF800000000001FF80000000
0000FF000000000000FF0000000000007E0000000000003C000000382E7DAD3F>I<FFFFFF07FF
FFE007FFFEFFFFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFEFFFFFF07FFFFE007FFFEFFFFFF07
FFFFE007FFFE03FFC0001FFC00003FC003FFE0000FFC00001F8001FFE0000FFC00001F0001FFE0
000FFE00001F0001FFF00007FE00003F0000FFF0000FFF00003E0000FFF8000FFF00007E00007F
F8000FFF00007C00007FF8001FFF80007C00003FFC001FFF8000F800003FFC003FFFC000F80000
3FFE003EFFC001F800001FFE003EFFC001F000001FFE007EFFE003F000000FFF007C7FE003E000
000FFF00FC7FF003E000000FFF80F83FF007E0000007FF80F83FF007C0000007FF81F83FF80FC0
000003FFC1F01FF80F80000003FFC3F01FFC0F80000003FFE3E00FFC1F80000001FFE3E00FFC1F
00000001FFE7E00FFE3F00000000FFF7C007FE3E00000000FFFFC007FF3E00000000FFFF8003FF
7E000000007FFF8003FF7C000000007FFF8003FFFC000000003FFF0001FFF8000000003FFF0001
FFF8000000003FFE0000FFF8000000001FFE0000FFF0000000001FFE0000FFF0000000000FFC00
007FE0000000000FFC00007FE0000000000FF800003FE00000000007F800003FC00000000007F8
00003FC00000000003F000001F800000000001E000000F0000004F2E7DAD56>I<7FFFFF801FFF
FF007FFFFF801FFFFF007FFFFF801FFFFF007FFFFF801FFFFF007FFFFF801FFFFF00007FF80001
FF0000007FFC0001FC0000003FFE0003F80000001FFF0007F00000000FFF0007E000000007FF80
0FC000000003FFC01F8000000003FFE03F8000000001FFF07F0000000000FFF8FE00000000007F
F9FC00000000003FFFF800000000003FFFF000000000001FFFE000000000000FFFC00000000000
07FFC0000000000003FFC0000000000001FFE0000000000001FFF0000000000001FFF800000000
0003FFFC000000000003FFFE000000000007FFFE00000000000FEFFF00000000001FCFFF800000
00003F87FFC0000000007F03FFE000000000FE01FFE000000001FC00FFF000000001F8007FF800
000003F0007FFC00000007F0003FFE0000000FE0001FFF0000001FC0000FFF0000003F800007FF
800000FF800007FFC000FFFFF8003FFFFFC0FFFFF8003FFFFFC0FFFFF8003FFFFFC0FFFFF8003F
FFFFC0FFFFF8003FFFFFC03A2E7EAD3F>I<7FFFFFC000FFFF807FFFFFC000FFFF807FFFFFC000
FFFF807FFFFFC000FFFF807FFFFFC000FFFF8000FFF000000FE00000FFF800000FC00000FFF800
000FC000007FFC00000F8000007FFC00001F8000003FFC00001F0000003FFE00003F0000001FFE
00003E0000001FFF00007E0000000FFF00007C0000000FFF8000FC00000007FF8000F800000007
FFC001F800000003FFC001F000000003FFE003F000000003FFE003F000000001FFF003E0000000
01FFF007E000000000FFF007C000000000FFF80FC0000000007FF80F80000000007FFC1F800000
00003FFC1F00000000003FFE3F00000000001FFE3E00000000001FFF7E00000000000FFF7C0000
0000000FFFFC00000000000FFFFC000000000007FFF8000000000007FFF8000000000003FFF000
0000000003FFF0000000000001FFE0000000000001FFE0000000000000FFC0000000000000FFC0
0000000000007F800000000000007F800000000000003F000000000000003F000000000000003F
000000000000003E000000000000007E000000000000007C00000000000000FC000000001F8000
F8000000003FC001F8000000007FE001F000000000FFF003F000000000FFF003E000000000FFF0
07E000000000FFF00FC000000000FFF01F8000000000FFF03F80000000007FE07F00000000007F
43FE00000000003FFFF800000000001FFFF0000000000007FFC0000000000001FE000000000000
39427EAD3F>I E /Fn 71 123 df<00003F03E00000C386700001878CF00003879CF000030318
60000700380000070038000007003800000E003800000E007000000E007000000E00700000FFFF
FF80001C007000001C00E000001C00E000001C00E000001C00E000003800E000003801C0000038
01C000003801C000003801C000007001C000007003800000700380000070038000007003800000
6003800000E007000000E007000000E007000000E007000000C006000001C00E000001C00E0000
31860C0000798F180000F31E100000620C6000003C07C000002429829F1C>11
D<00003FE00000E01000018038000380780003007800070030000700000007000000070000000E
0000000E0000000E000000FFFFE0000E00E0001C01C0001C01C0001C01C0001C01C0001C038000
38038000380380003803800038070000380700007007000070071000700E2000700E2000700E20
00E00E2000E0064000E0038000E0000000C0000001C0000001C000003180000079800000F30000
00620000003C0000001D29829F1A>I<00003FCE0000E0EE000181FC000381FC000300DC000700
1C0007003800070038000E0038000E0038000E0070000E007000FFFFF0001E0070001C00E0001C
00E0001C00E0001C00E0001C01C0003801C0003801C0003801C000380380003803800070038000
70038800700710007007100070071000E0071000E0032000E001C000E0000000C0000001C00000
01C000003180000079800000F3000000620000003C0000001F29829F1B>I<00003FC0FF800000
E0E38040000181E600E0000381EC01E0000300DC01E00007001C00C00007001800000007003800
00000E00380000000E00380000000E00380000000E0070000000FFFFFFFF80001C00700380001C
00700700001C00700700001C00700700001C00E00700001C00E00E00003800E00E00003800E00E
00003800E00E00003801C01C00003801C01C00007001C01C00007001C01C40007001C038800070
0380388000700380388000E00380388000E00380190000E003000E0000E00700000000C0070000
0001C00600000001C00600000031860E000000798F0C000000F31E18000000620C300000003C07
C00000002B29829F28>I<000F00000030800C0060401E00C0203C01C0201C0180E0040381E008
0303C008070180100700002007000040060001800678028007C40C4007041020060420200F0440
101D0840103CF0581038007C10780078107800301078000010F0000020F0000020F0000040F000
0040700000807000010038000300180004000E0018000780E00000FF00001F227BA023>38
D<0E1F3F3F1D0102020404081020C0080E779F0E>I<000100020004000800100020006000C001
8001800300070006000E000C001C0018003800380030007000700060006000E000E000C000C000
C000C000C000C000C000C000C000C000C000C000C0004000600060002000100010000800102E79
A113>I<0010000008000004000006000002000003000003000003000001000001800001800001
800001800001800001800001800003800003800003800003000003000003000007000007000006
00000600000E00000C00000C00001C0000180000380000300000700000600000E00000C0000180
000100000300000600000C0000180000300000600000800000112E80A113>I<7FF0FFE07FE00C
037D8A10>45 D<70F8F8F0E005057B840E>I<00000040000000C0000001800000018000000300
00000300000006000000060000000C0000001800000018000000300000003000000060000000C0
000000C0000001800000018000000300000003000000060000000C0000000C0000001800000018
000000300000003000000060000000C0000000C000000180000001800000030000000300000006
0000000C0000000C0000001800000018000000300000003000000060000000C0000000C0000000
800000001A2D7FA117>I<000F800030E000E07001C0700380300380380700380F00780F00780E
00781E00781E00703C00F03C00F03C00F03C00F07801E07801E07801E07801C07003C0F003C0F0
0380F00780F00700700700700E00701C003038001870000FC000151F7C9D17>I<000200020006
000E003C00DC031C001C0038003800380038007000700070007000E000E000E000E001C001C001
C001C003800380038003800780FFF80F1E7B9D17>I<001F000061800080E00100E00200700220
700420700410700820F00820F00820F00840E00881E00703C0000380000700000C000018000060
000080000300000400000800401000401000802001807E030047FF0041FE0080FC00807800141F
7C9D17>I<001F800060E000807001003002003804203804203804103804207004607003806000
00E00001C000030000FE00001C00000600000700000780000780000780300780780780780780F0
0F00800F00401E00401C0040380020E0001F8000151F7C9D17>I<0000600000E00000E00000E0
0001C00001C00001C0000380000380000300000700000700000600000E00000C00001800001800
00300000300000630000C700008700010700030700060E00040E00080E003F8E00607C00801FC0
001C00001C0000380000380000380000380000700000700000600013277E9D17>I<00C06000FF
C001FF8001FE00010000010000020000020000020000020000040000047800058C000606000C07
00080700000780000780000780000780000F00700F00F00F00F00E00E01E00801C008038008030
0040600061C0001F0000131F7B9D17>I<0007C0001C200030200060E000C1E00181E00380C007
00000F00000E00001E00001E78001D84003E06003E07003C07007C078078078078078078078070
0F00700F00F00F00F00E00F01E00701C00601C0070380030700010C0000F8000131F7B9D17>I<
08E0100BF01017F0201FF0603E19C0380E80200080600100400300800300000600000E00000C00
001C00001C0000380000380000700000700000F00000F00001E00001E00001E00003C00003C000
03C00007C000078000078000030000141F799D17>I<001F000061800080C00100600300600600
600600600600600E00C00F00800F818007C30007E40003F80001F80003FC00047E00183F00300F
00200700600700C00300C00300C00300800600800600C00C00C008004030003060001F8000131F
7B9D17>I<001F0000718000C0C00180C00380E00700E00F00E00F01E01E01E01E01E01E01E01E
01C01C03C01C03C01C03C01C07C01C0F800C0F8006378003C700000F00000E00000E00001C0060
1C00F03800F07000E0600080C0004380003E0000131F7B9D17>I<070F1F1F0E00000000000000
00000070F8F8F0E008147B930E>I<00000200000006000000060000000E0000001E0000001E00
00003F0000002F0000004F0000004F0000008F0000010F0000010F0000020F0000020F0000040F
00000C0F0000080F0000100F0000100F0000200F80003FFF800040078000C00780008007800100
0780010007800200078002000780060007801E000F80FF807FF81D207E9F22>65
D<01FFFFC0001E00F0001E0078001E0038001E003C003C003C003C003C003C003C003C003C0078
007800780078007800F0007801E000F0078000FFFE0000F00F8000F003C001E001C001E001E001
E001E001E001E003C001E003C001E003C001E003C001C0078003C00780078007800F0007801E00
0F007800FFFFE0001E1F7D9E20>I<0000FE0200078186001C004C0038003C0060003C00C0001C
01C0001803800018070000180F0000181E0000101E0000103C0000003C00000078000000780000
007800000078000000F0000000F0000000F0000000F0000000F000008070000080700000807000
01003800010038000200180004000C001800060020000381C00000FE00001F217A9F21>I<01FF
FF80001E00E0001E0070001E0038001E001C003C001C003C000E003C000E003C000E0078000E00
78000E0078000E0078000E00F0001E00F0001E00F0001E00F0001E01E0003C01E0003C01E0003C
01E0007803C0007003C0007003C000E003C001C0078001C00780038007800E0007801C000F0070
00FFFFC0001F1F7D9E22>I<01FFFFFE001E001C001E000C001E0004001E0004003C0004003C00
04003C0004003C00040078080800780800007808000078180000F0300000FFF00000F0300000F0
300001E0200001E0200001E0200001E0001003C0002003C0002003C0004003C000400780008007
80018007800100078007000F001F00FFFFFE001F1F7D9E1F>I<01FFFFFC001E0038001E001800
1E0008001E0008003C0008003C0008003C0008003C000800780010007808000078080000780800
00F0100000F0300000FFF00000F0300001E0200001E0200001E0200001E0200003C0000003C000
0003C0000003C00000078000000780000007800000078000000F800000FFF800001E1F7D9E1E>
I<0000FC040007030C001C00980030007800E0007801C000380380003003800030070000300E00
00301E0000201E0000203C0000003C00000078000000780000007800000078000000F0000000F0
00FFF0F0000780F0000780F0000F0070000F0070000F0070000F0070001E0038001E0018003E00
1C002E000E00CC000383040000FC00001E217A9F23>I<01FFF0001F00001E00001E00001E0000
3C00003C00003C00003C0000780000780000780000780000F00000F00000F00000F00001E00001
E00001E00001E00003C00003C00003C00003C0000780000780000780000780000F8000FFF80014
1F7D9E12>73 D<001FFF0000F80000F00000F00000F00001E00001E00001E00001E00003C00003
C00003C00003C0000780000780000780000780000F00000F00000F00000F00001E00001E00301E
00781E00F83C00F83C00F0780080700040E00021C0001F000018207D9E18>I<01FFF03FE0001F
000F80001E000E00001E000800001E001000003C002000003C004000003C010000003C02000000
7804000000780800000078100000007830000000F0F0000000F1F8000000F278000000F4780000
01E83C000001F03C000001E03C000001E01E000003C01E000003C01E000003C00F000003C00F00
0007800F00000780078000078007800007800780000F8007C000FFF03FF800231F7D9E23>I<01
FFF800001F0000001E0000001E0000001E0000003C0000003C0000003C0000003C000000780000
00780000007800000078000000F0000000F0000000F0000000F0000001E0000001E0000001E000
0001E0008003C0010003C0010003C0030003C00200078006000780060007800C0007801C000F00
7800FFFFF800191F7D9E1D>I<01FE00007FC0001E0000FC00001E0000F8000017000178000017
0001780000270002F00000270004F00000270004F00000270008F00000470009E00000470011E0
0000470021E00000470021E00000870043C00000838043C00000838083C00000838083C0000103
810780000103820780000103820780000103840780000203840F00000203880F00000203900F00
000203900F00000401E01E00000401E01E00000401C01E00000C01801E00001C01803E0000FF81
03FFC0002A1F7D9E29>I<01FF007FE0001F000F00001F00040000178004000017800400002780
08000023C008000023C008000023C008000041E010000041E010000041F010000040F010000080
F0200000807820000080782000008078200001003C400001003C400001003C400001001E400002
001E800002001E800002000F800002000F800004000F0000040007000004000700000C00070000
1C00020000FF80020000231F7D9E22>I<0001FC0000070700001C01C0003000E000E0006001C0
00700380007007800038070000380E0000381E0000381C0000383C0000383C0000387800007878
0000787800007878000078F00000F0F00000F0F00000E0F00001E0F00001C0F00003C070000380
7000070078000F0038001E0038003C001C0070000E00E0000783800001FC00001D217A9F23>I<
01FFFF80001E00E0001E0070001E0038001E003C003C003C003C003C003C003C003C003C007800
7800780078007800F0007800E000F003C000F00F0000FFFC0000F0000001E0000001E0000001E0
000001E0000003C0000003C0000003C0000003C00000078000000780000007800000078000000F
800000FFF000001E1F7D9E1F>I<01FFFF00001E03C0001E00E0001E0070001E0078003C007800
3C0078003C0078003C0078007800F0007800F0007801E0007801C000F0070000F01E0000FFF000
00F0380001E01C0001E01E0001E00E0001E00F0003C01E0003C01E0003C01E0003C01E0007803C
0007803C0807803C0807803C100F801C10FFF00C20000007C01D207D9E21>82
D<0007E040001C18C0003005800060038000C0038001C001800180010003800100038001000380
01000380000003C0000003C0000003F8000001FF800001FFE000007FF000001FF0000001F80000
00780000007800000038000000380020003800200038002000300060007000600060006000E000
7000C000E8038000C606000081F800001A217D9F1A>I<0FFFFFF01E0780E01807802010078020
20078020200F0020600F0020400F0020400F0020801E0040001E0000001E0000001E0000003C00
00003C0000003C0000003C00000078000000780000007800000078000000F0000000F0000000F0
000000F0000001E0000001E0000001E0000001E0000003E00000FFFF00001C1F789E21>I<7FFC
1FF807C003C00780010007800100078001000F0002000F0002000F0002000F0002001E0004001E
0004001E0004001E0004003C0008003C0008003C0008003C000800780010007800100078001000
78001000F0002000F0002000F0002000F0004000F0004000700080007001000030020000380400
000C18000007E000001D20779E22>I<FFF007FC0F8000E00F0000C00F0000800F0001000F0001
000F0002000F0004000F0004000F80080007800800078010000780200007802000078040000780
400007808000078100000781000007C2000003C2000003C4000003C8000003C8000003D0000003
D0000003E0000003C0000003C000000380000001800000010000001E20779E22>I<FFF1FFC0FF
801F003E001C001F003C0018000F003C0010000F003C0010000F003C0020000F003C0020000F00
3E0040000F003E00C0000F005E0080000F005E0100000F009E0100000F009E0200000F011E0200
000F021E0400000F021E0400000F041E0800000F041E0800000F081E1000000F081E2000000F10
1E2000000F101E4000000F201E4000000F601E8000000FC01E80000007801F00000007801F0000
0007001E00000007001E00000006000C0000000600080000000400080000002920779E2D>I<00
FFF07FE0000F801F00000F001C00000F801000000780300000078020000007C040000003C08000
0003C100000003E200000001E400000001EC00000001F800000000F000000000F800000000F800
000000F8000000017C000000023C000000063C000000043E000000081E000000101E000000201F
000000400F000000800F000001800F8000010007800007000780001F000FC000FFC07FF800231F
7E9E22>I<020408102040408080B0F8F8F870070E779F0E>96 D<00F1800389C00707800E0380
1C03803C0380380700780700780700780700F00E00F00E00F00E00F00E20F01C40F01C40703C40
705C40308C800F070013147C9317>I<07803F8007000700070007000E000E000E000E001C001C
001CF01D0C3A0E3C0E380F380F700F700F700F700FE01EE01EE01EE01CE03CE038607060E031C0
1F0010207B9F15>I<007E0001C1000300800E07801E07801C07003C0200780000780000780000
F00000F00000F00000F00000F0000070010070020030040018380007C00011147C9315>I<0000
780003F80000700000700000700000700000E00000E00000E00000E00001C00001C000F1C00389
C00707800E03801C03803C0380380700780700780700780700F00E00F00E00F00E00F00E20F01C
40F01C40703C40705C40308C800F070015207C9F17>I<007C01C207010E011C013C013802780C
7BF07C00F000F000F000F0007000700170023804183807C010147C9315>I<00007800019C0003
3C00033C000718000700000700000E00000E00000E00000E00000E0001FFE0001C00001C00001C
00001C0000380000380000380000380000380000700000700000700000700000700000700000E0
0000E00000E00000E00000C00001C00001C0000180003180007B0000F300006600003C00001629
829F0E>I<003C6000E27001C1E00380E00700E00F00E00E01C01E01C01E01C01E01C03C03803C
03803C03803C03803C07003C07001C0F001C17000C2E0003CE00000E00000E00001C00001C0030
1C00783800F0700060E0003F8000141D7E9315>I<01E0000FE00001C00001C00001C00001C000
038000038000038000038000070000070000071E000763000E81800F01C00E01C00E01C01C0380
1C03801C03801C0380380700380700380700380E10700E20700C20701C20700C40E00CC0600700
14207D9F17>I<00C001E001E001C000000000000000000000000000000E003300230043804300
470087000E000E000E001C001C001C003840388030807080310033001C000B1F7C9E0E>I<0001
800003C00003C0000380000000000000000000000000000000000000000000003C000046000087
00008700010700010700020E00000E00000E00000E00001C00001C00001C00001C000038000038
0000380000380000700000700000700000700000E00000E00030E00079C000F180006300003C00
001228829E0E>I<01E0000FE00001C00001C00001C00001C00003800003800003800003800007
00000700000703C00704200E08E00E11E00E21E00E40C01C80001D00001E00001FC00038E00038
7000387000383840707080707080707080703100E03100601E0013207D9F15>I<03C01FC00380
03800380038007000700070007000E000E000E000E001C001C001C001C00380038003800380070
00700070007100E200E200E200E200640038000A207C9F0C>I<1C0F80F0002630C31800474064
0C004780680E004700700E004700700E008E00E01C000E00E01C000E00E01C000E00E01C001C01
C038001C01C038001C01C038001C01C0708038038071003803806100380380E100380380620070
07006600300300380021147C9325>I<1C0F802630C04740604780604700704700708E00E00E00
E00E00E00E00E01C01C01C01C01C01C01C03843803883803083807083803107003303001C01614
7C931A>I<007C0001C3000301800E01C01E01C01C01E03C01E07801E07801E07801E0F003C0F0
03C0F003C0F00780F00700700F00700E0030180018700007C00013147C9317>I<01C1E0026218
04741C04781C04701E04701E08E01E00E01E00E01E00E01E01C03C01C03C01C03C01C038038078
0380700380E003C1C0072380071E000700000700000E00000E00000E00000E00001C00001C0000
FFC000171D809317>I<00F0400388C00705800E03801C03803C03803807007807007807007807
00F00E00F00E00F00E00F00E00F01C00F01C00703C00705C0030B8000F38000038000038000070
0000700000700000700000E00000E0000FFE00121D7C9315>I<1C1E0026610047838047878047
07804703008E00000E00000E00000E00001C00001C00001C00001C000038000038000038000038
000070000030000011147C9313>I<00FC030206010C030C070C060C000F800FF007F803FC003E
000E700EF00CF00CE008401020601F8010147D9313>I<018001C0038003800380038007000700
FFF007000E000E000E000E001C001C001C001C003800380038003820704070407080708031001E
000C1C7C9B0F>I<0E00C03300E02301C04381C04301C04701C08703800E03800E03800E03801C
07001C07001C07001C07101C0E20180E20180E201C1E200C264007C38014147C9318>I<0E0380
3307802307C04383C04301C04700C08700800E00800E00800E00801C01001C01001C01001C0200
1C02001C04001C04001C08000E300003C00012147C9315>I<0E00C1C03300E3C02301C3E04381
C1E04301C0E04701C060870380400E0380400E0380400E0380401C0700801C0700801C0700801C
0701001C0701001C0602001C0F02000C0F04000E13080003E1F0001B147C931E>I<0383800CC4
401068E01071E02071E02070C040E00000E00000E00000E00001C00001C00001C00001C0406380
80F38080F38100E5810084C60078780013147D9315>I<0E00C03300E02301C04381C04301C047
01C08703800E03800E03800E03801C07001C07001C07001C07001C0E00180E00180E001C1E000C
3C0007DC00001C00001C00003800F03800F07000E06000C0C0004380003E0000131D7C9316>I<
01C04003E08007F1800C1F00080200000400000800001000002000004000008000010000020000
0401000802001002003E0C0063FC0041F80080E00012147D9313>I E /Fo
88 128 df<001F83E000F06E3001C078780380F8780300F0300700700007007000070070000700
7000070070000700700007007000FFFFFF80070070000700700007007000070070000700700007
007000070070000700700007007000070070000700700007007000070070000700700007007000
0700700007007000070070007FE3FF001D20809F1B>11 D<003F0000E0C001C0C00381E00701E0
0701E0070000070000070000070000070000070000FFFFE00700E00700E00700E00700E00700E0
0700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E0
7FC3FE1720809F19>I<003FE000E0E001C1E00381E00700E00700E00700E00700E00700E00700
E00700E00700E0FFFFE00700E00700E00700E00700E00700E00700E00700E00700E00700E00700
E00700E00700E00700E00700E00700E00700E00700E00700E07FE7FE1720809F19>I<001F81F8
0000F04F040001C07C06000380F80F000300F00F000700F00F0007007000000700700000070070
0000070070000007007000000700700000FFFFFFFF000700700700070070070007007007000700
700700070070070007007007000700700700070070070007007007000700700700070070070007
007007000700700700070070070007007007000700700700070070070007007007007FE3FE3FF0
2420809F26>I<70F8F8F8F8F8F8F8707070707070707070702020202020000000000070F8F8F8
7005217CA00D>33 D<7038F87CFC7EFC7E743A0402040204020804080410081008201040200F0E
7E9F17>I<0F0000301880003030600060703001C0602C06C06013F980E0100300E0100300E010
0600E0100C00E0100C00E01018006010300060203000702060003040C0001880C0000F01800000
0300E0000303100006060800060604000C0C0400180C0400181C0200301C0200601C0200601C02
00C01C0201801C0201801C0203000C0406000C04060006040C00060818000310080000E01F257D
A126>37 D<70F8FCFC74040404080810102040060E7C9F0D>39 D<002000400080010002000600
0C000C00180018003000300030007000600060006000E000E000E000E000E000E000E000E000E0
00E000E000E0006000600060007000300030003000180018000C000C0006000200010000800040
00200B2E7DA112>I<800040002000100008000C00060006000300030001800180018001C000C0
00C000C000E000E000E000E000E000E000E000E000E000E000E000E000C000C000C001C0018001
80018003000300060006000C00080010002000400080000B2E7DA112>I<000600000006000000
060000000600000006000000060000000600000006000000060000000600000006000000060000
000600000006000000060000FFFFFFF0FFFFFFF000060000000600000006000000060000000600
000006000000060000000600000006000000060000000600000006000000060000000600000006
00001C207D9A23>43 D<70F8FCFC74040404080810102040060E7C840D>I<FFC0FFC00A027F8A
0F>I<70F8F8F87005057C840D>I<000100030003000600060006000C000C000C00180018001800
300030003000600060006000C000C000C00180018001800300030003000600060006000C000C00
0C00180018001800300030003000600060006000C000C000C000102D7DA117>I<03F0000E1C00
1C0E00180600380700700380700380700380700380F003C0F003C0F003C0F003C0F003C0F003C0
F003C0F003C0F003C0F003C0F003C0F003C0F003C0700380700380700380780780380700180600
1C0E000E1C0003F000121F7E9D17>I<018003800F80F380038003800380038003800380038003
80038003800380038003800380038003800380038003800380038003800380038007C0FFFE0F1E
7C9D17>I<03F0000C1C00100E00200700400780800780F007C0F803C0F803C0F803C02007C000
07C0000780000780000F00000E00001C0000380000700000600000C0000180000300000600400C
00401800401000803FFF807FFF80FFFF80121E7E9D17>I<03F0000C1C00100E00200F00780F80
780780780780380F80000F80000F00000F00000E00001C0000380003F000003C00000E00000F00
0007800007800007C02007C0F807C0F807C0F807C0F00780400780400F00200E001C3C0003F000
121F7E9D17>I<000600000600000E00000E00001E00002E00002E00004E00008E00008E00010E
00020E00020E00040E00080E00080E00100E00200E00200E00400E00C00E00FFFFF0000E00000E
00000E00000E00000E00000E00000E0000FFE0141E7F9D17>I<1803001FFE001FFC001FF8001F
E00010000010000010000010000010000010000011F000161C00180E0010070010078000038000
03800003C00003C00003C07003C0F003C0F003C0E00380400380400700200600100E000C380003
E000121F7E9D17>I<007C000182000701000E03800C07801C0780380300380000780000700000
700000F1F000F21C00F40600F80700F80380F80380F003C0F003C0F003C0F003C0F003C07003C0
7003C07003803803803807001807000C0E00061C0001F000121F7E9D17>I<4000007FFFC07FFF
807FFF8040010080020080020080040000080000080000100000200000200000400000400000C0
0000C00001C0000180000380000380000380000380000780000780000780000780000780000780
00078000030000121F7D9D17>I<03F0000C0C0010060030030020018060018060018060018070
01807803003E03003F06001FC8000FF00003F80007FC000C7E00103F00300F806003804001C0C0
01C0C000C0C000C0C000C0C000806001802001001002000C0C0003F000121F7E9D17>I<03F000
0E18001C0C00380600380700700700700380F00380F00380F003C0F003C0F003C0F003C0F003C0
7007C07007C03807C0180BC00E13C003E3C0000380000380000380000700300700780600780E00
700C002018001070000FC000121F7E9D17>I<70F8F8F8700000000000000000000070F8F8F870
05147C930D>I<70F8F8F8700000000000000000000070F0F8F878080808101010202040051D7C
930D>I<7FFFFFE0FFFFFFF0000000000000000000000000000000000000000000000000000000
0000000000FFFFFFF07FFFFFE01C0C7D9023>61 D<0FC0307040384038E03CF03CF03C603C0038
007000E000C001800180010003000200020002000200020002000000000000000000000007000F
800F800F8007000E207D9F15>63 D<000100000003800000038000000380000007C0000007C000
0007C0000009E0000009E0000009E0000010F0000010F0000010F0000020780000207800002078
0000403C0000403C0000403C0000801E0000801E0000FFFE0001000F0001000F0001000F000200
07800200078002000780040003C00E0003C01F0007E0FFC03FFE1F207F9F22>65
D<FFFFE0000F80380007801E0007801F0007800F0007800F8007800F8007800F8007800F800780
0F8007800F0007801F0007801E0007803C0007FFF00007803C0007801E0007800F0007800F8007
800780078007C0078007C0078007C0078007C0078007C00780078007800F8007800F0007801F00
0F803C00FFFFF0001A1F7E9E20>I<000FC040007030C001C009C0038005C0070003C00E0001C0
1E0000C01C0000C03C0000C07C0000407C00004078000040F8000000F8000000F8000000F80000
00F8000000F8000000F8000000F8000000F8000000780000007C0000407C0000403C0000401C00
00401E0000800E000080070001000380020001C0040000703800000FC0001A217D9F21>I<FFFF
E0000F803C0007801E000780070007800380078003C0078001E0078001E0078001F0078000F007
8000F0078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F8078000F8
078000F0078000F0078000F0078001E0078001E0078003C0078003800780070007800E000F803C
00FFFFE0001D1F7E9E23>I<FFFFFF000F800F0007800300078003000780010007800180078000
800780008007800080078080800780800007808000078080000781800007FF8000078180000780
800007808000078080000780800007800020078000200780002007800040078000400780004007
8000C0078000C0078001800F800F80FFFFFF801B1F7E9E1F>I<FFFFFF000F800F000780030007
800300078001000780018007800080078000800780008007800080078080000780800007808000
078080000781800007FF8000078180000780800007808000078080000780800007800000078000
000780000007800000078000000780000007800000078000000FC00000FFFE0000191F7E9E1E>
I<000FE0200078186000E004E0038002E0070001E00F0000E01E0000601E0000603C0000603C00
00207C00002078000020F8000000F8000000F8000000F8000000F8000000F8000000F8000000F8
007FFCF80003E0780001E07C0001E03C0001E03C0001E01E0001E01E0001E00F0001E0070001E0
038002E000E0046000781820000FE0001E217D9F24>I<FFF8FFF80F800F8007800F0007800F00
07800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F
0007FFFF0007800F0007800F0007800F0007800F0007800F0007800F0007800F0007800F000780
0F0007800F0007800F0007800F0007800F0007800F000F800F80FFF8FFF81D1F7E9E22>I<FFFC
0FC007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800FC0FFFC0E1F7F9E10>I<0FFFC0007C00003C00003C
00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C00003C
00003C00003C00003C00003C00003C00003C00203C00F83C00F83C00F83C00F038004078004070
0030E0000F800012207E9E17>I<FFFC0FFC0FC003E00780018007800100078002000780040007
80080007801000078020000780400007808000078100000783000007878000078F80000793C000
0791E00007A1E00007C0F0000780F0000780780007803C0007803C0007801E0007801E0007800F
000780078007800780078007C00FC007E0FFFC3FFC1E1F7E9E23>I<FFFE000FC0000780000780
000780000780000780000780000780000780000780000780000780000780000780000780000780
0007800007800007800007800207800207800207800207800607800407800407800C07801C0F80
7CFFFFFC171F7E9E1C>I<FF80001FF80F80001F800780001F0005C0002F0005C0002F0005C000
2F0004E0004F0004E0004F000470008F000470008F000470008F000438010F000438010F000438
010F00041C020F00041C020F00041C020F00040E040F00040E040F00040E040F000407080F0004
07080F000407080F000403900F000403900F000401E00F000401E00F000401E00F000E00C00F00
1F00C01F80FFE0C1FFF8251F7E9E2A>I<FF803FF807C007C007C0038005E0010005E0010004F0
01000478010004780100043C0100043C0100041E0100040F0100040F0100040781000407810004
03C1000401E1000401E1000400F1000400F1000400790004003D0004003D0004001F0004001F00
04000F0004000700040007000E0003001F000300FFE001001D1F7E9E22>I<001F800000F0F000
01C0380007801E000F000F000E0007001E0007803C0003C03C0003C07C0003E0780001E0780001
E0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F07800
01E07C0003E07C0003E03C0003C03C0003C01E0007800E0007000F000F0007801E0001C0380000
F0F000001F80001C217D9F23>I<FFFFE0000F80780007801C0007801E0007800F0007800F8007
800F8007800F8007800F8007800F8007800F8007800F0007801E0007801C000780780007FFE000
078000000780000007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000000FC00000FFFC0000191F7E9E1F>I<001F800000F0F00001C038
0007801E000F000F000E0007001E0007803C0003C03C0003C07C0003E07C0003E0780001E0F800
01F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0F80001F0780001E078
0001E07C0003E03C0003C03C0F03C01E1087800E2047000F204F0007A03E0001E0380000F0F010
001FB01000003010000038300000387000003FF000001FE000001FE000000FC0000007801C297D
9F23>I<FFFF80000F80F0000780780007803C0007801E0007801E0007801F0007801F0007801F
0007801F0007801E0007801E0007803C00078078000780F00007FF80000781C0000780E0000780
F0000780700007807800078078000780780007807C0007807C0007807C0007807C0407807E0407
803E040FC01E08FFFC0F10000003E01E207E9E21>I<07E0800C19801007803003806001806001
80E00180E00080E00080E00080F00000F000007800007F00003FF0001FFC000FFE0003FF00001F
800007800003C00003C00001C08001C08001C08001C08001C0C00180C00380E00300F00600CE0C
0081F80012217D9F19>I<7FFFFFE0780F01E0600F0060400F0020400F0020C00F0030800F0010
800F0010800F0010800F0010000F0000000F0000000F0000000F0000000F0000000F0000000F00
00000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F0000000F
0000000F0000000F0000001F800007FFFE001C1F7E9E21>I<FFFC3FF80FC007C0078003800780
010007800100078001000780010007800100078001000780010007800100078001000780010007
800100078001000780010007800100078001000780010007800100078001000780010007800100
07800100038002000380020001C0020001C0040000E008000070180000382000000FC0001D207E
9E22>I<FFF003FE1F8000F80F0000600F800060078000400780004003C0008003C0008003C000
8001E0010001E0010001F0010000F0020000F0020000F806000078040000780400003C0800003C
0800003C0800001E1000001E1000001F3000000F2000000F20000007C0000007C0000007C00000
0380000003800000038000000100001F207F9E22>I<FFF07FF81FF01F800FC007C00F00078003
800F00078001000F0007C00100078007C00200078007C00200078007C0020003C009E0040003C0
09E0040003C009E0040003E010F00C0001E010F0080001E010F0080001F02078080000F0207810
0000F02078100000F0403C10000078403C20000078403C20000078C03E2000003C801E4000003C
801E4000003C801E4000001F000F8000001F000F8000001F000F8000001E00078000000E000700
00000E00070000000C000300000004000200002C207F9E2F>I<7FF83FF80FE00FC007C0070003
C0020001E0040001F00C0000F0080000781000007C1000003C2000003E4000001E4000000F8000
000F8000000780000003C0000007E0000005E0000009F0000018F8000010780000207C0000603C
0000401E0000801F0001800F0001000780020007C0070003C01F8007E0FFE01FFE1F1F7F9E22>
I<FFF003FF1F8000F80F8000600780004007C0004003E0008001E0008001F0010000F0030000F8
0200007C0400003C0400003E0800001E0800001F1000000FB0000007A0000007C0000003C00000
03C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C0000003C000
0007C000007FFE00201F7F9E22>I<7FFFF87C00F87000F06001E04001E0C003C0C003C0800780
800F80800F00001E00001E00003C00003C0000780000F80000F00001E00001E00003C00403C004
0780040F80040F000C1E000C1E00083C00183C0018780038F801F8FFFFF8161F7D9E1C>I<FEFE
C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0C0
C0C0FEFE072D7CA10D>I<080410082010201040204020804080408040B85CFC7EFC7E7C3E381C
0F0E7B9F17>I<FEFE060606060606060606060606060606060606060606060606060606060606
0606060606060606060606FEFE072D7FA10D>I<081020204040808080B8FCFC7C38060E7D9F0D>
96 D<1FE000303000781800781C00300E00000E00000E00000E0000FE00078E001E0E00380E00
780E00F00E10F00E10F00E10F01E10781E103867200F83C014147E9317>I<0E0000FE00000E00
000E00000E00000E00000E00000E00000E00000E00000E00000E00000E3E000EC3800F01C00F00
E00E00E00E00700E00700E00780E00780E00780E00780E00780E00780E00700E00700E00E00F00
E00D01C00CC300083E0015207F9F19>I<03F80E0C1C1E381E380C70007000F000F000F000F000
F000F00070007000380138011C020E0C03F010147E9314>I<000380003F800003800003800003
8000038000038000038000038000038000038000038003E380061B801C07803803803803807003
80700380F00380F00380F00380F00380F00380F003807003807003803803803807801C07800E1B
8003E3F815207E9F19>I<03F0000E1C001C0E00380700380700700700700380F00380F00380FF
FF80F00000F00000F000007000007000003800801800800C010007060001F80011147F9314>I<
007C00C6018F038F07060700070007000700070007000700FFF007000700070007000700070007
00070007000700070007000700070007000700070007007FF01020809F0E>I<0000E003E3300E
3C301C1C30380E00780F00780F00780F00780F00780F00380E001C1C001E380033E00020000020
00003000003000003FFE001FFF800FFFC03001E0600070C00030C00030C00030C0003060006030
00C01C038003FC00141F7F9417>I<0E0000FE00000E00000E00000E00000E00000E00000E0000
0E00000E00000E00000E00000E3E000E43000E81800F01C00F01C00E01C00E01C00E01C00E01C0
0E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0FFE7FC16207F9F19>
I<1C001E003E001E001C000000000000000000000000000E007E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E00FFC00A1F809E0C>I<00E001F001F001F0
00E0000000000000000000000000007007F000F000700070007000700070007000700070007000
70007000700070007000700070007000700070007000706070F060F0C061803F000C28829E0E>
I<0E0000FE00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E0F
F00E03C00E03000E02000E04000E08000E10000E30000E70000EF8000F38000E1C000E1E000E0E
000E07000E07800E03800E03C00E03E0FFCFF815207F9F18>I<0E00FE000E000E000E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E00FFE00B20809F0C>I<0E1F01F000FE618618000E81C81C000F00F00E00
0F00F00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E
000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E000E00E00E00FFE7FE
7FE023147F9326>I<0E3E00FE43000E81800F01C00F01C00E01C00E01C00E01C00E01C00E01C0
0E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C0FFE7FC16147F9319>I<01F8
00070E001C03803801C03801C07000E07000E0F000F0F000F0F000F0F000F0F000F0F000F07000
E07000E03801C03801C01C0380070E0001F80014147F9317>I<0E3E00FEC3800F01C00F00E00E
00E00E00F00E00700E00780E00780E00780E00780E00780E00780E00700E00F00E00E00F01E00F
01C00EC3000E3E000E00000E00000E00000E00000E00000E00000E00000E0000FFE000151D7F93
19>I<03E0800619801C05803C0780380380780380700380F00380F00380F00380F00380F00380
F003807003807803803803803807801C0B800E138003E380000380000380000380000380000380
000380000380000380003FF8151D7E9318>I<0E78FE8C0F1E0F1E0F0C0E000E000E000E000E00
0E000E000E000E000E000E000E000E000E00FFE00F147F9312>I<1F9030704030C010C010C010
E00078007F803FE00FF00070803880188018C018C018E030D0608F800D147E9312>I<02000200
0200060006000E000E003E00FFF80E000E000E000E000E000E000E000E000E000E000E000E080E
080E080E080E080610031001E00D1C7F9B12>I<0E01C0FE1FC00E01C00E01C00E01C00E01C00E
01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E01C00E03C00603C0030DC001
F1FC16147F9319>I<FF83F81E01E01C00C00E00800E00800E0080070100070100038200038200
03820001C40001C40001EC0000E80000E80000700000700000700000200015147F9318>I<FF9F
E1FC3C0780701C0300601C0380200E0380400E0380400E03C0400707C0800704C0800704E08003
8861000388710003C8730001D0320001D03A0000F03C0000E01C0000E01C000060180000400800
1E147F9321>I<7FC3FC0F01E00701C007018003810001C20000E40000EC00007800003800003C
00007C00004E000087000107000303800201C00601E01E01E0FF07FE1714809318>I<FF83F81E
01E01C00C00E00800E00800E008007010007010003820003820003820001C40001C40001EC0000
E80000E800007000007000007000002000002000004000004000004000F08000F08000F1000062
00003C0000151D7F9318>I<3FFF380E200E201C40384078407000E001E001C00380078007010E
011E011C0338027006700EFFFE10147F9314>I<FFFFFC1601808C17>I<FFFFFFFFFFF02C01808C
2D>I<30307878F87C787830300E057C9E17>127 D E /Fp 58 123 df<000FF83F00007FFDFFC0
01F81FE3E003E03F87E007C03F87E00F803F07E00F803F03C00F801F00000F801F00000F801F00
000F801F00000F801F00000F801F0000FFFFFFFC00FFFFFFFC000F801F00000F801F00000F801F
00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F80
1F00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00000F801F00007F
F0FFF0007FF0FFF00023237FA221>11 D<000FF000007FFC0001F80E0003E01F0007C03F000F80
3F000F803F000F801E000F800C000F8000000F8000000F8000000F800000FFFFFF00FFFFFF000F
801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F00
0F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F007FF0FFE07FF0FF
E01B237FA21F>I<000FFF00007FFF0001F83F0003E03F0007C03F000F803F000F801F000F801F
000F801F000F801F000F801F000F801F000F801F00FFFFFF00FFFFFF000F801F000F801F000F80
1F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F801F000F
801F000F801F000F801F000F801F000F801F000F801F007FF0FFE07FF0FFE01B237FA21F>I<00
07F80FF000007FFE7FFC0001F80FF80E0003E00FE01F0007C01FC03F000F801F803F000F801F80
3F000F800F801E000F800F800C000F800F8000000F800F8000000F800F8000000F800F800000FF
FFFFFFFF00FFFFFFFFFF000F800F801F000F800F801F000F800F801F000F800F801F000F800F80
1F000F800F801F000F800F801F000F800F801F000F800F801F000F800F801F000F800F801F000F
800F801F000F800F801F000F800F801F000F800F801F000F800F801F000F800F801F000F800F80
1F007FF07FF0FFE07FF07FF0FFE02B237FA22F>I<FFFCFFFCFFFCFFFC0E047F8C13>45
D<387CFEFEFE7C3807077C8610>I<00180000780001F800FFF800FFF80001F80001F80001F800
01F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F80001F800
01F80001F80001F80001F80001F80001F80001F80001F80001F8007FFFE07FFFE013207C9F1C>
49 D<03FC000FFF003C1FC07007E07C07F0FE03F0FE03F8FE03F8FE01F87C01F83803F80003F8
0003F00003F00007E00007C0000F80001F00003E0000380000700000E01801C018038018070018
0E00380FFFF01FFFF03FFFF07FFFF0FFFFF0FFFFF015207D9F1C>I<00FE0007FFC00F07E01E03
F03F03F03F81F83F81F83F81F81F03F81F03F00003F00003E00007C0001F8001FE0001FF000007
C00001F00001F80000FC0000FC3C00FE7E00FEFF00FEFF00FEFF00FEFF00FC7E01FC7801F81E07
F00FFFC001FE0017207E9F1C>I<0000E00001E00003E00003E00007E0000FE0001FE0001FE000
37E00077E000E7E001C7E00187E00307E00707E00E07E00C07E01807E03807E07007E0E007E0FF
FFFEFFFFFE0007E00007E00007E00007E00007E00007E00007E000FFFE00FFFE17207E9F1C>I<
1000201E01E01FFFC01FFF801FFF001FFE001FF8001BC00018000018000018000018000019FC00
1FFF001E0FC01807E01803E00003F00003F00003F80003F83803F87C03F8FE03F8FE03F8FC03F0
FC03F07007E03007C01C1F800FFF0003F80015207D9F1C>I<001F8000FFE003F07007C0F00F01
F81F01F83E01F83E01F87E00F07C00007C0000FC0800FC7FC0FCFFE0FD80F0FF00F8FE007CFE00
7CFC007EFC007EFC007EFC007E7C007E7C007E7C007E3C007C3E007C1E00F80F00F00783E003FF
C000FF0017207E9F1C>I<6000007800007FFFFE7FFFFE7FFFFC7FFFF87FFFF87FFFF0E00060E0
00C0C00180C00300C00300000600000C00001C0000180000380000780000780000F00000F00000
F00001F00001F00001F00003F00003F00003F00003F00003F00003F00003F00001E00017227DA1
1C>I<00FE0003FFC00703E00E00F01C00F01C00783C00783E00783F00783F80783FE0F01FF9E0
1FFFC00FFF8007FFC003FFE007FFF01E7FF83C1FFC7807FC7801FEF000FEF0003EF0001EF0001E
F0001CF8001C7800383C00381F01F00FFFC001FF0017207E9F1C>I<01FE0007FF800F83E01E01
F03E00F07C00F87C0078FC007CFC007CFC007CFC007EFC007EFC007EFC007E7C00FE7C00FE3E01
FE1E037E0FFE7E07FC7E00207E00007C00007C1E007C3F00F83F00F83F00F03F01E01E03C01C0F
800FFE0003F80017207E9F1C>I<000070000000007000000000F800000000F800000000F80000
0001FC00000001FC00000003FE00000003FE00000003FE00000006FF000000067F0000000E7F80
00000C3F8000000C3F800000183FC00000181FC00000381FE00000300FE00000300FE00000600F
F000006007F00000E007F80000FFFFF80000FFFFF800018001FC00018001FC00038001FE000300
00FE00030000FE000600007F000600007F00FFE00FFFF8FFE00FFFF825227EA12A>65
D<FFFFFF8000FFFFFFE00007F001F80007F000FC0007F0007E0007F0007E0007F0007F0007F000
7F0007F0007F0007F0007F0007F0007F0007F0007E0007F000FE0007F000FC0007F003F80007FF
FFF00007FFFFF00007F001FC0007F0007E0007F0003F0007F0003F8007F0001F8007F0001FC007
F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0003F8007F0003F8007F0007F00
07F001FE00FFFFFFF800FFFFFFC00022227EA128>I<0003FE0080001FFF818000FF01E38001F8
003F8003E0001F8007C0000F800F800007801F800007803F000003803F000003807F000001807E
000001807E00000180FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000
FE00000000FE000000007E000000007E000001807F000001803F000001803F000003801F800003
000F8000030007C000060003F0000C0001F800380000FF00F000001FFFC0000003FE000021227D
A128>I<FFFFFF8000FFFFFFF00007F003FC0007F0007E0007F0003F0007F0001F8007F0000FC0
07F00007E007F00007E007F00007F007F00003F007F00003F007F00003F007F00003F807F00003
F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F00003F807F000
03F007F00003F007F00003F007F00007E007F00007E007F0000FC007F0001F8007F0003F0007F0
007E0007F003FC00FFFFFFF000FFFFFF800025227EA12B>I<FFFFFFFCFFFFFFFC07F000FC07F0
003C07F0001C07F0000C07F0000E07F0000E07F0000607F0180607F0180607F0180607F0180007
F0380007F0780007FFF80007FFF80007F0780007F0380007F0180007F0180007F0180307F01803
07F0000307F0000607F0000607F0000607F0000E07F0000E07F0001E07F0003E07F001FCFFFFFF
FCFFFFFFFC20227EA125>I<FFFFFFF8FFFFFFF807F001F807F0007807F0003807F0001807F000
1C07F0001C07F0000C07F0000C07F0180C07F0180C07F0180007F0180007F0380007F0780007FF
F80007FFF80007F0780007F0380007F0180007F0180007F0180007F0180007F0000007F0000007
F0000007F0000007F0000007F0000007F0000007F00000FFFFE000FFFFE0001E227EA123>I<FF
FF83FFFEFFFF83FFFE07F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC0
07F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007FFFFFF
C007FFFFFFC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F000
1FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0001FC007F0
001FC0FFFF83FFFEFFFF83FFFE27227EA12C>72 D<FFFFE0FFFFE003F80003F80003F80003F800
03F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F800
03F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F80003F800
FFFFE0FFFFE013227FA115>I<FFFF803FFCFFFF803FFC07F000038007F000070007F0000E0007
F000180007F000300007F000E00007F001C00007F003800007F007000007F00E000007F0180000
07F038000007F0FC000007F1FE000007F3FE000007F77F000007FE7F800007F83F800007F01FC0
0007F01FE00007F00FE00007F007F00007F007F80007F003F80007F001FC0007F001FE0007F000
FF0007F0007F0007F0007F8007F0003FC0FFFF83FFFCFFFF83FFFC26227EA12C>75
D<FFFFE000FFFFE00007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0
000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007
F0000007F0000007F0001807F0001807F0001807F0001807F0003807F0003807F0007007F00070
07F000F007F001F007F007F0FFFFFFF0FFFFFFF01D227EA122>I<FFF8001FFEFFFC001FFE07FC
0000C007FE0000C006FF0000C0067F8000C0063FC000C0061FE000C0060FE000C0060FF000C006
07F800C00603FC00C00601FE00C00600FE00C00600FF00C006007F80C006003FC0C006001FE0C0
06000FF0C0060007F0C0060007F8C0060003FCC0060001FEC0060000FFC00600007FC00600007F
C00600003FC00600001FC00600000FC006000007C006000003C006000003C0FFF00001C0FFF000
00C027227EA12C>78 D<0007FC0000003FFF800000FC07E00003F001F80007E000FC000FC0007E
001F80003F001F80003F003F00001F803F00001F807F00001FC07E00000FC07E00000FC0FE0000
0FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00000FE0FE00
000FE07E00000FC07F00001FC07F00001FC03F00001F803F80003F801F80003F000FC0007E0007
E000FC0003F001F80000FC07E000003FFF80000007FC000023227DA12A>I<FFFFFF00FFFFFFE0
07F007F007F001FC07F000FC07F0007E07F0007E07F0007F07F0007F07F0007F07F0007F07F000
7F07F0007E07F0007E07F000FC07F001FC07F007F007FFFFE007FFFF0007F0000007F0000007F0
000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007F0000007
F00000FFFF8000FFFF800020227EA126>I<FFFFFE0000FFFFFFC00007F007F00007F001F80007
F000FC0007F0007E0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F0007F00
07F0007E0007F000FC0007F001F80007F007F00007FFFFC00007FFFF800007F00FE00007F007F0
0007F003F80007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001FC0007F001
FC0007F001FC0007F001FC0607F000FE0607F000FF0CFFFF803FF8FFFF800FF027227EA12A>82
D<01FC0407FF8C1F03FC3C007C7C003C78001C78001CF8000CF8000CFC000CFC0000FF0000FFE0
007FFF007FFFC03FFFF01FFFF80FFFFC03FFFE003FFE0003FF00007F00003F00003FC0001FC000
1FC0001FE0001EE0001EF0003CFC003CFF00F8C7FFE080FF8018227DA11F>I<7FFFFFFF807FFF
FFFF807E03F80F807803F807807003F803806003F80180E003F801C0E003F801C0C003F800C0C0
03F800C0C003F800C0C003F800C00003F800000003F800000003F800000003F800000003F80000
0003F800000003F800000003F800000003F800000003F800000003F800000003F800000003F800
000003F800000003F800000003F800000003F800000003F800000003F800000003F8000003FFFF
F80003FFFFF80022227EA127>I<FFFF803FFCFFFF803FFC07F000018007F000018007F0000180
07F000018007F000018007F000018007F000018007F000018007F000018007F000018007F00001
8007F000018007F000018007F000018007F000018007F000018007F000018007F000018007F000
018007F000018007F000018007F000018007F000018007F000018003F000030003F800030001F8
00060000FC000E00007E001C00003F80F800000FFFE0000001FF000026227EA12B>I<FFFF800F
FEFFFF800FFE07F00000C007F80000C003F800018003F800018001FC00030001FC00030001FE00
070000FE00060000FF000600007F000C00007F800C00003F801800003F801800003FC03800001F
C03000001FE03000000FE06000000FF060000007F0C0000007F0C0000007F9C0000003F9800000
03FD80000001FF00000001FF00000000FE00000000FE00000000FE000000007C000000007C0000
0000380000000038000027227FA12A>I<FFFF0FFFF01FFEFFFF0FFFF01FFE0FF000FF0000E007
F0007F0000C007F0007F0000C003F8007F80018003F8003F80018003FC003F80038001FC003FC0
030001FC003FC0030000FE007FE0060000FE006FE0060000FF006FE00600007F00C7F00C00007F
00C7F00C00007F80C7F81C00003F8183F81800003F8183F81800001FC383FC3000001FC301FC30
00001FE301FC3000000FE600FE6000000FE600FE6000000FF600FFE0000007FC007FC0000007FC
007FC0000003FC007F80000003F8003F80000003F8003F80000001F0001F00000001F0001F0000
0000F0001E00000000E0000E00000000E0000E000037227FA13A>I<07FC001FFF803F07C03F03
E03F01E03F01F01E01F00001F00001F0003FF003FDF01FC1F03F01F07E01F0FC01F0FC01F0FC01
F0FC01F07E02F07E0CF81FF87F07E03F18167E951B>97 D<FF000000FF0000001F0000001F0000
001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0F
E0001F3FF8001FF07C001F801E001F001F001F000F801F000F801F000FC01F000FC01F000FC01F
000FC01F000FC01F000FC01F000FC01F000FC01F000F801F001F801F801F001FC03E001EE07C00
1C3FF800180FC0001A237EA21F>I<00FF8007FFE00F83F01F03F03E03F07E03F07C01E07C0000
FC0000FC0000FC0000FC0000FC0000FC00007C00007E00007E00003E00301F00600FC0E007FF80
00FE0014167E9519>I<0001FE000001FE0000003E0000003E0000003E0000003E0000003E0000
003E0000003E0000003E0000003E0000003E0000003E0001FC3E0007FFBE000F81FE001F007E00
3E003E007E003E007C003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC003E00FC003E
00FC003E007C003E007C003E003E007E001E00FE000F83BE0007FF3FC001FC3FC01A237EA21F>
I<00FE0007FF800F87C01E01E03E01F07C00F07C00F8FC00F8FC00F8FFFFF8FFFFF8FC0000FC00
00FC00007C00007C00007E00003E00181F00300FC07003FFC000FF0015167E951A>I<003F8000
FFC001E3E003C7E007C7E00F87E00F83C00F80000F80000F80000F80000F80000F8000FFFC00FF
FC000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F
80000F80000F80000F80000F80000F80007FF8007FF80013237FA211>I<03FC1E0FFF7F1F0F8F
3E07CF3C03C07C03E07C03E07C03E07C03E07C03E03C03C03E07C01F0F801FFF0013FC00300000
3000003800003FFF801FFFF00FFFF81FFFFC3800FC70003EF0001EF0001EF0001EF0001E78003C
7C007C3F01F80FFFE001FF0018217E951C>I<FF000000FF0000001F0000001F0000001F000000
1F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F07E0001F1FF8
001F307C001F403C001F803E001F803E001F003E001F003E001F003E001F003E001F003E001F00
3E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E00FFE1FFC0FF
E1FFC01A237EA21F>I<1C003F007F007F007F003F001C000000000000000000000000000000FF
00FF001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
FFE0FFE00B247EA310>I<FF000000FF0000001F0000001F0000001F0000001F0000001F000000
1F0000001F0000001F0000001F0000001F0000001F0000001F00FF801F00FF801F0038001F0060
001F01C0001F0380001F0700001F0E00001F1C00001F7E00001FFF00001FCF00001F0F80001F07
C0001F03E0001F01E0001F01F0001F00F8001F007C001F003C00FFE0FFC0FFE0FFC01A237EA21E
>107 D<FF00FF001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00FFE0FFE00B237EA2
10>I<FF07F007F000FF1FFC1FFC001F303E303E001F403E403E001F801F801F001F801F801F00
1F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F
001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F001F00
1F001F001F00FFE0FFE0FFE0FFE0FFE0FFE02B167E9530>I<FF07E000FF1FF8001F307C001F40
3C001F803E001F803E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F003E00FFE1FFC0FFE1FFC01A167E95
1F>I<00FE0007FFC00F83E01E00F03E00F87C007C7C007C7C007CFC007EFC007EFC007EFC007E
FC007EFC007EFC007E7C007C7C007C3E00F81F01F00F83E007FFC000FE0017167E951C>I<FF0F
E000FF3FF8001FF07C001F803E001F001F001F001F801F001F801F000FC01F000FC01F000FC01F
000FC01F000FC01F000FC01F000FC01F000FC01F001F801F001F801F803F001FC03E001FE0FC00
1F3FF8001F0FC0001F0000001F0000001F0000001F0000001F0000001F0000001F0000001F0000
00FFE00000FFE000001A207E951F>I<FE1F00FE3FC01E67E01EC7E01E87E01E87E01F83C01F00
001F00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F00001F0000FFF0
00FFF00013167E9517>114 D<0FF3003FFF00781F00600700E00300E00300F00300FC00007FE0
007FF8003FFE000FFF0001FF00000F80C00780C00380E00380E00380F00700FC0E00EFFC00C7F0
0011167E9516>I<0180000180000180000180000380000380000780000780000F80003F8000FF
FF00FFFF000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F80000F
81800F81800F81800F81800F81800F830007C30003FE0000F80011207F9F16>I<FF01FE00FF01
FE001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F003E001F
003E001F003E001F003E001F003E001F003E001F003E001F007E001F00FE000F81BE0007FF3FC0
01FC3FC01A167E951F>I<FFE01FE0FFE01FE00F8006000F8006000FC00E0007C00C0007E01C00
03E0180003E0180001F0300001F0300000F8600000F86000007CC000007CC000007FC000003F80
00003F8000001F0000001F0000000E0000000E00001B167F951E>I<FFE7FF07F8FFE7FF07F81F
007800C00F807801800F807C01800F807C018007C07E030007C0DE030007E0DE070003E0DF0600
03E18F060001F18F0C0001F38F8C0001FB079C0000FB07D80000FE03D800007E03F000007E03F0
00007C01F000003C01E000003800E000001800C00025167F9528>I<FFE07FC0FFE07FC00F801C
0007C0380003E0700003F0600001F8C00000F98000007F8000003F0000001F0000001F8000003F
C0000037C0000063E00000C1F00001C0F8000380FC0007007E000E003E00FF80FFE0FF80FFE01B
167F951E>I<FFE01FE0FFE01FE00F8006000F8006000FC00E0007C00C0007E01C0003E0180003
E0180001F0300001F0300000F8600000F86000007CC000007CC000007FC000003F8000003F8000
001F0000001F0000000E0000000E0000000C0000000C00000018000078180000FC380000FC3000
00FC60000069C000007F8000001F0000001B207F951E>I<7FFFF07FFFF07C03E07007C0600FC0
E01F80C01F00C03E00C07E0000FC0000F80001F00003F03007E03007C0300F80701F80703F0060
3E00E07C03E0FFFFE0FFFFE014167E9519>I E /Fq 1 59 df<70F8F8F87005057C840E>58
D E /Fr 1 14 df<00007FC000000003FFF80000000F803E0000003C0007800000700001C00000
C000006000018000003000030000001800060000000C000C00000006000C000000060018000000
03001800000003003000000001803000000001806000000000C06000000000C06000000000C0C0
0000000060C00000000060C00000000060C00000000060C00000000060C00000000060C0000000
0060C00000000060C00000000060C00000000060C000000000606000000000C06000000000C060
00000000C03000000001803000000001801800000003001800000003000C00000006000C000000
0600060000000C0003000000180001800000300000C00000600000700001C000003C0007800000
0F803E00000003FFF8000000007FC000002B2F7DA332>13 D E /Fs 13
120 df<78FCFCFCFC7806067B8511>46 D<FFFFFFC000FFFFFFF80007E000FC0003E0003F0003
E0000F8003E00007C003E00003E003E00001F003E00000F003E00000F803E000007C03E000007C
03E000007C03E000003E03E000003E03E000003E03E000003F03E000003F03E000003F03E00000
3F03E000003F03E000003F03E000003F03E000003F03E000003F03E000003F03E000003E03E000
003E03E000007E03E000007C03E000007C03E00000F803E00000F803E00001F003E00003E003E0
0007C003E0000F8003E0001F0007E000FE00FFFFFFF800FFFFFFC00028297EA82E>68
D<FFFFFFFF80FFFFFFFF8007E0001F8003E000078003E00001C003E00000C003E00000C003E000
004003E000004003E000004003E000004003E000002003E001002003E001002003E001000003E0
01000003E003000003E003000003E00F000003FFFF000003FFFF000003E00F000003E003000003
E003000003E001000003E001001003E001001003E001001003E000001003E000002003E0000020
03E000002003E000002003E000006003E000006003E00000E003E00001E003E00003C007E0001F
C0FFFFFFFFC0FFFFFFFFC024297EA829>I<FFFFFE000000FFFFFFC0000007E003F0000003E000
FC000003E0003E000003E0001F000003E0001F800003E0000F800003E0000FC00003E0000FC000
03E0000FC00003E0000FC00003E0000FC00003E0000FC00003E0000F800003E0001F000003E000
1E000003E0003C000003E000F8000003E003E0000003FFFE00000003E00780000003E001E00000
03E000F0000003E00078000003E0007C000003E0003C000003E0003E000003E0003E000003E000
3E000003E0003E000003E0003F000003E0003F000003E0003F000003E0003F000003E0003F0080
03E0003F808003E0001F808007F0000F8100FFFF8007C100FFFF8003C20000000000FC00292A7E
A82C>82 D<01FC00000E0780001001C0003C00E0003E00F0003E0078001C007800080078000000
78000000780000007800007FF80003E078000F8078001F0078003E0078007C00780078007820F8
007820F8007820F8007820F800F8207C00F8203C013C401F063FC007F80F001B1A7E991E>97
D<007E0003C3800700E00E00F01C00703C00783C003878003C78003CF8003CF8003CFFFFFCF800
00F80000F80000F80000F800007800007C00003C00043C00041E00080E001007002001C0C0007F
00161A7E991B>101 D<0000078001FC1840070721C00E03C1C01E03C0803C01E0003C01E0007C
01F0007C01F0007C01F0007C01F0007C01F0003C01E0003C01E0001E03C0000E03800017070000
11FC0000300000003000000030000000380000001C0000001FFFC0000FFFF80007FFFC001C003E
0030000F007000070060000380E0000380E0000380E0000380E000038070000700700007003800
0E000C0018000780F00000FF80001A287E9A1E>103 D<0780FF80FF800F800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800780078007800780FFFCFFFC0E2A7FA911>108
D<0783F800FF8C1C00FF900E000FA0070007A0078007C0078007C0078007800780078007800780
078007800780078007800780078007800780078007800780078007800780078007800780078007
80078007800780078007800780078007800780FFFCFFFCFFFCFFFC1E1A7F9921>110
D<007F000001C1C000070070000E0038001C001C003C001E003C001E0078000F0078000F00F800
0F80F8000F80F8000F80F8000F80F8000F80F8000F80F8000F80F8000F8078000F0078000F003C
001E003C001E001E003C000E0038000700700001C1C000007F0000191A7E991E>I<0787C0FF98
E0FF91F00FA1F007C1F007C0E007C0000780000780000780000780000780000780000780000780
0007800007800007800007800007800007800007800007800007C000FFFE00FFFE00141A7F9917
>114 D<07F8401C06C03001C06000C06000C0E00040E00040F00040F800007E00007FF0003FFE
000FFF0003FF80003FC00007C08001E08001E0C000E0C000E0C000E0E000C0F001C0F80180C407
0083F800131A7E9918>I<FFF1FFC1FFFFF1FFC1FF0F803E00780F001E003007801E002007801E
002007801F002003C03F004003C027004003C027804001E067808001E043808001E043C08000F0
81C10000F081C10000F881E300007900E200007900E200007D00F600003E007400003E00740000
1E007800001C003800001C003800000C0030000008001000281A7F992B>119
D E /Ft 49 122 df<001FC0000070200000C01000018038000380780007007800070030000700
0000070000000700000007000000070000000700000007000000FFFFF800070078000700380007
003800070038000700380007003800070038000700380007003800070038000700380007003800
070038000700380007003800070038000700380007003800070038007FE1FF80192380A21B>12
D<70F8FCFC7404040404080810102040060F7C840E>44 D<70F8F8F87005057C840E>46
D<008003800F80F380038003800380038003800380038003800380038003800380038003800380
03800380038003800380038003800380038003800380038007C0FFFE0F217CA018>49
D<1000801E07001FFF001FFE001FF80013E00010000010000010000010000010000010000010F8
00130E001407001803801003800001C00001C00001E00001E00001E00001E07001E0F001E0F001
E0E001C08001C04003C04003802007001006000C1C0003F00013227EA018>53
D<01F000060C000C0600180700380380700380700380F001C0F001C0F001C0F001E0F001E0F001
E0F001E0F001E07001E07003E03803E01805E00C05E00619E003E1E00001C00001C00001C00003
80000380300300780700780600700C002018001030000FC00013227EA018>57
D<0001800000018000000180000003C0000003C0000003C0000005E0000005E000000DF0000008
F0000008F0000010F800001078000010780000203C0000203C0000203C0000401E0000401E0000
401E0000800F0000800F0000FFFF000100078001000780030007C0020003C0020003C0040003E0
040001E0040001E00C0000F00C0000F03E0001F8FF800FFF20237EA225>65
D<0007E0100038183000E0063001C00170038000F0070000F00E0000701E0000701C0000303C00
00303C0000307C0000107800001078000010F8000000F8000000F8000000F8000000F8000000F8
000000F8000000F800000078000000780000107C0000103C0000103C0000101C0000201E000020
0E000040070000400380008001C0010000E0020000381C000007E0001C247DA223>67
D<FFFFF0000F801E0007800700078003C0078001C0078000E0078000F007800078078000780780
007C0780003C0780003C0780003C0780003E0780003E0780003E0780003E0780003E0780003E07
80003E0780003E0780003E0780003C0780003C0780007C0780007807800078078000F0078000E0
078001E0078003C0078007000F801E00FFFFF8001F227EA125>I<FFFFFFC00F8007C0078001C0
078000C00780004007800040078000600780002007800020078000200780202007802000078020
0007802000078060000780E00007FFE0000780E000078060000780200007802000078020000780
20080780000807800008078000100780001007800010078000300780003007800070078000E00F
8003E0FFFFFFE01D227EA121>I<FFFFFFC00F8007C0078001C0078000C0078000400780004007
80006007800020078000200780002007802020078020000780200007802000078060000780E000
07FFE0000780E00007806000078020000780200007802000078020000780000007800000078000
000780000007800000078000000780000007800000078000000FC00000FFFE00001B227EA120>
I<0007F008003C0C1800E0021801C001B8038000F8070000780F0000381E0000381E0000183C00
00183C0000187C0000087800000878000008F8000000F8000000F8000000F8000000F8000000F8
000000F8000000F8001FFF780000F8780000787C0000783C0000783C0000781E0000781E000078
0F00007807000078038000B801C000B800E00318003C0C080007F00020247DA226>I<FFFC3FFF
0FC003F0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001
E0078001E0078001E0078001E0078001E0078001E007FFFFE0078001E0078001E0078001E00780
01E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E0078001E007
8001E0078001E00FC003F0FFFC3FFF20227EA125>I<FFFC0FC007800780078007800780078007
800780078007800780078007800780078007800780078007800780078007800780078007800780
07800780078007800FC0FFFC0E227EA112>I<03FFF0001F00000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F00000F
00000F00000F00000F00000F00000F00000F00700F00F80F00F80F00F80E00F01E00401C002038
0018700007C00014237EA119>I<FFFC03FF000FC000F800078000600007800040000780008000
078001000007800200000780040000078008000007801000000780200000078040000007808000
0007818000000783C000000787E000000789E000000788F000000790F0000007A078000007C03C
000007803C000007801E000007800F000007800F00000780078000078007C000078003C0000780
01E000078001E000078000F000078000F8000FC000FC00FFFC07FF8021227EA126>I<FFFE0000
0FC000000780000007800000078000000780000007800000078000000780000007800000078000
000780000007800000078000000780000007800000078000000780000007800000078000000780
000007800000078000800780008007800080078000800780018007800180078001000780030007
80030007800F000F803F00FFFFFF0019227EA11E>I<FFC00003FF0FC00003F007C00003E005E0
0005E005E00005E004F00009E004F00009E004F00009E004780011E004780011E004780011E004
3C0021E0043C0021E0043C0021E0041E0041E0041E0041E0040F0081E0040F0081E0040F0081E0
04078101E004078101E004078101E00403C201E00403C201E00401E401E00401E401E00401E401
E00400F801E00400F801E00400F801E004007001E00E007001E01F007003F0FFE0203FFF28227E
A12D>I<FF8007FF07C000F807C0007005E0002004F0002004F0002004780020047C0020043C00
20041E0020041F0020040F002004078020040780200403C0200401E0200401E0200400F0200400
F8200400782004003C2004003E2004001E2004000F2004000F20040007A0040003E0040003E004
0001E0040001E0040000E00E0000601F000060FFE0002020227EA125>I<000FE00000783C0000
E00E0003C00780078003C00F0001E00E0000E01E0000F03C0000783C0000787C00007C7C00007C
7800003C7800003CF800003EF800003EF800003EF800003EF800003EF800003EF800003EF80000
3EF800003E7800003C7C00007C7C00007C3C0000783E0000F81E0000F00F0001E00F0001E00780
03C003C0078000E00E0000783C00000FE0001F247DA226>I<FFFFF0000F803C0007800F000780
0780078007C0078003C0078003E0078003E0078003E0078003E0078003E0078003E0078003C007
8007C00780078007800F0007803C0007FFF0000780000007800000078000000780000007800000
0780000007800000078000000780000007800000078000000780000007800000078000000FC000
00FFFC00001B227EA121>I<FFFFE000000F803C000007800E00000780078000078007C0000780
03C000078003E000078003E000078003E000078003E000078003E000078003C000078007C00007
8007800007800E000007803C000007FFE000000780700000078038000007801C000007801E0000
07800E000007800F000007800F000007800F000007800F000007800F800007800F800007800F80
0007800F808007800FC080078007C0800FC003C100FFFC01E2000000007C0021237EA124>82
D<03F0200C0C601802603001E07000E0600060E00060E00060E00020E00020E00020F00000F000
007800007F00003FF0001FFE000FFF0003FF80003FC00007E00001E00000F00000F00000708000
70800070800070800070C00060C00060E000C0F000C0C80180C6070081FC0014247DA21B>I<7F
FFFFF87807807860078018400780084007800840078008C007800C800780048007800480078004
800780040007800000078000000780000007800000078000000780000007800000078000000780
000007800000078000000780000007800000078000000780000007800000078000000780000007
80000007800000078000000FC00003FFFF001E227EA123>I<FFFC07FF0FC000F8078000700780
002007800020078000200780002007800020078000200780002007800020078000200780002007
800020078000200780002007800020078000200780002007800020078000200780002007800020
0780002007800020078000200380004003C0004003C0004001C0008000E0008000600100003006
00001C08000003F00020237EA125>I<FFF0007FC01F80001F000F80000C00078000080007C000
180003E000100001E000200001F000200000F000400000F800C000007C008000003C010000003E
010000001E020000001F040000000F84000000078800000007D800000003D000000003E0000000
01E000000001E000000001E000000001E000000001E000000001E000000001E000000001E00000
0001E000000001E000000001E000000001E000000003E00000003FFF000022227FA125>89
D<0FE0001838003C0C003C0E0018070000070000070000070000FF0007C7001E07003C07007807
00700700F00708F00708F00708F00F087817083C23900FC1E015157E9418>97
D<0E0000FE00001E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00
000E00000E1F000E61C00E80600F00300E00380E003C0E001C0E001E0E001E0E001E0E001E0E00
1E0E001E0E001E0E001C0E003C0E00380F00700C80600C41C0083F0017237FA21B>I<01FE0007
03000C07801C0780380300780000700000F00000F00000F00000F00000F00000F00000F0000070
00007800403800401C00800C010007060001F80012157E9416>I<0000E0000FE00001E00000E0
0000E00000E00000E00000E00000E00000E00000E00000E00000E00000E001F8E00704E00C02E0
1C01E03800E07800E07000E0F000E0F000E0F000E0F000E0F000E0F000E0F000E07000E07800E0
3800E01801E00C02E0070CF001F0FE17237EA21B>I<01FC000707000C03801C01C03801C07801
E07000E0F000E0FFFFE0F00000F00000F00000F00000F000007000007800203800201C00400E00
8007030000FC0013157F9416>I<003C00C6018F038F030F070007000700070007000700070007
000700FFF807000700070007000700070007000700070007000700070007000700070007000700
070007807FF8102380A20F>I<00007001F198071E180E0E181C07001C07003C07803C07803C07
803C07801C07001C07000E0E000F1C0019F0001000001000001800001800001FFE000FFFC00FFF
E03800F0600030400018C00018C00018C000186000306000303800E00E038003FE0015217F9518
>I<0E0000FE00001E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E
00000E00000E1F800E60C00E80E00F00700F00700E00700E00700E00700E00700E00700E00700E
00700E00700E00700E00700E00700E00700E00700E00700E0070FFE7FF18237FA21B>I<1C001E
003E001E001C00000000000000000000000000000000000E00FE001E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E000E000E00FFC00A227FA10E>I<0E0000FE0000
1E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E00000E03FC
0E01F00E01C00E01800E02000E04000E08000E10000E38000EF8000F1C000E1E000E0E000E0700
0E07800E03C00E01C00E01E00E00F00E00F8FFE3FE17237FA21A>107 D<0E00FE001E000E000E
000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E000E00
0E000E000E000E000E000E000E000E000E000E00FFE00B237FA20E>I<0E1FC07F00FE60E18380
1E807201C00F003C00E00F003C00E00E003800E00E003800E00E003800E00E003800E00E003800
E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E003800E00E0038
00E00E003800E00E003800E0FFE3FF8FFE27157F942A>I<0E1F80FE60C01E80E00F00700F0070
0E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E0070
0E00700E0070FFE7FF18157F941B>I<01FC000707000C01801800C03800E0700070700070F000
78F00078F00078F00078F00078F00078F000787000707800F03800E01C01C00E038007070001FC
0015157F9418>I<0E1F00FE61C00E80600F00700E00380E003C0E001C0E001E0E001E0E001E0E
001E0E001E0E001E0E001E0E003C0E003C0E00380F00700E80E00E41C00E3F000E00000E00000E
00000E00000E00000E00000E00000E00000E0000FFE000171F7F941B>I<01F8200704600E0260
1C01603801E07800E07800E0F000E0F000E0F000E0F000E0F000E0F000E0F000E07000E07800E0
3801E01C01E00C02E0070CE001F0E00000E00000E00000E00000E00000E00000E00000E00000E0
0000E0000FFE171F7E941A>I<0E3CFE461E8F0F0F0F060F000E000E000E000E000E000E000E00
0E000E000E000E000E000E000F00FFF010157F9413>I<0F8830786018C018C008C008E008F000
7F803FE00FF001F8003C801C800C800CC00CC008E018D0308FC00E157E9413>I<020002000200
02000600060006000E001E003E00FFF80E000E000E000E000E000E000E000E000E000E000E000E
040E040E040E040E040E040708030801F00E1F7F9E13>I<0E0070FE07F01E00F00E00700E0070
0E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00700E00F00E00F0
06017003827800FC7F18157F941B>I<FFC1FE1E00780E00300E00200E00200700400700400380
8003808003808001C10001C10000E20000E20000E2000074000074000038000038000038000010
0017157F941A>I<FF8FF8FF1E01E03C1C01C0180E01C0180E01E0100E01E01007026020070270
200702702003843040038438400384384001C8188001C81C8001C81C8000F00D0000F00F0000F0
0F0000600600006006000060060020157F9423>I<FFC1FE1E00780E00300E00200E0020070040
07004003808003808003808001C10001C10000E20000E20000E200007400007400003800003800
003800001000001000002000002000002000004000F04000F08000F180004300003C0000171F7F
941A>121 D E /Fu 58 123 df<0001FF81FE00001FFFEFFF80007F80FF87C000FC00FE0FE001
F801FE0FE003F801FC0FE007F001FC0FE007F001FC07C007F001FC000007F001FC000007F001FC
000007F001FC000007F001FC000007F001FC000007F001FC0000FFFFFFFFF800FFFFFFFFF800FF
FFFFFFF80007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC
000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007
F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC000007F001FC
000007F001FC000007F001FC00007FFF1FFFE0007FFF1FFFE0007FFF1FFFE0002B2A7FA928>11
D<FFFF80FFFF80FFFF80FFFF80FFFF80FFFF8011067F9017>45 D<1C003E007F00FF80FF80FF80
7F003E001C0009097B8813>I<00000300000007800000078000000F8000000F0000000F000000
1F0000001E0000003E0000003C0000003C0000007C0000007800000078000000F8000000F00000
01F0000001E0000001E0000003E0000003C0000003C0000007C00000078000000F8000000F0000
000F0000001F0000001E0000003E0000003C0000003C0000007C0000007800000078000000F800
0000F0000001F0000001E0000001E0000003E0000003C0000003C0000007C00000078000000F80
00000F0000000F0000001F0000001E0000001E0000003E0000003C0000007C0000007800000078
000000F8000000F0000000F000000060000000193C7CAC22>I<003F800001FFF00007E0FC000F
C07E001F803F001F803F003F001F803F001F807F001FC07F001FC07F001FC07F001FC0FF001FE0
FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001FE0FF001F
E0FF001FE0FF001FE0FF001FE0FF001FE07F001FC07F001FC07F001FC07F001FC03F001F803F00
1F801F803F001F803F000FC07E0007E0FC0001FFF000003F80001B277DA622>I<000E00001E00
007E0007FE00FFFE00FFFE00F8FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE00
00FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE00
00FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE007FFFFE7FFFFE7FFFFE17277BA622>
I<00FF800003FFF0000FFFFC001F03FE003800FF007C007F80FE003FC0FF003FC0FF003FE0FF00
1FE0FF001FE07E001FE03C003FE000003FE000003FC000003FC000007F8000007F000000FE0000
00FC000001F8000003F0000003E00000078000000F0000001E0000003C00E0007000E000E000E0
01C001C0038001C0070001C00FFFFFC01FFFFFC03FFFFFC07FFFFFC0FFFFFF80FFFFFF80FFFFFF
801B277DA622>I<007F800003FFF00007FFFC000F81FE001F00FF003F80FF003F807F803F807F
803F807F801F807F800F007F800000FF000000FF000000FE000001FC000001F8000007F00000FF
C00000FFF0000001FC0000007E0000007F0000007F8000003FC000003FC000003FE000003FE03C
003FE07E003FE0FF003FE0FF003FE0FF003FC0FF007FC07E007F807C007F003F01FE001FFFFC00
07FFF00000FF80001B277DA622>I<00000E0000001E0000003E0000007E000000FE000000FE00
0001FE000003FE0000077E00000E7E00000E7E00001C7E0000387E0000707E0000E07E0000E07E
0001C07E0003807E0007007E000E007E000E007E001C007E0038007E0070007E00E0007E00FFFF
FFF8FFFFFFF8FFFFFFF80000FE000000FE000000FE000000FE000000FE000000FE000000FE0000
00FE00007FFFF8007FFFF8007FFFF81D277EA622>I<0C0003000F803F000FFFFE000FFFFC000F
FFF8000FFFF0000FFFE0000FFFC0000FFE00000E0000000E0000000E0000000E0000000E000000
0E0000000E7FC0000FFFF8000F80FC000E003E000C003F0000001F8000001FC000001FC000001F
E000001FE018001FE07C001FE0FE001FE0FE001FE0FE001FE0FE001FC0FC001FC078003F807800
3F803C007F001F01FE000FFFF80003FFF00000FF80001B277DA622>I<0007F000003FFC0000FF
FE0001FC0F0003F01F8007E03F800FC03F801FC03F801F803F803F801F003F8000007F0000007F
0000007F000000FF000000FF0FC000FF3FF800FF707C00FFC03E00FFC03F00FF801F80FF801FC0
FF001FC0FF001FE0FF001FE0FF001FE07F001FE07F001FE07F001FE07F001FE03F001FE03F001F
C01F801FC01F803F800FC03F0007E07E0003FFFC0000FFF000003FC0001B277DA622>I<380000
003E0000003FFFFFF03FFFFFF03FFFFFF07FFFFFE07FFFFFC07FFFFF807FFFFF0070000E007000
0E0070001C00E0003800E0007000E000E0000000E0000001C00000038000000780000007800000
0F0000000F0000001F0000001F0000003F0000003E0000003E0000007E0000007E0000007E0000
007E000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE0000007C00
00003800001C297CA822>I<003FC00001FFF00003FFFC0007C07E000F003F001E001F001E000F
803E000F803E000F803F000F803F000F803FC00F003FF01F001FFC1E001FFE3C000FFFF80007FF
E00003FFF80001FFFC0001FFFE0007FFFF000F0FFF801E03FFC03C01FFC07C007FE078001FE0F8
0007E0F80007E0F80003E0F80003E0F80003E0F80003C07C0003C07C0007803F000F001FC03E00
0FFFFC0003FFF800007FC0001B277DA622>I<007F800001FFF00007FFF8000FE0FC001F807E00
3F803F007F003F007F001F80FF001F80FF001FC0FF001FC0FF001FC0FF001FE0FF001FE0FF001F
E0FF001FE07F001FE07F003FE03F003FE01F807FE00F807FE007C1DFE003FF9FE0007E1FE00000
1FE000001FC000001FC000001FC000003F801F003F803F803F003F803F003F807E003F807C001F
01F8001E03F0000FFFE00007FF800001FE00001B277DA622>I<1C003E007F00FF80FF80FF807F
003E001C000000000000000000000000000000000000001C003E007F00FF80FF80FF807F003E00
1C00091B7B9A13>I<000003800000000007C00000000007C0000000000FE0000000000FE00000
00000FE0000000001FF0000000001FF0000000003FF8000000003FF8000000003FF80000000073
FC0000000073FC00000000F3FE00000000E1FE00000000E1FE00000001C0FF00000001C0FF0000
0003C0FF80000003807F80000007807FC0000007003FC0000007003FC000000E003FE000000E00
1FE000001E001FF000001C000FF000001FFFFFF000003FFFFFF800003FFFFFF80000780007FC00
00700003FC0000700003FC0000E00001FE0000E00001FE0001E00001FF0001C00000FF0001C000
00FF00FFFE001FFFFEFFFE001FFFFEFFFE001FFFFE2F297EA834>65 D<00003FF001800003FFFE
0380000FFFFF8780003FF007DF8000FF8001FF8001FE00007F8003FC00003F8007F000001F800F
F000000F801FE0000007801FE0000007803FC0000007803FC0000003807FC0000003807F800000
03807F8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF
8000000000FF8000000000FF8000000000FF80000000007F80000000007F80000000007FC00000
03803FC0000003803FC0000003801FE0000003801FE0000007000FF00000070007F000000E0003
FC00001E0001FE00003C0000FF8000F800003FF007E000000FFFFFC0000003FFFF000000003FF8
000029297CA832>67 D<FFFFFFF80000FFFFFFFF8000FFFFFFFFE00003FC001FF80003FC0007FC
0003FC0001FE0003FC0000FF0003FC00007F8003FC00003FC003FC00001FC003FC00001FE003FC
00001FE003FC00000FF003FC00000FF003FC00000FF003FC00000FF003FC00000FF803FC00000F
F803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC00000FF803FC
00000FF803FC00000FF803FC00000FF003FC00000FF003FC00000FF003FC00001FE003FC00001F
E003FC00001FC003FC00003FC003FC00007F8003FC00007F0003FC0001FE0003FC0003FC0003FC
001FF800FFFFFFFFE000FFFFFFFF8000FFFFFFFC00002D297DA835>I<FFFFFFFFE0FFFFFFFFE0
FFFFFFFFE003FC001FE003FC0007F003FC0001F003FC0001F003FC0000F003FC00007003FC0000
7003FC00007003FC01C07803FC01C03803FC01C03803FC01C03803FC03C00003FC03C00003FC0F
C00003FFFFC00003FFFFC00003FFFFC00003FC0FC00003FC03C00003FC03C00003FC01C00E03FC
01C00E03FC01C00E03FC01C01C03FC00001C03FC00001C03FC00001C03FC00003C03FC00003803
FC00007803FC0000F803FC0001F803FC0003F803FC001FF8FFFFFFFFF0FFFFFFFFF0FFFFFFFFF0
27297DA82D>I<FFFFFFFFC0FFFFFFFFC0FFFFFFFFC003FC003FC003FC000FE003FC0003E003FC
0001E003FC0001E003FC0000E003FC0000E003FC0000E003FC0000F003FC03807003FC03807003
FC03807003FC03800003FC07800003FC07800003FC1F800003FFFF800003FFFF800003FFFF8000
03FC1F800003FC07800003FC07800003FC03800003FC03800003FC03800003FC03800003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00
0000FFFFFC0000FFFFFC0000FFFFFC000024297DA82B>I<00007FE003000003FFFC0700001FFF
FF0F00003FF00FFF0000FF8001FF0001FE0000FF0003F800003F0007F000003F000FF000001F00
1FE000000F001FE000000F003FC000000F003FC0000007007FC0000007007F80000007007F8000
000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000FF8000000000
FF8000000000FF8000000000FF8001FFFFF87F8001FFFFF87F8001FFFFF87FC00000FF003FC000
00FF003FC00000FF001FE00000FF001FE00000FF000FF00000FF0007F00000FF0003F80000FF00
01FE0000FF0000FF8001FF00003FF007BF00001FFFFF1F000003FFFE0F0000007FF003002D297C
A836>I<FFFFF01FFFFEFFFFF01FFFFEFFFFF01FFFFE03FC00007F8003FC00007F8003FC00007F
8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC
00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FFFFFFFF
8003FFFFFFFF8003FFFFFFFF8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC
00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F
8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F8003FC00007F80FFFF
F01FFFFEFFFFF01FFFFEFFFFF01FFFFE2F297DA836>I<FFFFFCFFFFFCFFFFFC01FE0001FE0001
FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001
FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001FE0001
FE0001FE0001FE0001FE0001FE0001FE0001FE00FFFFFCFFFFFCFFFFFC16297EA81A>I<FFFFF0
01FFFCFFFFF001FFFCFFFFF001FFFC03FC00001E0003FC00003C0003FC0000780003FC0000F000
03FC0001E00003FC0003C00003FC0007000003FC001E000003FC003C000003FC0078000003FC00
F0000003FC01E0000003FC0380000003FC07C0000003FC1FC0000003FC3FE0000003FC7FF00000
03FCFFF8000003FDE7F8000003FF83FC000003FF01FE000003FE01FF000003FC00FF000003FC00
7F800003FC003FC00003FC003FC00003FC001FE00003FC000FF00003FC000FF80003FC0007F800
03FC0003FC0003FC0001FE0003FC0001FF0003FC0000FF0003FC00007F80FFFFF00FFFFEFFFFF0
0FFFFEFFFFF00FFFFE2F297DA836>75 D<FFFFFC0000FFFFFC0000FFFFFC000003FC00000003FC
00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003
FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC000000
03FC00000003FC00000003FC00000003FC00000003FC0001C003FC0001C003FC0001C003FC0001
C003FC0003C003FC00038003FC00038003FC00078003FC00078003FC000F8003FC000F8003FC00
1F8003FC007F8003FC01FF00FFFFFFFF00FFFFFFFF00FFFFFFFF0022297DA829>I<FFFE000000
1FFFC0FFFE0000001FFFC0FFFF0000003FFFC003FF0000003FF00003FF0000003FF00003BF8000
0077F00003BF80000077F000039FC00000E7F000039FC00000E7F000038FE00001C7F000038FE0
0001C7F0000387F0000387F0000387F0000387F0000387F0000387F0000383F8000707F0000383
F8000707F0000381FC000E07F0000381FC000E07F0000380FE001C07F0000380FE001C07F00003
80FF003807F00003807F003807F00003807F003807F00003803F807007F00003803F807007F000
03801FC0E007F00003801FC0E007F00003800FE1C007F00003800FE1C007F00003800FE1C007F0
00038007F38007F000038007F38007F000038003FF0007F000038003FF0007F000038001FE0007
F000038001FE0007F000038000FC0007F000038000FC0007F000FFFE00FC01FFFFC0FFFE007801
FFFFC0FFFE007801FFFFC03A297DA841>I<FFFC0000FFFEFFFE0000FFFEFFFF0000FFFE03FF80
00038003FF8000038003BFC0000380039FE0000380039FF0000380038FF80003800387F8000380
0383FC0003800381FE0003800381FF0003800380FF80038003807FC0038003803FC0038003801F
E0038003800FF0038003800FF80380038007FC0380038003FC0380038001FE0380038000FF0380
038000FF83800380007FC3800380003FE3800380001FE3800380000FF38003800007FB80038000
07FF8003800003FF8003800001FF8003800000FF80038000007F80038000007F80038000003F80
038000001F80038000000F80FFFE00000780FFFE00000380FFFE000003802F297DA836>I<0000
FFE000000007FFFC0000003FC07F8000007F001FC00001FC0007F00003F80003F80007F00001FC
000FF00001FE001FE00000FF001FE00000FF003FC000007F803FC000007F807FC000007FC07F80
00003FC07F8000003FC07F8000003FC0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003F
E0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE0FF8000003FE07F80
00003FC07FC000007FC07FC000007FC03FC000007F803FC000007F801FE00000FF001FE00000FF
000FF00001FE0007F00001FC0003F80003F80001FC0007F00000FF001FE000003FC07F8000000F
FFFE00000000FFE000002B297CA834>I<FFFFFFF800FFFFFFFF00FFFFFFFFC003FC003FE003FC
000FF003FC0007F803FC0007FC03FC0003FC03FC0003FE03FC0003FE03FC0003FE03FC0003FE03
FC0003FE03FC0003FE03FC0003FE03FC0003FC03FC0007FC03FC0007F803FC000FF003FC003FE0
03FFFFFF8003FFFFFE0003FC00000003FC00000003FC00000003FC00000003FC00000003FC0000
0003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00000003FC00
000003FC00000003FC000000FFFFF00000FFFFF00000FFFFF0000027297DA82F>I<FFFFFFE000
00FFFFFFFE0000FFFFFFFF800003FC007FE00003FC000FF00003FC0007F80003FC0007FC0003FC
0003FC0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FE0003FC0003FE
0003FC0003FC0003FC0007F80003FC0007F80003FC001FE00003FC007FC00003FFFFFE000003FF
FFF0000003FC00FC000003FC007F000003FC003F800003FC003F800003FC001FC00003FC001FE0
0003FC001FE00003FC001FE00003FC001FE00003FC001FE00003FC001FF00003FC001FF00003FC
001FF00003FC001FF00703FC001FF80703FC000FF80703FC0007F80EFFFFF003FE1CFFFFF001FF
F8FFFFF0003FF030297DA834>82 D<007F806003FFF0E007FFF9E00F807FE01F001FE03E0007E0
7C0003E07C0001E0FC0001E0FC0001E0FC0000E0FE0000E0FE0000E0FF000000FFC000007FFE00
007FFFE0003FFFFC001FFFFE000FFFFF8007FFFFC003FFFFE000FFFFE00007FFF000007FF00000
0FF8000007F8000003F8600001F8E00001F8E00001F8E00001F8F00001F0F00001F0F80003F0FC
0003E0FF0007C0FFE01F80F3FFFF00E0FFFE00C01FF0001D297CA826>I<7FFFFFFFFFC07FFFFF
FFFFC07FFFFFFFFFC07F803FC03FC07E003FC007C078003FC003C078003FC003C070003FC001C0
F0003FC001E0F0003FC001E0E0003FC000E0E0003FC000E0E0003FC000E0E0003FC000E0E0003F
C000E000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC00000
00003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003F
C0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC0000000003FC00000
00003FC0000000003FC0000000003FC00000007FFFFFE000007FFFFFE000007FFFFFE0002B287E
A730>I<FFFFF0003FFF80FFFFF0003FFF80FFFFF0003FFF8003FE000001E00001FE000001C000
01FF000003C00000FF000003800000FF0000038000007F8000070000007F8000070000007FC000
0F0000003FC0000E0000003FE0001E0000001FE0001C0000001FF0001C0000000FF00038000000
0FF0003800000007F8007000000007F8007000000007FC00F000000003FC00E000000003FE01E0
00000001FE01C000000001FF01C000000000FF038000000000FF038000000000FF878000000000
7F8700000000007FCF00000000003FCE00000000003FFE00000000001FFC00000000001FFC0000
0000000FF800000000000FF800000000000FF8000000000007F0000000000007F0000000000003
E0000000000003E0000000000001C000000031297FA834>86 D<01FF800007FFF0000F81F8001F
C07E001FC07E001FC03F000F803F8007003F8000003F8000003F8000003F80000FFF8000FFFF80
07FC3F800FE03F803F803F803F003F807F003F80FE003F80FE003F80FE003F80FE003F807E007F
807F00DF803F839FFC0FFF0FFC01FC03FC1E1B7E9A21>97 D<FFE0000000FFE0000000FFE00000
000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE000
00000FE00000000FE00000000FE00000000FE00000000FE1FE00000FE7FF80000FFE07E0000FF8
01F0000FF000F8000FE000FC000FE000FE000FE0007F000FE0007F000FE0007F000FE0007F800F
E0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F800FE0007F000FE0007F00
0FE0007F000FE000FE000FE000FC000FF001F8000FF803F0000F9E07E0000F07FF80000E01FC00
00212A7EA926>I<001FF80000FFFE0003F01F0007E03F800FC03F801F803F803F801F007F800E
007F0000007F000000FF000000FF000000FF000000FF000000FF000000FF000000FF0000007F00
00007F0000007F8000003F8001C01F8001C00FC0038007E0070003F01E0000FFFC00001FE0001A
1B7E9A1F>I<00003FF80000003FF80000003FF800000003F800000003F800000003F800000003
F800000003F800000003F800000003F800000003F800000003F800000003F800000003F8000000
03F800001FE3F80000FFFBF80003F03FF80007E00FF8000FC007F8001F8003F8003F8003F8007F
0003F8007F0003F8007F0003F800FF0003F800FF0003F800FF0003F800FF0003F800FF0003F800
FF0003F800FF0003F8007F0003F8007F0003F8007F0003F8003F8003F8001F8003F8000F8007F8
0007C00FF80003F03BFF8000FFF3FF80003FC3FF80212A7EA926>I<003FE00001FFF80003F07E
0007C01F000F801F801F800F803F800FC07F000FC07F0007C07F0007E0FF0007E0FF0007E0FFFF
FFE0FFFFFFE0FF000000FF000000FF0000007F0000007F0000007F0000003F8000E01F8000E00F
C001C007E0038003F81F0000FFFE00001FF0001B1B7E9A20>I<0007F0003FFC00FE3E01F87F03
F87F03F07F07F07F07F03E07F00007F00007F00007F00007F00007F00007F000FFFFC0FFFFC0FF
FFC007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F00007F00007F00007F00007F00007F00007F00007F00007F0007FFF807FFF807FFF80182A7EA9
15>I<00FF81F003FFE7F80FC1FE7C1F80FC7C1F007C383F007E107F007F007F007F007F007F00
7F007F007F007F007F007F003F007E001F007C001F80FC000FC1F8001FFFE00018FF8000380000
00380000003C0000003E0000003FFFF8001FFFFF001FFFFF800FFFFFC007FFFFE01FFFFFF03E00
07F07C0001F8F80000F8F80000F8F80000F8F80000F87C0001F03C0001E01F0007C00FC01F8003
FFFE00007FF0001E287E9A22>I<FFE0000000FFE0000000FFE00000000FE00000000FE0000000
0FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000000FE00000
000FE00000000FE00000000FE07F00000FE1FFC0000FE787E0000FEE03F0000FF803F0000FF803
F8000FF003F8000FF003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE0
03F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000F
E003F8000FE003F8000FE003F800FFFE3FFF80FFFE3FFF80FFFE3FFF80212A7DA926>I<07000F
C01FE03FE03FE03FE01FE00FC007000000000000000000000000000000FFE0FFE0FFE00FE00FE0
0FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0FF
FEFFFEFFFE0F2B7DAA14>I<000700000F80001FC0003FE0003FE0003FE0001FC0000F80000700
00000000000000000000000000000000000000000001FFE001FFE001FFE0000FE0000FE0000FE0
000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0
000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE07C0FE0
FE0FE0FE0FC0FE1F80FE1F007C3E003FFC000FF000133784AA15>I<FFE00000FFE00000FFE000
000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE000000FE0
00000FE000000FE000000FE01FFC0FE01FFC0FE01FFC0FE007800FE00F000FE01E000FE03C000F
E078000FE0E0000FE3C0000FE7C0000FEFE0000FFFE0000FFFF0000FF3F8000FE3F8000FC1FC00
0FC0FE000FC07F000FC07F000FC03F800FC01FC00FC00FC00FC00FE0FFFC3FFEFFFC3FFEFFFC3F
FE1F2A7EA924>I<FFE0FFE0FFE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00F
E00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE00FE0
0FE00FE00FE00FE0FFFEFFFEFFFE0F2A7DA914>I<FFC07F800FF000FFC1FFE03FFC00FFC383F0
707E000FC603F8C07F000FCC01F9803F000FD801FF003F800FF001FE003F800FF001FE003F800F
E001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC00
3F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE0
01FC003F800FE001FC003F800FE001FC003F800FE001FC003F800FE001FC003F80FFFE1FFFC3FF
F8FFFE1FFFC3FFF8FFFE1FFFC3FFF8351B7D9A3C>I<FFC07F0000FFC1FFC000FFC787E0000FCE
03F0000FD803F0000FD803F8000FF003F8000FF003F8000FE003F8000FE003F8000FE003F8000F
E003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F800
0FE003F8000FE003F8000FE003F8000FE003F8000FE003F800FFFE3FFF80FFFE3FFF80FFFE3FFF
80211B7D9A26>I<003FE00001FFFC0003F07E000FC01F801F800FC03F800FE03F0007E07F0007
F07F0007F07F0007F0FF0007F8FF0007F8FF0007F8FF0007F8FF0007F8FF0007F8FF0007F8FF00
07F87F0007F07F0007F03F800FE03F800FE01F800FC00FC01F8007F07F0001FFFC00003FE0001D
1B7E9A22>I<FFE1FE0000FFE7FF8000FFFE07E0000FF803F0000FF001F8000FE000FC000FE000
FE000FE000FF000FE0007F000FE0007F000FE0007F800FE0007F800FE0007F800FE0007F800FE0
007F800FE0007F800FE0007F800FE0007F000FE000FF000FE000FF000FE000FE000FE001FC000F
F001F8000FF803F0000FFE0FE0000FE7FF80000FE1FC00000FE00000000FE00000000FE0000000
0FE00000000FE00000000FE00000000FE00000000FE00000000FE0000000FFFE000000FFFE0000
00FFFE00000021277E9A26>I<FFC1F0FFC7FCFFCE3E0FD87F0FD87F0FF07F0FF03E0FF01C0FE0
000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0000FE0
000FE0000FE000FFFF00FFFF00FFFF00181B7E9A1C>114 D<03FE300FFFF01E03F03800F07000
70F00070F00070F80070FC0000FFE0007FFE007FFF803FFFE01FFFF007FFF800FFF80003FC0000
FC60007CE0003CF0003CF00038F80038FC0070FF01E0F7FFC0C1FF00161B7E9A1B>I<00700000
700000700000700000F00000F00000F00001F00003F00003F00007F0001FFFF0FFFFF0FFFFF007
F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007F00007
F03807F03807F03807F03807F03807F03803F03803F87001F86000FFC0001F8015267FA51B>I<
FFE03FF800FFE03FF800FFE03FF8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8
000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003
F8000FE003F8000FE003F8000FE003F8000FE003F8000FE003F8000FE007F80007E007F80007E0
0FF80003F03BFF8001FFF3FF80003FC3FF80211B7D9A26>I<FFFE03FF80FFFE03FF80FFFE03FF
8007F000700007F000700007F800F00003F800E00003FC01E00001FC01C00001FC01C00000FE03
800000FE038000007F070000007F070000007F8F0000003F8E0000003FDE0000001FDC0000001F
DC0000000FF80000000FF80000000FF800000007F000000007F000000003E000000003E0000000
01C00000211B7F9A24>I<FFFE7FFC0FFEFFFE7FFC0FFEFFFE7FFC0FFE0FE007E000E007F003F0
01C007F003F001C007F807F803C003F807F8038003F807F8038001FC0EFC070001FC0EFC070001
FE1EFC0F0000FE1C7E0E0000FE1C7E0E0000FF383F1E00007F383F1C00007F783F3C00003FF01F
B800003FF01FB800003FF01FF800001FE00FF000001FE00FF000000FC007E000000FC007E00000
0FC007E00000078003C00000078003C0002F1B7F9A32>I<FFFC0FFF00FFFC0FFF00FFFC0FFF00
07F003C00003F807800001FC07800000FE0F000000FF1E0000007F3C0000003FF80000001FF000
00000FF00000000FF000000007F000000007F80000000FFC0000001FFE0000001EFE0000003C7F
000000783F800000F01FC00001E01FE00001C00FE00003C007F000FFF01FFF80FFF01FFF80FFF0
1FFF80211B7F9A24>I<FFFE03FF80FFFE03FF80FFFE03FF8007F000700007F000700007F800F0
0003F800E00003FC01E00001FC01C00001FC01C00000FE03800000FE038000007F070000007F07
0000007F8F0000003F8E0000003FDE0000001FDC0000001FDC0000000FF80000000FF80000000F
F800000007F000000007F000000003E000000003E000000001C000000001C00000000380000000
0380000038078000007C07000000FE0F000000FE0E000000FE1E000000FE3C0000007C78000000
3FE00000000FC000000021277F9A24>I<3FFFFF803FFFFF803F007F003C00FE003801FE007803
FC007803F8007007F800700FF000700FE000001FC000003FC000007F8000007F000000FF000001
FE038001FC038003F8038007F803800FF007800FE007801FE007003FC00F003F801F007F007F00
FFFFFF00FFFFFF00191B7E9A1F>I E end
%%EndProlog
%%BeginSetup
%%Feature: *Resolution 300dpi
TeXDict begin

%%EndSetup
%%Page: 1 1
1 0 bop 101 34 a Fu(The)22 b(Design)g(and)i(Impl)o(em)m(en)n(tati)o(on)c(of)k
(a)f(Protot)n(yp)r(e)g(Exok)n(ernel)708 124 y(Op)r(erating)f(System)954
223 y Ft(b)o(y)742 323 y Fs(Da)n(wson)e(R.)f(Engler)142 423
y Ft(Submitted)14 b(to)j(the)f(Departmen)o(t)f(of)h(Electrical)f(Engineering)
h(and)g(Computer)g(Science)366 481 y(in)g(partial)g(ful\014llmen)o(t)d(of)k
(the)f(requiremen)o(ts)d(for)k(the)f(degree)f(of)382 580 y(Master)h(of)g
(Science)f(in)h(Computer)f(Science)g(and)i(Engineering)916
680 y(at)f(the)386 780 y(MASSA)o(CHUSETTS)f(INSTITUTE)g(OF)h(TECHNOLOGY)837
879 y(Jan)o(uary)h(1995)705 977 y(c)691 979 y Fr(\015)o Ft(Da)o(wson)h(R.)e
(Engler,)f(1995.)79 1253 y(Author)8 b Fq(:)g(:)g(:)g(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)f
(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)586 1311 y Ft(Departmen)o(t)15
b(of)i(Electrical)d(Engineering)i(and)h(Computer)e(Science)1594
1369 y(Jan)o(uary)i(1995)79 1734 y(Certi\014ed)f(b)o(y)d Fq(:)8
b(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g
(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g
(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)1465 1792 y
Ft(M.)16 b(F)l(rans)g(Kaasho)q(ek)652 1850 y(Assistan)o(t)g(Professor)h(of)g
(Computer)e(Science)g(and)i(Engineering)1502 1908 y(Thesis)f(Sup)q(ervisor)79
2287 y(Accepted)f(b)o(y)7 b Fq(:)h(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)
g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)f(:)h(:)g
(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)f(:)h
(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g(:)f(:)h(:)g(:)g(:)g(:)g(:)g
(:)1342 2345 y Ft(F)l(rederic)14 b(R.)i(Morgen)o(thaler)916
2404 y(Chairman,)f(Committee)e(on)k(Graduate)g(Studen)o(ts)p
eop
%%Page: 2 2
2 1 bop eop
%%Page: 3 3
3 2 bop 131 34 a Fp(The)18 b(Design)g(and)i(Implem)o(en)n(tation)c(of)i(a)h
(Protot)n(yp)r(e)f(Exok)n(ernel)f(Op)r(erating)891 92 y(System)954
150 y Ft(b)o(y)786 208 y(Da)o(wson)g(R.)f(Engler)199 323 y
Fo(Submitted)g(to)e(the)i(Departmen)o(t)e(of)h(Electrical)i(Engineering)f
(and)g(Computer)e(Science)535 379 y(on)h(Jan)o(uary)g(1995,)f(in)i(partial)g
(ful\014llmen)o(t)h(of)e(the)681 436 y(requiremen)o(ts)h(for)e(the)i(degree)f
(of)422 492 y(Master)f(of)h(Science)i(in)f(Computer)f(Science)i(and)e
(Engineering)79 614 y Fp(Abstract)79 723 y Fo(T)l(raditional)g(op)q(erating)f
(systems)f(abstract)f(hardw)o(are)h(resources.)19 b(The)14
b(cost)f(of)g(pro)o(viding)i(these)e(ab-)79 779 y(stractions)g(is)h(high:)19
b(op)q(erating)13 b(systems)g(are)g(t)o(ypically)h(unreliable,)i(complex,)e
(and)f(in\015exible.)22 b(More)79 835 y(imp)q(ortan)o(tly)l(,)e(applications)
g(that)d(are)i(built)g(on)g(these)f(systems)g(are)g(b)q(oth)h(ine\016cien)o
(t)h(and)f(limited)79 892 y(in)h(scop)q(e:)27 b(most)17 b(resource)i
(managemen)o(t)e(decisions)k(cannot)d(b)q(e)h(made)f(b)o(y)h(application)h
(designers,)79 948 y(lea)o(ving)15 b(them)g(with)f(little)i(recourse)e(when)g
(the)h(managemen)o(t)e(of)h(these)g(resources)g(is)h(inappropriate.)79
1005 y(W)l(e)i(b)q(eliev)o(e)h(that)d(the)i(quest)f(to)f(abstract)g(ph)o
(ysical)j(resources)e(has)g(sharply)h(limited)h(the)e(\015exibilit)o(y)79
1061 y(and)g(am)o(bition)g(of)e(applications.)150 1118 y(In)k(this)h(thesis,)
f(w)o(e)g(prop)q(ose)g(a)f(new)h(op)q(erating)g(system)f(structure,)h
Fn(exokernel)p Fo(,)f(whic)o(h)i(is)f(built)79 1174 y(on)c(the)f(premise)h
(that)e(an)h(op)q(erating)g(system)g(should)h(not)f(abstraction)f(ph)o
(ysical)j(resources.)k(Rather,)79 1231 y(op)q(erating)d(systems)f(should)h
(concen)o(trate)f Fn(solely)f Fo(on)h(m)o(ultiplexing)j(the)d(ra)o(w)f(hardw)
o(are:)20 b(from)14 b(these)79 1287 y(hardw)o(are)19 b(primitiv)o(es,)j
(application-lev)o(el)h(libraries)e(and)f(serv)o(ers)f(can)h(directly)h
(implemen)o(t)g(tradi-)79 1344 y(tional)16 b(op)q(erating)g(system)e
(abstractions,)h(sp)q(ecialized)j(for)d(appropriateness)g(and)g(sp)q(eed.)150
1400 y(This)21 b(thesis)h(motiv)m(ates)e(the)h(need)g(for)f(a)h(new)g(op)q
(erating)g(system)f(structure,)h(pro)o(vides)g(a)g(set)79 1456
y(of)d(precepts)g(to)f(guide)i(its)e(design,)i(discusses)g(general)f(issues)h
(that)e(exok)o(ernels)h(m)o(ust)f(deal)i(with)f(in)79 1513
y(m)o(ultiplexing)f(ph)o(ysical)f(hardw)o(are,)d(and)h(describ)q(es)i(and)f
(measures)f(a)g(protot)o(yp)q(e)f(exok)o(ernel)i(system.)79
1569 y(In)i(man)o(y)f(cases)g(this)h(protot)o(yp)q(e)f(system)g(is)g(an)h
(order)f(of)f(magnitude)i(more)f(e\016cien)o(t)h(than)f(a)g(tradi-)79
1626 y(tional)e(op)q(erating)g(system.)k(F)l(urthermore,)13
b(it)h(supp)q(orts)f(a)g(degree)g(of)g(\015exibilit)o(y)j(not)c(attained)i
(in)g(an)o(y)79 1682 y(op)q(erating)k(system.)26 b(F)l(or)17
b(example,)i(virtual)f(memory)f(is)h(e\016cien)o(tly)h(implemen)o(ted)g(en)o
(tirely)g(at)d(the)79 1739 y(application)h(lev)o(el.)79 1836
y(Thesis)f(Sup)q(ervisor:)21 b(M.)15 b(F)l(rans)g(Kaasho)q(ek)79
1892 y(Title:)21 b(Assistan)o(t)15 b(Professor)f(of)h(Computer)g(Science)i
(and)e(Engineering)p eop
%%Page: 4 4
4 3 bop eop
%%Page: 3 5
3 4 bop 131 34 a Fp(The)18 b(Design)g(and)i(Implem)o(en)n(tation)c(of)i(a)h
(Protot)n(yp)r(e)f(Exok)n(ernel)f(Op)r(erating)891 92 y(System)954
150 y Ft(b)o(y)786 208 y(Da)o(wson)g(R.)f(Engler)199 323 y
Fo(Submitted)g(to)e(the)i(Departmen)o(t)e(of)h(Electrical)i(Engineering)f
(and)g(Computer)e(Science)535 379 y(on)h(Jan)o(uary)g(1995,)f(in)i(partial)g
(ful\014llmen)o(t)h(of)e(the)681 436 y(requiremen)o(ts)h(for)e(the)i(degree)f
(of)422 492 y(Master)f(of)h(Science)i(in)f(Computer)f(Science)i(and)e
(Engineering)79 614 y Fp(Abstract)79 723 y Fo(T)l(raditional)g(op)q(erating)f
(systems)f(abstract)f(hardw)o(are)h(resources.)19 b(The)14
b(cost)f(of)g(pro)o(viding)i(these)e(ab-)79 779 y(stractions)g(is)h(high:)19
b(op)q(erating)13 b(systems)g(are)g(t)o(ypically)h(unreliable,)i(complex,)e
(and)f(in\015exible.)22 b(More)79 835 y(imp)q(ortan)o(tly)l(,)e(applications)
g(that)d(are)i(built)g(on)g(these)f(systems)g(are)g(b)q(oth)h(ine\016cien)o
(t)h(and)f(limited)79 892 y(in)h(scop)q(e:)27 b(most)17 b(resource)i
(managemen)o(t)e(decisions)k(cannot)d(b)q(e)h(made)f(b)o(y)h(application)h
(designers,)79 948 y(lea)o(ving)15 b(them)g(with)f(little)i(recourse)e(when)g
(the)h(managemen)o(t)e(of)h(these)g(resources)g(is)h(inappropriate.)79
1005 y(W)l(e)i(b)q(eliev)o(e)h(that)d(the)i(quest)f(to)f(abstract)g(ph)o
(ysical)j(resources)e(has)g(sharply)h(limited)h(the)e(\015exibilit)o(y)79
1061 y(and)g(am)o(bition)g(of)e(applications.)150 1118 y(In)k(this)h(thesis,)
f(w)o(e)g(prop)q(ose)g(a)f(new)h(op)q(erating)g(system)f(structure,)h
Fn(exokernel)p Fo(,)f(whic)o(h)i(is)f(built)79 1174 y(on)c(the)f(premise)h
(that)e(an)h(op)q(erating)g(system)g(should)h(not)f(abstraction)f(ph)o
(ysical)j(resources.)k(Rather,)79 1231 y(op)q(erating)d(systems)f(should)h
(concen)o(trate)f Fn(solely)f Fo(on)h(m)o(ultiplexing)j(the)d(ra)o(w)f(hardw)
o(are:)20 b(from)14 b(these)79 1287 y(hardw)o(are)19 b(primitiv)o(es,)j
(application-lev)o(el)h(libraries)e(and)f(serv)o(ers)f(can)h(directly)h
(implemen)o(t)g(tradi-)79 1344 y(tional)16 b(op)q(erating)g(system)e
(abstractions,)h(sp)q(ecialized)j(for)d(appropriateness)g(and)g(sp)q(eed.)150
1400 y(This)21 b(thesis)h(motiv)m(ates)e(the)h(need)g(for)f(a)h(new)g(op)q
(erating)g(system)f(structure,)h(pro)o(vides)g(a)g(set)79 1456
y(of)d(precepts)g(to)f(guide)i(its)e(design,)i(discusses)g(general)f(issues)h
(that)e(exok)o(ernels)h(m)o(ust)f(deal)i(with)f(in)79 1513
y(m)o(ultiplexing)f(ph)o(ysical)f(hardw)o(are,)d(and)h(describ)q(es)i(and)f
(measures)f(a)g(protot)o(yp)q(e)f(exok)o(ernel)i(system.)79
1569 y(In)i(man)o(y)f(cases)g(this)h(protot)o(yp)q(e)f(system)g(is)g(an)h
(order)f(of)f(magnitude)i(more)f(e\016cien)o(t)h(than)f(a)g(tradi-)79
1626 y(tional)e(op)q(erating)g(system.)k(F)l(urthermore,)13
b(it)h(supp)q(orts)f(a)g(degree)g(of)g(\015exibilit)o(y)j(not)c(attained)i
(in)g(an)o(y)79 1682 y(op)q(erating)k(system.)26 b(F)l(or)17
b(example,)i(virtual)f(memory)f(is)h(e\016cien)o(tly)h(implemen)o(ted)g(en)o
(tirely)g(at)d(the)79 1739 y(application)h(lev)o(el.)79 1836
y(Thesis)f(Sup)q(ervisor:)21 b(M.)15 b(F)l(rans)g(Kaasho)q(ek)79
1892 y(Title:)21 b(Assistan)o(t)15 b(Professor)f(of)h(Computer)g(Science)i
(and)e(Engineering)p eop
%%Page: 4 6
4 5 bop eop
%%Page: 5 7
5 6 bop 193 464 a Fo("A)15 b(considerable)i(amoun)o(t)d(of)g(bitter)i(exp)q
(erience)h(in)f(the)f(design)h(of)e(op)q(erating)h(systems)193
521 y(has)e(b)q(een)g(accum)o(ulated)h(in)f(the)g(last)f(few)h(y)o(ears,)f(b)
q(oth)h(b)o(y)f(the)h(designers)g(of)g(the)f(systems)193 577
y(whic)o(h)17 b(are)e(curren)o(tly)h(in)g(use)g(and)g(b)o(y)g(those)f(who)g
(ha)o(v)o(e)h(b)q(een)g(forced)g(to)f(use)h(them.)21 b(As)193
633 y(a)13 b(result,)h(man)o(y)f(p)q(eople)h(ha)o(v)o(e)f(b)q(een)i(led)f(to)
f(the)g(conclusion)i(that)e(some)g(radical)h(c)o(hanges)193
690 y(m)o(ust)c(b)q(e)h(made,)g(b)q(oth)g(in)g(the)f(w)o(a)o(y)g(w)o(e)g
(think)h(ab)q(out)f(the)h(functions)g(of)f(op)q(erating)g(systems)193
746 y(and)16 b(in)g(the)f(w)o(a)o(y)f(they)h(are)g(implemen)o(ted.")h(|)g
(Butler)g(Lampson,)f(1971.)193 853 y(The)g(c)o(heap)q(est,)g(fastest)e(and)i
(most)e(reliable)k(comp)q(onen)o(t)e(of)f(an)g([op)q(erating)g(system])g(are)
193 909 y(those)h(that)g(aren't)f(there)h(|)h(Gordon)e(Bell,)j(paraphrase.)
968 2817 y(5)p eop
%%Page: 6 8
6 7 bop 79 366 a Fm(Ac)m(kno)m(wledgmen)m(ts)79 589 y Fo(This)12
b(thesis)f(and)g(its)g(ideas)g(has)g(b)q(een)h(v)o(ery)e(m)o(uc)o(h)h(a)f
(join)o(t)h(pro)s(ject)e(with)j(m)o(y)e(advisor)g(F)l(rans)h(Kaasho)q(ek:)79
645 y(man)o(y)g(of)f(the)h(insigh)o(ts)h(and)f(motiv)m(ations)g(I)g(presen)o
(t)g(resulted)h(from)e(our)h(frequen)o(t)f(discussions.)20
b(James)79 702 y(O`T)l(o)q(ole)c(w)o(as)f(in)o(v)o(olv)o(ed)h(in)g(m)o(uc)o
(h)f(of)g(the)g(early)g(exok)o(ernel)h(meetings)g(and)f(publication)j([36)o
(,)d(37)o(,)g(35)o(];)79 758 y(the)22 b(idea)g(of)f(dynamically)j(loading)e
(application)h(co)q(de)f(in)o(to)f(the)h(k)o(ernel)g(w)o(as)f(his.)39
b(Without)21 b(the)79 814 y(in)o(v)o(olv)o(emen)o(t)16 b(of)f(these)g(t)o(w)o
(o)f(men)i(there)f(w)o(ould)g(b)q(e)h(no)f(exok)o(ernel.)150
871 y(I)g(giv)o(e)g(sp)q(ecial)h(thanks)e(to)g(m)o(y)h(o\016ce)f(mate,)g(Deb)
q(orah)g(W)l(allac)o(h.)21 b(Her)14 b(high)i(scien)o(ti\014c)g(standards)79
927 y(and)g(biting)g(h)o(umor)f(are)g(m)o(uc)o(h)g(appreciated.)150
984 y(Sp)q(ecial)20 b(recognition)f(go)q(es)g(to)e(F)l(rans)h(Kaasho)q(ek,)h
(Massimiliano)g(P)o(oletto,)f(Carl)g(W)l(aldspurger,)79 1040
y(and)13 b(Deb)q(orah)f(W)l(allac)o(h,)i(who)e(all)h(read)g(the)f(complete)h
(thesis)g(\(F)l(rans)f(did)i(so)e(m)o(ultiple)i(times\).)19
b(Their)79 1097 y(heroic)g(editorial)g(endurance)f(is)h(greatly)e
(appreciated.)28 b(Kevin)19 b(Lew)f(and)g(Wilson)g(Hsieh)h(also)e(ga)o(v)o(e)
79 1153 y(v)o(ery)i(useful)i(feedbac)o(k.)32 b(The)19 b(v)o(oice)g(of)g
(sanit)o(y)g(\(pla)o(y)o(ed)g(alternativ)o(ely)h(b)o(y)f(Deb)q(orah)g(W)l
(allac)o(h)h(and)79 1210 y(Rob)q(ert)c(Bedic)o(hek\))h(remo)o(v)o(ed)d(a)h
(few)g(of)g(m)o(y)g(more)f(fan)o(tastic)h(claims.)150 1266
y(I)i(thank)g(Sandeep)h(Gupta)e(for)h(writing)g(the)g(timer)g(in)o(terrupt)g
(and)g(in)o(v)o(erted)g(page-table)h(imple-)79 1323 y(men)o(tations.)150
1379 y(Greg)h(Andrews)h(\014rst)f(in)o(tro)q(duced)i(me)e(to)g(researc)o(h.)
33 b(Without)20 b(his)g(assistance,)g(it)g(is)g(unlik)o(ely)79
1435 y(that)15 b(I)h(w)o(ould)f(b)q(e)h(doing)g(an)o(ything)f(nearly)h(so)f
(jo)o(y)o(ous.)150 1492 y(Most)h(esp)q(ecially)j(I)e(thank)g(Kim)h(Danlo)q
(e,)f(who)g(has)f(tolerated)h(long)g(hours,)g(monosyllabic)h(con-)79
1548 y(v)o(ersations,)e(and)h(general)g(surliness)g(throughout)f(m)o(y)g
(researc)o(h)g(career:)22 b(without)16 b(her)h(supp)q(ort,)f(the)79
1605 y(iv)o(ory)g(to)o(w)o(er)d(w)o(ould)j(b)q(e)g(lonely)g(and)g(empt)o(y)l
(.)p eop
%%Page: 7 9
7 8 bop eop
%%Page: 8 10
8 9 bop 79 366 a Fm(Con)m(ten)m(ts)79 634 y Fl(1)43 b(In)o(tro)q(duction)1392
b(13)148 691 y Fo(1.1)45 b(The)16 b(Problem)37 b Fk(:)23 b(:)f(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(13)148 747 y(1.2)45
b(Motiv)m(ation)h Fk(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(14)252 803 y(1.2.1)51 b(P)o(o)q(or)14
b(reliabilit)o(y)33 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(14)252 860 y(1.2.2)51 b(P)o(o)q(or)14 b(adaptabilit)o(y)j
Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(15)252 916
y(1.2.3)51 b(P)o(o)q(or)14 b(p)q(erformance)46 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)69 b Fo(16)252 973 y(1.2.4)51 b(P)o(o)q(or)14 b(\015exibilit)o(y)
37 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(16)252
1029 y(1.2.5)51 b(Summary)32 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(17)148 1086 y(1.3)45 b(The)16 b(Solution:)21
b(Exok)o(ernels)41 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(17)148 1142 y(1.4)45 b(Impact)16 b(of)e(an)h(Exok)o(ernel)h(Structure)i
Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(19)148 1199 y(1.5)45 b(Discussion)22
b Fk(:)g(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(22)148 1255 y(1.6)45 b(Thesis)16 b(Ov)o(erview)42 b Fk(:)23
b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(24)148
1312 y(1.7)45 b(Summary)37 b Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(24)79 1413 y Fl(2)43 b(Exok)o(ernel)16
b(Design)i(Issues)1127 b(27)148 1470 y Fo(2.1)45 b(Design)16
b(Principles)27 b Fk(:)c(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(28)148 1526 y(2.2)45 b(T)l(radeo\013s)15 b(in)h(Distributed)g(and)f(Cen)
o(tralized)h(Con)o(trol)33 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)69 b Fo(29)148 1583 y(2.3)45 b(Resource)16
b(Allo)q(cation)44 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(32)252 1639 y(2.3.1)51 b(What)14 b(to)h(allo)q(cate)30
b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(32)252
1696 y(2.3.2)51 b(In)o(terface)15 b(lev)o(el)k Fk(:)j(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)69 b Fo(33)252 1752 y(2.3.3)51 b(Exp)q(ort)14
b(all)j(hardw)o(are)d(op)q(erations)25 b Fk(:)e(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(33)252
1809 y(2.3.4)51 b(Virtualization)19 b Fk(:)j(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)69 b Fo(33)252 1865 y(2.3.5)51 b(Aegis)45 b Fk(:)23
b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(34)148 1922 y(2.4)45 b(Resource)16 b(Rev)o(o)q(cation)26
b Fk(:)c(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(35)252
1978 y(2.4.1)51 b(T)l(radeo\013s)40 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(35)252 2034 y(2.4.2)51 b(Aegis)45
b Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(37)148 2091 y(2.5)45 b(Resource)16 b(Naming)21 b Fk(:)i(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(37)252 2147 y(2.5.1)51
b(Name)15 b(spaces)40 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(38)252 2204 y(2.5.2)51 b(Ph)o(ysical)16 b(v)o(ersus)f(virtual)h(names)23
b Fk(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(38)252 2260 y(2.5.3)51 b(Allo)q(cation)16
b(b)o(y)g(name)46 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(39)252 2317 y(2.5.4)51 b(Aegis)45 b Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(40)148 2373 y(2.6)45
b(Protection)20 b Fk(:)i(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(40)252 2430 y(2.6.1)51 b(T)l(radeo\013s)40
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(40)252 2486 y(2.6.2)51 b(Aegis)45 b Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(41)148 2543 y(2.7)45
b(Device)16 b(Multiplexing)43 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)69 b Fo(42)252 2599 y(2.7.1)51 b(F)l(rame-bu\013er)39
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(42)252 2655 y(2.7.2)51 b(Net)o(w)o(ork)20 b Fk(:)i(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(43)968 2817 y(8)p eop
%%Page: 9 11
9 10 bop 252 34 a Fo(2.7.3)51 b(Aegis)15 b(sp)q(eci\014cs)48
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(44)148
90 y(2.8)45 b(Global)16 b(Optimization)32 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)69 b Fo(45)252 147 y(2.8.1)51 b(Simple)17
b(global)f(optimizations)27 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(45)252
203 y(2.8.2)51 b(W)l(orking)15 b(set)g(deriv)m(ation)20 b Fk(:)i(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)69 b Fo(45)252 260 y(2.8.3)51 b(Disk)15 b(utilization)25
b Fk(:)e(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(46)148
316 y(2.9)45 b(Some)15 b(Practical)h(Considerations)45 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)69 b Fo(46)252 373 y(2.9.1)51 b(Decoupled)16
b(implemen)o(tation)48 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(46)252
429 y(2.9.2)51 b(The)15 b(role)h(of)e(serv)o(ers)32 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(47)148 486 y(2.10)22
b(Summary)37 b Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(49)79 588 y Fl(3)43 b(An)17 b(Exok)o(ernel)f(System)
1181 b(51)148 644 y Fo(3.1)45 b(Platform)15 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(52)148
700 y(3.2)45 b(Ev)o(en)o(ts)23 b Fk(:)f(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(53)252 757 y(3.2.1)51
b(Exceptions)43 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(54)252 813 y(3.2.2)51 b(TLB)15 b(exceptions)h Fk(:)23
b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(54)252 870 y(3.2.3)51
b(In)o(terrupts)23 b Fk(:)g(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)69 b Fo(57)252 926 y(3.2.4)51 b(Up)q(calls)43 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(58)148 983 y(3.3)45 b(Ob)s(jects)39 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(60)252 1039
y(3.3.1)51 b(Capabilities)26 b Fk(:)c(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)69 b Fo(60)252 1096 y(3.3.2)51 b(Time-Slices)34 b Fk(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(60)252
1152 y(3.3.3)51 b(P)o(age)21 b Fk(:)h(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(62)252 1209 y(3.3.4)51 b(Con)o(text)14
b(iden)o(ti\014er)j Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(63)252 1265 y(3.3.5)51 b(En)o(vironmen)o(t)37 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(63)148 1321
y(3.4)45 b(System)15 b(Calls)42 b Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(65)148 1378 y(3.5)45 b(Primitiv)o(e)16
b(Op)q(erations)22 b Fk(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(66)148 1434 y(3.6)45 b(ExOS:)16 b(A)f(Simple)i(Library)f(Op)q(erating)g
(System)34 b Fk(:)23 b(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)69 b Fo(68)252 1491 y(3.6.1)51 b(ExOS)15 b(ABI)h(con)o(v)o(en)o
(tions)d Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(68)252 1547
y(3.6.2)51 b(The)15 b(liv)o(e-register)i(problem)41 b Fk(:)23
b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(69)252 1604 y(3.6.3)51 b(Time-sharing)32
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(70)252 1660 y(3.6.4)51 b(Exceptions)43 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(71)252 1717 y(3.6.5)51 b(Virtual)16
b(memory)46 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(71)252 1773 y(3.6.6)51 b(Pro)q(cess)15 b(creation)42 b
Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(71)148 1830
y(3.7)45 b(Summary)37 b Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(71)79 1931 y Fl(4)43 b(Application-lev)o(el)20
b(Implem)n(en)o(tations)c(of)h(Basic)i(OS)e(Abstractions)303
b(73)148 1988 y Fo(4.1)45 b(Exp)q(erimen)o(tal)17 b(en)o(vironmen)o(t)g
Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(74)148 2044
y(4.2)45 b(Pro)q(cesses)c Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(75)252 2101 y(4.2.1)51 b(Pro)q(cess)15
b(sc)o(heduling)32 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(75)252 2157 y(4.2.2)51 b(Pro)q(cess)15 b(Creation)29 b
Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(76)252 2214
y(4.2.3)51 b(E\016cien)o(t)15 b(timer)h(in)o(terrupts)45 b
Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(76)252 2270 y(4.2.4)51 b(Exp)q(erimen)o(ts)45
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(77)148 2327 y(4.3)45 b(IPC)d Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(77)252 2383
y(4.3.1)51 b(IPC)15 b(Exp)q(erimen)o(ts)21 b Fk(:)h(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)69 b Fo(77)148 2440 y(4.4)45 b(Protection)20 b Fk(:)i(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(79)252 2496 y(4.4.1)51 b(Em)o(b)q(edded)16 b(protection)f(domains)41
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(80)148 2552 y(4.5)45 b(Exceptions)i
Fk(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(80)252 2609 y(4.5.1)51 b(Exception)16 b(exp)q(erimen)o(ts)j
Fk(:)j(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(81)148 2665 y(4.6)45 b(Virtual)16
b(Memory)46 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(82)968 2817 y(9)p eop
%%Page: 10 12
10 11 bop 252 34 a Fo(4.6.1)51 b(Exp)q(osing)16 b(Hardw)o(are)e(Capabilities)
45 b Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)69 b Fo(82)252 90 y(4.6.2)51 b(Sp)q(eci\014c)17
b(P)o(age)e(Allo)q(cation)27 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(83)252 147 y(4.6.3)51 b(Address)15 b(space)h(structure)31
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(84)252 203 y(4.6.4)51
b(Tigh)o(ter)15 b(in)o(tegration)21 b Fk(:)h(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(84)252 260 y(4.6.5)51 b(P)o(age)14 b(size)i(T)l(rade)f(o\013s)41
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(85)252 316 y(4.6.6)51
b(P)o(age-table)15 b(Structures)42 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(85)252 373 y(4.6.7)51 b(Virtual)16 b(memory)e(exp)q(erimen)o(ts)41
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)69 b Fo(86)148 429 y(4.7)45 b(Conclusions)29
b Fk(:)22 b(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(88)79 531 y Fl(5)43 b(Related)19 b(W)l(ork)1359 b(90)148
588 y Fo(5.1)45 b(Microk)o(ernels:)21 b(The)15 b(Garden)g(P)o(ath)g(of)g
(Simplicit)o(y)35 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)69 b Fo(90)148 644 y(5.2)45 b(Pico-k)o(ernels)26
b Fk(:)c(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(90)252 700 y(5.2.1)51 b(The)15 b(pico)h(k)o(ernel)22 b
Fk(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(91)252
757 y(5.2.2)51 b(SP)l(A)o(CE)39 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(91)252 813 y(5.2.3)51 b(The)15
b(Ra)o(v)o(en)g(Kernel)39 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(91)148 870 y(5.3)45 b(The)16 b(Cac)o(he)f(Kernel)46 b
Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(91)148 926 y(5.4)45 b(Library)16 b(Op)q(erating)g(Systems)40
b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(92)148 983 y(5.5)45
b(SPIN)16 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(92)148 1039 y(5.6)45 b(VM/370)24
b Fk(:)f(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)69 b Fo(92)148 1096 y(5.7)45 b(Syn)o(thesis)f Fk(:)22 b(:)g(:)h(:)f(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(92)148
1152 y(5.8)45 b(HAL)26 b Fk(:)c(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(93)148 1209 y(5.9)45
b(Extensible)17 b(Op)q(erating)f(Systems)i Fk(:)k(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(93)148 1265 y(5.10)22 b(Dynamically)17 b(loaded)f(device)g(driv)o(ers)43
b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(93)79 1367 y Fl(6)43 b(Conclusions)1409
b(95)148 1423 y Fo(6.1)45 b(Summary)37 b Fk(:)22 b(:)g(:)h(:)f(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(95)148 1480
y(6.2)45 b(Con)o(tributions)24 b Fk(:)f(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(95)148 1536 y(6.3)45 b(F)l(uture)15
b(w)o(ork)k Fk(:)j(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)
h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)69 b Fo(96)148 1593 y(6.4)45 b(Close)16 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)
f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b
Fo(97)957 2817 y(10)p eop
%%Page: 11 13
11 12 bop 79 366 a Fm(List)42 b(of)e(Figures)148 589 y Fo(1-1)j(An)16
b(example)g(exok)o(ernel-based)g(system)42 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(19)148 645 y(1-2)43 b(A)15 b(set)g(of)g(example)h(address)f(spaces)h
Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g
(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(20)148 743 y(2-1)43 b(Comparison)15
b(of)g(exok)o(ernels)h(to)e(traditional)i(systems)c Fk(:)23
b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(30)148 841 y(3-1)43 b(Assem)o(bly)16 b(co)q(de)g(to)e(p)q(erform)h
(exception)i(forw)o(arding)d(\(18)g(instructions\))29 b Fk(:)22
b(:)g(:)h(:)f(:)g(:)69 b Fo(55)148 897 y(3-2)43 b(STLB)16 b(structure)k
Fk(:)i(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(58)148 954 y(3-3)43 b(Assem)o(bly)16 b(co)q(de)g(used)g(b)o(y)f(Aegis)g
(to)g(lo)q(okup)h(mapping)g(in)g(STLB)g(\(18)e(instructions\).)64
b(59)148 1010 y(3-4)43 b(Assem)o(bly)16 b(co)q(de)g(to)e(p)q(erform)h(a)g
(sync)o(hronous)g(up)q(call)20 b Fk(:)j(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(61)148 1067 y(3-5)43 b(Capabilit)o(y)16
b(represen)o(tations)24 b Fk(:)e(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(62)148 1123 y(3-6)43 b(Slice)17 b(data)e(structure)g Fk(:)22
b(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(62)148
1180 y(3-7)43 b(P)o(age)15 b(data)f(structure)46 b Fk(:)22
b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(62)148 1236
y(3-8)43 b(En)o(vironmen)o(t)15 b(data)g(structure)25 b Fk(:)e(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)69 b Fo(64)148 1293 y(3-9)43 b(The)16 b(address)f(space)g
(structure)g(of)g(ExOS-based)h(applications)30 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)69 b Fo(68)148 1349 y(3-10)20 b(Return)c(from)e
(exception)j(using)f(a)f(tramp)q(oline)h(function)25 b Fk(:)d(:)h(:)f(:)g(:)h
(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(70)148 1447 y(4-1)43
b(Exp)q(erimen)o(tal)17 b(platforms)39 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)h(:)f(:)g(:)h(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)69 b Fo(74)148 1504 y(4-2)43 b(Null)17 b(pro)q(cedure)f(and)f(system)g
(call;)h(times)g(are)f(in)h(micro-seconds)46 b Fk(:)22 b(:)g(:)h(:)f(:)g(:)h
(:)f(:)g(:)69 b Fo(75)148 1560 y(4-3)43 b Fj(upcall)15 b Fo(Benc)o(hmark;)g
(times)g(are)g(in)h(micro-seconds)34 b Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(78)148 1616 y(4-4)43
b Fj(pipe)15 b Fo(Benc)o(hmark;)g(times)g(are)g(in)h(micro-seconds)47
b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(78)148 1673 y(4-5)43 b Fj(shmem)15 b Fo(Benc)o(hmark;)g(times)g(are)g
(in)h(micro-seconds)23 b Fk(:)f(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f
(:)g(:)h(:)f(:)g(:)69 b Fo(79)148 1729 y(4-6)43 b Fj(lrpc)15
b Fo(Benc)o(hmark;)g(times)g(are)g(in)h(micro-seconds)47 b
Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69
b Fo(79)148 1786 y(4-7)43 b Fj(Trap)15 b Fo(b)q(enc)o(hmarks;)g(times)h(are)e
(in)i(micro-seconds)35 b Fk(:)22 b(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)
f(:)g(:)h(:)f(:)g(:)69 b Fo(81)148 1842 y(4-8)43 b(Virtual)16
b(memory)f(b)q(enc)o(hmarks;)g(times)h(are)e(in)i(micro-seconds)24
b Fk(:)e(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)69 b Fo(87)148
1899 y(4-9)43 b(150x150)14 b(matrix)h(m)o(ultiplication)i(\(time)e(in)h
(seconds\))e Fk(:)23 b(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)g(:)h(:)f(:)
g(:)69 b Fo(88)957 2817 y(11)p eop
%%Page: 12 14
12 13 bop eop
%%Page: 13 15
13 14 bop 79 345 a Fi(Chapter)35 b(1)79 553 y Fm(In)m(tro)s(duction)79
775 y Fo(The)13 b(op)q(erating)f(system)g(is)h(in)o(terp)q(osed)g(b)q(et)o(w)
o(een)g(applications)h(and)e(the)g(ph)o(ysical)i(hardw)o(are.)k(There-)79
832 y(fore,)d(its)g(structure)f(has)h(a)g(dramatic)g(impact)g(on)g(the)g(p)q
(erformance)g(and)g(the)g(scop)q(e)g(of)g(applications)79 888
y(that)e(can)g(b)q(e)h(built)g(on)f(it.)19 b(Since)c(its)e(inception,)i(the)e
(\014eld)h(of)f(op)q(erating)g(systems)f(has)h(b)q(een)h(attempt-)79
945 y(ing)i(to)f(iden)o(tify)h(an)f(appropriate)g(structure:)20
b(from)14 b(familiar)i(monolithic)h([99)o(,)e(103)o(])g(to)f(micro-k)o(ernel)
79 1001 y(op)q(erating)k(systems)f([2,)g(43)o(])g(to)g(more)g(exotic)h
(language-based)g([81)o(])f(and)h(virtual)g(mac)o(hine)g([27)o(,)f(40])79
1058 y(op)q(erating)h(systems.)25 b(This)18 b(searc)o(h,)f(spanning)h(the)g
(last)f(three)g(decades,)h(has)f(b)q(een)i(aggressiv)o(e)d(and)79
1114 y(vigorous)f(but,)g(unfortunately)l(,)h(has)f(not)g(b)q(een)h
(satisfactorily)f(resolv)o(ed)h([13)o(,)f(22)o(,)g(36)o(,)g(43,)f(63,)h(72)o
(].)150 1171 y(In)k(this)f(thesis)g(w)o(e)g(prop)q(ose)g(a)g(new)g(op)q
(erating)g(system)f(structure)h(that)f(dramatically)i(departs)79
1227 y(from)e(previous)h(w)o(ork.)25 b(An)18 b Fn(exokernel)e
Fo(eliminates)j(the)f(notion)f(that)g(an)g(op)q(erating)h(system)e(should)79
1283 y(pro)o(vide)22 b(abstractions)f(on)g(whic)o(h)i(applications)f(are)f
(built.)40 b(Instead,)23 b(it)e(concen)o(trates)g(solely)i(on)79
1340 y(m)o(ultiplexing)d(the)d(ra)o(w)e(hardw)o(are:)23 b(from)16
b(these)h(hardw)o(are)f(primitiv)o(es,)i Fn(applic)n(ation-level)e
Fo(libraries)79 1396 y(and)j(serv)o(ers)f(can)h(directly)h(implemen)o(t)g
(traditional)f(op)q(erating)g(system)f(abstractions,)g(sp)q(ecialized)79
1453 y(for)d(appropriateness)h(and)f(sp)q(eed.)79 1596 y Fu(1.1)70
b(The)23 b(Problem)79 1698 y Fo(The)15 b(cost)g(of)f(inappropriate,)h
(ine\016cien)o(t)i(op)q(erating)e(system)f(abstractions)g(has)h(had)g(a)f
(large)h(impact)79 1754 y(on)k(applications)h([5,)e(13)o(,)h(44)o(,)g(45)o(,)
f(72,)g(91)o(,)h(97)o(].)30 b(This)19 b(situation)h(has)e(p)q(ersisted)i(for)
e(the)h(last)f(three)79 1810 y(decades,)h(and)e(has)g(surviv)o(ed)h(n)o
(umerous)f(assaults)g(\(e.g.,)g(ob)s(ject-orien)o(ted)g(op)q(erating)h
(systems)e(and)79 1867 y(micro-k)o(ernels\).)k(An)o(y)14 b(concept)f(that)g
(cannot)g(b)q(e)h(realized)h(after)d(suc)o(h)i(a)f(long)g(p)q(erio)q(d)i(of)e
(time)g(should)79 1923 y(b)q(e)j(reexamined.)150 1980 y(The)d(standard)f
(de\014nition)i(of)e(an)g(op)q(erating)h(system)e(is)i(soft)o(w)o(are)e(that)
g(securely)j(m)o(ultiplexes)g(and)79 2036 y Fn(abstr)n(acts)e
Fo(ph)o(ysical)h(resources.)18 b(The)12 b(core)g(assumption)g(of)f(this)i
(de\014nition)g(is)f(that)g(it)g(is)g(p)q(ossible)h(b)q(oth)79
2093 y(to)i(de\014ne)g(abstractions)f(that)g(are)h(appropriate)f(for)h(all)g
(areas)f(and)h(to)f(implemen)o(t)i(them)f(to)f(p)q(erform)79
2149 y(e\016cien)o(tly)19 b(in)f(all)h(situations.)26 b(W)l(e)18
b(b)q(eliev)o(e)h(that)e(this)h(de\014nition,)h(sp)q(eci\014cally)h(its)e
(view)g(of)e(the)i(OS)79 2206 y(as)e(an)h(abstractor)e(of)h(hardw)o(are,)f
(sets)h(an)h(unattainable)g(grail)g(for)f(the)g(op)q(erating)h(system)f
(designer)79 2262 y(and)22 b(sharply)h(curtails)f(the)g(am)o(bition)g(of)f
(systems)g(that)g(can)h(b)q(e)h(built)g(on)e(top)h(of)f(the)h(resultan)o(t)79
2319 y(system.)34 b(The)20 b(basic)h(in)o(tuition)g(b)q(ehind)h(our)e
(argumen)o(ts)f(is)i(that)e(no)h(OS)g(abstraction)g(can)g(\014t)g(all)79
2375 y(applications:)i(it)15 b(is)g Fn(fundamental)r(ly)g Fo(imp)q(ossible)i
(to)e(abstract)e(resources)i(in)h(a)f(w)o(a)o(y)f(that)g(is)h(useful)h(to)79
2431 y(all)c(applications)g(and)e(to)g(implemen)o(t)i(these)e(abstractions)g
(in)i(a)e(w)o(a)o(y)f(that)h(is)h(e\016cien)o(t)g(across)e(disparate)79
2488 y(needs.)20 b(Op)q(erating)14 b(systems)e(that)g(ha)o(v)o(e)g(b)q(een)i
(built)g(in)f(this)g(manner)g(ha)o(v)o(e)f(one)h(or)f(\(usually\))i(more)e
(of)79 2544 y(the)k(follo)o(wing)f(c)o(haracteristics:)20 b(they)15
b(are)g(complex)h(and)f(large,)f(decreasing)i(system)f(reliabilit)o(y)i(and)
79 2601 y(aggressiv)o(ely)g(discouraging)h(c)o(hange;)f(they)g(are)f(o)o(v)o
(erly)h(general,)g(making)g(their)g(use)g(exp)q(ensiv)o(e)h(and)79
2657 y(their)f(implemen)o(tation)h(consume)f(signi\014can)o(t)g(fractions)f
(of)g(mac)o(hine)h(resources;)f(and)h(they)f(enforce)957 2817
y(13)p eop
%%Page: 14 16
14 15 bop 79 34 a Fo(a)18 b(high-lev)o(el)i(in)o(terface,)e(precluding)i(the)
d(e\016cien)o(t)i(implemen)o(tation)g(of)e(new)h(abstractions)f(outside)79
90 y(of)e(the)h(OS.)150 147 y(W)l(e)g(b)q(eliev)o(e)j(that)d(the)g(attempt)f
(to)h(pro)o(vide)h(OS)g(abstractions)f(is)h(the)f(ro)q(ot)f(of)h(man)o(y)g
(op)q(erating)79 203 y(system)h(problems.)27 b(W)l(e)17 b(con)o(tend)h(that)e
(these)i(problems)f(can)h(b)q(e)g(solv)o(ed)f(directly)i(b)o(y)e(the)g
(elimina-)79 260 y(tion)i(of)e(OS)i(abstractions,)f(lo)o(w)o(ering)g(the)g
(in)o(terface)h(enforced)f(b)o(y)g(the)g(OS)h(to)e(a)h(lev)o(el)h(close)g(to)
e(the)79 316 y(ra)o(w)f(hardw)o(are.)23 b(It)17 b(is)g(imp)q(ortan)o(t)f(to)g
(note)h(that)e(w)o(e)i Fn(favor)g Fo(abstractions,)f(but)g(they)h(should)h(b)
q(e)f(im-)79 373 y(plemen)o(ted)j(outside)e(the)g(op)q(erating)g(system)f(so)
h(that)f(application)i(designers)g(can)f(select)h(among)e(a)79
429 y(m)o(yriad)f(of)e(implemen)o(tations)j(or,)d(if)i(necessary)l(,)f
(\\roll)h(their)f(o)o(wn.")150 486 y(The)h(structure)g(of)f(this)i(c)o
(hapter)f(is)g(as)g(follo)o(ws:)21 b(Section)c(1.2)e(examines)h(the)g(costs)g
(of)f(op)q(erating)79 542 y(system)k(abstractions;)h(Section)g(1.3)e
(outlines)j(sp)q(eci\014c)g(features)d(of)h(our)g(target)f(op)q(erating)h
(system)79 599 y(structure;)e(and)f(Section)h(1.4)e(explores)i(some)f(of)g
(the)g(adv)m(an)o(tages)g(of)f(this)i(new)f(OS)h(structure.)23
b(Sec-)79 655 y(tion)16 b(1.5)f(addresses)h(common)f(concerns)h(expressed)g
(ab)q(out)g(an)f(exok)o(ernel)h(structure)g(\(e.g.,)e(p)q(ossible)79
711 y(p)q(ortabilit)o(y)19 b(and)e(size)h(problems\).)26 b(W)l(e)17
b(outline)i(the)e(remainder)h(of)e(the)h(thesis)h(in)g(Section)g(1.6)e(and)79
768 y(conclude)h(in)f(Section)g(1.7.)150 824 y(The)g(follo)o(wing)f
(de\014nitions)i(are)e(used)h(throughout)f(this)g(thesis.)150
881 y Fn(Op)n(er)n(ating)h(system)p Fo(:)21 b(soft)o(w)o(are)15
b(that)g(applications)j(cannot)d(either)i(c)o(hange)f(or)g(a)o(v)o(oid.)22
b(User-lev)o(el)79 937 y(device)17 b(driv)o(ers,)e(privileged)j(serv)o(ers,)c
(and)h(k)o(ernels)h(are)f(all)h(included)i(b)o(y)d(this)h(de\014nition.)150
994 y Fn(Applic)n(ation-level)p Fo(:)32 b(soft)o(w)o(are)20
b(that)h(can)h(b)q(e)g(c)o(hanged)h(and/or)e(a)o(v)o(oided)h(b)o(y)g(an)o(y)f
(application.)79 1050 y(Libraries)c(and)e(applications)i(are)e(included)j(in)
e(this)g(de\014nition.)150 1107 y Fn(User-level)p Fo(:)i(soft)o(w)o(are)12
b(whic)o(h)j(can)f(require)h(high)f(privileges)i(to)d(adapt)h(or)f(replace.)
21 b(F)l(or)13 b(example,)79 1163 y(replacing)k(a)d(device)j(driv)o(er)e
(often)g(requires)g(sup)q(ervisor)h(privileges\).)21 b(The)16
b(k)o(ey)e(distinction)j(b)q(et)o(w)o(een)79 1220 y(user-)j(and)e
(application-lev)o(el)k(is)e(that)e(ordinary)g(programs)g(can)h(replace,)h
(extend)f(and)g(implemen)o(t)79 1276 y(application-lev)o(el)f(soft)o(w)o
(are.)g(The)c(same)g(condition)i(do)q(es)f(not)f(necessarily)h(hold)g(for)f
(user-lev)o(el)i(soft-)79 1332 y(w)o(are,)f(and)g(th)o(us)g(dramatically)h
(limits)g(its)g(\015exibilit)o(y)l(.)79 1476 y Fu(1.2)70 b(Motiv)l(ation)79
1577 y Fo(The)13 b(goal)f(of)g(the)h(OS)g(designer)g(should)g(b)q(e)g(to)f
(push)h(the)g(in)o(terface)f(de\014ned)i(b)o(y)e(the)h(OS)g(to)f(the)g(lev)o
(el)i(of)79 1634 y(the)h(ra)o(w)e(hardw)o(are.)19 b(The)14
b(distinction)i(b)q(et)o(w)o(een)f(application-lev)o(el)i(and)d(user-lev)o
(el)i(is)f(an)f(imp)q(ortan)o(t)79 1690 y(one.)23 b(Man)o(y)16
b(microk)o(ernel)h(prop)q(onen)o(ts)f(do)g(not)g(app)q(ear)g(to)f(prop)q
(erly)i(appreciate)g(it:)22 b(while)c(mo)o(ving)79 1747 y(in-k)o(ernel)i
(implemen)o(tations)f(of)e(OS)h(services)h(\(suc)o(h)e(as)h(\014lesystems)g
(and)g(device)h(driv)o(ers\))e(to)g(user-)79 1803 y(space)e(can)g(impro)o(v)o
(e)g(the)f(extensibilit)o(y)j(of)e(the)f(system)h(as)f(seen)h(b)o(y)g(the)f
(\\sup)q(er-user,")h(it)g(do)q(es)g(little)79 1859 y(for)g(the)g(more)g
(common)g(class)h(of)e(applications.)150 1916 y(The)j(thesis)g(b)q(ehind)i
(the)e(exok)o(ernel)g(structure)g(is)g(that)f(the)h(op)q(erating)g(system)f
(should)i(not)e(ab-)79 1972 y(stract)f(ph)o(ysical)h(resources.)k(The)c(sole)
g(role)f(of)g(an)g(op)q(erating)h(system)f(should)h(b)q(e)g(to)f(ensure)g
(protec-)79 2029 y(tion;)k(it)f(should)h(not)e(either)i(hide)g(hardw)o(are)e
(functionalit)o(y)h(or)g(inhibit)i(application-lev)o(el)g(resource)79
2085 y(sharing.)h(Abstraction)14 b(and)i(managemen)o(t)e(of)g(hardw)o(are)h
(resources)f(should)i(b)q(e)g(left)f(to)g(application-)79 2142
y(lev)o(el)21 b(libraries)f(and)f(serv)o(ers)f(whic)o(h)i(are)e(in)i(a)e(b)q
(etter)h(p)q(osition)h(to)e(implemen)o(t)i(these)f(mec)o(hanisms)79
2198 y(than)d(an)o(y)e(general)i(purp)q(ose)g(op)q(erating)f(system.)150
2255 y(Pro)o(viding)j(op)q(erating)g(system)e(abstractions)h(results)h(in:)25
b(p)q(o)q(or)17 b(reliabilit)o(y)l(,)j(p)q(o)q(or)e(adaptabilit)o(y)l(,)79
2311 y(p)q(o)q(or)e(p)q(erformance)f(and)g(p)q(o)q(or)h(\015exibilit)o(y)l(.)
22 b(W)l(e)16 b(discuss)g(eac)o(h)f(of)g(these)g(p)q(oin)o(ts)h(b)q(elo)o(w.)
79 2433 y Fp(1.2.1)56 b(P)n(o)r(or)19 b(reliabilit)n(y)79 2519
y Fo(Abstracting)j(resources)f(\(e.g.,)g(pro)o(viding)h(a)e(full-featured)j
(virtual)f(memory)e(system)h(with)g(cop)o(y-)79 2575 y(on-write,)h
(memory-mapp)q(ed)f(I/O)g(and)g(other)g(features\))f(requires)h(a)f(large)h
(amoun)o(t)f(of)g(complex,)79 2632 y(m)o(ulti-threaded)k(co)q(de.)42
b(These)23 b(c)o(haracteristics,)h(along)e(with)h(dynamic)g(storage)e(allo)q
(cation)i(and)79 2688 y(managemen)o(t)17 b(and)g(the)g(paging)g(of)g(k)o
(ernel)g(data)g(structures)f(and)h(co)q(de,)h(greatly)f(decrease)g(the)g
(reli-)957 2817 y(14)p eop
%%Page: 15 17
15 16 bop 79 34 a Fo(abilit)o(y)18 b(of)f(the)f(system.)24
b(Large)17 b(pieces)h(of)e(soft)o(w)o(are)f(ha)o(v)o(e)h(large)h(n)o(um)o(b)q
(ers)g(of)f(bugs,)h(and)g(therefore,)79 90 y(the)d(large)f(size)i(of)e
(curren)o(t)g(op)q(erating)h(systems)f(has)g(a)g(direct)h(impact)g(on)f
(their)h(reliabilit)o(y)l(.)22 b(As)13 b(noted)79 147 y(b)o(y)j(Spier:)193
244 y(Multiple-user)23 b(op)q(erating)e(systems)f(are)h(esp)q(ecially)i
(susceptible)g(to)d(soft)o(w)o(are-qualit)o(y)193 300 y(problems.)f(In)12
b(an)g(attempt)e(to)h(satisfy)g(the)h(mark)o(et's)e(ev)o(er)h(gro)o(wing)g
(demand)h(for)e(v)m(arious)193 357 y(sophistications,)15 b(more)f(and)g(more)
f(co)q(de)i(is)f(b)q(eing)i(crammed)d(in)o(to)h(already)h(exceedingly)193
413 y(complex)h(monolithic)h(op)q(erating)e(system)g(monitors)g(\(i.e.,)f
(sup)q(ervisors,)i(executiv)o(es\))f(to)193 470 y(the)j(p)q(oin)o(t)g(of)f
(rendering)i(them)f(virtually)h(imp)q(ossible)h(to)d(main)o(tain)h(at)f(an)h
(acceptable)193 526 y(lev)o(el)h(of)f(correctness.)27 b(The)18
b(industry)h(is)f(w)o(ell)h(a)o(w)o(are)d(of)h(this)i(fact,)e(and)h(ev)o(ery)
g(c)o(hange)193 583 y(|)e(no)f(matter)g(ho)o(w)f(trivial)j(|)f(is)f(t)o
(ypically)i(cautiously)g(debated)e(and)h(ev)m(aluated)g(as)f(to)193
639 y(whether)h(or)g(not)f(it)h(really)h(has)f(to)f(b)q(e)i(incorp)q(orated;)
g(its)f(implemen)o(tation)h(is)f(t)o(ypically)193 696 y(undertak)o(en)g(with)
f(great)f(reluctance)j([89)o(].)79 793 y(The)h(in)o(teresting)g(fact)f(ab)q
(out)g(this)h(observ)m(ation)f(is)h(that)f(it)g(w)o(as)g(made)g(in)h(1973;)f
(since)h(then,)g(op)q(er-)79 849 y(ating)e(system)f(complexit)o(y)i(has)e
Fn(incr)n(e)n(ase)n(d)p Fo(.)k(And)d(for)f(go)q(o)q(d)h(reason:)k
(traditional)c(op)q(erating)g(system)79 905 y(design)i(forces)e(k)o(ernel)h
(implemen)o(tors)h(to)d(implemen)o(t)j(the)f(virtual)g(mac)o(hine)g(for)f
(radically)i(di\013eren)o(t)79 962 y(applications)i(and)e(requiremen)o(ts.)29
b(T)l(o)17 b(do)h(this)g(successfully)l(,)j(OS)d(designers)h(ha)o(v)o(e)f
(had)g(to)f(include)79 1018 y(m)o(ultiple)d(standards)d(and)h(in)o(terfaces)g
(within)h(the)f(same)f(op)q(erating)h(system.)18 b(In)13 b(an)e(exok)o(ernel)
i(design,)79 1075 y(these)j(standards)f(and)h(implemen)o(tations)g(could)h
(eac)o(h)e(b)q(e)h(realized)h(in)f(an)g(isolated)g(fashion)g(\(e.g.,)e(in)79
1131 y(a)k(library\),)g(dramatically)g(simplifying)i(b)q(oth)d(their)h
(design)h(and)f(their)g(implemen)o(tation.)27 b(F)l(urther-)79
1188 y(more,)20 b(unlik)o(e)h(a)e(micro-k)o(ernel)h(design)g(\(whic)o(h)g
(also)f(addresses)h(this)f(problem\),)h(mo)q(dularit)o(y)g(do)q(es)79
1244 y(not)14 b(ha)o(v)o(e)g(to)f(b)q(e)i(exp)q(ensiv)o(e.)21
b(Unlik)o(e)15 b(a)f(microk)o(ernel)h(serv)o(er,)f(a)f(library)i(op)q
(erating)f(system)g(can)g(trust)79 1301 y(the)19 b(application)h(that)e(uses)
h(it)g(and,)g(therefore,)g(p)q(erform)f(most)g(op)q(erations)g(in)i(the)e
(same)g(address)79 1357 y(space)c(as)f(the)g(application)i(\(eliminating)g
(the)e(cost)f(of)h(cross-domain)g(IPC,)g(securit)o(y)h(c)o(hec)o(ks,)f(cop)o
(ying)79 1414 y(argumen)o(ts,)g(etc.\).)18 b(Of)c(course,)f(the)g(danger)g
(to)f(suc)o(h)i(\015exibilit)o(y)h(is)f(p)q(erv)m(asiv)o(e)g(co)q(de)g
(duplication.)21 b(W)l(e)79 1470 y(b)q(eliev)o(e)c(this)e(can)f(b)q(e)i
(reduced)f(in)g(t)o(w)o(o)e(w)o(a)o(ys.)19 b(The)c(\014rst)f(b)o(y)g(using)h
(dynamic)h(linking.)21 b(The)15 b(second)g(is)79 1526 y(that)i
(application-lev)o(el)i(co)q(de)f(is)f(generally)h(simpler)g(than)f(op)q
(erating)f(system)h(co)q(de.)25 b(F)l(or)16 b(example,)79 1583
y(it)h(can)f(b)q(e)h(written)f(for)g(a)g(restricted)g(set)g(of)g(application)
i(domains)e(whereas)g(the)h(op)q(erating)f(system)79 1639 y(implemen)o
(tation)22 b(m)o(ust)d(b)q(e)i(extremely)f(general)h(purp)q(ose.)35
b(W)l(e)20 b(pro)o(vide)g(additional)i(examples)f(in)79 1696
y(Section)c(1.4.)79 1816 y Fp(1.2.2)56 b(P)n(o)r(or)19 b(adaptabilit)n(y)79
1902 y Fo(An)f(op)q(erating)f(system)f(that)h(pro)o(vides)g(a)g(virtual)g
(mac)o(hine)h(is)g(large)f(and)g(complicated.)26 b(Changing)79
1959 y(large,)14 b(complicated)h(pieces)g(of)e(soft)o(w)o(are)f(is)j
Fn(har)n(d)p Fo(.)k(This)c(creates)e(a)g(disincen)o(tiv)o(e)j(to)d(incorp)q
(orate)h(new)79 2015 y(features)d(or)e(tune)i(existing)g(ones.)19
b(F)l(urthermore,)10 b(since)i(all)f(applications)h(\\dep)q(end)g(on")e(the)g
(op)q(erating)79 2071 y(system,)k(c)o(hange)h(is)g(not)f(lo)q(calized,)i
(whic)o(h)g(is)f(an)f(additional)i(discouragemen)o(t)e(to)g(op)q(erating)h
(system)79 2128 y(alteration.)k(Finally)l(,)13 b(only)e(the)g(k)o(ernel)h
(arc)o(hitect)f(can)g(incorp)q(orate)g(new)g(c)o(hanges,)g(further)g
(restricting)79 2184 y(adaptabilit)o(y)l(.)150 2241 y(This)j(p)q(oin)o(t)g(m)
o(ust)f(b)q(e)g(emphasized:)21 b(the)13 b(op)q(erating)h(system)f(is)h(used)f
(b)o(y)h(all)g(applications;)h(conse-)79 2297 y(quen)o(tly)l(,)f
Fn(changes)f(to)g(it)h(c)n(annot)f(b)n(e)g(lo)n(c)n(alize)n(d)e(to)j(a)g(p)n
(articular)g(applic)n(ation)p Fo(.)19 b(The)12 b(direct)h(consequence)79
2354 y(of)i(this)h(structures)f(is)g(that)g(it)g(cannot)g(b)q(e)h(c)o(hanged)
f(b)o(y)g(non-trusted)h(p)q(ersonnel.)21 b(Put)15 b(another)g(w)o(a)o(y)l(,)
79 2410 y(the)e(implemen)o(tation)h(of)e(new)h(abstractions,)f(the)g(tuning)h
(of)f(old)h(ones,)g(or)f(ev)o(en)h(simple)h(bug)f(\014xes)f(can)79
2467 y(only)k(b)q(e)g(incorp)q(orated)f(with)h(great)e(care.)19
b(Th)o(us,)c(the)g(op)q(erating)g(system)g(in)o(terface)g(and)g(implemen-)79
2523 y(tation)j(is,)g(for)f(practical)h(purp)q(oses,)h(\014xed)f(and)g(unc)o
(hanging)g(no)g(matter)e(ho)o(w)h(inappropriate)i(it)e(is.)79
2580 y(Ho)o(w)o(ev)o(er,)d(if)g(this)h(in)o(terface)g(is)f(pushed)i(lo)o(w)o
(er)e(\(preferably)g(to)g(the)g(ra)o(w)g(hardw)o(are\),)f(more)g(and)i(more)
79 2636 y(of)i(its)g(implemen)o(tation)h(can)e(b)q(e)i(done)f(in)g
(application)i(space)e(and,)g(therefore,)f(lo)q(calized)j(to)d(partic-)79
2693 y(ular)k(applications,)h(allo)o(wing)f(am)o(bitious)f(application-lev)o
(el)k(exp)q(erimen)o(tation)d(and,)f(furthermore,)957 2817
y(15)p eop
%%Page: 16 18
16 17 bop 79 34 a Fo(enabling)17 b(the)e(results)g(of)f(these)h(exp)q(erimen)
o(ts)h(to)e(b)q(e)i(used)f(on)g(a)f(large)h(scale,)g(far)f(more)h(readily)h
(than)79 90 y(mo)q(di\014cations)21 b(to)f(an)f(op)q(erating)h(system.)34
b(An)20 b(application-lev)o(el)j(library)d(can)g(simply)h(b)q(e)g(link)o(ed)
79 147 y(in)o(to)c(an)g(application)h(without)f(destro)o(ying)g(system)f(in)o
(tegrit)o(y)l(.)25 b(This)17 b(single)h(c)o(haracteristic)f(enables)79
203 y(p)q(erv)m(asiv)o(e)e(exp)q(erimen)o(tation)f(and)g(customization.)20
b(\(Without)12 b(discipli)q(ne)k(suc)o(h)e(a)f(system)g(w)o(ould)h(b)q(e-)79
260 y(come)i(a)f(Bab)q(el)h(of)f(incompatible)i(in)o(terfaces:)k(w)o(e)15
b(b)q(eliev)o(e)i(that)e(this)g(rigor)g(should)i(b)q(e)f(implemen)o(ted)79
316 y(through)f(standards)g(rather)g(than)g(enco)q(ded)h(in)g(system)f
(structure.\))150 373 y(The)g(inabilit)o(y)i(of)d(traditional)h(op)q(erating)
g(systems)f(to)g(supp)q(ort)h(lo)q(calized)i(c)o(hange)d(can)h(b)q(e)g
(easily)79 429 y(seen:)k(few)12 b(of)f(the)h(go)q(o)q(d)g(ideas)g(in)h(the)f
(last)g(10)f(y)o(ears)g(of)g(op)q(erating)h(system)g(researc)o(h)f(ha)o(v)o
(e)h(b)q(een)h(incor-)79 486 y(p)q(orated)j(\(or)f(allo)o(w)o(ed)i(at)e
(application-lev)o(el\))j(b)o(y)e(an)o(y)g(op)q(erating)g(system)f(other)h
(than)f(the)h(one)g(they)79 542 y(w)o(ere)e(dev)o(elop)q(ed)i(on.)k(F)l(or)13
b(example,)i(what)e(op)q(erating)i(systems)e(supp)q(ort)i(sc)o(heduler)g
(activ)m(ations)g([4)o(],)79 599 y(m)o(ultiple)g(protection)d(domains)h
(within)g(a)f(single-address)i(space)f([20)o(],)f(e\016cien)o(t)h(IPC)g([67)o
(],)f(or)g(e\016cien)o(t)79 655 y(and)18 b(\015exible)i(virtual)e(memory)f
(primitiv)o(es)h([5,)f(45)o(,)g(58)o(]?)27 b(The)18 b(structure)f(of)g
(traditional)h(op)q(erating)79 711 y(systems)e(ensures)h(that)e(go)q(o)q(d)h
(ideas)h(will,)h(for)e(the)g(most)f(part,)h(remain)g(researc)o(h)g
(curiosities.)25 b(In)17 b(an)79 768 y(exok)o(ernel)e(based)e(system,)g
(these)h(mec)o(hanisms)g(can)f(b)q(e)i(implemen)o(ted)g(directly)f(at)f
(application-lev)o(el)79 824 y(without)21 b(sp)q(ecial)i(privileges,)g(and)e
(without)g(compromising)g(system)f(in)o(tegrit)o(y)l(.)37 b(W)l(e)21
b(exp)q(ect)g(that)79 881 y(this)e(single)h(c)o(haracteristic)e(will)i
(dramatically)f(increase)g(b)q(oth)f(the)h(degree)f(and)g(the)h(utilization)h
(of)79 937 y(op)q(erating)c(system)f(exp)q(erimen)o(tation.)79
1059 y Fp(1.2.3)56 b(P)n(o)r(or)19 b(p)r(erformance)79 1145
y Fo(OS)c(abstractions)f(are)g(often)g(o)o(v)o(erly)g(general,)g(as)g(they)h
(attempt)e(to)g(pro)o(vide)i(an)o(y)f(feature)g(needed)i(b)o(y)79
1201 y(an)o(y)i(reasonable)g(application,)i(and)e(all)g(applications)h(m)o
(ust)f(use)g(a)f(giv)o(en)h(OS)h(abstraction.)27 b(Appli-)79
1258 y(cations)19 b(that)f(do)g(not)g(need)i(a)e(giv)o(en)h(feature)f(pa)o(y)
g(unnecessary)h(o)o(v)o(erhead)f([4)o(,)h(72)o(].)29 b(Additionally)l(,)79
1314 y(simply)18 b(using)g(a)e(giv)o(en)h(feature)f(is)h(costly)l(,)g(since)h
(the)f(op)q(erating)f(system)g(m)o(ust)g(in)o(terpret)h(a)f(m)o(yriad)79
1371 y(of)h(system)f(call)i(options)f([72)o(].)24 b(F)l(urthermore,)16
b(the)h(mere)f(existence)i(of)f(OS)g(abstractions)f(consumes)79
1427 y(signi\014can)o(t)i(amoun)o(ts)e(of)g(main)i(memory)l(,)e(cac)o(he)h
(space,)g(TLB)g(space,)g(and)g(cycles,)h(whic)o(h)g(could)g(b)q(e)79
1484 y(used)e(b)o(y)f(applications)i(to)e(p)q(erform)g(useful)h(w)o(ork.)150
1540 y(Finally)l(,)j(an)o(y)e(OS)g(implemen)o(tation)i(mak)o(es)d
(trade-o\013s:)23 b(whether)17 b(to)g(use)g(a)g(hierarc)o(hical)i(or)d(in-)79
1596 y(v)o(erted)c(page-table,)h(whether)f(to)f(optimize)i(for)f(frequen)o(t)
g(reads)f(or)h(random)f(writes,)h(whether)h(to)e(ha)o(v)o(e)79
1653 y(cop)o(y-on-write)17 b(or)e(a)h(large)g(page)g(size,)h(etc.)22
b(Unfortunately)l(,)16 b(an)o(y)g(trade-o\013)f(p)q(enalizes)j(applications)
79 1709 y(that)c(w)o(ere)f(neglected)i(or)f(not)f(an)o(ticipated)i(b)o(y)f
(the)g(OS)g(designer.)21 b(Ho)o(w)o(ev)o(er,)12 b(this)j(situation)f(is)g
(easily)79 1766 y(a)o(v)o(oidable:)21 b(if)16 b(the)f(OS)h(do)q(es)f(not)g
(abstract)f(resources,)h(it)g(do)q(es)h(not)f(ha)o(v)o(e)g(to)f(mak)o(e)h
(suc)o(h)g(trade-o\013s.)79 1888 y Fp(1.2.4)56 b(P)n(o)r(or)19
b(\015exibilit)n(y)79 1973 y Fo(P)o(o)q(or)h(reliabilit)o(y)l(,)k(p)q(o)q(or)
c(adaptabilit)o(y)l(,)j(and)d(p)q(o)q(or)g(p)q(erformance)h(in)g(op)q
(erating)g(systems)e(could)j(b)q(e)79 2030 y(acceptable)12
b(if)g(applications)g(could)g(simply)g(ignore)f(the)g(op)q(erating)g(system)f
(and)h(implemen)o(t)i(their)e(o)o(wn)79 2086 y(abstractions.)32
b(Unfortunately)l(,)20 b(the)f(high-lev)o(el)j(nature)d(of)g(curren)o(t)g(op)
q(erating)g(system)g(in)o(terfaces)79 2143 y(mak)o(es)12 b(this)h(approac)o
(h)f(infeasible.)21 b(A)o(t)12 b(b)q(est,)h(applications)h(can)f(em)o(ulate)f
(the)h(desired)g(feature)g(on)f(top)79 2199 y(of)i(existing)g(OS)g
(abstractions;)g(unfortunately)l(,)g(suc)o(h)g(em)o(ulation)g(is)g(t)o
(ypically)h(clumsy)l(,)f(complicated,)79 2256 y(and)19 b(prohibitiv)o(ely)i
(exp)q(ensiv)o(e.)31 b(F)l(or)18 b(example,)i(once)e(the)h(application)h(has)
e(no)h(access)f(to)g(the)g(ra)o(w)79 2312 y(disk)24 b(in)o(terface,)f
(database)f(records)g(m)o(ust)g(b)q(e)h(em)o(ulated)g(on)f(top)g(of)g
(\014les:)35 b(further)22 b(examples)h(of)79 2369 y(con\015icts)17
b(b)q(et)o(w)o(een)g(OS-pro)o(vided)h(abstractions)d(and)i(what)e
(applications)j(require)f(can)f(b)q(e)h(found)g(in)79 2425
y(the)f(literature)g([5)o(,)f(13)o(,)g(44)o(,)g(45,)f(72,)h(91)o(,)g(97)o(].)
150 2481 y(The)g(abstractions)f(of)g(mo)q(dern)g(op)q(erating)h(systems)f
(hide)i(useful)f(information)g(and)f(capabilities.)79 2538
y(F)l(or)19 b(instance,)i(ev)o(en)f(simple)h(op)q(erations)e(suc)o(h)h(as)f
(monitoring)h(TLB)g(misses)g(or)e(determining)j(the)79 2594
y(ph)o(ysical)g(page)e(used)g(to)g(map)f(a)h(virtual)h(one)f(are)g(not)f(p)q
(ossible)j(on)e Fn(any)g Fo(op)q(erating)g(system,)g(ev)o(en)79
2651 y(though)g(the)h(e\013ects)e(of)h(cac)o(he)h(con\015icts)g(can)f(b)q(e)h
(great)e([104)o(].)31 b(Finally)l(,)21 b(the)e(high-lev)o(el)j(nature)d(of)
957 2817 y(16)p eop
%%Page: 17 19
17 18 bop 79 34 a Fo(op)q(erating)16 b(systems)f(is)h(self-ful\014lli)q(ng:)
23 b(remo)o(ving)16 b(application-lev)o(el)i(access)e(to)f(hardw)o(are)f
(resources)79 90 y(and)h(op)q(erations)g(forces)g(an)o(y)f(soft)o(w)o(are)f
(that)h(m)o(ust)h(use)g(these)g(resources)g(to)f(b)q(e)h(implemen)o(ted)i(in)
e(the)79 147 y(k)o(ernel.)35 b(This,)22 b(in)e(turn,)h(completes)g(a)e
(vicious)j(circle)f(where)f(additional)i(functionalit)o(y)f(is)f(pulled)79
203 y(in)o(to)i(the)f(k)o(ernel)h(b)q(ecause)g(it)f(needs)h(to)f(directly)h
(access)g(resources)f(abstracted)f(b)o(y)h(the)h(previous)79
260 y(w)o(a)o(v)o(e)17 b(of)g(soft)o(w)o(are.)25 b(F)l(or)16
b(example,)j(a)e(\014le)h(system)f(requires,)i(at)d(most,)h(a)g(protected)h
(directory)f(and)79 316 y(name-space)h(structure;)f(instead,)h(mo)q(dern)g
(op)q(erating)f(systems)g(implemen)o(t)h(all)g(op)q(erations)f(\(read,)79
373 y(write,)i(create\))f(in)h(the)f(\014lesystem)g(itself.)30
b(This)19 b(remo)o(v)o(es)e(the)h(abilit)o(y)h(of)f(applications)i(to)d
(directly)79 429 y(access)e(\014le)h(bu\013ers,)e(decide)j(whic)o(h)e
(information)g(should)g(b)q(e)h(cac)o(hed,)f(or)f(determine)h(the)g(la)o(y)o
(out)f(and)79 486 y(structure)k(of)g(the)g(\014les)h(themselv)o(es.)30
b(F)l(urthermore,)18 b(it)g(forces)g(additional)i(p)q(olicies)g(and)f
(trade-o\013s)79 542 y(to)h(b)q(e)h(incorp)q(orated)f(in)o(to)g(the)g(\014le)
h(system:)29 b(bu\013er)20 b(managemen)o(t)f(decisions)j(\(whic)o(h)f(to)e
(replace,)79 599 y(whic)o(h)g(to)f(allo)q(cate\),)g(prefetc)o(hing)h(\(what)e
(blo)q(c)o(ks)i(and)f(ho)o(w)f(man)o(y)h(to)f(prefetc)o(h\))h(and)g(what)f
(access)79 655 y(patterns)h(will)i(b)q(e)f(an)o(ticipated.)30
b(The)19 b(single)g(insigh)o(t)g(that)f(w)o(e)g(wish)h(to)e(o\013er)h(is)g
(that)g Fn(these)h(p)n(olicy)79 711 y(de)n(cisions)g(and)i(implementation)f
(tr)n(ade-o\013s)h(ar)n(e)f(unne)n(c)n(essary)p Fo(.)32 b(If)19
b(the)h(op)q(erating)g(system)f(trac)o(ks)79 768 y(o)o(wnership,)i
(application-lev)o(el)h(libraries)f(can)e(implemen)o(t)i(the)e(rest)g(|)h
(more)e(reliably)l(,)k(e\016cien)o(tly)l(,)79 824 y(and)16
b Fn(appr)n(opriately)g Fo(than)f(an)o(y)g(general-purp)q(ose)i(op)q(erating)
e(system)g(could)h(hop)q(e)g(to)e(do)h([3].)150 881 y(In)f(closing,)f(there)g
(is)h(no)e(\\b)q(est)h(w)o(a)o(y")f(to)g(implemen)o(t)i(a)f(high-lev)o(el)i
(abstraction;)e(hard-wiring)g(the)79 937 y(implemen)o(tation)20
b(in)e(the)g(op)q(erating)h(system,)e(where)i(it)f(can)g(neither)h(b)q(e)f(c)
o(hanged)h(nor)e(a)o(v)o(oided)h(is,)79 994 y(therefore,)d(a)g(dangerous)g
(practice.)720 977 y Fh(1)79 1115 y Fp(1.2.5)56 b(Summary)79
1201 y Fo(In)15 b(short,)f(op)q(erating)g(systems)g(are)g(complex,)g
(fragile,)h(in\015exible,)i(and)d(slo)o(w,)g(b)q(ecause)h(they)f(attempt)79
1258 y(to)i(pro)o(vide)h(a)e(general-purp)q(ose)j(virtual)e(mac)o(hine.)24
b(The)16 b(op)q(erating)g(system)g(is)g(basically)i(hardw)o(are)79
1314 y(masquerading)23 b(as)e(soft)o(w)o(are:)32 b(it)22 b(cannot)g(b)q(e)g
(c)o(hanged,)i(all)f(applications)g(m)o(ust)f(use)g(it,)h(and)f(the)79
1371 y(information)16 b(it)g(hides)h(cannot)f(b)q(e)g(reco)o(v)o(ered.)22
b(Op)q(erating)17 b(system)e(design)i(should)f(incorp)q(orate)g(the)79
1427 y(lessons)g(learned)g(b)o(y)g(hardw)o(are)e(designers)i(during)g(the)g
(transition)f(from)f(CISC)i(to)e(RISC:)i(hardw)o(are)79 1484
y(should)h(pro)o(vide)e(primitiv)o(es,)i Fn(not)e Fo(high-lev)o(el)i
(abstractions.)79 1627 y Fu(1.3)70 b(The)23 b(Solution:)29
b(Exok)n(ernels)79 1728 y Fo(W)l(e)14 b(con)o(tend)f(that)g(the)g(solution)h
(to)f(all)h(of)e(these)i(di\016culties)h(is)f(straigh)o(tforw)o(ard:)j
(eliminate)e(op)q(erat-)79 1785 y(ing)g(system)e(abstractions.)19
b(The)14 b(OS)h(should)g(only)f(exp)q(ort)g(ph)o(ysical)h(resources)f(in)h(a)
e(secure)i(manner;)79 1841 y(it)h(should)g(not)f(presen)o(t)g(a)g(mac)o
(hine-indep)q(end)q(en)o(t)j(in)o(terface)d(to)g(applications.)150
1898 y(In)f(this)g(section)f(w)o(e)g(giv)o(e)h(a)f(quic)o(k)g(sk)o(etc)o(h)g
(of)g(an)g(OS)h(structure)f(that)f(em)o(b)q(o)q(dies)j(an)e(\\abstraction-)79
1954 y(free",)19 b(lo)o(w-lev)o(el)g(in)o(terface.)29 b(W)l(e)18
b(call)h(suc)o(h)g(a)f(structure)f(an)h Fn(exokernel)p Fo(.)28
b(The)18 b(sole)h(function)g(of)f(an)79 2011 y(exok)o(ernel)g(is)f(to)e(allo)
q(cate,)i(deallo)q(cate,)h(and)f(m)o(ultiplex)h(ph)o(ysical)g(resources)e(in)
h(a)f(secure)h(w)o(a)o(y)l(.)23 b(The)79 2067 y(resources)16
b(exp)q(orted)g(b)o(y)f(this)h(k)o(ernel)h(are)e(those)g(pro)o(vided)i(b)o(y)
e(the)h(underlying)h(hardw)o(are:)j(ph)o(ysical)79 2123 y(memory)g(\(divided)
i(in)o(to)e(pages\),)g(the)g(CPU)f(\(divided)j(in)o(to)e(time-slices\),)j
(disk)d(memory)g(\(divided)79 2180 y(in)o(to)c(blo)q(c)o(ks\),)g(DMA)f(c)o
(hannels,)i(I/O)f(devices,)h(translation)e(lo)q(ok-aside)i(bu\013er,)f
(addressing)g(con)o(text)79 2236 y(iden)o(ti\014ers,)h(and)e(in)o
(terrupt/trap)g(ev)o(en)o(ts.)150 2293 y(Securit)o(y)i(is)g(enforced)g(b)o(y)
g(asso)q(ciating)f(ev)o(ery)h(resource)f(usage)g(or)g(binding)j(p)q(oin)o(t)e
(with)g(a)f(guard)79 2349 y(that)i(c)o(hec)o(ks)h(access)f(privileges.)32
b(F)l(or)17 b(example,)j(as)e(one)h(of)f(the)g(steps)g(in)i(preserving)f
(memory)e(in-)79 2406 y(tegrit)o(y)l(,)g(the)f(k)o(ernel)i(guards)e(the)h
(TLB)g(b)o(y)f(c)o(hec)o(king)i(an)o(y)e(virtual-to-ph)o(ysical)i(mappings)f
(giv)o(en)h(b)o(y)79 2462 y(applications)f(b)q(efore)f(they)f(are)g(inserted)
h(in)o(to)f(the)g(TLB.)p 79 2543 720 2 v 131 2570 a Fg(1)149
2586 y Ff(Op)q(erating)j(systems)f(are)g(go)o(v)o(ernmen)o(ts.)28
b(P)o(olitical)q(ly)20 b(a)o(w)o(are)c(readers)i(will)g(recognize)g(in)f(our)
g(argumen)o(ts)h(man)o(y)79 2632 y(used)12 b(in)g(debates)f(against)h(strong)
g(cen)o(tralized)h(go)o(v)o(ernmen)o(ts)f(\(e.g.,)e(individua)q(l)k(v)o
(ersus)d(state)g(righ)o(ts,)h(capitalism)i(v)o(ersus)79 2677
y(comm)o(unism,)h(etc.\).)h(This)e(is)f(a)g(useful)h(view:)k(man)o(y)13
b(of)g(the)g(in)o(tuitions)j(and)e(argumen)o(ts)g(are)f(similar.)957
2817 y Fo(17)p eop
%%Page: 18 20
18 19 bop 150 34 a Fo(Those)13 b(few)g(global)h(optimizations)g(that)f
(require)h(k)o(ernel)g(participation)g(can)g(b)q(e)g(implemen)o(ted)h(b)o(y)
79 90 y(an)h(exok)o(ernel's)f(con)o(trol)h(o)o(v)o(er)e(con)o(trol)h(o)o(v)o
(er)g(the)g(allo)q(cation)i(and)e(rev)o(o)q(cation)h(of)f(ph)o(ysical)h
(resources)79 147 y(\(this)j(issue)g(is)g(discussed)g(more)f(thoroughly)g(in)
h(Section)g(2.8\).)28 b(With)18 b(this)h(con)o(trol)e(it)i(can)f(enforce)79
203 y(prop)q(ortional)e(sharing,)f(or)g(what)g(resources)g(are)g(allo)q
(cated)h(to)e(whic)o(h)i(domains.)150 260 y(T)l(o)e(mak)o(e)g(these)h
(examples)g(concrete,)g(w)o(e)f(outline)i(what)d(address)i(spaces,)f
(time-slices,)j(and)d(IPC)79 316 y(migh)o(t)20 b(lo)q(ok)f(lik)o(e)h(under)g
(the)g(regime)f(w)o(e)g(ha)o(v)o(e)g(describ)q(ed)i(\(more)e(thorough)f
(descriptions)j(will)g(b)q(e)79 373 y(pro)o(vided)d(in)f(subsequen)o(t)g(c)o
(hapters\).)24 b(The)16 b(details)i(w)o(e)e(presen)o(t)h(are)f(highly)i(mac)o
(hine-sp)q(eci\014c,)h(but)79 429 y(the)f(general)g(outline)h(should)f(b)q(e)
g(similar)h(across)e(mac)o(hines;)i(the)e(main)h(goal)f(in)i(eac)o(h)e(is)h
(to)f(answ)o(er)79 486 y(the)f(question:)22 b(what)15 b(is)h(the)g(minim)o
(um)g(functionalit)o(y)h(that)e(the)h(k)o(ernel)h(needs)f(to)f(pro)o(vide)h
(in)h(order)79 542 y(for)e(this)h(primitiv)o(e)g(to)f(b)q(e)h(implemen)o(ted)
h(in)f(application)h(space?)79 662 y Fl(Address)j(space)46
b Fo(T)l(o)18 b(allo)o(w)h(application-lev)o(el)i(virtual)f(memory)l(,)e(the)
h(OS)g(m)o(ust)f(supp)q(ort)g(b)q(o)q(ot-)79 719 y(strapping)d(of)f
(page-tables,)h(allo)q(cation)h(of)e(ph)o(ysical)h(memory)l(,)f(mo)q
(di\014cation)i(of)e(mapping)h(hardw)o(are)79 775 y(\(e.g.,)g(TLB\),)g(and)h
(exception)g(propagation.)21 b(The)16 b(simplest)h(b)q(o)q(otstrapping)e(mec)
o(hanism)h(is)h(to)e(pro-)79 832 y(vide)g(a)e(small)g(n)o(um)o(b)q(er)h(of)f
(\\guaran)o(teed)f(mappings")i(that)e(can)h(b)q(e)h(used)g(to)e(map)h(the)h
(page-table)f(and)79 888 y(exception)19 b(handling)f(co)q(de.)26
b(Ph)o(ysical)18 b(memory)f(allo)q(cation)h(should)g(supp)q(ort)f(requests)g
(for)f(a)h(giv)o(en)79 944 y(page)c(n)o(um)o(b)q(er)g(\(enabling)h(suc)o(h)e
(tec)o(hniques)i(as)e(\\page-coloring")h(for)f(impro)o(v)o(ed)g(cac)o(hing)i
([14)o(]\).)k(Priv-)79 1001 y(ileged)g(instructions)e(\(e.g.,)e(\015ush,)i
(prob)q(e,)f(and)h(mo)q(dify)g(instructions\))g(can)g(b)q(e)g(wrapp)q(ed)g
(in)g(systems)79 1057 y(calls,)h(and)f(those)f(that)g(write)h(to)f
(privileged)j(state)d(\(e.g.,)g(TLB)h(write)g(instructions\))g(are)f(asso)q
(ciated)79 1114 y(with)22 b(access)f(c)o(hec)o(ks.)37 b(Exception)22
b(propagation)e(is)i(done)f(in)h(a)f(direct)g(manner)g(b)o(y)g(sa)o(ving)g(a)
g(few)79 1170 y(scratc)o(h)14 b(registers)f(in)i(some)e(agreed-up)q(on)i(lo)q
(cation)f(in)h(application-space)h(and)e(then)g(jumping)g(to)g(an)79
1227 y(application-sp)q(eci)q(\014ed)19 b(PC-address)c([97)o(].)150
1283 y(All)k(of)f(these)g(op)q(erations)g(can)f(b)q(e)i(sp)q(ed)g(up)f(b)o(y)
g(do)o(wnloading)g(application)i(co)q(de)e(in)o(to)g(the)g(k)o(er-)79
1340 y(nel)h([13)o(,)f(36)o(].)27 b(This)18 b(implemen)o(tation)h(tec)o
(hniques)g(aside,)g(the)e(full)i(functionalit)o(y)g(pro)o(vided)g(b)o(y)e
(the)79 1396 y(underlying)i(hardw)o(are)d(should)h(b)q(e)g(exp)q(osed.)24
b(F)l(or)16 b(instance)h(reference)g(bits,)g(the)g(abilit)o(y)g(to)f(disable)
79 1453 y(cac)o(hing)h(on)g(a)e(page-basis,)i(the)f(abilit)o(y)i(to)d(use)i
(di\013eren)o(t)f(page)h(sizes,)f(etc.)23 b(should)18 b(all)f(b)q(e)g(a)o(v)m
(ailable)79 1509 y(for)e(application-lev)o(el)j(con)o(trol.)79
1629 y Fl(Pro)q(cess)45 b Fo(The)19 b(only)h(state)e(needed)i(b)o(y)f(the)g
(op)q(erating)g(system)f(to)h(de\014ne)h(a)e(pro)q(cess)h(is)h(a)e(set)h(of)
79 1686 y(exception)i(program)d(coun)o(ters)h(that)g(the)g(op)q(erating)g
(system)g(will)i(jump)f(to)e(on)h(an)h(exception,)h(an)79 1742
y(asso)q(ciated)d(address)f(space,)h(and)g(b)q(oth)f(prologue)h(and)f
(epilogue)i(co)q(de)f(to)f(b)q(e)h(called)h(when)f(a)f(time-)79
1798 y(slice)g(is)f(initiated)g(and)g(expires.)k(Placing)c(con)o(text-switc)o
(hing)g(under)g(application)g(con)o(trol)f(\(through)79 1855
y(the)g(application-de\014ned)j(prologue)e(and)f(epilogue)h(co)q(de\))f
(enables)h(tec)o(hniques)g(suc)o(h)f(as)g(mo)o(ving)f(the)79
1911 y(program)h(coun)o(ter)g(out)f(of)h(critical)i(sections)e(at)g(con)o
(text-switc)o(h)g(time)h([15)o(].)79 2031 y Fl(IPC)45 b Fo(The)21
b(basic)f(functionalit)o(y)i(required)f(b)o(y)f(IPC)g(is)h(simply)g(the)f
(transfer)g(of)f(a)h(PC)g(from)f(one)79 2088 y(protection)h(domain)f(to)f(an)
h(agreed-up)q(on)h(v)m(alue)g(in)g(another,)f(with)g(the)g(donation)g(of)g
(the)g(curren)o(t)79 2144 y(time-slice,)e(installation)e(of)f(the)g(called)i
(domain's)e(exception)i(con)o(text,)d(and)i(an)f(indication)i(of)e(whic)o(h)
79 2201 y(pro)q(cess)e(initiated)i(the)d(call)i(\(securit)o(y)e(reasons)h
(for)e(this)i(last)g(constrain)o(t)f(are)g(giv)o(en)h(in)h(Lampson)e([64]\).)
79 2257 y(This)19 b(ligh)o(t)o(w)o(eigh)o(t)g(cross-domain)g(calling)h(mec)o
(hanism)f(implemen)o(ts)g(the)g(bare-minim)o(um)g(required)79
2314 y(b)o(y)g(an)o(y)f(IPC)g(mec)o(hanism,)h(allo)o(wing)g(the)g
(application)h(to)d(pa)o(y)h(for)g(just)g(the)g(functionalit)o(y)i(that)d(it)
79 2370 y(requires.)k(F)l(or)13 b(instance,)i(a)e(clien)o(t)i(that)f(trusts)f
(a)g(serv)o(er)h(ma)o(y)f(allo)o(w)h(the)g(serv)o(er)g(to)f(sa)o(v)o(e)g(and)
h(restore)79 2427 y(the)22 b(registers)g(it)f(needs,)j(instead)e(of)f(sa)o
(ving)h(the)g(en)o(tire)g(register)f(\014le)i(on)e(ev)o(ery)h(IPC.)f(Since)i
(the)79 2483 y(mac)o(hine)16 b(state)e(of)g(curren)o(t)h(RISC)g(mac)o(hines)h
(is)f(gro)o(wing)f(larger)g([76)o(],)g(this)h(can)g(b)q(e)g(crucial)i(for)d
(go)q(o)q(d)79 2539 y(p)q(erformance.)79 2686 y(This)j(is)g(far)e(from)h(a)f
(complete)i(en)o(umeration)g(of)e(all)i(system)f(primitiv)o(es)h(\(for)f
(example,)g(w)o(e)g(ha)o(v)o(e)g(so)957 2817 y(18)p eop
%%Page: 19 21
19 20 bop 217 1242 a @beginspecial 0 @llx 0 @lly 630 @urx 486
@ury 3733 @rwi @setspecial
%%BeginDocument: exo-structure.ps
%!
%%Title: /tmp/xfig-export014664
%%Creator: fig2dev
%%CreationDate: Fri Jan  6 18:46:43 1995
%%For: engler@amsterdam (Dawson R. Engler,520,6172537436,6174979175)
%%BoundingBox: 0 0 630 486
%%Pages: 0
%%EndComments
/$F2psDict 6400 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
0 setlinecap 0 setlinejoin
-36 72 translate
0.0 486.0 translate 0.900 -0.900 scale
1.000 setlinewidth
% Polyline
n 239 299 m 239 139 l  59 139 l  59 299 l 
 clp gs col-1 s gr
% Polyline
n 479 259 m 479 79 l  319 79 l  319 259 l 
 clp gs col-1 s gr
% Polyline
n 679 279 m 679 179 l  519 179 l  519 279 l 
 clp gs col-1 s gr
% Polyline
n 719 439 m 719 359 l  39 359 l  39 439 l 
 clp gs col-1 s gr
% Polyline
n 739 619 m 739 499 l  39 499 l  39 619 l 
 clp gs col-1 s gr
n 595.000 295.000 m 599.000 279.000 l 603.000 295.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 599 279 m 599 359 l gs col-1 s gr
n 603.000 343.000 m 599.000 359.000 l 595.000 343.000 l gs 2 setlinejoin col-1 s gr
n 379 259 m 379 259 l gs col-1 s gr
n 375.000 275.000 m 379.000 259.000 l 383.000 275.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 379 259 m 379 359 l gs col-1 s gr
n 383.000 343.000 m 379.000 359.000 l 375.000 343.000 l gs 2 setlinejoin col-1 s gr
n 155.000 315.000 m 159.000 299.000 l 163.000 315.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 159 299 m 159 359 l gs col-1 s gr
n 163.000 343.000 m 159.000 359.000 l 155.000 343.000 l gs 2 setlinejoin col-1 s gr
n 135.000 455.000 m 139.000 439.000 l 143.000 455.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 139 439 m 139 499 l gs col-1 s gr
n 143.000 483.000 m 139.000 499.000 l 135.000 483.000 l gs 2 setlinejoin col-1 s gr
n 555.000 455.000 m 559.000 439.000 l 563.000 455.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 559 439 m 559 499 l gs col-1 s gr
n 563.000 483.000 m 559.000 499.000 l 555.000 483.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 59 219 m 239 219 l gs col-1 s gr
% Polyline
n 319 179 m 479 179 l gs col-1 s gr
% Polyline
n 239 299 m 239 219 l  59 219 l  59 299 l 
 clp gs 0.70 setgray fill gr
gs col-1 s gr
% Polyline
n 479 259 m 479 179 l  319 179 l  319 259 l 
 clp gs 0.70 setgray fill gr
gs col-1 s gr
% Polyline
n 739 619 m 739 499 l  39 499 l  39 619 l 
 clp gs 0.85 setgray fill gr
gs col-1 s gr
% Polyline
n 719 439 m 719 359 l  39 359 l  39 439 l 
 clp gs 0.35 setgray fill gr
gs col-1 s gr
/Times-Roman findfont 26.00 scalefont setfont
79 279 m 
gs 1 -1 scale (NetBSD) col-1 show gr
/Times-Roman findfont 26.00 scalefont setfont
99 199 m 
gs 1 -1 scale (Emacs) col-1 show gr
/Times-Roman findfont 26.00 scalefont setfont
359 159 m 
gs 1 -1 scale (Thor) col-1 show gr
/Times-Roman findfont 26.00 scalefont setfont
339 239 m 
gs 1 -1 scale (OO OS) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
539 219 m 
gs 1 -1 scale (Swap) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
579 259 m 
gs 1 -1 scale (Server) col-1 show gr
/Times-Roman findfont 28.00 scalefont setfont
279 419 m 
gs 1 -1 scale (Exokernel) col-1 show gr
/Times-Roman findfont 28.00 scalefont setfont
299 579 m 
gs 1 -1 scale (Hardware) col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 503 1390 a Fo(Figure)16 b(1-1:)j(An)d(example)g(exok)o
(ernel-based)g(system)79 1523 y(far)c(neglected)i(disks)g(and)e(devices\),)i
(but)f(should)h(giv)o(e)e(a)h(feel)g(for)f(what)g(lev)o(el)i(of)e
(functionalit)o(y)i(the)f(OS)79 1580 y(is)18 b Fn(r)n(e)n(quir)n(e)n(d)f
Fo(to)g(pro)o(vide.)27 b(The)17 b(bare)h(minim)o(um)g(is)g(m)o(uc)o(h)f(remo)
o(v)o(ed)g(from)g(the)g(p)q(olicy-laden,)k(o)o(v)o(erly)79
1636 y(general,)16 b(and)f(restrictiv)o(e)h(implemen)o(tations)g(of)f(to)q
(da)o(y's)f(op)q(erating)i(systems.)150 1693 y(The)i(structure)e(of)h(a)g(p)q
(ossible)i(exok)o(ernel-based)g(system)d(is)i(giv)o(en)g(in)g(Figure)f(1-1.)
26 b(This)17 b(struc-)79 1749 y(ture)j(consists)g(of)f(a)h(thin)g(exok)o
(ernel)g(v)o(eneer)g(that)f(m)o(ultiplexes)j(ph)o(ysical)f(resources)e
(securely)i(and)79 1806 y(library-)g(and)f(serv)o(er-based)f(op)q(erating)h
(systems)f(that)g(implemen)o(t)i(system)e(ob)s(jects)g(and)g(p)q(olicies.)79
1862 y(This)h(structure)f(allo)o(ws)h(the)f(extension,)i(sp)q(ecialization)h
(and)d(ev)o(en)h(replacemen)o(t)g(of)e(abstractions.)79 1919
y(F)l(or)e(example,)h(page-table)f(structures)g(can)g(v)m(ary)g(across)g
(di\013eren)o(t)g(applications.)24 b(UNIX)17 b(pro)q(cesses)79
1975 y(can)i(use)g(a)g(traditional)g(hierarc)o(hical)h(page-table;)h
(protected)e(ob)s(jects)f(can)g(use)h(small)h(linear)g(page)79
2032 y(tables,)e(and)g(parallel)g(op)q(erating)g(systems)f(hierarc)o(hical)h
(page-tables)g(for)f(lo)q(cal)h(data)f(and)g(in)o(v)o(erted)79
2088 y(page-tables)h(for)f(global)h(data.)25 b(Figure)17 b(1-2)g(illustrates)
h(di\013eren)o(t)g(structures)f(that)f(ma)o(y)h(b)q(e)h(appro-)79
2144 y(priate)e(to)e(di\013eren)o(t)i(address)f(space)h(sizes;)f(these)h
(structures)f(can)g(co-exist)h(on)f(the)g(same)g(mac)o(hine.)79
2288 y Fu(1.4)70 b(Impact)20 b(of)k(an)f(Exok)n(ernel)g(Structure)79
2389 y Fo(W)l(e)e(discuss)g(ho)o(w)f(our)g(prop)q(osed)h(structure)f(solv)o
(es)h(the)f(traditional)h(problems)g(of)f(reliabilit)o(y)l(,)k(ef-)79
2446 y(\014ciency)l(,)f(and)c(extensibilit)o(y;)24 b(these)c(p)q(oin)o(ts)g
(ha)o(v)o(e)f(at)g(their)h(core)f(the)h(observ)m(ation)g(that)f(the)g(most)79
2502 y(e\016cien)o(t,)d(reliable,)h(and)e(extensible)i(OS)f(abstraction)f(is)
h(the)f(one)g(that)g(is)g(not)g(there.)79 2622 y Fl(Reliabili)q(t)o(y)48
b Fo(Exp)q(osing)17 b(hardw)o(are)g(resources)g(safely)g(and)g(e\016cien)o
(tly)i(requires)e(neither)h(sophisti-)79 2679 y(cated)c(algorithms)g(nor)f
(man)o(y)g(lines)i(of)e(co)q(de.)20 b(As)14 b(a)f(result,)h(an)f(exok)o
(ernel)h(can)g(b)q(e)g(small)h(and)e(readily)957 2817 y(19)p
eop
%%Page: 20 22
20 21 bop 79 2041 a @beginspecial 0 @llx 0 @lly 666 @urx 540
@ury 4440 @rwi @setspecial
%%BeginDocument: pagetable.ps
%!
%%Title: /tmp/xfig-export014781
%%Creator: fig2dev
%%CreationDate: Fri Jan  6 19:15:12 1995
%%For: engler@amsterdam (Dawson R. Engler,520,6172537436,6174979175)
%%BoundingBox: 0 0 666 540
%%Pages: 0
%%EndComments
/$F2psDict 6400 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
0 setlinecap 0 setlinejoin
-36 18 translate
0.0 540.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 339 619 m 339 19 l  39 19 l  39 619 l 
 clp gs col-1 s gr
% Polyline
n 779 319 m 779 39 l  359 39 l  359 319 l 
 clp gs col-1 s gr
% Polyline
n 779 519 m 779 419 l  359 419 l  359 519 l 
 clp gs col-1 s gr
% Polyline
n 119 559 m 119 79 l  59 79 l  59 559 l 
 clp gs col-1 s gr
% Polyline
n 59 519 m 119 519 l gs col-1 s gr
% Polyline
n 59 479 m 119 479 l gs col-1 s gr
% Polyline
n 59 439 m 119 439 l gs col-1 s gr
% Polyline
n 59 239 m 119 239 l gs col-1 s gr
% Polyline
n 59 199 m 119 199 l gs col-1 s gr
% Polyline
n 59 159 m 119 159 l gs col-1 s gr
% Polyline
n 779 319 m 779 39 l  359 39 l  359 319 l 
 clp gs 0.80 setgray fill gr
gs col-1 s gr
% Polyline
n 779 519 m 779 419 l  359 419 l  359 519 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 339 619 m 339 19 l  39 19 l  39 619 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 119 599 m 119 79 l  59 79 l  59 599 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 119 559 m 119 559 l  59 559 l  59 559 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 59 119 m 119 119 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 59 159 m 119 159 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 59 199 m 119 199 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 59 239 m 119 239 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 279 119 m 279 79 l  239 79 l  239 119 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 199 199 m 199 159 l  159 159 l  159 199 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 199 559 m 199 519 l  159 519 l  159 559 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 239 519 m 239 519 l  239 519 l  239 519 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 279 559 m 279 519 l  239 519 l  239 559 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 119 539 m 159 539 l gs 0.90 setgray fill gr
gs col-1 s gr
n 151.000 537.000 m 159.000 539.000 l 151.000 541.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 199 539 m 239 539 l gs 0.90 setgray fill gr
gs col-1 s gr
n 231.000 537.000 m 239.000 539.000 l 231.000 541.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 119 179 m 159 179 l gs 0.90 setgray fill gr
gs col-1 s gr
n 151.000 177.000 m 159.000 179.000 l 151.000 181.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 199 99 m 239 99 l gs 0.90 setgray fill gr
gs col-1 s gr
n 231.000 97.000 m 239.000 99.000 l 231.000 101.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 659 119 m 659 79 l  459 79 l  459 119 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 519 199 m 519 159 l  379 159 l  379 199 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 719 199 m 719 159 l  599 159 l  599 199 l 
 clp gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 519 119 m 439 159 l gs 0.90 setgray fill gr
gs col-1 s gr
n 447.050 157.211 m 439.000 159.000 l 445.261 153.633 l gs 2 setlinejoin col-1 s gr
% Polyline
n 599 119 m 659 159 l gs 0.90 setgray fill gr
gs col-1 s gr
n 653.453 152.898 m 659.000 159.000 l 651.234 156.226 l gs 2 setlinejoin col-1 s gr
% Polyline
n 419 159 m 419 199 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 459 159 m 459 199 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 499 79 m 499 119 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 539 79 m 539 119 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 579 79 m 579 119 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 619 79 m 619 119 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 639 159 m 639 199 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 679 159 m 679 199 l gs 0.90 setgray fill gr
gs col-1 s gr
% Polyline
n 699 499 m 699 459 l  459 459 l  459 499 l 
 clp gs 0.75 setgray fill gr
gs col-1 s gr
% Polyline
n 499 459 m 499 499 l gs 0.75 setgray fill gr
gs col-1 s gr
% Polyline
n 539 459 m 539 499 l gs 0.75 setgray fill gr
gs col-1 s gr
% Polyline
n 579 459 m 579 499 l gs 0.75 setgray fill gr
gs col-1 s gr
% Polyline
n 619 459 m 619 499 l gs 0.75 setgray fill gr
gs col-1 s gr
% Polyline
n 659 459 m 659 499 l gs 0.75 setgray fill gr
gs col-1 s gr
% Polyline
n 119 99 m 159 99 l gs 0.90 setgray fill gr
gs col-1 s gr
n 151.000 97.000 m 159.000 99.000 l 151.000 101.000 l gs 2 setlinejoin col-1 s gr
% Polyline
n 194 124 m 194 79 l  159 79 l  159 124 l 
 clp gs col-1 s gr
% Polyline
n 59 519 m 119 519 l  119 519 l gs col-1 s gr
/Times-Roman findfont 24.00 scalefont setfont
139 359 m 
gs 1 -1 scale (64-bit  ) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
139 392 m 
gs 1 -1 scale (    address space       ) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
79 59 m 
gs 1 -1 scale (Inverted page-table) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
379 59 m 
gs 1 -1 scale (Hierarchical page-table) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
479 259 m 
gs 1 -1 scale (32-bit address space) col-1 show gr
/Times-Roman findfont 24.00 scalefont setfont
379 439 m 
gs 1 -1 scale (Linear page-table       Protected object) col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 543 2189 a Fo(Figure)15 b(1-2:)20 b(A)15 b(set)g(of)g(example)h
(address)f(spaces)957 2817 y(20)p eop
%%Page: 21 23
21 22 bop 79 34 a Fo(understo)q(o)q(d:)21 b(b)q(oth)15 b(of)g(these)g(prop)q
(erties)h(aid)g(correctness.)150 90 y(Additionally)l(,)h(the)e
(application-lev)o(el)i(implemen)o(tation)f(of)e(op)q(erating)h(system)f
(services)i(is)f(lik)o(ely)79 147 y(to)22 b(b)q(e)h(m)o(uc)o(h)g(simpler)g
(in)h(structure)e(and)g(smaller)h(in)h(realization)f(than)f(a)g(traditional,)
j(general-)79 203 y(purp)q(ose)e(OS.)f(F)l(or)e(example,)k(it)e(do)q(es)g
(not)f(ha)o(v)o(e)g(to)g(m)o(ultithread)i(among)d(m)o(ultiple,)25
b(p)q(oten)o(tially)79 260 y(malicious)15 b(en)o(tities,)f(nor)e(w)o(orry)g
(ab)q(out)g(the)h(p)q(eculiar)i(c)o(haracteristics)e(of)f(sup)q(ervisor)i(mo)
q(de)f(\(e.g.,)e(the)79 316 y(particular)j(lo)q(c)o(king)g(constrain)o(ts)e
(that)g(arise)h(within)h(the)f(k)o(ernel)h(to)e(guard)h(against)f(loss)h(of)f
(in)o(terrupts)79 373 y(and)20 b(deadlo)q(c)o(k\).)33 b(Finally)l(,)21
b(since)g(this)f(application)g(op)q(erating)g(system)f(\\trusts")f(the)h
(application,)79 429 y(it)k(can)f(use)g(application)i(state)d(directly)i(and)
f(simply;)k(a)c(general-purp)q(ose)h(op)q(erating)f(system)g(is)79
486 y(constan)o(tly)17 b(cop)o(ying)f(user)h(data,)e(guarding)i(against)f
(illegal)i(addresses,)f(and)f(c)o(hec)o(king)h(for)f(v)m(alidit)o(y)l(.)79
542 y(All)j(of)e(these)g(concerns)h(can)f(b)q(e)h(ignored)g(in)g(an)f
(application-lev)o(el)j(op)q(erating)e(system)e(since,)j(if)e(the)79
599 y(application)g(do)q(es)f(something)f(wrong,)f(the)i(damage)e(is)i(to)f
(itself)h(only)l(.)79 719 y Fl(Adaptabilit)o(y)48 b Fo(The)12
b(k)o(ernel's)h(simplicit)o(y)h(enables)g(easy)e(mo)q(di\014cation.)20
b(F)l(urthermore,)12 b(since)h(most)79 775 y(of)j(the)f(op)q(erating)h
(system)g(co)q(de)g(deals)g(with)g(the)g(allo)q(cation)h(and)f(protection)f
(of)h(system)f(resources,)79 832 y(there)h(is)f(not)g(m)o(uc)o(h)h(that)e
(needs)i(to)f(b)q(e)g(tuned.)150 888 y(By)10 b(allo)o(wing)h(fundamen)o(tal)g
(system)f(primitiv)o(es)h(\(e.g.,)f(pro)q(cesses\))g(to)f(b)q(e)i(implemen)o
(ted)h(at)e(application-)79 944 y(lev)o(el,)23 b(w)o(e)d(ha)o(v)o(e)g(remo)o
(v)o(ed)g(the)g(dep)q(endence)j(of)d(the)h(en)o(tire)f(system)g(on)h(the)f
(correctness)g(of)g(these)79 1001 y(implemen)o(tations.)30
b(In)19 b(other)e(w)o(ords,)h(b)o(y)g(lo)q(calizing)i(a)e(c)o(hange)g(within)
h(a)f(single)i(library)e(or)g(serv)o(er)79 1057 y(op)q(erating)i(system,)e
(applications)j(that)d(wish)h(to)f(use)h(a)g(new)g(feature)f(can)h(link)i(it)
e(in)g(\(alb)q(eit)h(with)79 1114 y(steps)h(suc)o(h)f(as)g(dynamic)i(linking)
g(to)e(reduce)h(memory)f(consumption\).)35 b(Those)21 b(that)e(do)i(not,)g
(do)79 1170 y(not)c(need)g(to.)24 b(T)l(raditional)18 b(op)q(erating)f
(systems)f(o)q(ccup)o(y)h(the)g(unfortunate)f(p)q(osition)i(of)e(ha)o(ving)h
(ev-)79 1227 y(ery)e(application)i(dep)q(end)g(on)e(their)g(correct)g(and)g
(appropriate)g(implemen)o(tation.)21 b(This)16 b(dep)q(endence)79
1283 y(drastically)k(limits)f(the)f(degree)g(to)f(whic)o(h)i(exp)q(erimen)o
(tation)g(can)f(b)q(e)h(carried)f(out)g(and)g(the)g(results)79
1340 y(used.)150 1396 y(An)c(imp)q(ortan)o(t)f(p)q(oin)o(t)h(of)f(this)g
(structure)h(is)f(that)g(it)h(is)g(no)o(w)f(easy)g(to)g(\\o)o(v)o(erthro)o
(w")e(inappropriate)79 1453 y(implemen)o(tations.)25 b(Ov)o(er)16
b(time,)h(an)o(y)f(successful)h(piece)h(of)e(soft)o(w)o(are)e(acquires)j
(features,)f(generalit)o(y)l(,)79 1509 y(bulk.)k(In)12 b(the)g(case)g(of)f
(op)q(erating)h(systems,)f(applications)i(are)e(forced)h(to)f(use)h(suc)o(h)g
(a)f(piece)i(of)e(soft)o(w)o(are)79 1565 y(with)j(no)f(recourse.)20
b(In)14 b(an)f(exok)o(ernel)h(structure)f(they)h(can)f(a)o(v)o(oid)g
(inappropriate)h(library)g(implemen-)79 1622 y(tations)f(b)o(y)h(simply)g
(linking)i(in)e(a)f(di\013eren)o(t)g(library)l(.)21 b(\(Of)13
b(course,)g(w)o(e)g(hop)q(e)h(that)f(the)h(exok)o(ernel)g(itself)79
1678 y(will)i(not)e(fall)h(victim)h(to)d(this)i(trend:)k(hop)q(efully)l(,)e
(the)d(simplicit)o(y)i(of)e(its)h(cen)o(tral)f(premise)h(|)g(that)e(the)79
1735 y(op)q(erating)j(system)f(should)h(not)f(abstract)f(hardw)o(are)g
(resources)i(|)f(will)i(preclude)g(this)f(fate.\))150 1791
y(Another)f(adv)m(an)o(tage)g(of)g(impro)o(v)o(ed)g(adaptabilit)o(y)h(is)g
(that)f(traditional)h(OS)g(abstractions)e(can)i(b)q(e)79 1848
y(implemen)o(ted)23 b(in)f(application)g(space,)g(with)f(access)g(to)f
(application-lev)o(el)k(dev)o(elopmen)o(t)e(en)o(viron-)79
1904 y(men)o(ts)15 b(\(e.g.,)f(debuggers)h(and)h(pro\014lers\).)79
2024 y Fl(E\016ciency)46 b Fo(An)17 b(exok)o(ernel)g(pushes)g(resource)f
(managemen)o(t)g(out)g(in)o(to)g(application)i(space,)e(allo)o(w-)79
2081 y(ing)22 b(implemen)o(tations)g(to)e(exploit)i(application-sp)q
(eci\014c)i(kno)o(wledge)e(in)f(making)g(trade-o\013s)f(\(e.g.,)79
2137 y(optimizing)c(for)e(reads)h(or)e(random)h(writes,)h(sparse)f(address)g
(spaces,)h(etc.\).)k(F)l(urthermore,)13 b(since)j(im-)79 2194
y(plemen)o(tations)e(can)g(b)q(e)g(highly)g(sp)q(ecialized,)i(they)e(can)f
(eliminate)i(the)e(cost)g(of)g(generalit)o(y)g(presen)o(t)h(in)79
2250 y(most)f(OS)h(abstractions.)19 b(This)14 b(structure)f(allo)o(ws)h(a)f
(broad)g(p)q(o)q(ol)h(of)f(non-k)o(ernel)i(arc)o(hitects)e(to)g(imple-)79
2307 y(men)o(t)g(alternativ)o(e)h(implemen)o(tations.)20 b(Since)15
b(the)e(en)o(tire)h(system)f(do)q(es)g(not)g(dep)q(end)i(on)e(these)h(imple-)
79 2363 y(men)o(tations)g(non-privileged)i(implemen)o(tors)e(can)g(readily)g
(alter)g(and)f(exp)q(erimen)o(t)i(with)f(application-)79 2419
y(lev)o(el)19 b(op)q(erating)f(systems.)26 b(F)l(urthermore,)18
b(these)f(op)q(erating)h(systems)f(will)i(b)q(e)f(readily)h(used,)f(since)79
2476 y(they)e(do)f(not)g(ha)o(v)o(e)g(to)f(b)q(e)i(used)g(b)o(y)f(the)g(en)o
(tire)h(system)f(\(and)g(hence)h(trusted)f(in)h(a)f(v)o(ery)g(real)g
(sense\).)150 2532 y(Finally)l(,)23 b(since)f(most)d(in)o(teractions)i(b)q
(et)o(w)o(een)g(an)f(application)i(and)f(its)f(companion)h(op)q(erating)79
2589 y(system)14 b(can)h(o)q(ccur)g(in)g(the)f(same)h(address)f(space,)g(the)
h(curren)o(t)f(con)o(tortions)g(to)g(minimize)i(the)f(cross-)79
2645 y(domain)20 b(costs)f(of)g(TLB)h(p)q(ollution/misses,)j(system)c(call)i
(traps,)e(and)h(con)o(text-switc)o(hes)f(are)h(com-)957 2817
y(21)p eop
%%Page: 22 24
22 23 bop 79 34 a Fo(pletely)17 b(ob)o(viated.)79 154 y Fl(Flexibilit)o(y)47
b Fo(Applications)16 b(can)e(no)o(w)f(implemen)o(t)i(system)e(abstractions)h
(in)g(w)o(a)o(ys)f(that)g(are)g(funda-)79 211 y(men)o(tally)f(imp)q(ossible)g
(on)e(traditional)h(op)q(erating)g(systems.)18 b(Radical)12
b(page-table)f(structures,)f(pro)q(cess)79 267 y(abstractions,)18
b(address)f(spaces,)h(and)g(\014le)h(systems)e(can)g(b)q(e)h(constructed)g
(safely)g(and)g(e\016cien)o(tly)h(on)79 323 y(top)c(of)f(this)h(structure.)20
b(W)l(e)15 b(exp)q(ect)g(that)f(this)h(freedom)g(will)i(enable)f(a)e(broad)g
(class)i(of)e(applications)79 380 y(that)h(are)g(not)g(feasible)h(under)g
(curren)o(t)f(op)q(erating)h(systems.)150 436 y(The)21 b(abilit)o(y)h(of)e
(application-lev)o(el)k(op)q(erating)d(systems)f(to)g(supp)q(ort)h(p)q(o)o(w)
o(erful,)h(e\016cien)o(t,)g(and)79 493 y(un)o(usual)16 b(abstractions)f
(cannot)g(b)q(e)g(o)o(v)o(eremphasized.)21 b(By)15 b(allo)o(wing)h(an)o(y)e
(application)j(writer)e(to)f(im-)79 549 y(plemen)o(t)f(fundamen)o(tal)e
(system)g(ob)s(jects,)g(the)h(degree,)g(ease,)f(and)h(p)q(erv)m(asiv)o(eness)
h(of)d(exp)q(erimen)o(tation)79 606 y(and)16 b Fn(utilization)f
Fo(of)f(the)i(results)f(of)g(this)h(exp)q(erimen)o(tation)g(can)f
(dramatically)h(increase.)79 839 y Fu(1.5)70 b(Discussion)79
940 y Fo(In)16 b(this)e(section)h(w)o(e)g(discuss)g(some)f(common)g(concerns)
h(that)f(ha)o(v)o(e)g(b)q(een)i(expressed)f(ab)q(out)f(an)g(exok-)79
997 y(ernel)j(structure.)i(They)d(are)f(arranged)f(in)i(roughly)g(decreasing)
g(order)f(of)g(o)q(ccurence.)150 1053 y Fl(Do)q(esn't)h(an)h(exok)o(ernel)e
(cause)h(p)q(ortabilit)o(y)i(problems?)f Fo(There)d(are)g(t)o(w)o(o)f(lev)o
(els)i(of)f(p)q(orta-)79 1110 y(bilit)o(y)20 b(that)e(m)o(ust)g(b)q(e)g(pro)o
(vided,)i(mac)o(hine)f(p)q(ortabilit)o(y)g(and)g(OS)g(in)o(terface)f(p)q
(ortabilit)o(y)l(.)30 b(The)19 b(\014rst)79 1166 y(ma)o(y)h(b)q(e)h(ac)o
(hiev)o(ed)h(in)f(the)g(standard)f(manner:)30 b(namely)l(,)23
b(a)d(lo)o(w-lev)o(el)i(la)o(y)o(er)e(that)g(hides)i(mac)o(hine)79
1223 y(dep)q(endence.)k(The)17 b(second)f(can)h(b)q(e)g(ac)o(hiev)o(ed)g
(through)f(application-lev)o(el)j(implemen)o(tations)f(of)d(in-)79
1279 y(dustry)i(standards)g(\(e.g.,)f(POSIX\).)h(The)h(di\013erence)g(is)g
(that)e(the)h(implemen)o(tation)i(of)d(these)i(la)o(y)o(ers)79
1336 y(are)12 b(no)o(w)f(in)i(application)h(space)e(and,)g(therefore,)g(can)g
(b)q(e)h(replaced)g(without)e(sp)q(ecial)j(privileges.)21 b(Suc)o(h)79
1392 y(an)16 b(organization)h(allo)o(ws)f(e\016cien)o(t)h(and)f(un)o(usual)h
(implemen)o(tations)g(of)f(system)f(ob)s(jects)h(to)f(b)q(e)i(real-)79
1448 y(ized)h(in)f(a)f(\015exible)j(and)e(lo)q(calized)h(manner,)f(directly)h
(simplifying)g(the)f(addition)g(of)f(new)h(standards)79 1505
y(and)f(features)f(not)g(an)o(ticipated)h(b)o(y)f(k)o(ernel)h(arc)o(hitects.)
150 1561 y Fl(W)l(on't)21 b(trap)h(costs)f(go)h(up,)g(decreasing)g(system)c
(p)q(erformance?)28 b Fo(The)19 b(exok)o(ernel)h(dis-)79 1618
y(patc)o(hes)g(most)g(hardw)o(are)f(traps)g(far)g(more)h(e\016cien)o(tly)h
(than)f(in)h(curren)o(t)f(op)q(erating)g(systems)f(\(see)79
1674 y(Chapter)14 b(4\).)k(F)l(urthermore,)13 b(the)h(p)q(oten)o(tially)g
(high)h(cost)e(of)g(exceptions)h(suc)o(h)g(as)f(TLB)h(faults)f(can)h(b)q(e)79
1731 y(coun)o(tered)j(either)f(through)g(cac)o(hing)g(state)f(in)i(the)f
(exok)o(ernel)h(or)e(b)o(y)h(safely)g(imp)q(orting)h(application)79
1787 y(co)q(de)g(in)o(to)f(the)g(k)o(ernel.)24 b(W)l(e)16 b(pro)o(vide)g
(initial)i(measuremen)o(ts)e(of)g(basic)g(system)g(costs)g(in)g(Chapter)g(4.)
79 1844 y(Finally)l(,)e(trusted)c(serv)o(ers)h(can)g(b)q(e)g(used:)19
b(\015exibilit)o(y)13 b(will)g(come)e(at)f(\\zero)h(cost")f(for)g(those)h
(applications)79 1900 y(that)k(don't)g(need)h(it.)150 1957
y(Ho)o(w)o(ev)o(er,)c(it)i(is)g(w)o(orth)e(noting)i(that)f(this)g(concern)h
(is)g(misguided:)21 b(ev)o(en)14 b(if)f(the)h(o)o(v)o(erhead)f(of)g(basic)79
2013 y(op)q(erations)i(increases,)f(w)o(e)g(b)q(eliev)o(e)i(that)d(the)h
(cost)g(of)f(these)i(op)q(erations)f(is)g(not)g(the)g(most)f(imp)q(ortan)o(t)
79 2069 y(system)h(o)o(v)o(erhead.)19 b(Rather,)13 b(the)h(cost)f(of)g
Fn(managing)g Fo(system)g(ob)s(jects)g(constitutes)h(the)g(main)g(system)79
2126 y(o)o(v)o(erhead:)26 b(exceptions)20 b(comprise)f(v)o(ery)f(little)h(of)
f(this)h(metric.)30 b(By)18 b(pushing)i(the)e(implemen)o(tation)79
2182 y(of)j(these)h(managerial)f(mec)o(hanisms)h(out)f(in)o(to)h(application)
g(space,)h(man)o(y)e(sp)q(ecialized)j(and)e(more)79 2239 y(e\016cien)o(t)i
(implemen)o(tations)g(will)g(b)q(e)g(able)f(to)f(exist.)43
b(W)l(e)23 b(exp)q(ect)h(this)f(will)h(translate)e(in)o(to)h(real)79
2295 y(impro)o(v)o(ed)16 b(system)f(p)q(erformance.)150 2352
y Fl(What)20 b(happ)q(ens)f(to)g(the)h(system)15 b(structure)k(when)f(an)o(y)
h(application)j(can)d(de\014ne)g(its)79 2408 y(o)o(wn)25 b(in)o(terfaces?)38
b Fo(The)22 b(v)m(ast)f(\015exibilit)o(y)j(a)o(v)m(ailable)f(to)e
(applications)i(on)e(an)h(exok)o(ernel)g(system)79 2465 y(raises)c(this)g
(legitimate)g(question.)28 b(As)17 b(language,)h(GUI)f(and)h(standard)f
(library)h(implemen)o(tors)g(can)79 2521 y(attest,)d(prev)o(en)o(ting)i(a)e
(Bab)q(el)j(of)d(incompatible)j(in)o(terfaces)e(is)h(quite)g(simple:)23
b(de\014ne)17 b(standards)e(and)79 2578 y(con)o(v)o(en)o(tions.)20
b(As)13 b(w)o(e)g(argue)g(in)i(this)e(thesis,)h(the)g(e\013ects)f(of)g
(hard-wiring)h(in)o(terfaces)g(in)o(to)f(the)h(system)79 2634
y(structure)20 b(are)f(a)g(con)o(vincing)i(demonstration)e(that)f(suc)o(h)i
(an)f(approac)o(h)g(is)h(not)f(the)h(righ)o(t)f(w)o(a)o(y)f(to)79
2691 y(de\014ne)f(a)e(standard.)957 2817 y(22)p eop
%%Page: 23 25
23 24 bop 150 34 a Fo(In)19 b(closing,)h(while)g(an)e(exok)o(ernel)h(allo)o
(ws)g(the)f(p)q(ossibilit)o(y)j(of)d(a)g(c)o(haotic)g(system)g(it)h(also)f
(allo)o(ws)79 90 y(the)e(creation)g(of)f(a)g(harmonious,)g(elegan)o(t)h(one)g
(as)f(w)o(ell:)21 b(a)15 b(system)g(whose)h(structure)f(do)q(es)h(not)f(ha)o
(v)o(e)79 147 y(to)g(b)q(e)h(an)o(ticipated)g(b)o(y)f(k)o(ernel)h(arc)o
(hitects.)150 203 y Fl(OS)21 b(soft)o(w)o(are)e(is)i(to)q(o)g(di\016cult)h
(to)f(c)o(hange)g(whether)f(it)i(is)e(in)h(application)j(space)d(or)79
260 y(not.)30 b Fo(While)19 b(it)g(is)f(indeed)i(true)e(that)g(c)o(hanging)g
(large)h(pieces)g(of)f(soft)o(w)o(are)e(is)j(di\016cult,)h(it)e(is)h(clear)79
316 y(that)e(c)o(hanging)g(suc)o(h)h(soft)o(w)o(are)d(in)j(the)f(k)o(ernel)g
(is)h(ev)o(en)f(more)g(di\016cult.)26 b(By)17 b(mo)o(ving)g(most)g(co)q(de)g
(to)79 373 y(application)i(lev)o(el,)f(mo)q(di\014cations)g(to)e(it)h(b)q
(ecome)g(no)g(more)f(\(or)g(less\))h(di\016cult)h(than)f(c)o(hanging)g(an)o
(y)79 429 y(other)j(large)f(piece)j(of)d(soft)o(w)o(are.)31
b(F)l(urthermore,)20 b(as)f(w)o(e)h(argue)f(in)h(Section)h(1.4,)e
(application-lev)o(el)79 486 y(libraries)k(and)f(serv)o(ers)f(can)g(b)q(e)h
(signi\014can)o(tly)h(simpler)g(and)f(cleaner)g(than)f(traditional)h(op)q
(erating)79 542 y(system)15 b(implemen)o(tations.)150 599 y(Finally)l(,)j
(this)f(question)g(has)f(an)g(incorrect)h(assumption:)22 b(it)16
b(is)h(usually)h(not)e(p)q(ossible)i(to)d(c)o(hange)79 655
y(traditional)k(op)q(erating)f(systems)g Fn(at)h(al)r(l)p Fo(,)f(regardless)g
(of)f(their)i(complexit)o(y)l(.)29 b(Either)18 b(the)g(OS)g(source)79
711 y(is)f(not)e(a)o(v)m(ailable)i(or)e(proprietary)l(,)h(or)f(mo)q
(di\014cation)i(requires)f(ro)q(ot)f(privileges.)23 b(F)l(urthermore,)15
b(since)79 768 y(an)o(y)f(OS)h(mo)q(di\014cation)g(m)o(ust)f(b)q(e)h(used)g
(b)o(y)f Fn(al)r(l)g Fo(applications)h(c)o(hange)f(is)h(activ)o(ely)g
(discouraged.)20 b(With)79 824 y(an)i(exok)o(ernel)g(structure,)g
(proprietary)f(binaries)i(can)f(alw)o(a)o(ys)e(b)q(e)i(replaced)h(b)o(y)e
(application-lev)o(el)79 881 y(soft)o(w)o(are.)150 937 y Fl(W)l(on't)d
(executables)i(b)q(ecome)c(large?)24 b Fo(As)16 b(a)g(practical)h(matter,)e
(libraries)j(that)d(implemen)o(t)79 994 y(traditional)20 b(abstractions)d
(can)i(b)q(e)g(sizable.)31 b(Ho)o(w)o(ev)o(er,)18 b(shared)g(libraries)i(can)
f(b)q(e)g(used)g(to)e(com)o(bat)79 1050 y(this)g(problem.)22
b(They)16 b(ha)o(v)o(e)g(b)q(een)h(used)f(successfully)i(in)f(equiv)m(alen)o
(t)g(situations.)23 b(F)l(or)15 b(example,)h(the)79 1107 y(X-windo)o(w)g
(libraries)g(are)e(t)o(ypically)i(dynamically)g(link)o(ed.)22
b(In)15 b(the)f(w)o(orst)g(case,)g(serv)o(ers)g(can)h(b)q(e)g(used)79
1163 y(to)g(m)o(ultiplex)i(co)q(de,)f(data)e(and)h(threads)g(of)g(con)o
(trol.)150 1220 y(Of)j(course,)f(this)h(argumen)o(t)f(assumes)g(that)g(a)g
(reasonable)h(amoun)o(t)f(of)g(sharing)g(tak)o(es)g(place)i(on)79
1276 y(the)h(system.)32 b(It)19 b(is)h(true)g(that)e(if)i(an)g(application)h
(uses)e(its)h(o)o(wn)f(sp)q(ecialized)j(library)e(then)g(it)g(will)79
1332 y(ha)o(v)o(e)d(to)f(link)i(in)g(this)f(library's)g(co)q(de.)25
b(But,)17 b(ev)o(en)g(without)g(sp)q(ecial)i(metho)q(ds,)d(this)i(should)f
(not)g(b)q(e)79 1389 y(a)h(large)g(o)o(v)o(erhead:)25 b(applications)20
b(t)o(ypically)f(only)g(use)f(a)g(v)o(ery)f(small)i(subset)f(of)g(the)g(OS)h
(in)o(terface,)79 1445 y(and)e(therefore)e(most)g(functionalit)o(y)j(do)q(es)
e(not)g(need)g(to)g(b)q(e)g(link)o(ed)i(in.)23 b(F)l(urthermore,)15
b(as)h(argued)g(in)79 1502 y(Section)e(1.4,)e(these)h(libraries)h(should)f(b)
q(e)h(m)o(uc)o(h)e(simpler)i(and)f(smaller)g(b)q(ecause)h(they)f(can)g(b)q(e)
g(tailored)79 1558 y(to)19 b(a)f(particular)i(domain.)31 b(Finally)l(,)21
b(since)f(these)f(implemen)o(tations)h(reside)f(in)h(application)h(space,)79
1615 y(their)16 b(text)f(and)g(data)g(can)g(b)q(e)h(rearranged)f(for)f
(increased)j(lo)q(calit)o(y)l(.)150 1671 y Fl(Do)q(es)23 b(an)g(exok)o(ernel)
e(structure)h(in)o(tro)q(duce)h(a)g(new)f(class)h(of)f(bugs?)33
b Fo(An)20 b(unpleasan)o(t)79 1728 y(p)q(ossibilit)o(y)c(of)c(migrating)h(OS)
g(abstractions)g(in)o(to)g(an)g(application's)h(address)f(space)g(is)g(that)f
(bugs)h(can)79 1784 y(result)k(in)g(v)o(ery)f(un)o(usual)h(e\013ects.)23
b(F)l(or)16 b(example,)g(if)h(an)f(application)i(p)q(erforms)e(wild)i(writes)
e(o)o(v)o(er)f(its)79 1841 y(page-tables,)f(the)f(e\013ects)g(can)g(b)q(e)g
(quite)h(surprising.)20 b(This)14 b(problem)g(can)f(b)q(e)g(addressed)h(in)f
(a)g(n)o(um)o(b)q(er)79 1897 y(of)k(w)o(a)o(ys.)25 b(One)19
b(p)q(ossibilit)o(y)g(is)f(to)f(implemen)o(t)h(abstractions)f(through)g(serv)
o(ers)g(\(who)g(are)g(protected)79 1953 y(b)o(y)k(address-space)f(\014re-w)o
(alls\))h(during)g(dev)o(elopmen)o(t:)31 b(when)21 b(the)f(co)q(de)h(is)g
(ready)f(for)f(pro)q(duction)79 2010 y(use,)g(these)f(services)g(are)g
(inlined)i(in)f(libraries.)29 b(Another)17 b(is)i(to)e(use)h(m)o(ultiple)h
(protection)f(domains)79 2066 y(within)f(the)f(same)f(address)h(space)g(to)f
(prev)o(en)o(t)g(wild)i(writes)f(to)f(sensitiv)o(e)i(state.)j(A)15
b(v)o(ery)h(in)o(teresting)79 2123 y(p)q(ossibilit)o(y)22 b(is)e(to)f(map)g
(critical)i(data)d(to)h(arbitrary)g(lo)q(cations)h(in)g(the)f(address)h
(space:)28 b(in)20 b(a)f(large)79 2179 y(address)e(space)g(it)g(is)g(unlik)o
(ely)h(that)e(a)g(wild)i(write)f(could)g(\014nd)g(suc)o(h)g(state.)23
b(In)17 b(a)f(sense,)h(the)g(virtual)79 2236 y(address)j(is)f(a)g(capabilit)o
(y)h([110)o(].)31 b(Finally)l(,)21 b(the)e(\015ippan)o(t)h(answ)o(er)e(is,)i
(of)f(course,)h(that)e(applications)79 2292 y(should)f(b)q(e)f(written)f(in)h
(a)f(t)o(yp)q(e-safe)g(language.)150 2349 y(In)20 b(conclusion,)i(there)e
(are)f(an)o(y)h(n)o(um)o(b)q(er)g(of)f(metho)q(ds)h(to)f(protect)g(critical)i
(state)e(from)g(buggy)79 2405 y(applications.)31 b(A)o(t)18
b(a)g(practical)h(lev)o(el,)h(w)o(e)e(do)g(not)g(exp)q(ect)h(this)g(problem)g
(to)f(b)q(e)h(a)f(di\016cult)i(one)e(to)79 2462 y(solv)o(e.)150
2518 y Fl(Ho)o(w)12 b(do)q(es)i(an)f(exok)o(ernel)f(optimize)h(global)h
(system)c(p)q(erformance?)17 b Fo(W)l(e)11 b(do)g(not)g(b)q(eliev)o(e)79
2574 y(that)h(e\013ectiv)o(e)h(global)g(optimizations)g(require)g(cen)o
(tralized)h(OS)f(resource)f(managemen)o(t.)18 b(Section)13
b(2.8)79 2631 y(discusses)k(this)f(issue)g(in)g(more)e(detail.)150
2687 y Fl(Isn't)19 b(all)i(this)f(co)q(de)g(motion)e(really)i(just)g(a)g
(shell)g(game?)j Fo(No.)i(Application-lev)o(el)c(co)q(de)957
2817 y(23)p eop
%%Page: 24 26
24 25 bop 79 34 a Fo(can)13 b(b)q(e)g(simpler)g(than)f(op)q(erating)h(system)
f(co)q(de)h(b)q(ecause)g(it)f(can)h(b)q(e)g(sp)q(ecialized)i(and)d(b)q
(ecause)i(it)e(do)q(es)79 90 y(not)i(need)h(to)e(deal)i(with)f(the)g
(di\016culties)i(of)d(sup)q(ervisor)i(mo)q(de.)20 b(Additionally)l(,)c(as)e
(micro-k)o(ernel)h(pro-)79 147 y(p)q(onen)o(ts)g(also)f(argue,)f(user-lev)o
(el)j(dev)o(elopmen)o(t)e(to)q(ols)g(are)g(t)o(ypically)h(m)o(uc)o(h)f(more)f
(sophisticated)i(and)79 203 y(e\013ectiv)o(e)i(than)g(those)f(a)o(v)m
(ailable)i(for)e(k)o(ernel)h(dev)o(elopmen)o(t.)25 b(Finally)l(,)18
b(mo)q(di\014cation)g(of)e(application-)79 260 y(lev)o(el)22
b(co)q(de)f(should)g(not)e(require)i(high)g(privileges)h(or)e(degrees)g(of)g
(trust.)33 b(Therefore,)21 b(man)o(y)f(more)79 316 y(main)o(tainers)c(are)f
(a)o(v)m(ailable)i(than)e(for)f(traditional)i(op)q(erating)g(system)f(co)q
(de.)150 373 y(A)20 b(closely)g(related)g(question)h(is)f(ho)o(w)f(m)o
(ultiple)i(sp)q(ecialization)h(of)d(a)g(general)i(purp)q(ose)f(library)79
429 y(can)c(b)q(e)g(easily)h(main)o(tained.)k(As)15 b(with)h(an)o(y)f(large)g
(system,)g(mo)q(dularit)o(y)h(is)g(critical;)g(ob)s(ject-orien)o(ted)79
486 y(tec)o(hniques)k(suc)o(h)f(as)g(inheritance,)h(sub-t)o(yping)g(and)f(o)o
(v)o(erloading)f(can)h(also)g(b)q(e)g(used.)31 b(W)l(e)18 b(do)h(not)79
542 y(b)q(eliev)o(e)f(that)c(this)i(area)e(brings)i(up)g(problems)g(unique)g
(to)f(op)q(erating)g(system)g(co)q(de.)79 685 y Fu(1.6)70 b(Thesis)22
b(Ov)n(erview)79 787 y Fo(This)d(thesis)g(is)g(laid)g(out)f(as)g(follo)o(ws:)
26 b(Chapter)18 b(2)f(discusses)j(general)f(design)g(decisions)h(that)d(m)o
(ust)79 843 y(b)q(e)i(made)f(in)g(an)g(exok)o(ernel)h(and)f(the)f(sp)q
(eci\014c)j(decisions)g(w)o(e)d(ha)o(v)o(e)h(made)f(in)i(our)f(implemen)o
(tation.)79 900 y(Chapter)12 b(3)g(details)h(our)e(protot)o(yp)q(e)h(exok)o
(ernel)g(and)g(library)h(op)q(erating)f(system.)19 b(Chapter)11
b(4)h(pro)o(vides)79 956 y(concrete)h(examples)f(of)g Fn(why)g
Fo(op)q(erating)g(system)f(extensibili)q(t)o(y)j(is)e(w)o(orth)o(while)g(and)
g(demonstrates)f(the)79 1013 y(e\016cacy)19 b(of)f(the)h(exok)o(ernel)g
(approac)o(h)f(through)h(a)f(n)o(um)o(b)q(er)h(of)f(exp)q(erimen)o(ts.)31
b(W)l(e)18 b(discuss)i(related)79 1069 y(w)o(ork)15 b(in)h(Chapter)f(5)g(and)
g(conclude)i(in)f(Chapter)f(6.)150 1126 y(Before)e(closing,)i(w)o(e)e(note)g
(that)g(Chapter)g(2)g(is)h(not)f(a)g(ligh)o(t)o(w)o(eigh)o(t)h(c)o(hapter:)19
b(readers)13 b(who)g(\014nd)h(its)79 1182 y(lev)o(el)i(of)e(discussion)i
(tedious)f(or)e(who)h(are)g(still)i(am)o(biv)m(alen)o(t)f(ab)q(out)f(the)h
(exok)o(ernel)g(metho)q(dology)f(are)79 1238 y(encouraged)19
b(to)e(skip)h(ahead)g(to)f(Chapter)h(4,)g(where)g(w)o(e)f(sho)o(w)g(the)h
(large)g(p)q(erformance)g(gains)g(that)79 1295 y(can)e(b)q(e)g(obtained)g(b)o
(y)f(an)g(exok)o(ernel-based)h(system.)79 1438 y Fu(1.7)70
b(Summ)n(ary)79 1540 y Fo(T)l(raditional)20 b(op)q(erating)e(systems)f(ha)o
(v)o(e)h(su\013ered)g(from)g(p)q(o)q(or)g(reliabilit)o(y)l(,)j(p)q(o)q(or)d
(adaptabilit)o(y)l(,)h(p)q(o)q(or)79 1596 y(p)q(erformance)14
b(and)f(p)q(o)q(or)g(\015exibilit)o(y)l(.)22 b(F)l(urthermore,)13
b(op)q(erating)g(system)g(complexit)o(y)h(\(and)f(its)g(atten-)79
1652 y(dan)o(t)g(problems\))h(will)g(b)q(e)g(exacerbated)f(as)g(OS)h
(designers)g(attempt)e(to)g(pro)o(vide)i(increasingly)h(general)79
1709 y(purp)q(ose)f(virtual)g(mac)o(hines)g(\(e.g.,)e(through)h(the)g
(inclusion)j(of)c(m)o(ultiple)j(standards)e(within)i(the)e(same)79
1765 y(OS)k(implemen)o(tation\).)22 b(More)15 b(imp)q(ortan)o(tly)l(,)h
(application)h(p)q(erformance)f(and)g(\015exibilit)o(y)i(ha)o(v)o(e)d(b)q
(een)79 1822 y(directly)h(harmed)f(b)o(y)f(b)o(y)g(these)h(problems,)g(and)f
(the)h(am)o(bition)f(of)g(designers)i(has)e(b)q(een)h(sharply)g(cur-)79
1878 y(tailed)g(b)o(y)f(their)g(limited)i(abilit)o(y)f(to)e(manage)g
(resources.)19 b(W)l(e)14 b(b)q(eliev)o(e)i(that)d(man)o(y)g(op)q(erating)h
(system)79 1935 y(problems)k(can)g(b)q(e)g(solv)o(ed)f(b)o(y)g(lo)o(w)o
(ering)h(the)f(op)q(erating)h(system)e(in)o(terface:)25 b(namely)l(,)18
b(b)o(y)f(exp)q(orting)79 1991 y(ph)o(ysical)h(resources)e(to)f(applications)
i(directly)l(,)g(managemen)o(t)e(and)i(abstraction)e(of)g(these)h(resources)
79 2048 y(can)g(then)f(b)q(e)h(sp)q(ecialized)j(for)14 b(simplicit)o(y)l(,)j
(e\016ciency)l(,)g(and)e(appropriateness.)150 2104 y(The)h(exok)o(ernel)f
(philosoph)o(y)i(has)e(at)g(its)g(core)g(t)o(w)o(o)f(simple)j(observ)m
(ations:)135 2198 y(1.)22 b(There)14 b(is)h(no)f(\\b)q(est)g(w)o(a)o(y")f(to)
g(implemen)o(t)j(a)d(high-lev)o(el)k(abstraction:)i(hard-wiring)c(the)f
(imple-)193 2254 y(men)o(tation)j(in)i(the)e(op)q(erating)h(system,)f(where)h
(it)g(can)g(neither)g(b)q(e)g(c)o(hanged)g(nor)g(a)o(v)o(oided)f(is,)193
2311 y(therefore,)e(undesirable.)135 2405 y(2.)22 b(The)12
b(most)f(reliable,)k(extensible,)f(and)e(e\016cien)o(t)g(k)o(ernel)h
(primitiv)o(e)g(is)g(the)f(one)g(that)f(is)h(not)g(there.)193
2461 y(By)21 b(pushing)i(abstractions)d(out)h(to)f(application)j(space,)f
(they)f(can)h(b)q(e)f(crafted)g(for)g(sp)q(eci\014c)193 2518
y(application)c(domains,)e(whic)o(h)h(will)h(increase)f(b)q(oth)f(their)h
(e\016ciency)h(and)e(appropriateness.)79 2611 y(Both)i(of)f(these)h(in)o
(tuitions)h(motiv)m(ate)f(migrating)g(the)g(implemen)o(tation)h(and)f(sp)q
(eci\014cation)h(of)e(high-)79 2668 y(lev)o(el)h(abstractions)e(in)o(to)g
(library-)h(and)f(serv)o(er-based)h(op)q(erating)f(systems.)957
2817 y(24)p eop
%%Page: 25 27
25 26 bop 150 34 a Fo(The)17 b(exok)o(ernel's)f(cen)o(tral)h(tenet)g(can)f(b)
q(e)h(view)o(ed)g(in)h(the)e(con)o(text)g(of)g(the)h(tension)g(b)q(et)o(w)o
(een)g(dis-)79 90 y(tributed)i(and)g(cen)o(tralized)g(con)o(trol:)26
b(w)o(e)18 b(b)q(eliev)o(e)i(that)d(distributed)j(con)o(trol)e(is)h(the)f
(most)f(e\013ectiv)o(e)79 147 y(mec)o(hanism)f(for)f(\015exible,)i(e\016cien)
o(t)f(systems.)957 2817 y(25)p eop
%%Page: 26 28
26 27 bop eop
%%Page: 27 29
27 28 bop 79 345 a Fi(Chapter)35 b(2)79 553 y Fm(Exok)m(ernel)41
b(Design)h(Issues)79 775 y Fo(An)19 b(exok)o(ernel)h(attempts)e(to)g
(eliminate)i(all)g(abstractions)e(and,)h(as)g(a)f(result,)i(all)f
(resource-sp)q(eci\014c)79 832 y(p)q(olicies)f(from)c(the)h(k)o(ernel.)21
b(Ho)o(w)o(ev)o(er,)13 b(since)j(it)g(m)o(ultiplexes)h(the)e(hardw)o(are,)f
(some)g(p)q(olicy)j(decisions)79 888 y(cannot)j(b)q(e)h(a)o(v)o(oided:)29
b(for)20 b(example,)h(ho)o(w)f(resources)g(are)f(named,)i(allo)q(cated,)h
(rev)o(ok)o(ed,)e(and)h(pro-)79 945 y(tected.)29 b(This)19
b(c)o(hapter)f(examines)h(the)f(sp)q(eci\014c)i(set)e(of)g(p)q(olicies)i(an)e
(exok)o(ernel)h(m)o(ust)e(include,)k(and)79 1001 y(reconciles)16
b(them)e(with)g(the)f(o)o(v)o(erarc)o(hing)g(goal)h(of)f(exp)q(osing)i(the)e
(full)j(complemen)o(t)e(of)f(resources)h(nec-)79 1058 y(essary)h(for)g
(application-lev)o(el)j(managemen)o(t.)h(W)l(e)d(pro)o(vide)g(a)e(set)h(of)g
(principles)j(that)d(can)g(guide)h(the)79 1114 y(determination)j(of)e(ho)o(w)
g(to)g(implemen)o(t/design)i(eac)o(h)f(p)q(olicy)h(in)f(suc)o(h)g(a)f(w)o(a)o
(y)f(as)h(to)g(giv)o(e)h(the)f(most)79 1171 y(con)o(trol)e(to)g
(applications.)150 1227 y(This)g(metho)q(dology)f(can)h(b)q(e)g(put)g(in)g(a)
f(general)h(framew)o(ork)e(of)h(distributed)i(con)o(trol:)j(traditional)79
1283 y(op)q(erating)g(systems)f(ha)o(v)o(e)f(a)h(v)o(ery)g(strong)f(cen)o
(tralization)i(of)f(con)o(trol)g(\(i.e.,)g(the)h(op)q(erating)f(system)79
1340 y(con)o(trols)13 b(most)f(resources\),)h(while)i(an)e(exok)o(ernel)g
(attempts)f(to)h(mo)o(v)o(e)f(most)g(con)o(trol)h(to)f(applications.)79
1396 y(This)i(design)h(space)e(is)h(mark)o(edly)g(di\013eren)o(t)f(from)g
(the)g(one)g(that)g(has)g(traditionally)i(b)q(een)f(explored)h(in)79
1453 y(b)q(oth)g(the)f(researc)o(h)f(literature)i(and)f(in)h(practical)f
(implemen)o(tations;)i(w)o(e)d(touc)o(h)h(up)q(on)h(its)f(imp)q(ortan)o(t)79
1509 y(p)q(oin)o(ts.)20 b(While)15 b(our)e(discussion)i(of)e(m)o(ultiplexing)
j(assumes)e(an)f(exok)o(ernel)h(as)f(con)o(text,)g(the)g(issues)i(w)o(e)79
1566 y(examine)h(and)f(the)g(design)g(c)o(hoices)h(w)o(e)e(mak)o(e)h(are)f
(applicable)j(to)d(traditional)i(op)q(erating)f(systems)f(as)79
1622 y(w)o(ell,)i(and)g(can)f(b)q(e)h(incremen)o(tally)h(incorp)q(orated)f
(in)o(to)f(a)g(traditional)g(structure.)150 1679 y(This)i(c)o(hapter)e(has)h
(t)o(w)o(o)f(parts.)21 b(The)c(\014rst)e(deals)i(with)f(the)g(general)h
(principles)i(that)c(an)h(exok)o(er-)79 1735 y(nel)g(is)f(built)h(up)q(on.)21
b(These)15 b(principles)i(are)d(stated)g(in)i(Section)f(2.1)f(and)h
(elucidated)i(in)e(the)g(follo)o(wing)79 1792 y(sections:)k(Section)12
b(2.2)e(examines)i(the)g(tensions)f(b)q(et)o(w)o(een)h(distributed)h(and)e
(cen)o(tralized)i(con)o(trol;)f(Sec-)79 1848 y(tion)j(2.3)f(discusses)i
(resource)e(allo)q(cation;)i(Section)g(2.4)d(discusses)j(resource)f(rev)o(o)q
(cation;)f(Section)h(2.5)79 1904 y(examines)k(naming)g(issues;)g(Section)g
(2.6)e(some)h(protection)g(considerations.)29 b(Finally)l(,)20
b(device)f(m)o(ul-)79 1961 y(tiplexing)j(is)e(considered)h(in)f(Section)g
(2.7.)32 b(Some)19 b(of)g(these)h(issues)g(are)f(tigh)o(tly)h(in)o(tert)o
(wined)g(\(e.g.,)79 2017 y(the)d(represen)o(tation)g(of)f(resources)g(has)h
(a)f(deep)h(impact)g(on)g(ho)o(w)f(they)g(are)h(rev)o(ok)o(ed,)f(allo)q
(cated)h(and)79 2074 y(m)o(ultiplexed\).)30 b(T)l(o)18 b(aid)g(clarit)o(y)l
(,)h(ho)o(w)o(ev)o(er,)e(w)o(e)h(discuss)h(these)f(p)q(oin)o(ts)g(in)h
(isolation.)28 b(Eac)o(h)18 b(of)f(these)79 2130 y(issues)h(is)f(examined)g
(in)g(its)g(o)o(wn)f(section;)h(these)f(sections)h(ha)o(v)o(e)f(the)g(follo)o
(wing)h(structure:)22 b(the)17 b(\014rst)79 2187 y(half)h(deals)g(with)g(the)
g(general)g(issues)g(and)f(tradeo\013s)g(in)o(v)o(olv)o(ed,)h(the)g(second)f
(discusses)i(the)f(sp)q(eci\014c)79 2243 y(c)o(hoices)f(made)e(in)h(our)f
(exok)o(ernel,)g(Aegis.)150 2300 y(The)h(second)h(part)e(of)h(the)g(c)o
(hapter)g(deals)g(with)h(practical)g(considerations)f(to)g(the)g(general)g
(prin-)79 2356 y(ciples:)26 b(when)18 b(they)f(should)h(b)q(e)g(violated,)f
(ca)o(v)o(eats)f(to)h(their)h(use,)f(and)g(c)o(hallenges)i(they)e(presen)o(t)
g(to)79 2413 y(system)c(construction.)19 b(The)14 b(ob)o(vious)f(di\016cult)o
(y)h(with)f(distributed)i(resource)e(managemen)o(t)f(is)i(global)79
2469 y(optimization.)28 b(E\013ectiv)o(e)17 b(global)h(optimization)g(do)q
(es)g(not)f(require)h(cen)o(tralized)g(resource)g(manage-)79
2526 y(men)o(t:)j(our)15 b(reasoning)h(is)g(presen)o(ted)g(in)g(Section)g
(2.8.)k(A)c(more)f(subtle)h(di\016cult)o(y)h(is)f(the)g(complexit)o(y)79
2582 y(that)i(distributed)h(con)o(trol)f(in)o(tro)q(duces.)28
b(W)l(e)18 b(discuss)h(ho)o(w)e(selectiv)o(e)j(application-lev)o(el)h(cen)o
(traliza-)79 2638 y(tion)16 b(\(in)f(the)h(form)e(of)h(serv)o(ers\))f(can)h
(coun)o(teract)g(this)g(complexit)o(y)h(in)g(Section)g(2.9.)j(W)l(e)c
(conclude)i(in)957 2817 y(27)p eop
%%Page: 28 30
28 29 bop 79 34 a Fo(Section)17 b(2.10.)150 90 y(The)k(default)g(class)f(of)g
(applications)i(discussed)g(in)f(this)g(c)o(hapter)f(is)h(comp)q(eting)g(en)o
(tities)g(that)79 147 y(are)h(eac)o(h)g(attempting)f(to)g(maximize)i(their)f
(p)q(erformance.)40 b(F)l(or)21 b(the)h(purp)q(oses)g(of)g(this)g(c)o
(hapter,)79 203 y(applications)14 b(are)e(assumed)g(to)f(b)q(e)i
(non-malicious)h(and)e(equal)h(in)g(the)f(amoun)o(t)f(and)i(t)o(yp)q(e)f(of)f
(resources)79 260 y(they)17 b(ma)o(y)e(allo)q(cate)h(and)h(manipulate.)23
b(Extending)17 b(these)f(conditions)h(is)f(largely)h(orthogonal)e(to)h(an)79
316 y(exok)o(ernel)g(design;)g(w)o(e)f(do)g(not)g(consider)h(it)g(here.)79
460 y Fu(2.1)70 b(Design)22 b(Principles)79 561 y Fo(The)17
b(fundamen)o(tal)h(goal)e(of)g(an)h(exok)o(ernel)g(is)g(the)g(simple,)h(safe)
f(and)g(e\016cien)o(t)g(m)o(ultiplexing)i(of)d(ra)o(w)79 617
y(ph)o(ysical)f(resources)f(across)e(applications.)21 b(The)14
b(ideal)h(exok)o(ernel)f(in)o(terface)g(is)f(the)h(actual)g(hardw)o(are.)79
674 y(Informally)l(,)i(an)f(exok)o(ernel)g(attempts)f(to)g(allo)o(w)h
(applications)h(to)e(con)o(trol)g(all)i(resources)f(a)o(v)m(ailable)h(to)79
730 y(traditional)i(op)q(erating)g(systems)e(without)h(either)h(additional)h
(o)o(v)o(erhead)d(or)h(restrictions.)26 b(W)l(e)17 b(ha)o(v)o(e)79
787 y(dev)o(elop)q(ed)k(a)e(n)o(um)o(b)q(er)h(of)f(simple)h(principles)i
(that)d(can)g(b)q(e)h(used)g(as)f(guides)h(during)g(this)g(pro)q(cess.)79
843 y(This)14 b(list)g(is)g(not)f(complete)h(and,)f(as)g(our)g(exp)q(erience)
i(gro)o(ws,)d(will)j(lik)o(ely)g(b)q(e)f(sho)o(wn)f(to)g(b)q(e)h(not)e
(wholly)79 900 y(correct.)27 b(Ho)o(w)o(ev)o(er,)17 b(our)g(initial)j(exp)q
(erience)f(indicates)g(that)e(they)h(form)e(a)i(basis)g(for)e(designing)k(an)
79 956 y(exok)o(ernel)12 b(system.)18 b(Adherence)11 b(to)f(them)h(greatly)f
(aids)h(in)g(the)g(metho)q(dical)h(elimination)g(of)e(op)q(erating)79
1013 y(system)16 b(abstractions)f(and,)h(more)f(imp)q(ortan)o(tly)l(,)h(in)h
(the)e(exp)q(ortation)h(of)f(all)i(hardw)o(are)e(capabilities)79
1069 y(to)i(applications.)29 b(Finally)l(,)19 b(their)f(explicit)i(en)o
(umeration)e(allo)o(ws)g(their)g(violation)g(to)f(b)q(e)h(done)g(with)79
1126 y(clear)e(in)o(ten)o(t,)f(rather)g(than)g(b)o(y)g(acciden)o(t.)21
b(These)15 b(principles)j(are)d(summarized)h(b)q(elo)o(w:)135
1219 y(1.)22 b(Applications)h(should)e(manage)f(all)i(ph)o(ysical)g
(resources;)h(exok)o(ernels)e(should)h(only)f(manage)193 1276
y(resources)f(to)f(the)h(exten)o(t)g(required)h(b)o(y)f(protection)g(\(e.g.,)
f(managemen)o(t)g(of)h(allo)q(cation,)h(re-)193 1332 y(v)o(o)q(cation,)h(and)
f(o)o(wnership\).)38 b(This)21 b(is)h(the)f(cen)o(tral)g(principle)i(of)e(an)
g(exok)o(ernel:)32 b(all)22 b(other)193 1389 y(principles)d(are)d(deriv)o(ed)
h(from)f(it.)23 b(Our)17 b(motiv)m(ation)g(is)f(the)h(b)q(elief)h(that)e
(distributed)h(resource)193 1445 y(managemen)o(t)e(is)g(the)h(b)q(est)f(w)o
(a)o(y)f(to)h(build)i(an)e(e\016cien)o(t,)h(\015exible)h(system.)135
1539 y(2.)22 b(Fine-grain)d(allo)q(cation)g(of)e(all)i(hardw)o(are)e
(resources.)27 b(The)18 b(more)g(resources)g(that)f(can)h(b)q(e)g(al-)193
1595 y(lo)q(cated,)e(the)g(more)f(e\013ectiv)o(e)g(and)h(am)o(bitious)g
(application-lev)o(el)j(managemen)o(t)14 b(can)i(b)q(ecome.)193
1652 y(Therefore,)f(an)f(exok)o(ernel)i(attempts)e(to)g(allo)q(cate)i(all)f
(hardw)o(are)g(resources)f(directly)j(to)d(appli-)193 1708
y(cations.)19 b(T)l(o)13 b(increase)h(the)f(\015exibilit)o(y)i(of)d(b)q(oth)h
(managemen)o(t)g(and)g(resource)g(sharing,)g(the)g(unit)193
1765 y(of)i(allo)q(cation)h(is)g(\014ne-grain.)135 1859 y(3.)22
b(Resource)16 b(in)o(terfaces)g(should)h(b)q(e)f(lo)o(w-lev)o(el.)22
b(A)16 b(lo)o(w-lev)o(el)h(in)o(terface)f(requires)g(the)f(least)h(op)q(er-)
193 1915 y(ating)i(system)f(managemen)o(t)g(and)h(allo)o(ws)g(the)f(most)g
(application-lev)o(el)k(con)o(trol.)27 b(Therefore,)193 1972
y(an)15 b(exok)o(ernel)h(designer)g(attempts)e(to)h(push)h(the)f(in)o
(terface)g(that)g(de\014nes)h(hardw)o(are)e(resources)193 2028
y(to)h(the)g(lev)o(el)i(of)d(the)i(ra)o(w)e(hardw)o(are.)135
2122 y(4.)22 b(All)c(hardw)o(are)d(op)q(erations)h(should)i(b)q(e)e(exp)q
(orted.)24 b(Application-lev)o(el)19 b(managemen)o(t)d(is)g(aided)193
2178 y(b)o(y)g(access)h(to)e(all)i(op)q(erations)f(the)h(hardw)o(are)e(pro)o
(vides)i(for)e(a)h(giv)o(en)h(resource.)22 b(F)l(or)16 b(example,)193
2235 y(virtual)d(memory)f(managemen)o(t)f(is)i(aided)h(b)o(y)e(access)g(to)g
(an)o(y)g(DMA)g(capabilities)j(the)d(hardw)o(are)193 2291 y(supp)q(orts.)18
b(Therefore,)11 b(an)f(exok)o(ernel)h(attempts)e(to)h(securely)h(exp)q(ort)f
(all)h(hardw)o(are)f(op)q(erations.)135 2385 y(5.)22 b(Resource)13
b(rev)o(o)q(cation)f(should)h(b)q(e)g(visible.)21 b(Visible)15
b(rev)o(o)q(cation)d(is)g(informativ)o(e)h(and,)f(more)g(im-)193
2441 y(p)q(ortan)o(tly)l(,)g(directly)i(aids)f(ligh)o(t)o(w)o(eigh)o(t)f
(application-lev)o(el)k(resource)c(managemen)o(t.)18 b(Therefore,)193
2498 y(an)d(exok)o(ernel)h(should)g(directly)h(query)e(applications)i(during)
f(rev)o(o)q(cation.)135 2592 y(6.)22 b(Exok)o(ernel)c(name)g(spaces)g(should)
g(b)q(e)h(visible.)29 b(An)o(y)17 b(name-space)i(that)d(the)i(exok)o(ernel)g
(man-)193 2648 y(ages)e(or)f(creates)h(should)h(b)q(e)g(en)o(umerable)g(from)
f(application-lev)o(el.)25 b(F)l(or)16 b(example,)h(exok)o(ernel)957
2817 y(28)p eop
%%Page: 29 31
29 30 bop 193 34 a Fo(\\free-lists")14 b(should)h(b)q(e)g(published)h(so)e
(that)f(application-lev)o(el)k(resource)d(managers)f(can)h(tailor)193
90 y(allo)q(cation)i(requests)g(to)e(the)h(a)o(v)m(ailable)i(resources.)135
184 y(7.)22 b(Resource)14 b(names)g(should)g(b)q(e)g(ph)o(ysical.)21
b(The)14 b(use)f(of)g(ph)o(ysical)i(names)f(exp)q(oses)g(the)f(full)i(p)q(o)o
(w)o(er)193 241 y(of)e(resource)h(names,)f(allo)o(ws)h(the)g(greatest)e
(\015exibilit)o(y)k(in)f(application-lev)o(el)h(resource)e(manage-)193
297 y(men)o(t,)k(and)g(the)g(most)g(minimal)h(op)q(erating)f(system)g
(resource)g(managemen)o(t.)28 b(Therefore)18 b(an)193 354 y(exok)o(ernel)d
(should)g(a)o(v)o(oid)f(the)h(use)g(of)e(virtual)i(names)g(and)f(the)g
(translation)h(and)f(managemen)o(t)193 410 y(that)h(it)g(en)o(tails.)135
504 y(8.)22 b(Resources)17 b(can)g(b)q(e)g(requested)f(b)o(y)h(name.)23
b(Ph)o(ysical)17 b(names)f(encapsulate)i(p)q(o)o(w)o(erful)e(resource)193
560 y(attributes.)38 b(F)l(or)21 b(example,)j(the)d(distance)h(of)f(a)g(disk)
h(blo)q(c)o(k)h(from)d(the)i(curren)o(t)f(disk)h(head)193 617
y(p)q(osition)16 b(determines)h(the)e(sp)q(eed)h(of)f(disk)h(access.)135
711 y(9.)22 b(Resource)d(virtualization)g(should)f(b)q(e)h(used)f
Fn(only)f Fo(when)h(a)g(resource)f(cannot)h(b)q(e)g(m)o(ultiplexed)193
767 y(without)c(it)h(or)f(when)h(e\016ciency)g(demands)g(it.)20
b(Resource)15 b(virtualization)h(consumes)e(resources)193 824
y(and)d(requires)h(op)q(erating)f(system)f(managemen)o(t:)17
b(it)11 b(is)g(anathematic)g(to)f(all)i(exok)o(ernel)f(precepts)193
880 y(and)i(should)h(b)q(e)f(a)o(v)o(oided)g(if)g(at)f(all)i(p)q(ossible.)21
b(Unfortunately)l(,)13 b(device)h(m)o(ultiplexing)h(frequen)o(tly)193
936 y(requires)21 b(some)e(form)g(of)g(virtualization;)k(this)d(issue)g(is)g
(discussed)i(in)e(Section)h(2.7.)32 b(In)20 b(rare)193 993
y(cases,)15 b(e\016ciency)j(demands)e(that)f(the)g(underlying)j(hardw)o(are)d
(resources)h(b)q(e)g(virtualized.)23 b(F)l(or)193 1049 y(example,)c(the)g
(use)f(of)g(a)g(virtualized)i(TLB)e(to)g(absorb)g(the)g(capacit)o(y)g(misses)
h(of)e(a)h(hardw)o(are)193 1106 y(TLB;)d(this)h(issue)g(is)g(discussed)h(in)f
(Section)g(3.2.1,)112 1200 y(10.)22 b(Global)14 b(system)f(optimization)i
(should)g(not)e(b)q(e)h(done)g(through)f(cen)o(tralized)i(resource)f(manage-)
193 1256 y(men)o(t.)27 b(Man)o(y)17 b(useful)h(system-wide)g(optimizations)h
(that)e(w)o(ould)h(seem)f(to)g(require)i(a)e(strong,)193 1313
y(cen)o(tralized)f(k)o(ernel.)21 b(An)14 b(exok)o(ernel)i(arc)o(hitect)e(m)o
(ust)g(carefully)i(resist)e(the)h(temptation)f(to)g(fol-)193
1369 y(lo)o(w)k(this)g(garden)g(path:)25 b(as)18 b(w)o(e)f(argue)h(in)g
(Section)h(2.8)e(man)o(y)g(global)i(optimizations)g(can)f(b)q(e)193
1425 y(done)e(directly)g(through)f(an)g(exok)o(ernel's)h(con)o(trol)f(o)o(v)o
(er)f(allo)q(cation)i(and)g(device)g(in)o(terfaces.)150 1519
y(While)22 b(these)e(precepts)h(are)f(not)f(di\016cult)j(to)e(understand)g
(and)h(ma)o(y)e(seem)i(quite)f(inno)q(cuous,)79 1576 y(they)c(represen)o(t)f
(a)g(fundamen)o(tal)h(c)o(hange)f(in)h(op)q(erating)f(system)g(design.)21
b(T)l(raditionally)l(,)c(the)e(abilit)o(y)79 1632 y(of)g(application-lev)o
(el)j(soft)o(w)o(are)c(to)g(directly)j(manage)d(resources)h(w)o(as)g(w)o
(eak,)f(if)i(it)f(existed)h(at)e(all.)21 b(An)79 1689 y(exok)o(ernel)h(giv)o
(es)f(a)g(profound)g(degree)g(of)g(con)o(trol)g(to)f(application-lev)o(el)k
(managers.)37 b(W)l(e)21 b(explore)79 1745 y(the)f(implications)h(of)e(this)h
(c)o(hange)f(in)h(the)g(sections)g(that)e(follo)o(w.)33 b(As)19
b(a)g(brief)h(setting)f(of)g(con)o(text)79 1802 y(b)q(et)o(w)o(een)f(an)f
(exok)o(ernel)h(and)g(past)f(systems,)g(the)g(di\013erences)i(are)e(pain)o
(ted)h(with)g(a)f(\\broad-brush")79 1858 y(in)k(Figure)f(2-1.)33
b(While)21 b(there)f(are)f(man)o(y)h(individual)j(exceptions)d(to)f(our)h(c)o
(haracterizations,)g(the)79 1914 y(general)d(con)o(trasts)d(hold,)i(and)g
(can)g(b)q(e)h(used)f(to)f(understand)h(ho)o(w)g(the)f(exok)o(ernel)i
(structure)e(relates)79 1971 y(to)g(more)g(traditional)h(arc)o(hitectures.)79
2114 y Fu(2.2)70 b(T)-6 b(radeo\013s)24 b(in)e(Distributed)f(and)j(Cen)n
(tralized)c(Con)n(trol)79 2216 y Fo(This)j(section)g(examines)g(the)g
(\014rst)f(\(and)g(most)g(basic\))g(exok)o(ernel)h(principle:)37
b(that)22 b(applications)79 2272 y(should)c(manage)e(all)h(ph)o(ysical)h
(resources)e(and)h(that)f(the)g(exok)o(ernel)h(should)h(con\014ne)f(itself)h
(to)d(solely)79 2329 y(to)e(what)g(managemen)o(t)g(is)h(required)g(to)f
(enforce)g(protection.)20 b(The)13 b(premise)i(b)q(ehind)g(this)f(principle)i
(is)79 2385 y(that)g Fn(distribute)n(d)g Fo(resource)g(managemen)o(t)f(is)i
(the)f(b)q(est)h(w)o(a)o(y)e(to)g(built)i(an)f(e\016cien)o(t,)h(\015exible)h
(system.)79 2441 y(This)c(premise)g(\(whic)o(h)f(is)h(partly)f(shared)g(b)o
(y)f(other)h(\\extensible")h(op)q(erating)f(systems)g([108)n(]\))g(departs)79
2498 y(from)k(traditional)g(op)q(erating)h(systems.)24 b(Since)19
b(Chapter)e(1)f(has)h(already)g(presen)o(ted)h(argumen)o(ts)e(for)79
2554 y(wh)o(y)i(high-lev)o(el)i(op)q(erating)d(system)g(abstractions)g(are)g
(deleterious,)j(this)d(section)h(concen)o(trates)g(on)79 2611
y(the)e(tradeo\013s)d(b)q(et)o(w)o(een)j(distributed)g(and)f(cen)o(tralized)i
(con)o(trol.)i(The)d(high-lev)o(el)h(in)o(terface)e(adopted)79
2667 y(b)o(y)c(most)f(op)q(erating)i(systems)e(results)h(directly)i(in)e(cen)
o(tralized)i(con)o(trol,)e(since)h(it)f Fn(for)n(c)n(es)f Fo(the)h(op)q
(erating)957 2817 y(29)p eop
%%Page: 30 32
30 31 bop 105 44 1750 2 v 104 144 2 100 v 454 144 V 480 79
a Fe(Monolithi)o(c)p 804 144 V 121 w(Micro-k)o(ernel)p 1154
144 V 81 w(Virtual)1179 129 y(Mac)o(hine)p 1503 144 V 1529
79 a(Exok)o(ernel)p 1853 144 V 105 145 1750 2 v 104 245 2 100
v 130 180 a(Managemen)o(t)p 454 245 V 79 w Fd(Cen)o(tralized)p
804 245 V 143 w(Cen)o(tralized)23 b(\(OS)829 230 y(+)15 b(serv)o(ers\))p
1154 245 V 1179 180 a(Cen)o(tralized)44 b(\(in)1179 230 y(em)o(ulator\))p
1503 245 V 1529 180 a(Distributed)p 1853 245 V 105 247 1750
2 v 104 346 2 100 v 130 281 a Fe(Abstraction-)130 331 y(lev)o(el)p
454 346 V 480 281 a Fd(High)p 804 346 V 262 w(High)14 b(to)g(medium)p
1154 346 V 50 w(Lo)o(w)g(\(em)o(ulated\))p 1503 346 V 62 w(Lo)o(w)f(\(real\))
p 1853 346 V 105 348 1750 2 v 104 447 2 100 v 130 383 a Fe(Ma)s(jor)130
433 y(abstractions)p 454 447 V 480 383 a Fd(Files,)25 b(pro)q(cesses,)480
433 y(IPC)p 804 447 V 829 383 a(Files,)h(pro)q(cesses,)829
433 y(IPC)p 1154 447 V 1179 383 a(Hardw)o(are)1179 433 y(\(em)o(ulated\))p
1503 447 V 1529 383 a(Hardw)o(are)14 b(\(real\))p 1853 447
V 105 449 1750 2 v 104 499 2 50 v 130 484 a Fe(Names)p 454
499 V 209 w Fd(None)g(or)g(virtual)p 804 499 V 69 w(None)h(or)f(virtual)p
1154 499 V 69 w(Virtual)p 1503 499 V 219 w(Ph)o(ysical)p 1853
499 V 105 501 1750 2 v 104 600 2 100 v 130 535 a Fe(Protection)p
454 600 V 127 w Fd(Abstraction)54 b(&)480 585 y(name-based)p
804 600 V 829 535 a(Abstraction)h(&)829 585 y(name-based)p
1154 600 V 1179 535 a(Abstraction-)1179 585 y(based)p 1503
600 V 1529 535 a(Explicit)48 b(access)1529 585 y(con)o(trol)p
1853 600 V 105 602 1750 2 v 104 751 2 150 v 130 637 a Fe(Op)q(erations)p
454 751 V 118 w Fd(High-lev)o(el)p 804 751 V 167 w(High-lev)o(el)829
687 y(\(medium)87 b(for)829 736 y(trusted)16 b(serv)o(ers\))p
1154 751 V 1179 637 a(Mac)o(hine)34 b(op)q(era-)1179 687 y(tions)14
b(\(em)o(ulated\))p 1503 751 V 1529 637 a(Mac)o(hine)34 b(op)q(era-)1529
687 y(tions)14 b(\(real\))p 1853 751 V 105 753 1750 2 v 104
803 2 50 v 130 788 a Fe(Deallo)q(cation)p 454 803 V 87 w Fd(Implicit)p
804 803 V 205 w(Mostly)g(implicit)p 1154 803 V 70 w(Implicit)p
1503 803 V 206 w(Explicit)p 1853 803 V 105 804 1750 2 v 382
882 a Fo(Figure)i(2-1:)j(Comparison)c(of)g(exok)o(ernels)h(to)e(traditional)i
(systems)79 1015 y(system)k(to)f(manage)h(resources.)34 b(The)20
b(lo)o(w-lev)o(el)i(in)o(terface)e(adopted)g(b)o(y)g(an)g(exok)o(ernel)g
(results)h(in)79 1072 y(distributed)c(con)o(trol,)e(since)h(it)g(pushes)g
(resource)f(managemen)o(t)f(in)o(to)h(applications.)79 1192
y Fl(Cen)o(tralized)k(con)o(trol)79 1277 y Fo(The)f(tension)f(in)g(the)g(lev)
o(el)h(of)f(resource)g(allo)q(cation)h(is)f(the)g(tradeo\013)e(b)q(et)o(w)o
(een)i(cen)o(tralized)i(and)e(dis-)79 1334 y(tributed)22 b(con)o(trol:)31
b(a)20 b(lo)o(w-lev)o(el)i(in)o(terface)f(pushes)h(resource)f(managemen)o(t)f
(out)g(in)o(to)h(application)79 1390 y(space,)j(where)e(it)g(can)g(b)q(e)h
(optimized)g(for)e(lo)q(cal)i(conditions)g(while)g(a)f(high-lev)o(el)i(in)o
(terface)e(k)o(eeps)79 1447 y(managemen)o(t)e(under)i(cen)o(tralized)g(con)o
(trol,)f(where)g(it)g(can)f(b)q(e)h(optimized)h(for)e(global)i(conditions.)79
1503 y(F)l(requen)o(tly)l(,)16 b(these)g(t)o(w)o(o)d(lev)o(els)k(are)e(in)h
(direct)g(con\015ict.)150 1560 y(Chapter)g(1)h(has)f(already)h(detailed)h
(man)o(y)f(disadv)m(an)o(tages)f(of)h(cen)o(tralized)h(con)o(trol;)e(in)i
(this)f(sub-)79 1616 y(section)f(w)o(e)f(lo)q(ok)h(at)e(four)h(p)q(oten)o
(tial)h(adv)m(an)o(tages:)148 1710 y Fc(\017)22 b Fo(Less)16
b(state)f(duplication.)24 b(Ob)s(ject)16 b(allo)q(cation)h(and)f(con)o(trol)g
(exists)g(through)f(a)h(single)h(cen)o(tral-)193 1766 y(ized)k(en)o(tit)o(y)l
(.)35 b(This)20 b(allo)o(ws)h(b)q(o)q(ok-k)o(eeping)g(at)e(one)h(lev)o(el)i
(to)d(b)q(e)i(reused)f(b)o(y)g(another.)34 b(With)193 1823
y(lo)o(w)o(er-lev)o(el)22 b(allo)q(cation,)g(the)e(system)g(ma)o(y)g(ha)o(v)o
(e)g(p)q(erv)m(asiv)o(e)h(state)f(duplication,)j(since)e(eac)o(h)193
1879 y(en)o(tit)o(y)15 b(ma)o(y)g(not)f(trust)h(the)g(resource)h(trac)o(king)
e(implemen)o(ted)j(b)o(y)e(another.)193 1954 y(Ho)o(w)o(ev)o(er,)23
b(the)f(cost)g(of)g(this)g(space)h(optimization)g(is)g(that)e(there)h(is)h(a)
f(single,)j(cen)o(tralized)193 2011 y(manager)16 b(who)g(cannot)g(b)q(e)g
(circum)o(v)o(en)o(ted,)h(no)f(matter)f(ho)o(w)h(inappropriate)h(its)g
(decisions.)24 b(If)193 2067 y(cen)o(tralized)19 b(resource)f(managers)f(alw)
o(a)o(ys)h(made)f(e\013ectiv)o(e)i(p)q(olicy)g(decisions)h(then)e(this)g
(opti-)193 2124 y(mization)h(could)h(b)q(e)g(comp)q(elling.)32
b(Ho)o(w)o(ev)o(er,)18 b(w)o(e)h(b)q(eliev)o(e)i(that)d(the)g
(inappropriateness)i(and)193 2180 y(cost)d(of)f(use)i(of)e(op)q(erating)i
(system)e(abstractions)h(mitigates)g(against)g(suc)o(h)g(a)g(structure.)25
b(Be-)193 2237 y(sides,)15 b(in)f(cases)f(where)h(it)g(is)g(p)q(ossible)i
(for)c(a)i(cen)o(tralized)h(manager)e(to)g(consisten)o(tly)h(mak)o(e)f(wise)
193 2293 y(decisions)20 b(an)f(exok)o(ernel)g(certainly)g(allo)o(ws)g(the)f
(use)h(of)f(application-lev)o(el)j(serv)o(ers)d(to)g(aggre-)193
2350 y(gate)e(co)q(de,)i(data)e(and)i(functionalit)o(y)l(.)26
b(The)18 b(imp)q(ortan)o(t)e(di\013erence)i(is)g(that)e(this)i(aggregation)
193 2406 y(is)e(v)o(olun)o(tary)f(rather)f(than)h(b)o(y)g(\014at.)148
2500 y Fc(\017)22 b Fo(More)15 b(e\013ectiv)o(e)h(global)h(optimization.)22
b(The)16 b(cen)o(tralized)i(organization)e(forced)f(b)o(y)h(high-lev)o(el)193
2556 y(abstractions)h(can)h(giv)o(e)g(the)g(op)q(erating)g(system)f(a)h
(clear)g(view)g(of)f(the)h(en)o(tire)g(system.)27 b(Opti-)193
2613 y(mization)16 b(requires)g(information;)f(this)h(organization)f(can)g
(pro)o(vide)h(a)f(substan)o(tial)g(amoun)o(t.)193 2688 y(W)l(e)f(do)f(not)g
(b)q(eliev)o(e)i(that)e(e\013ectiv)o(e)h(global)g(optimization)g
Fn(r)n(e)n(quir)n(es)f Fo(cen)o(tralized)i(managemen)o(t.)957
2817 y(30)p eop
%%Page: 31 33
31 32 bop 193 34 a Fo(The)18 b(information)f(required)h(to)f(optimize)h
(resource)g(usage)f(can,)g(t)o(ypically)l(,)i(b)q(e)f(deriv)o(ed)g(from)193
90 y(secondary)13 b(op)q(erations)g(\(e.g.,)e(LR)o(U)j(usage)e(from)g(allo)q
(cation)i(requests,)f(disk)g(writes,)g(etc.\).)18 b(W)l(e)193
147 y(pro)o(vide)e(examples)g(of)f(this)g(in)h(Section)g(2.8.)148
239 y Fc(\017)22 b Fo(Greater)d(uniformit)o(y)l(.)33 b(Cen)o(tralized)20
b(con)o(trol)f(implies)j(a)d(single)i(and)e(\(p)q(erhaps\))h(uniform)f(in-)
193 295 y(terface.)i(Additionally)l(,)e(applications)e(only)f(ha)o(v)o(e)g
(to)f(comm)o(unicate)h(with)g(a)f(single)i(en)o(tit)o(y)f(for)193
352 y(an)o(y)h(allo)q(cation)i(request.)26 b(In)18 b(a)f(distributed)i
(system,)e(man)o(y)f(di\013eren)o(t)i(en)o(tities)g(ma)o(y)f(con)o(trol)193
408 y(resources)e(and)h(their)f(in)o(terfaces)h(ma)o(y)e(b)q(e)i(widely)h
(disjoin)o(t.)193 482 y(The)11 b(decision)h(that)e(m)o(ust)g(b)q(e)h(made)g
(here)g(is)g(whether)g(in)o(terfaces)g(should)g(b)q(e)h(enco)q(ded)f(in)h
(system)193 539 y(structure)i(or)f(at)h(a)g(higher)h(lev)o(el)g(\(i.e.,)f(in)
g(a)g(standard\).)19 b(An)14 b(exok)o(ernel)h(tak)o(es)e(the)h(latter)g
(view,)193 595 y(whic)o(h)21 b(allo)o(ws)f(m)o(ultiple)i(standards)d(to)h
(easily)h(exist)f(on)g(the)g(same)g(system.)33 b(F)l(urthermore,)193
652 y(man)o(y)16 b(of)f(the)h(b)q(ene\014ts)h(of)e(single)i(en)o(tit)o(y)f
(systems)f(can)h(b)q(e)h(deriv)o(ed)f(from)g(serv)o(ers;)f(w)o(e)g(discuss)
193 708 y(this)h(in)g(Section)g(2.9.)148 800 y Fc(\017)22 b
Fo(F)l(aster)15 b(access)i(c)o(hec)o(ks.)22 b(A)16 b(subtle)h(p)q(oin)o(t)g
(of)f(high-lev)o(el)i(abstractions)d(is)i(that)e(they)i(con)o(tain)f(a)193
857 y(large)d(aggregate)e(of)h Fn(bindings)f Fo(\(e.g.,)g(virtual)j(to)e(ph)o
(ysical)h(mappings)g(b)q(ound)h(in)f(the)g(page-table)193 913
y(structure,)19 b(\014le)h(p)q(oin)o(ters,)g(etc.\);)g(the)f(presence)h(of)e
(these)h(in)o(ternal)h(binding)h(can)e(b)q(e)h(used)f(to)193
969 y(sp)q(eed)d(access)f(c)o(hec)o(ks.)k(F)l(or)14 b(example,)i(in)f(the)g
(case)f(of)h(a)f(TLB)h(fault,)f(if)h(the)g(op)q(erating)g(system)193
1026 y(\014nds)k(the)f(virtual)h(to)e(ph)o(ysical)i(mapping)g(in)g(the)f
(page-table)h(it)f(can)g(insert)h(it)f(directly)h(in)o(to)193
1082 y(the)13 b(mapping)g(hardw)o(are:)18 b(if)c(the)e(page-table)i(is)f
(managed)f(b)o(y)h(the)g(application,)h(the)f(op)q(erating)193
1139 y(system)i(m)o(ust)g(c)o(hec)o(k)g(eac)o(h)g(mapping)h(for)f(v)m(alidit)
o(y)l(,)h(adding)g(o)o(v)o(erhead.)193 1213 y(Ho)o(w)o(ev)o(er,)c(e\016cien)o
(t)h(binding)i(c)o(hec)o(ks)e(can)g(b)q(e)g(implemen)o(ted)h(through)f(cac)o
(hes,)g(rather)f(than)g(the)193 1269 y(hea)o(vy-w)o(eigh)o(t)i(mec)o(hanism)g
(of)g(high-lev)o(el)i(abstractions:)j(cen)o(tralized)c(resource)f(managemen)o
(t)193 1326 y(is)i(not)f(a)g(necessary)g(prerequisite)i(for)d(e\016cien)o(t)i
(access)f(c)o(hec)o(ks.)79 1415 y(In)k(summary)l(,)e(cen)o(tralization)h(is)g
(sometimes)g(e\013ectiv)o(e;)g(in)g(these)g(sp)q(eci\014c)h(instances)f(an)g
(exok)o(ernel)79 1471 y(can)e(deriv)o(e)g(the)f(same)g(b)q(ene\014ts)h
(through)f(the)g(use)h(of)f(serv)o(ers.)150 1528 y(Despite)g(the)g(p)q(oten)o
(tial)g(b)q(ene\014ts,)g(cen)o(tralization)h(has)e(a)g(cost.)19
b(As)c(discussed)h(in)f(Chapter)f(1,)g(the)79 1584 y(most)e(ob)o(vious)h(is)h
(the)e(sheer)h(magnitude)h(of)e(co)q(de)h(and)g(data)f(to)g(e\016cien)o(tly)i
(and)f(correctly)g(implemen)o(t)79 1641 y(the)23 b(b)q(o)q(ok-k)o(eeping)g
(it)g(requires.)41 b(Economies)23 b(of)f(scale)h(do)f(not)f(hold)i(in)g
(computer)g(systems:)33 b(if)79 1697 y(an)o(ything,)15 b(the)g(opp)q(osite)g
(is)g(true.)20 b(F)l(or)14 b(example,)h(a)g(small,)g(tigh)o(t)f(k)o(ernel)i
(can)f(used)g(unmapp)q(ed)h(co)q(de)79 1754 y(and)h(data;)e(as)g(the)i(k)o
(ernel's)f(role)g(\(and)g(size\))g(gro)o(ws)f(the)h(k)o(ernel)h(m)o(ust)e
(map)h(and)g(page)g(itself,)h(whic)o(h)79 1810 y(dramatically)d(increases)f
(complexit)o(y)l(.)20 b(Because)13 b(of)f(their)h(generalit)o(y)l(,)h(cen)o
(tralized)g(mec)o(hanisms)f(ha)o(v)o(e)79 1867 y(b)q(een)k(unreliable,)h
(ine\016cien)o(t,)e(in\015exible)i(and)e(ha)o(v)o(e)f(precluded)i
(application-lev)o(el)i(managemen)o(t.)g(A)79 1923 y(more)h(subtle)g(problem)
h(is)f(that)f(high-lev)o(el)j(managemen)o(t)d(requires)i(the)e(k)o(ernel)i
(to)e(pre-emptiv)o(ely)79 1979 y(mak)o(e)d(resource)g(managemen)o(t)f
(decisions,)j(thereb)o(y)e(ensuring)h(that)e(lo)q(cal)j(resource)e(managemen)
o(t)f(is)79 2036 y(not)j(p)q(ossible)i(and)f(that,)f(as)g(a)g(result,)h
Fn(applic)n(ation-sp)n(e)n(ci\014c)e Fo(requiremen)o(ts)i(will)h(b)q(e)e(met)
g(p)q(o)q(orly)l(,)i(if)79 2092 y(at)14 b(all.)20 b(F)l(or)14
b(example,)h(b)q(oth)f(garbage)f(collectors)i(and)f(distributed)i(shared)e
(memory)f(systems)h(w)o(ould)79 2149 y(b)q(ene\014t)j(from)d(tigh)o(t)h(in)o
(tegration)g(with)h(virtual)g(memory)l(,)e(trap,)g(and)i(disk)g(hardw)o(are.)
79 2268 y Fl(Distributed)j(con)o(trol)79 2354 y Fo(As)14 b(argued)f(in)h
(Chapter)f(1,)g(the)g(adv)m(an)o(tage)g(of)g(distributed)i(con)o(trol)e(is)g
(the)h(\015exibilit)o(y)i(that)c(it)i(allo)o(ws.)79 2410 y(This)21
b(\015exibilit)o(y)i(is)d(due)h(to)e(a)h(single)h(fact:)29
b(distributed)21 b(resource)f(managemen)o(t)f(allo)o(ws)i(m)o(ultiple)79
2467 y(resource)f(managers)f(to)f(co-exist)i(and)g(to)f(b)q(e)h(replaced)g
(and)g(created)f(without)h(sp)q(ecial)h(privileges.)79 2523
y(Man)o(y)15 b(useful)h(abilities)h(fall)f(out)f(from)f(this)i(single)g(prop)
q(ert)o(y)l(.)k(F)l(or)15 b(example,)g(subsystems)g(can)g(man-)79
2580 y(age)e(resources)g(in)h(application-sp)q(eci\014c)i(w)o(a)o(ys,)c(allo)
o(wing)i(them)f(to)f(b)q(e)h(tuned)h(to)e(the)h(\\common-case")79
2636 y(op)q(erations)20 b(of)e(di\013eren)o(t)i(domains.)31
b(F)l(urthermore,)19 b(resources)g(can)h(b)q(e)f(abstracted)g(in)h(fundamen-)
79 2693 y(tally)15 b(di\013eren)o(t)e(w)o(a)o(ys)g Fn(on)h(the)h(same)g
(system)e Fo(easily)l(,)h(directly)l(,)h(and)f(without)f(sp)q(ecial)j
(privileges.)21 b(This)957 2817 y(31)p eop
%%Page: 32 34
32 33 bop 79 34 a Fo(adv)m(an)o(tage)17 b(cannot)f(b)q(e)i(underestimated:)24
b(constructing)17 b(large)g(soft)o(w)o(are)e(systems)h(is)h(di\016cult;)i
(this)79 90 y(di\016cult)o(y)g(can)e(b)q(e)g(eased)g(b)o(y)g(the)g
(application)i(of)d(suitable)j(abstractions.)24 b(In)18 b(a)e(cen)o(tralized)
j(imple-)79 147 y(men)o(tation)e(abstractions)g(are,)f(for)g(practical)i
(purp)q(oses,)g(\014xed,)f(and)g(th)o(us)g(con\015icts)h(b)q(et)o(w)o(een)f
(what)79 203 y(abstractions)e(are)g(pro)o(vided)h(and)g(what)f(abstractions)f
(are)h(needed)i(cannot)e(b)q(e)h(e\013ectiv)o(ely)g(resolv)o(ed.)79
260 y(The)11 b(op)q(erating)g(system)f(is)i(required)f(to)f(m)o(ultiplex)j
(the)d(hardw)o(are)g(so)g(that)g(applications)j(can)d(co-exist.)79
316 y(If)16 b(it)g(do)q(es)g(this)g(b)o(y)g(in\015icting)h(painful)g
(abstractions,)e(then)h(the)g(resultan)o(t)f(applications)i(will)h(not)d(b)q
(e)79 373 y(either)i(v)o(ery)f(useful)h(or)f(v)o(ery)g(in)o(teresting)h(and)f
(th)o(us)g(its)g(cen)o(tral)h(purp)q(ose,)g(supp)q(orting)f(co)q(existence,)
79 429 y(will)h(b)q(e)f(unnecessary)l(.)150 486 y(Despite)i(the)g(man)o(y)f
(adv)m(an)o(tages)g(of)g(distributed)i(con)o(trol,)e(there)h(can)g(b)q(e)g(v)
o(ery)f(real)h(costs.)26 b(F)l(or)79 542 y(example,)15 b(global)f
(optimization)h(can)e(b)q(ecome)i(more)e(di\016cult,)i(b)q(ecause)f(the)g(op)
q(erating)g(system)f(do)q(es)79 599 y(not)k(manage)e(resources.)24
b(In)17 b(general,)g(distributed)h(con)o(trol)e(is)h(costly)f(in)h
(situations)g(where)g(the)f(op-)79 655 y(erating)h(system)f(cannot)h(indep)q
(enden)o(tly)j(mak)o(e)c(quic)o(k)h(decisions)i(ab)q(out)d(a)h(situation)g
(but,)f(b)q(ecause)79 711 y(it)k(has)e(seceded)i(con)o(trol)f(to)f
(applications,)j(m)o(ust)d(instead)i(comm)o(unicate)f(with)g(them.)31
b(This)20 b(com-)79 768 y(m)o(unication)h(has)e(an)h(o)o(v)o(erhead)f(b)q
(oth)g(in)i(the)e(ob)o(vious)h(cost)f(in)h(cycles)h(and)f(in)g(more)f(subtle)
i(w)o(a)o(ys)79 824 y(\(e.g.,)d(this)g(comm)o(unication)g(allo)o(ws)h(con)o
(trol)e(to)g(escap)q(e)i(from)e(the)h(op)q(erating)g(system)g(in)o(to)g(an)f
(ap-)79 881 y(plication)24 b(at)d(critical)i(times\).)39 b(W)l(e)22
b(do)f(not)g(b)q(eliev)o(e)j(that)d(this)h(cost)f(out)o(w)o(eighs)h(the)f(b)q
(ene\014ts)i(of)79 937 y(\015exible,)18 b(application-lev)o(el)h(con)o(trol;)
c(the)h(exp)q(erimen)o(ts)h(discussed)g(in)f(Chapter)g(4)f(ten)o(tativ)o(ely)
h(sho)o(w)79 994 y(this)g(assumption)g(to)e(b)q(e)i(v)m(alid.)150
1050 y(Additionally)l(,)29 b(distributed)c(con)o(trol)f(requires)h(that)e(o)o
(wnership)i(and)f(privileges)i(need)f(to)f(b)q(e)79 1107 y(trac)o(k)o(ed)c
(and)g(to)f(b)q(e)i(c)o(hec)o(k)o(ed)g(more)e(frequen)o(tly)l(.)35
b(This)21 b(o)o(v)o(erhead)f(can)g(b)q(e)g(substan)o(tial,)i(ho)o(w)o(ev)o
(er,)79 1163 y(w)o(e)16 b(sho)o(w)g(tec)o(hniques)i(that)d(can)i(e\013ectiv)o
(ely)g(reduce)g(it.)23 b(F)l(or)16 b(example,)h(c)o(hec)o(king)g(the)f
(access)h(righ)o(ts)79 1220 y(to)i(a)f(giv)o(en)h(ph)o(ysical)h(page)f(on)g
(a)f(TLB)h(miss)g(can)g(add)g(signi\014can)o(t)h(o)o(v)o(erhead)e(to)h
(virtual)g(memory)79 1276 y(managemen)o(t)f(but)g(can)g(b)q(e)h(directly)g
(coun)o(tered)f(through)g(the)g(use)g(of)g(a)f(soft)o(w)o(are)f(TLB)j(to)e
(handle)79 1332 y(hardw)o(are)h(TLB)g(capacit)o(y)g(misses)h([9)o(,)f(49)o
(].)28 b(W)l(e)18 b(b)q(eliev)o(e)i(that)e(the)g(global)g(e\013ect)g(of)g
(the)g(\015exibilit)o(y)79 1389 y(and)j(e\016ciency)h(of)f(application-sp)q
(eci\014c)j(resource)d(managemen)o(t)e(will)k(out)o(w)o(eigh)d(the)h
(micro-costs)79 1445 y(of)f(its)g(use.)35 b(Again,)21 b(the)g(exp)q(erimen)o
(ts)g(in)g(Chapter)e(4)h(pro)o(vide)h(pro)o(visional)g(assurance)f(that)f
(this)79 1502 y(assumption)d(is)g(correct.)150 1558 y(Finally)l(,)d
(distributed)f(con)o(trol)e(is)i(inheren)o(tly)g(more)e(complicated)i(than)f
(a)f(single)i(cen)o(tralized)g(p)q(oin)o(t)79 1615 y(of)k(con)o(trol.)24
b(In)17 b(Section)g(2.9)e(w)o(e)h(discuss)i(ho)o(w)e(the)g(judicious)i(use)f
(of)f(application-lev)o(el)j(serv)o(ers)d(can)79 1671 y(capture)c(the)f
(useful)i(functionalit)o(y)g(pro)o(vided)f(b)o(y)f(cen)o(tralized)i(metho)q
(ds)e(without)h(their)g(hea)o(vy-w)o(eigh)o(t)79 1728 y(cost.)79
1871 y Fu(2.3)70 b(Resource)22 b(Allo)r(cation)79 1972 y Fo(In)e(this)f
(section,)g(w)o(e)f(examine)i Fn(which)f Fo(resources)f(are)g(allo)q(cable,)j
(the)e Fn(interfac)n(e)f Fo(to)f(allo)q(catable)j(re-)79 2029
y(sources,)f(and)g(the)g Fn(op)n(er)n(ations)f Fo(that)g(can)g(b)q(e)h(p)q
(erformed)g(on)g(them.)29 b(More)18 b(than)h(an)o(y)f(other)g(issue,)79
2085 y(the)i(answ)o(ers)e(to)h(these)g(questions)h(determine)g(the)f(c)o
(haracter)g(of)g(a)f(system,)i(the)f(am)o(bition)h(of)e(the)79
2142 y(applications)f(and)f(subsystems)f(that)f(can)i(b)q(e)f(built)i(from)e
(it,)g(and)g(the)g(p)q(o)o(w)o(er)g(a)o(v)m(ailable)i(to)d(them.)79
2263 y Fp(2.3.1)56 b(What)18 b(to)h(allo)r(cate)79 2349 y Fo(The)d(premise)f
(of)g(an)g(exok)o(ernel)g(is)g(that)g(application)h(managemen)o(t)e(is)i
(crucial)g(for)e(e\016cien)o(t,)h(\015exible)79 2406 y(systems.)40
b(Managemen)o(t)21 b(requires)i(allo)q(cation,)i(therefore)c(an)h(exok)o
(ernel)h(attempts)e(to)g(allo)o(w)i(all)79 2462 y(hardw)o(are)f(resources)f
(to)h(b)q(e)g(allo)q(cated:)34 b(time-slices,)25 b(con)o(text-iden)o
(ti\014ers,)g(ph)o(ysical)e(pages,)g(disk)79 2519 y(blo)q(c)o(ks,)d(etc.)28
b(T)l(raditionally)l(,)20 b(application)g(managemen)o(t)d(has)h(b)q(een)i
(minimal:)27 b(op)q(erating)18 b(systems)79 2575 y(ha)o(v)o(e)f(encapsulated)
h(resources)f(within)i(abstractions)d(\(e.g.,)g(disk)i(blo)q(c)o(ks)f(ha)o(v)
o(e)g(b)q(een)h(encapsulated)79 2632 y(within)24 b(\014les)e(and)g(ph)o
(ysical)i(memory)d(within)i(address-spaces)f(that,)h(in)g(turn,)g(are)e
(encapsulated)79 2688 y(within)15 b(pro)q(cesses\).)k(Ev)o(en)13
b(the)h(lo)o(w-lev)o(el)g(abstractions)f(of)g(virtual)h(mac)o(hines)f(ha)o(v)
o(e)g(precluded)i(m)o(uc)o(h)957 2817 y(32)p eop
%%Page: 33 35
33 34 bop 79 34 a Fo(application)13 b(lev)o(el)g(managemen)o(t:)k(since)c
(the)e(main)h(goal)f(of)g(the)g(virtual)h(mac)o(hine)g(is)g(to)f(b)q(e)h
Fn(invisible)d Fo(to)79 90 y(an)15 b(application,)i(it)e(is)h(should)g(not)e
(b)q(e)i(surprising)g(that)e(application)j(managemen)o(t)d(\(whic)o(h)i
(requires)79 147 y(comm)o(unication)j(b)q(et)o(w)o(een)e(application)i(and)f
(the)f(op)q(erating)h(system\))e(should)i(b)q(e)g(w)o(eak.)26
b(Previous)79 203 y(op)q(erating)16 b(systems)f(ha)o(v)o(e)g(placed)i(a)e
(prep)q(onderance)i(of)e(emphasis)h(on)g(abstraction-based)f(resource)79
260 y(managemen)o(t)j(and)h(therefore,)f(ha)o(v)o(e)g(a)o(v)o(oided)h
(constrain)o(ts)f(in)h(protection,)g(naming,)g(deallo)q(cation,)79
316 y(and)d(sharing)f(that)g(an)g(exok)o(ernel)h(structure)f(m)o(ust)f
(address.)150 373 y(Closely)f(related)f(to)g(what)f(can)h(b)q(e)h(allo)q
(cated)g(is)f(the)g(unit)h(\(or)e Fn(gr)n(ain)p Fo(\))g(of)h(allo)q(cation.)
20 b(Coarse-grain)79 429 y(allo)q(cation)i(allo)o(ws)f(amortization)g(of)f
(protection)h(and)g(b)q(o)q(ok-k)o(eeping)h(information,)g(but)f(imp)q(edes)
79 486 y(sharing)c(and)f(\015exible)i(managemen)o(t.)j(An)16
b(exok)o(ernel)g(allo)q(cates)h(space-shared)f(resources)g(at)f(as)h(\014ne)
79 542 y(a)f(grain)h(as)e(p)q(ossible.)79 664 y Fp(2.3.2)56
b(In)n(terface)18 b(lev)n(el)79 750 y Fo(The)d(lev)o(el)h(of)e(resource)g
(allo)q(cation)h(is)g(the)f(dual)i(of)d(\\what")h(can)g(b)q(e)h(allo)q
(cated.)21 b(P)o(ossible)15 b(lev)o(els)g(span)79 806 y(a)j(large)f(range,)h
(from)e(the)i(high-lev)o(el)i(abstraction)d(of)g(a)g(UNIX)h(pro)q(cess)g
(\(whic)o(h)g(encapsulates)g(the)79 863 y(allo)q(cation)g(of)f(CPU,)f(ph)o
(ysical)i(memory)l(,)f(and)f(access)h(righ)o(ts)g(in)h(a)e(single)i(en)o(tit)
o(y\))e(to)h(the)f(lo)o(w-lev)o(el,)79 919 y(\014ne-grain)g(allo)q(cation)f
(of)f(a)g(single)h(ph)o(ysical)g(register.)20 b(The)14 b(lev)o(el)i(at)d
(whic)o(h)i(resources)g(are)e(allo)q(cated)79 975 y(forces)h(a)g(wide)h(v)m
(ariet)o(y)g(of)e(design)i(c)o(hoices,)g(and)f(is)h(a)f(strong)f(determinan)o
(t)i(of)e(the)i(op)q(erating)f(system)79 1032 y(structure.)150
1088 y(Resource)h(allo)q(cation)h(should)f(b)q(e)g(at)e(the)i(lev)o(el)g
(detailed)h(b)o(y)f(the)f(c)o(hip)h(sp)q(eci\014cation.)22
b(If)14 b(the)h(allo-)79 1145 y(cated)g(unit)h(is)f(p)q(ortable)g(across)f
(mac)o(hines,)h(it)g(is)h(probably)f(to)q(o)f(high.)21 b(Lo)o(w-lev)o(el)16
b(allo)q(cation)f(should)79 1201 y(not)h(b)q(e)g(ac)o(hiev)o(ed)h(through)e
(em)o(ulation.)22 b(The)16 b(emphasis)g(on)g(a)f(lo)o(w-lev)o(el)i(in)o
(terface)f(is)h(motiv)m(ated)f(b)o(y)79 1258 y(the)i(fact)e(that)h(lo)o
(w-lev)o(el)h(allo)q(cation)h(is)e(essen)o(tial)h(for)f(application)i
(resource)e(managemen)o(t)f(and)h(di-)79 1314 y(rectly)c(eliminates)h(man)o
(y)e(high-lev)o(el)j(p)q(olicy)f(decisions)g(and)e(mec)o(hanisms.)20
b(Op)q(erating)13 b(systems)f(ha)o(v)o(e)79 1371 y(traditionally)k(pro)o
(vided)e(a)f(high-lev)o(el)j(virtual)f(mac)o(hine)f(that)f(is)i(p)q(ortable)f
(across)f(arc)o(hitectures)h(\(in-)79 1427 y(deed,)i(man)o(y)f(successful)h
(op)q(erating)f(system)g(in)o(terfaces)g(ha)o(v)o(e)g(outliv)o(ed)h(the)f
(mac)o(hines)h(that)e(birthed)79 1484 y(them)19 b([99)o(]\).)29
b(Those)19 b(k)o(ernels)g(that)f(do)g(allo)o(w)h(lo)o(w-lev)o(el)h(allo)q
(cation)f(t)o(ypically)h(only)f(allo)q(cate)h(those)79 1540
y(resources)g(to)e(a)h(serv)o(er,)h(whic)o(h)g(in)g(turn)f(manages)f(them)i
(\(e.g.,)e(windo)o(w)i(managers)e(are)h(t)o(ypically)79 1596
y(gran)o(ted)c(exclusiv)o(e)i(access)e(to)g(a)g(frame-bu\013er\).)79
1718 y Fp(2.3.3)56 b(Exp)r(ort)17 b(all)h(hardw)n(are)i(op)r(erations)79
1804 y Fo(Flexible)e(managemen)o(t)d(requires)h(access)g(to)f(the)h(full)h
(capabilities)h(of)d(a)g(system)g(ob)s(ject.)21 b(Therefore,)79
1860 y(p)q(ositing)e(access)e(righ)o(ts,)f(all)i(op)q(erations)g(of)e(the)h
(underlying)i(hardw)o(are)d(are)h(allo)o(w)o(ed)h(on)f(an)g(o)o(wned)79
1917 y(resource:)i(all)14 b(privileged)h(instructions)e(are)g(supp)q(orted,)g
(and)g(all)h(memory)e(op)q(erations)h(allo)o(w)o(ed)g(\(e.g.,)79
1973 y(DMA\).)h(T)l(raditional)j(op)q(erating)e(systems)g(do)g(not)g(exp)q
(ort)g(the)g(full)i(set)e(of)g(hardw)o(are)f(resources)h(and)79
2030 y(certainly)i(do)e(not)g(allo)o(w)g(the)g(full)i(complemen)o(t)f(of)f
(hardw)o(are)f(op)q(erations)h(on)g(them.)79 2152 y Fp(2.3.4)56
b(Virtualization)79 2237 y Fo(Somewhat)16 b(orthogonal)f(to)g(the)h(lev)o(el)
h(of)f(the)g(in)o(terface)g(is)g(the)g(exten)o(t)g(to)f(whic)o(h)i(this)f(in)
o(terface)g(is)h(a)79 2294 y Fn(virtualize)n(d)g Fo(facsimile.)28
b(While)19 b(virtualized)g(in)o(terfaces)e(can)h(indeed)h(b)q(e)e(lo)o(w-lev)
o(el,)i(they)e(ha)o(v)o(e)g(most)79 2350 y(of)h(the)g(disadv)m(an)o(tages)g
(of)g(high-lev)o(el)i(in)o(terfaces:)26 b(the)18 b(em)o(ulation)g(they)h(pro)
o(vide)f(is)h(b)q(oth)f(complex)79 2407 y(and)d(exp)q(ensiv)o(e)g(to)e
(implemen)o(t)i(and,)f(in)h(all)g(probabilit)o(y)l(,)g(pro)o(vides)f
(applications)i(with)e(no)g(more)f(real)79 2463 y(con)o(trol)i(than)g(a)g
(high-lev)o(el)i(k)o(ernel)f(in)o(terface.)k(F)l(or)14 b(instance,)i(VM/370)d
(pro)o(vided)j(eac)o(h)f(user)g(with)h(a)79 2520 y(virtual)i(mac)o(hine)g
(detailed)g(to)e(the)h(lev)o(el)h(of)e(devices)j(and)e(privileged)i
(instructions)e([27)o(],)g(consumed)79 2576 y(signi\014can)o(t)h(resources)f
(in)h(the)f(pro)q(cess)g(and,)g(as)f(discussed)i(previously)l(,)h(did)f(not)e
(allo)o(w)h(m)o(uc)o(h)g(more)79 2633 y Fn(actual)f Fo(distributed)h(con)o
(trol)e(than)g(a)g(traditional)h(op)q(erating)f(system.)957
2817 y(33)p eop
%%Page: 34 36
34 35 bop 150 34 a Fo(Ho)o(w)o(ev)o(er,)20 b(there)g(are)g(particular)h
(cases)f(where)g(virtualization)h(is)g(either)g(una)o(v)o(oidable)g(or)e(can)
79 90 y(dramatically)14 b(impro)o(v)o(e)f(p)q(erformance.)19
b(As)13 b(discussed)i(in)f(Section)f(2.7,)f(virtualization)j(m)o(ust)d(b)q(e)
i(used)79 147 y(to)i(m)o(ultiplex)h(devices,)g(since)g(o)o(wnership)g(of)e
(device)i(input/output)f(can)g(t)o(ypically)i(only)e(b)q(e)g(deriv)o(ed)79
203 y(with)g(detailed)i(kno)o(wledge)e(of)f(data)g(the)h(device)h
(manipulates.)22 b(F)l(or)15 b(example,)h(to)f(determine)i(whic)o(h)79
260 y(applications)j(o)o(wn)e(whic)o(h)h(net)o(w)o(ork)e(pac)o(k)o(ets)h
(requires)h(kno)o(wledge)g(of)f(net)o(w)o(ork)f(proto)q(cols)h(suc)o(h)h(as)
79 316 y(TCP)l(,)j(UDP)l(,)g(etc.)41 b(Hard-co)q(ding)23 b(this)g
(information)f(in)h(the)f(k)o(ernel)h(w)o(ould)g(decrease)f(simplicit)o(y)l
(,)79 373 y(\015exibili)q(t)o(y)17 b(and)f(reliabilit)o(y)l(.)22
b(Virtualization)17 b(can)e(b)q(e)h(used)g(to)f(a)o(v)o(oid)f(suc)o(h)i(a)f
(situation.)150 429 y(A)d(sp)q(eci\014c)i(place)f(in)g(an)g(exok)o(ernel)f
(where)h(virtualization)g(ma)o(y)f(impro)o(v)o(e)g(p)q(erformance)g(\(p)q
(ossibly)79 486 y(b)o(y)i(a)f(substan)o(tial)h(amoun)o(t\))e(is)i(in)g
(increasing)g(the)g(size)g(of)f(the)g(hardw)o(are)g(TLB)h(through)f(the)g
(use)h(of)f(a)79 542 y(soft)o(w)o(are)f(TLB)h([49)o(]:)18 b(b)o(y)13
b(virtualizing)i(the)e(TLB)g(to)f(a)h(larger)f(size,)i(capacit)o(y)f(misses)g
(can)g(b)q(e)h(reduced,)79 599 y(and)h(with)g(them,)g(the)f(cost)g(of)h
(inserting)g(a)g(mapping)g(in)o(to)g(the)f(TLB)h(\(e.g.,)f(system)g(calls)h
(and)g(access)79 655 y(righ)o(t)d(c)o(hec)o(ks\).)18 b(W)l(e)12
b(measure)f(the)h(o)o(v)o(erhead)f(of)g(application-lev)o(el)k(virtual)d
(memory)f(in)h(Section)g(4.6.7.)150 711 y(In)f(closing,)h(virtualization)g
(is)f(used)g Fn(only)f Fo(when)h(resource)g(m)o(ultiplexing)i(could)e(not)g
(o)q(ccur)f(without)79 768 y(it)16 b(or,)e(in)i(extremely)g(rare)f(cases,)f
(when)i(e\016ciency)h(demands)f(it.)79 890 y Fp(2.3.5)56 b(Aegis)79
975 y Fo(W)l(e)19 b(examine)g(ho)o(w)e(Aegis)i(satis\014es)f(eac)o(h)g(of)g
(the)g(principles)j(w)o(e)c(ha)o(v)o(e)h(en)o(umerated.)29
b(Aegis)18 b(allo)o(ws)79 1032 y(applications)h(to)d(allo)q(cate)h(all)h
(resources)e(that)g(it)h(understands:)23 b(pages,)17 b(CPU)f(slices,)i(and)f
(con)o(text-)79 1088 y(iden)o(ti\014ers.)39 b(In)21 b(the)g(full)i(system)d
(this)h(set)g(of)f(resources)h(will)i(b)q(e)e(extended)h(to)e(include)k(net)o
(w)o(ork)79 1145 y(bu\013ers,)d(disk)f(blo)q(c)o(ks,)h(frame-bu\013ers)e(and)
h(the)g(full)h(complemen)o(t)f(of)f(I/O)h(devices)h(\(sound)f(cards,)79
1201 y(etc.\).)f(The)12 b(issues)h(that)f(arise)h(in)g(device)g(allo)q
(cation)h(and)e(m)o(ultiplexing)j(are)d(explored)h(in)h(Section)f(2.7.)79
1258 y(Space-shared)h(resources)f(are)f(allo)q(cated)i(at)e(as)g(\014ne)h(a)g
(gran)o(ularit)o(y)f(as)g(p)q(ossible:)21 b(ph)o(ysical)14
b(memory)e(is)79 1314 y(divided)k(in)o(to)e(pages,)f(CPU)g(slices)i(are)e
(partitioned)h(at)f(the)h(system)f(clo)q(c)o(k)h(gran)o(ularit)o(y)l(,)f(and)
h(con)o(text-)79 1371 y(iden)o(ti\014ers)j(are)e(allo)q(cated)h(singly)l(.)
150 1427 y(The)g(CPU)f(represen)o(tation)h(is)g(unique)i(and)d(deserv)o(es)h
(a)g(brief)g(discussion.)23 b(The)16 b(CPU)f(is)i(view)o(ed)79
1484 y(as)k(a)f(space-m)o(ultiplexed)j(device:)31 b(the)21
b(CPU)f(is)h(represen)o(ted)g(as)f(a)g(v)o(ector,)h(where)f(eac)o(h)h(elemen)
o(t)79 1540 y(corresp)q(onds)f(to)e(a)h(time-slice.)33 b(Time-slices)21
b(are)d(partitioned)i(at)e(the)h(clo)q(c)o(k)h(gran)o(ularit)o(y)e(and)h(can)
79 1596 y(b)q(e)h(allo)q(cated)g(in)g(a)f(manner)g(similar)h(to)e(ph)o
(ysical)j(memory)l(.)31 b(Sc)o(heduling)21 b(is)f(done)f(\\round)g(robin")79
1653 y(b)o(y)g(cycling)i(through)e(the)g(v)o(ector)f(of)h(time-slices.)33
b(A)20 b(crucial)g(prop)q(ert)o(y)f(of)f(this)i(represen)o(tation)f(is)79
1709 y Fn(p)n(osition)p Fo(,)e(whic)o(h)g(enco)q(des)h(an)e(ordering)h(and)g
(an)g(appro)o(ximate)f(guaran)o(tee)g(of)g(when)i(the)e(time-slice)79
1766 y(will)f(b)q(e)e(run.)19 b(P)o(osition)12 b(can)h(b)q(e)g(used)g(to)f
(meet)g(deadlines,)i(and)f(to)f(trade)g(o\013)f(latency)i(for)f(throughput.)
79 1822 y(F)l(or)18 b(example,)h(a)e(long-running)j(scien)o(ti\014c)g
(application)f(could)g(allo)q(cate)g(con)o(tiguous)f(time-slices)i(in)79
1879 y(order)14 b(to)g(minimize)i(the)f(o)o(v)o(erhead)e(of)h(con)o
(text-switc)o(hing,)g(while)i(an)e(in)o(teractiv)o(e)h(application)g(could)79
1935 y(allo)q(cate)h(sev)o(eral)g(equidistan)o(t)g(time-slices)h(in)f(order)f
(to)g(maximize)h(resp)q(onsiv)o(eness.)150 1992 y(Some)c(resources)g(are)g
(either)h(time-shared,)g(or)e(not)h(asso)q(ciated)h(with)f(o)o(wners.)18
b(Registers)13 b(are)f(allo-)79 2048 y(cated)i(\\whole)f(cloth")g(to)f(eac)o
(h)h(pro)q(cess:)19 b(on)13 b(the)g(curren)o(t)g(arc)o(hitecture)h(allo)q
(cating)g(sp)q(eci\014c)h(registers)79 2105 y(to)e(a)g(giv)o(en)h(pro)q(cess)
f(is)h(more)e(trouble)i(then)g(it)f(is)h(w)o(orth.)k(Ho)o(w)o(ev)o(er,)12
b(on)h(a)g(di\013eren)o(t)h(arc)o(hitecture)f(this)79 2161
y(migh)o(t)18 b(not)f(b)q(e)h(suc)o(h)g(an)f(ob)o(vious)h(decision.)28
b(F)l(or)17 b(instance,)h(on)f(a)h(SP)l(AR)o(C)f(pro)q(cessor)h([51)o(])f
(allo)q(cat-)79 2217 y(ing)h(individual)h(register)e(windo)o(ws)f(ma)o(y)g(b)
q(e)h(useful.)25 b(TLB)17 b(en)o(tries)g(and)f(cac)o(he)h(blo)q(c)o(ks)g(do)g
(not)f(ha)o(v)o(e)79 2274 y(explicit)i(o)o(wners:)h(they)c(can)h(b)q(e)g
(written)f(and)g(read)g(b)o(y)h(eac)o(h)f(individual)j(pro)q(cess.)150
2330 y(Aegis)g(allo)o(ws)g(applications)h(to)d(issue)j(all)f(privileged)i
(instructions)e(and)g(load/store)e(op)q(erations)79 2387 y(to)g(memory)g
(mapp)q(ed)h(I/O)f(devices.)25 b(Protection)16 b(is)g(guaran)o(teed)g(b)o(y)g
(asso)q(ciating)h(these)f(op)q(erations)79 2443 y(with)f(guards.)20
b(The)15 b(abilit)o(y)h(to)d(issue)j(privileged)h(instructions)e(allo)o(ws)g
(applications)h(to)e(fully)i(exploit)79 2500 y(the)i(hardw)o(are)e
(resources.)26 b(F)l(or)17 b(example,)h(applications)h(can)f(prob)q(e)f(the)h
(TLB)f(for)g(sp)q(eci\014c)i(en)o(tries)79 2556 y(or)f(\015ush)h(it)f(en)o
(tirely;)i(these)f(abilities)h(allo)o(ws)e(detailed)i(trac)o(king)e(of)f(\\w)
o(orking)h(set")f(and)i(reference)79 2613 y(information.)36
b(Exp)q(osing)21 b(DMA)f(hardw)o(are)g(\(or)f(em)o(ulating)i(it)g(in)g(soft)o
(w)o(are\))d(allo)o(ws)j(applications)79 2669 y(to)d(p)q(erform)g(bulk)i
(memory)d(transfers)h(or)f(initializations)22 b(without)c(p)q(olluting)i
(either)f(the)f(cac)o(he)h(or)957 2817 y(34)p eop
%%Page: 35 37
35 36 bop 79 34 a Fo(the)23 b(TLB.)f(As)g(describ)q(ed)i(in)e(Chapter)g(4,)h
(this)g(detailed)g(lev)o(el)g(of)f(con)o(trol)g(is)g(v)o(ery)g(useful)h(when)
79 90 y(implemen)o(ting)18 b(\015exible)f(application-lev)o(el)h(virtual)e
(memory)l(.)150 147 y(There)g(are)g(t)o(w)o(o)e(places)j(where)f(Aegis)h
(virtualizes)g(a)f(resource.)22 b(The)16 b(\014rst)f(is)i(the)f(TLB:)f(b)q
(ecause)79 203 y(access)j(c)o(hec)o(ks)f(w)o(ould)g(add)h(a)e(large)h(o)o(v)o
(erhead)g(to)f(eac)o(h)h(TLB)h(miss,)f(Aegis)h(o)o(v)o(erla)o(ys)e(the)h
(hardw)o(are)79 260 y(TLB)k(with)g(a)f(larger)h(soft)o(w)o(are)d(TLB)j([9)o
(,)f(49])g(to)g(absorb)g(capacit)o(y)g(misses.)36 b(The)21
b(second)g(area)f(is)79 316 y(the)f(net)o(w)o(ork)d(in)o(terface,)j(whic)o(h)
g(requires)g(virtualization)g(in)g(order)f(to)f(m)o(ultiplex;)k(the)d(sp)q
(eci\014cs)i(of)79 373 y(this)h(virtualization)i(are)d(discussed)i(in)f
(Section)h(2.7.)35 b(W)l(e)20 b(do)h(not)f(an)o(ticipate)h(virtualizing)i
(other)79 429 y(non-device)18 b(resources.)79 572 y Fu(2.4)70
b(Resource)22 b(Rev)n(o)r(cation)79 674 y Fo(Once)15 b(resources)e(ha)o(v)o
(e)g(b)q(een)h(allo)q(cated)h(to)d(pro)q(cesses)i(there)g(m)o(ust)e(b)q(e)i
(a)f(w)o(a)o(y)g(to)f(reclaim)j(them.)k(This)79 730 y(section)d(concen)o
(trates)f(on)g(the)g(tradeo\013s)f(of)h(visible)j(and)d(in)o(visible)j(rev)o
(o)q(cation)d(sc)o(hemes.)150 787 y(Rev)o(o)q(cation)c(can)f(either)h(b)q(e)g
Fn(visible)e Fo(or)g Fn(invisible)g Fo(to)g(pro)q(cesses.)19
b(Systems)10 b(with)g(external)h(pagers)f([73)o(])79 843 y(use)15
b(a)e(form)h(of)f(visible)j(rev)o(o)q(cation)e(for)f(ph)o(ysical)j(memory)l
(.)j(T)l(raditionally)l(,)c(op)q(erating)f(systems)g(ha)o(v)o(e)79
900 y(p)q(erformed)k(rev)o(o)q(cation)f(in)o(visibly)l(.)30
b(F)l(or)16 b(example,)j(with)e(the)h(exception)g(of)f(some)g(external)h
(pagers,)79 956 y(most)f(op)q(erating)h(systems)f(deallo)q(cate)i(\(and)e
(allo)q(cate\))h(ph)o(ysical)h(memory)e(without)g(informing)h(ap-)79
1013 y(plications.)150 1069 y(Visible)g(rev)o(o)q(cation)e(is)g(informativ)o
(e)g(and)g(directly)h(aids)f(ligh)o(t)o(w)o(eigh)o(t)g(application)h
(managemen)o(t)79 1126 y(\(i.e.,)c(ph)o(ysical)h(names)f(can)g(b)q(e)g
(used\).)20 b(P)o(erv)m(asiv)o(e)13 b(use)g(of)f(visible)j(rev)o(o)q(cation)e
(is)g(a)g(mark)o(ed)f(departure)79 1182 y(from)21 b(traditional)h(systems,)g
(and)f(will)i(dramatically)f(increase)g(applications')h(abilit)o(y)f(to)f
(manage)79 1238 y(resources.)79 1360 y Fp(2.4.1)56 b(T)-5 b(radeo\013s)79
1446 y Fl(Visible)19 b(rev)o(o)q(cation:)k Fo(there)c(are)h(three)f(go)q(o)q
(d)h(c)o(haracteristics)g(of)f(visible)i(rev)o(o)q(cation.)33
b(First,)20 b(it)193 1502 y(allo)o(ws)d(applications)h(to)d(adjust)i(to)e(c)o
(hanging)i(conditions)h(b)o(y)e(pro)o(viding)h(explicit)i(cues)e(when)193
1559 y(a)22 b(resource)g(is)g(in)h(short)e(supply)l(.)42 b(Secondly)l(,)25
b(it)d(p)q(oten)o(tially)h(enables)g(applications)h(to)d(ex-)193
1615 y(ert)e(\014ne-grain)h(con)o(trol)f(o)o(v)o(er)f(what)h(sp)q(eci\014c)i
(instance)f(of)e(a)h(giv)o(en)h(resource)f(is)g(deallo)q(cated.)193
1672 y(F)l(or)f(example,)i(user-lev)o(el)g(pagers)e(allo)o(w)g(applications)i
(to)e(select)h(whic)o(h)h(particular)f(page)f(to)193 1728 y(deallo)q(cate.)27
b(Finally)l(,)18 b(visible)i(rev)o(o)q(cation)c(allo)o(ws)i(the)f(op)q
(erating)g(system)f(to)h(place)h(more)e(re-)193 1785 y(sp)q(onsibilit)o(y)22
b(on)c(applications)j(to)d(manage)h(resources)f(and,)i(corresp)q(ondingly)l
(,)h(to)e(eliminate)193 1841 y(the)c(same)g(managemen)o(t)g(within)h(itself.)
193 1916 y(There)f(are)g(man)o(y)g(p)q(ossible)i(v)m(arian)o(ts)e(of)f
(visible)j(rev)o(o)q(cation.)j(Eac)o(h)15 b(form)f(m)o(ust)h(mak)o(e)f(a)h
(deci-)193 1973 y(sion)i(ab)q(out)f(ho)o(w)g(binding)i(the)f(rev)o(o)q
(cation)f(in)o(teraction)h(is.)24 b(F)l(or)16 b(instance,)h(if)g(an)f
(application)193 2029 y(do)q(es)j(not)f(return)g(a)g(resource)g(promptly)l(,)
h(do)q(es)f(the)h(op)q(erating)f(system)g(kill)i(it)f(or)e(is)i(a)f(more)193
2086 y(graceful)h(sc)o(heme)h(used.)31 b(This)20 b(con)o(tract)e(\(or)g
Fn(ab)n(ort)i(pr)n(oto)n(c)n(ol)p Fo(\))e(is)h(the)g(main)h(determinan)o(t)f
(of)193 2142 y(their)d(c)o(haracter.)j(The)c(reason)f(for)h(this)g(is)g(that)
g(the)g(main)g(cost)f(of)h(visible)i(rev)o(o)q(cation)e(is)g(that)193
2199 y(it)f(requires,)h(at)e(some)g(p)q(oin)o(t,)i(explicit)g(comm)o
(unication)g(b)q(et)o(w)o(een)f(the)g(op)q(erating)g(system,)f(and)193
2255 y(application,)23 b(adding)f(b)q(oth)e(o)o(v)o(erhead)g(and)h(latency)g
(to)f(rev)o(o)q(cation.)36 b(A)21 b(more)f(subtle)h(con-)193
2311 y(sideration)f(is)g(the)f(degree)h(to)e(whic)o(h)i(the)g(op)q(erating)f
(system's)g(con)o(trol)f(o)o(v)o(er)h(the)g(system)g(is)193
2368 y(reduced:)29 b(visible)21 b(rev)o(o)q(cation)e(can)g(allo)o(w)h(con)o
(trol)e(to)h(escap)q(e)h(to)e(the)h(application)i(during)f(a)193
2424 y(resource)15 b(shortage.)79 2518 y Fl(In)o(visible)j(deallo)q(cati)q
(on:)25 b Fo(the)16 b(op)q(erating)f(system)g(deallo)q(cates)i(resources)f
(as)f(it)h(sees)f(\014t,)g(without)193 2575 y(application)i(in)o(v)o(olv)o
(emen)o(t.)22 b(In)o(visible)c(deallo)q(cation)f(has)e(lo)o(w)o(er)h(latency)
g(and)g(is)g(simpler)h(than)193 2631 y(visible)f(deallo)q(cation:)21
b(applications)16 b(do)e(not)f(ha)o(v)o(e)h(to)f(b)q(e)i(queried)g(at)e(rev)o
(o)q(cation)h(time;)g(there-)193 2688 y(fore,)g(there)h(do)q(es)f(not)g(need)
i(to)e(b)q(e)h(an)f(\\ab)q(ort)g(proto)q(col")g(in)h(place)h(to)e(deal)h
(with)g(applications)957 2817 y(35)p eop
%%Page: 36 38
36 37 bop 193 34 a Fo(that)18 b(do)g(not)g(return)h(resources)f(promptly)l(.)
30 b(The)19 b(disadv)m(an)o(tage)g(directly)g(results)g(from)f(this)193
90 y(strength:)26 b(applications)20 b(ha)o(v)o(e)e(no)g(con)o(trol)g(o)o(v)o
(er)g(deallo)q(cation)i(and,)f(more)f(subtly)l(,)h(no)g(o)o(v)o(ert)193
147 y(cues)d(that)e(resources)i(are)e(scarce.)150 231 y(The)21
b(three)f(v)m(ariables)h(that)f(in\015uence)i(whic)o(h)f(deallo)q(cation)h
(mec)o(hanism)f(to)f(use)g(are)g Fn(r)n(esour)n(c)n(e)79 288
y(activity)c Fo(\(the)f(rate)g(of)g(allo)q(cation)i(and)f(deallo)q(cation\),)
g(the)g(amoun)o(t)e(of)h(state)g(asso)q(ciated)h(with)f(eac)o(h)79
344 y(resource,)25 b(and)d(the)h(p)q(oten)o(tial)g(impact)g(of)g
(application-lev)o(el)i(kno)o(wledge.)43 b(Visible)25 b(deallo)q(cation)79
401 y(w)o(orks)17 b(b)q(est)h(with)g(static)g(resources)g(that)f(ha)o(v)o(e)g
(a)h(large)f(amoun)o(t)g(of)h(state)f(asso)q(ciated)h(with)g(them.)79
457 y(F)l(or)e(example,)i(pages)e(are)g(large,)h(infrequen)o(tly)h(deallo)q
(cated)g(en)o(tities)f(that)f(can)g(pro\014t)g(from)g(visible)79
514 y(rev)o(o)q(cation)i(mec)o(hanisms.)27 b(The)18 b(p)q(erformance)g(adv)m
(an)o(tage)f(of)g(reducing)i(page)e(faults)h(easily)g(allo)o(ws)79
570 y(the)i(o)o(v)o(erhead)f(of)g(explicit)j(comm)o(unication)e(b)q(et)o(w)o
(een)g(application)h(and)e(op)q(erating)h(system)f(to)g(b)q(e)79
627 y(recoup)q(ed.)i(In)o(visible)c(deallo)q(cation)e(w)o(orks)e(w)o(ell)i
(for)e(highly)i(activ)o(e,)f(stateless)g(resources.)19 b(F)l(or)14
b(exam-)79 683 y(ple,)k(con)o(text-iden)o(ti\014ers)g(can)f(b)q(e)h(deallo)q
(cated)g(frequen)o(tly)l(,)g(and)f(ha)o(v)o(e)f(little)i(state)e(asso)q
(ciated)h(with)79 739 y(them:)j(reclaiming)15 b(CIDs)e(simply)i(requires)f
(\015ushing)h(TLB)f(mappings)g(that)f(con)o(tain)h(that)f(CID)g(from)79
796 y(the)h(TLB;)f(no)g(state)g(needs)h(to)e(b)q(e)i(sa)o(v)o(ed.)19
b(F)l(urthermore,)13 b(the)g(latency)h(of)f(reclamation)g(is)h(imp)q(ortan)o
(t:)79 852 y(blo)q(c)o(king)i(a)e(runnable)h(pro)q(cess)f(un)o(til)i(another)
d(has)h(returned)h(a)e(con)o(text-iden)o(ti\014er)j(is)e(unacceptable.)79
909 y(In)i(this)g(setting,)f(in)o(visible)j(deallo)q(cation)f(is)e(lik)o(ely)
i(the)f(correct)e(c)o(hoice.)150 965 y(Finally)l(,)k(the)f(frequency)g(of)f
(rev)o(o)q(cation)g(directly)i(in\015uences)g(the)f(pro\014tabilit)o(y)g(and)
f(implemen-)79 1022 y(tation)21 b(of)f(bindings)i(\(e.g.,)f(the)f(binding)j
(of)d(a)g(virtual)i(to)d(ph)o(ysical)j(page)f(n)o(um)o(b)q(er)g(in)g(the)g
(TLB\).)79 1078 y(Bindings)g(m)o(ust)d(b)q(e)i(explicitly)h(remo)o(v)o(ed)d
(at)g(deallo)q(cation)j(time.)30 b(If)19 b(rev)o(o)q(cations)g(are)f(frequen)
o(t)h(or)79 1135 y(m)o(ust)g(happ)q(en)g(e\016cien)o(tly)l(,)i(all)f
(bindings)g(m)o(ust)f(b)q(e)g(en)o(umerated)g(quic)o(kly)h(or)e(system)g(p)q
(erformance)79 1191 y(will)h(su\013er.)25 b(If)17 b(there)g(are)f(a)h(large)g
(n)o(um)o(b)q(er)g(of)g(bindings,)h(the)f(state)f(required)i(to)f(en)o
(umerate)f(them)79 1248 y(can)d(itself)g(consume)f(signi\014can)o(t)h
(resources:)18 b(bindings)c(are)e(not)g(a)g(panacea)g(for)f(system)h(p)q
(erformance.)79 1365 y Fl(The)18 b(ab)q(ort)h(proto)q(col)79
1450 y Fo(Visible)14 b(rev)o(o)q(cation)e(proto)q(cols)g(in)o(teract)f(with)h
(applications.)20 b(If)12 b(the)g(system)f(needs)i(the)e(resource,)h(the)79
1507 y(time)j(of)f(this)h(in)o(teraction)g(m)o(ust)f(b)q(e)h(b)q(ounded.)21
b(The)14 b(system's)g Fn(ab)n(ort)i(pr)n(oto)n(c)n(ol)e Fo(is)h(used)g(to)e
(determine)79 1563 y(what)i(action)h(to)e(tak)o(e)h(if)g(this)h(b)q(ound)g
(has)f(b)q(een)h(exceeded.)150 1620 y(The)f(strongest)f(constrain)o(t)g(on)g
(ab)q(ort)g(proto)q(cols)h(is)g(that)f(they)h(enco)q(de)g(a)g(notion)g(of)f
(time.)20 b(Since)79 1676 y(programmers)14 b(do)h(not)g(reason)f(e\013ectiv)o
(ely)i(ab)q(out)f(time)h(b)q(ounds,)f(some)g(care)g(m)o(ust)f(b)q(e)i(tak)o
(en)f(in)g(the)79 1733 y(design)g(of)e(an)h(appropriate)f(proto)q(col.)20
b(This)14 b(constrain)o(t)f(aside,)h(it)g(is)g(p)q(ossible)i(to)c(implemen)o
(t)j(simple,)79 1789 y(e\013ectiv)o(e)h(ab)q(ort)f(strategies.)k(W)l(e)c
(discuss)h(some)f(p)q(ossibiliti)q(es)j(b)q(elo)o(w.)150 1846
y Fl(Hin)o(t)g(based)p Fo(.)j(Rev)o(o)q(cation)16 b(is)g(view)o(ed)g(as)g
(dialogue)g(b)q(et)o(w)o(een)g(application)h(and)f(op)q(erating)f(sys-)79
1902 y(tem)d(in)h(order)e(for)h(the)g(application)h(to)f(suggest)f(sp)q
(eci\014c)j(resources)d(to)h(deallo)q(cate.)20 b(If)12 b(the)g(application)79
1959 y(do)q(es)i(not)e(giv)o(e)h(a)g(hin)o(t)g(in)h(a)e(timely)i(manner,)f
(the)g(op)q(erating)g(system)f(mak)o(es)h(its)g(o)o(wn)f(determination.)79
2015 y(It)i(then)g(giv)o(es)f(the)h(application)h(an)e(exception)h(\(e.g.,)e
(\\rev)o(o)q(cation)h(time)h(exceeded"\))g(with)g(the)f(name)79
2071 y(of)19 b(the)h(resource)f(that)g(w)o(as)g(deallo)q(cated.)33
b(This)20 b(exception)h(allo)o(ws)e(applications)i(to)e(relo)q(cate)h(an)o(y)
79 2128 y(mappings)15 b(that)f(use)g(the)g(ph)o(ysical)h(name)f(asso)q
(ciated)h(with)f(the)g(resource.)20 b(Other)14 b(than)g(the)g(ob)o(vious)79
2184 y(need)j(to)d(allot)i(enough)f(time)h(for)e(applications)j(to)d
(\\usually")i(mak)o(e)f(a)g(deallo)q(cation)i(decision,)f(there)79
2241 y(is)d(the)g(additional)g(complication)h(of)e(ensuring)h(that)e(in)i
(the)g(case)f(where)g(the)h(k)o(ernel)g(has)f(to)f(deallo)q(cate)79
2297 y(a)i(resource,)f(a)g(critical)i(instance)g(of)e(that)f(resource)i(is)g
(not)f(deallo)q(cated)i(\(e.g.,)d(the)i(page)f(holding)i(TLB)79
2354 y(exception)19 b(co)q(de\).)26 b(A)18 b(partial)f(solution)h(is)g(to)f
(allo)o(w)g(applications)i(to)e(mark)f(resource)i(instances)g(as)79
2410 y(non-deallo)q(catable.)30 b(F)l(or)17 b(example,)i(this)g(is)f(done)g
(b)o(y)g(the)g(Cac)o(he)f(Kernel)j(to)d(pin)i(virtual)f(memory)79
2467 y(mappings)e([22)o(].)k(The)15 b(problem)h(then)g(b)q(ecomes)g(ho)o(w)e
(these)i(pinned)h(resources)e(can)g(b)q(e)h(deallo)q(cated.)79
2523 y(A)k(p)q(ossible)g(solution)g(is)g(to)e(asso)q(ciate)h(with)h(ev)o(ery)
f(application)i(a)d(\\sw)o(ap)h(serv)o(er")f(that)g(acts)h(as)g(a)79
2580 y(guardian.)30 b(If)18 b(the)g(op)q(erating)h(system)e(can)i(\014nd)g
(no)f(unpinned)i(resource)e(to)g(deallo)q(cate)h(it)g(noti\014es)79
2636 y(the)13 b(sw)o(ap)g(serv)o(er,)f(whic)o(h)i(then)f(sw)o(aps)g(out)f
(the)h(application)i(and)e(frees)g(some)f(or)h(all)h(of)e(its)h(asso)q
(ciated)79 2693 y(resources.)957 2817 y(36)p eop
%%Page: 37 39
37 38 bop 150 34 a Fl(F)l(ascist)p Fo(.)22 b(F)l(rom)16 b(the)g(k)o(ernel's)g
(p)q(oin)o(t)g(of)g(view,)g(a)g(simpler)h(mec)o(hanism)f(than)g(hin)o(ts)g
(is)h(to)e(simply)79 90 y(b)q(ound)21 b(the)f(time)h(required)g(to)e(deallo)q
(cate)i(a)e(resource.)35 b(Applications)21 b(are)f(then)g(resp)q(onsible)i
(for)79 147 y(organizing)i(resource)e(lists)h(in)h(suc)o(h)e(a)h(w)o(a)o(y)e
(that)h(resources)g(can)h(b)q(e)g(deallo)q(cated)h(quic)o(kly)l(.)43
b(F)l(or)79 203 y(example,)14 b(an)e(application)i(could)g(ha)o(v)o(e)e(a)g
(simple)h(v)o(ector)f(of)g(ph)o(ysical)i(pages)e(that)f(it)i(o)o(wns)f
(\(pinned)i(in)79 260 y(main)f(memory\):)k(when)12 b(the)g(k)o(ernel)g
(indicates)i(that)d(a)g(page)g(should)i(b)q(e)g(deallo)q(cated,)g(the)f
(application)79 316 y(simply)20 b(selects)f(one)g(of)f(these)h(pages,)g
(writes)f(it)h(to)f(disk,)i(and)e(frees)h(it.)30 b(Suc)o(h)19
b(an)f(organization)h(is)79 373 y(not)13 b(di\016cult)i(to)e(construct)g
(and,)h(if)f(the)h(k)o(ernel)g(is)g(made)f(a)o(w)o(are)f(of)h(certain)h(\\go)
q(o)q(d)f(faith")g(op)q(erations)79 429 y(\(e.g.,)21 b(the)f(writing)h(of)f
(a)g(page)h(to)f(disk)h(in)g(preparation)g(for)e(deallo)q(cation\))j(it)f
(should)g(not)f(b)q(e)i(an)79 486 y(unreasonable)c(alternativ)o(e.)23
b(This)17 b(metho)q(d)f(should)i(b)q(e)f(implemen)o(ted)h(with)e(at)g(least)g
(t)o(w)o(o)f(stages)h(of)79 542 y(rev)o(o)q(cation)i(noti\014cations,)h(in)g
(order)f(to)f(allo)o(w)h(the)g(lo)o(w-lev)o(el)i(allo)q(cation)f(mec)o
(hanisms)f(to)g(in)o(teract)79 599 y(with)23 b(higher-lev)o(el)h(application)
g(soft)o(w)o(are.)38 b(F)l(or)21 b(example,)j(if)f(rev)o(o)q(cation)f(o)q
(ccurs)g(in)h(t)o(w)o(o)d(stages)79 655 y(\(\\please)15 b(return)f(a)f(page")
h(and)g(\\return)f(a)h(page)g(in)g(50)g(micro-seconds"\))g(then)g(the)g(lo)o
(w-lev)o(el)h(paging)79 711 y(soft)o(w)o(are)f(can)i(do)f(an)h(up)q(call)h
(to)e(higher-lev)o(els)i(on)f(the)f(\014rst)g(noti\014cation.)22
b(If)15 b(this)h(higher-lev)o(el)i(do)q(es)79 768 y(not)f(resp)q(ond)h(b)o(y)
f(the)g(second)h(noti\014cation,)g(the)f(page-manager)g(simply)h(deallo)q
(cates)g(the)f(resource)79 824 y(directly)l(.)79 946 y Fp(2.4.2)56
b(Aegis)79 1032 y Fo(Aegis)14 b(uses)f(visible)i(deallo)q(cation)f(for)e(CPU)
g(slices,)j(pages)d(and)h(the)g(system)f(ob)s(jects)g(that)g(it)h(con)o
(trols.)79 1088 y(Con)o(text-iden)o(ti\014ers)j(are)f(reclaimed)i(\\in)o
(visibly")g(from)e(applications.)150 1145 y(Rev)o(o)q(cation)i(is)f(done)h
(when)f(resource)g(usage)g(exceeds)h(a)f(sp)q(eci\014ed)i(threshold.)23
b(Whic)o(h)17 b(instance)79 1201 y(of)k(the)g(resource)f(to)g(rev)o(ok)o(e)g
(and)h(who)g(to)f(rev)o(ok)o(e)g(it)h(from)f(are)g(highly)i(system)e(dep)q
(enden)o(t.)38 b(F)l(or)79 1258 y(example,)24 b(on)d(a)g(system)g(with)g
(prop)q(ortional)h(sharing)g([105)o(],)g(this)f(determination)i(will)f(b)q(e)
g(made)79 1314 y(di\013eren)o(tly)c(than)e(on)g(a)g(\\fair-share")g(system)g
([46)o(,)g(55].)23 b(As)16 b(discussed)i(later,)e(Aegis)h(will)h(allo)o(w)f
(this)79 1371 y(to)e(b)q(e)h(parameterized)g(on)f(a)g(system-wide)g(basis.)21
b(W)l(e)15 b(discuss)h(the)g(default)f(mec)o(hanism)h(b)q(elo)o(w.)150
1427 y(As)e(devices)h(are)f(added,)g(rev)o(o)q(cation)g(will)i(b)q(e)f(done)f
(at)f(t)o(w)o(o)g(lev)o(els:)20 b(the)14 b(\014rst)g(is)g(a)g(request)g(for)f
(the)79 1484 y(giv)o(en)j(ob)s(ject,)f(the)h(second)g(lev)o(el)g(is)g(a)g
(demand.)21 b(The)16 b(ab)q(ort)f(proto)q(col)g(follo)o(ws)g(the)h(\\hin)o
(t")f(proto)q(col)79 1540 y(describ)q(ed)k(ab)q(o)o(v)o(e.)j(Resources)17
b(are)f(forcibly)h(\015ushed)g(to)f(a)f(bac)o(king)i(store)e(\(similar)i(to)f
(the)g(Cac)o(hing)79 1596 y(Kernel)d([22)o(]\),)e(and)g(the)g(application)i
(is)e(giv)o(en)h(an)f(exception)h(that)f(its)g(rev)o(o)q(cation)g(time)g(w)o
(as)f(exceeded.)79 1653 y(The)16 b(lo)q(cation)g(of)f(the)g(bac)o(king)h
(store)e(will)j(b)q(e)f(included)i(as)c(an)i(argumen)o(t)e(to)h(the)g
(exception.)150 1709 y(Initially)l(,)j(random)d(selection)i(will)g(b)q(e)f
(used)h(to)e(select)h(whic)o(h)g(application)h(to)e(rev)o(ok)o(e)g(a)g
(resource)79 1766 y(from.)28 b(Eac)o(h)17 b(activ)o(e)h(resource)g(will)i(b)q
(e)e(asso)q(ciated)g(with)g(its)g(o)o(wner;)h(to)e(rev)o(ok)o(e)g(a)h
(resource,)g(Aegis)79 1822 y(will)23 b(randomly)e(select)h(the)e(o)o(wner)h
(from)f(this)h(v)o(ector,)g(and)g(send)g(the)g(application)i(an)d(exception)
79 1879 y(to)f(indicate)h(that)e(it)i(should)g(relinquish)h(a)e(resource)g
(of)f(the)h(indicated)i(t)o(yp)q(e.)31 b(A)19 b(critical)i(p)q(oin)o(t)e(is)
79 1935 y(that)c(it)g(is)g(the)h(application)g(decides)h Fn(which)e
Fo(instance)h(of)f(the)g(resource)g(to)f(deallo)q(cate.)21
b(Randomized)79 1992 y(rev)o(o)q(cation)f(has)g(v)o(ery)g(go)q(o)q(d)f(prop)q
(erties)i(for)e(equal)i(sharing.)34 b(In)o(tro)q(ducing)21
b(a)f(prop)q(ortional-share)79 2048 y(structure)f(on)f(top)g(of)g(it)h(is)g
(a)f(matter)g(of)g(scaling)h(this)g(selection)h(so)e(that)g(some)g(en)o
(tities)i(are)e(more)79 2105 y(lik)o(ely)f(to)e(b)q(e)h(selected)g(than)f
(others)g([105)o(].)k(W)l(e)d(do)f(not)g(consider)h(these)f(issues)h(in)g
(this)g(thesis.)79 2248 y Fu(2.5)70 b(Resource)22 b(Naming)79
2349 y Fo(The)17 b(represen)o(tation)f(of)g(names)g(determines)h(b)q(oth)f
(ho)o(w)f(hea)o(vyw)o(eigh)o(t)h(the)g(OS)h(managemen)o(t)e(m)o(ust)79
2406 y(b)q(e)i(and)g(the)f(e\013ectiv)o(eness)g(of)g(application-lev)o(el)j
(resource)e(managemen)o(t.)k(An)c(exok)o(ernel)f(attempts)79
2462 y(to)h(use)g(ph)o(ysical)h(names)f(wherev)o(er)f(p)q(ossible.)27
b(This)17 b(is)g(a)g(fundamen)o(tal)g(di\013erence)h(b)q(et)o(w)o(een)f(it)g
(and)79 2519 y(previous)12 b(op)q(erating)f(systems.)18 b(With)11
b(few)f(rare)g(exceptions)i(\(e.g.,)e(external)h(pagers\),)g(ph)o(ysical)h
(names)79 2575 y(ha)o(v)o(e)h(not)g(b)q(een)i(used)e(in)i(an)o(y)d(other)h(m)
o(ultiprogrammed)h(op)q(erating)f(system)g(structure;)g(certainly)i(no)79
2632 y(suc)o(h)h(op)q(erating)f(system)g(has)g(placed)i(the)e(imp)q(ortance)h
(on)f(them)g(that)f(an)i(exok)o(ernel)g(do)q(es.)150 2688 y(W)l(e)e(discuss)i
(the)e(tradeo\013s)f(b)q(et)o(w)o(een)i(virtual)g(and)f(ph)o(ysical)i(names.)
k(F)l(or)13 b(a)h(more)g(extensiv)o(e)h(and)957 2817 y(37)p
eop
%%Page: 38 40
38 39 bop 79 34 a Fo(general)15 b(discussion)i(of)d(naming)g(see)h(Saltzer)g
([85)o(].)k(The)c(three)g(issues)g(w)o(e)f(lo)q(ok)h(at)e(are)i(the)f(impact)
h(of)79 90 y(the)g(naming)g(sc)o(heme)g(on:)k(\(1\))14 b(rev)o(o)q(cation)g
(\(ho)o(w)g(\\relo)q(cation")g(meshes)h(with)g(a)f(sensible)j(rev)o(o)q
(cation)79 147 y(mec)o(hanism\),)e(\(2\))f(sharing)g(\(ho)o(w)g(names)h(can)f
(b)q(e)i(translated)e(across)g(con)o(texts\),)f(and)i(\(3\))e(allo)q(cation)
79 203 y(\(what)i(can)g(b)q(e)h(named,)f(and)g(if)h(the)f(full)i(information)
e(enco)q(ded)i(in)f(a)f(name)g(can)g(b)q(e)h(exploited\).)79
325 y Fp(2.5.1)56 b(Name)17 b(spaces)79 411 y Fo(Name-spaces)d(that)e(are)g
(managed)h(or)f(created)h(b)o(y)g(the)g(exok)o(ernel)g(should)h(ha)o(v)o(e)e
(an)h(application-lev)o(el)79 467 y(\\en)o(umerate")18 b(op)q(erator.)28
b(Allo)q(cation)20 b(of)d(sp)q(eci\014c)j(resources)f(is)f(aided)i(b)o(y)e
(an)g(accurate)g(picture)h(of)79 524 y(what)d(resources)h(are)f(in)h(use.)23
b(Therefore,)16 b(publishing)j(this)e(b)q(o)q(ok-k)o(eeping)h(information)e
(\(e.g.,)f(free-)79 580 y(list,)h(estimation)g(of)f(disk)i(head)e(p)q
(osition,)i(etc.\))j(allo)o(ws)c(more)f(e\013ectiv)o(e)g(allo)q(cation)i(to)e
(b)q(e)h(pro)o(vided.)79 637 y(F)l(urthermore,)h(exok)o(ernel)g(data)f
(structures)g(can)h(pro)o(vide)g(crucial)h(information)f(as)g(to)f(the)g
(resource)79 693 y(utilization)k(of)e(the)g(system.)28 b(F)l(or)17
b(example,)i(the)f(mappings)h(in)g(a)f(soft)o(w)o(are)e(TLB)i(can)g(giv)o(e)g
(an)g(ap-)79 750 y(pro)o(ximation)h(of)g(the)g(curren)o(t)g(activ)o(e)g(set)g
(of)f(ph)o(ysical)j(pages.)31 b(This)19 b(principle)j(can)d(b)q(e)h(view)o
(ed)g(as)79 806 y(simply)d(exp)q(osing)f(all)g(b)q(o)q(okk)o(eeping)h
(primitiv)o(es)f(to)f(applications.)150 863 y(T)l(raditional)h(op)q(erating)f
(systems)g(are)g(mark)o(edly)g(reticen)o(t)g(ab)q(out)g(supplying)i(suc)o(h)f
(information,)79 919 y(whic)o(h)c(mak)o(es)d(it)i(di\016cult)h(to)d(get)h(a)g
(clear)h(picture)g(of)f(what)g(resources)g(are)g(in)h(use)g(at)f(an)o(y)g(p)q
(oin)o(t)g(in)h(time.)79 975 y(P)o(art)16 b(of)g(this)i(fact)e(is)h(simply)h
(b)q(ecause)g(applications)g(on)f(these)g(systems)f(cannot)h(t)o(ypically)h
(manage)79 1032 y(resources,)k(and)e(so)g(w)o(ould)h(not)e(b)q(e)i(able)g(to)
f(mak)o(e)g(m)o(uc)o(h)g(use)h(of)f(suc)o(h)g(information.)35
b(The)21 b(other)79 1088 y(part)16 b(is)h(that)f(information)g(hiding)i(is)f
(a)f(v)o(ery)g(e\013ectiv)o(e)g(w)o(a)o(y)f(to)h(decouple)i(the)e(OS)h
(implemen)o(tation)79 1145 y(from)e(its)h(sp)q(eci\014cation.)24
b(W)l(e)16 b(b)q(eliev)o(e)h(that)e(the)h(cost)g(of)f(decreased)h
(application-lev)o(el)j(managemen)o(t)79 1201 y(out)o(w)o(eighs)c(the)h(b)q
(ene\014t)g(of)f(suc)o(h)g(information)h(hiding.)79 1323 y
Fp(2.5.2)56 b(Ph)n(ysical)18 b(v)n(ersus)h(virtual)e(names)79
1409 y Fo(The)12 b(naming)h(issues)f(w)o(e)g(discuss)g(here)h(ha)o(v)o(e)e(b)
q(een)i(made)f(in)g(the)g(sp)q(eci\014c)i(con)o(text)d(of)g(names)h(managed)
79 1465 y(b)o(y)i(the)g(op)q(erating)g(system)g(and)g(seen)g(b)o(y)g(the)g
(application.)21 b(Naming)14 b(can)g(b)q(e)h(done)f(using)g(the)g(actual)79
1522 y(name)f(of)e(an)h(ob)s(ject)g(\(ph)o(ysical)h(naming\))f(or)g(via)g(a)g
(la)o(y)o(er)g(of)g(indirection)i(\(virtual)e(naming\).)19
b(E\016cien)o(t,)79 1578 y(reliable)d(translation)e(of)f(virtual)h(names)f
(is)i(di\016cult,)g(and)e(can)h(consume)g(signi\014can)o(t)g(resources)g
(\(e.g.,)79 1635 y(virtual)e(memory)f(systems\).)17 b(Most)10
b(resources)h(cannot)g(b)q(e)h(named)f(in)h(traditional)g(op)q(erating)f
(systems;)79 1691 y(those)16 b(that)f(can)h(do)g(so)f(through)g(virtual)i
(naming)f(\(e.g.,)e(virtual)j(addresses,)e(\\logical")i(disk)f(blo)q(c)o(ks,)
79 1748 y(etc.\).)j(The)14 b(c)o(hallenge)i(in)e(the)g(use)g(of)g(ph)o
(ysical)h(names)e(is)i(relo)q(cation)f(and,)g(as)f(a)h(direct)g(consequence,)
79 1804 y(rev)o(o)q(cation.)79 1924 y Fl(Ph)o(ysical)k(naming)79
2010 y Fo(Ph)o(ysical)c(naming)f(is)h(WYSIWYG:)e(page)g(5)h(is)g(page)g(5,)f
(disk)i(blo)q(c)o(k)f(137)f(is)h(disk)h(blo)q(c)o(k)f(137.)18
b(In)c(suc)o(h)f(a)79 2066 y(sc)o(heme,)j(pro)q(cesses)g(access)g(and)f(lo)q
(cate)h(ob)s(jects)f(using)h(their)g(actual)g(names.)21 b(The)16
b(c)o(hief)g(adv)m(an)o(tage)79 2123 y(of)g(ph)o(ysical)i(naming)f(is)f(that)
g(it)g(requires)h(no)g(translation,)f(and)g(therefore)g(is)h(ligh)o(t)o(w)o
(eigh)o(t)f(and)h(easy)79 2179 y(to)12 b(implemen)o(t.)21 b(Its)12
b(main)h(disadv)m(an)o(tage)g(is)g(the)g(constrain)o(ts)f(it)h(places)h(on)e
(rev)o(o)q(cation:)19 b(at)12 b(either)h(use)79 2236 y(or)i(rev)o(o)q(cation)
h(time,)f(the)h(pro)q(cess)g(itself)g(m)o(ust)f(b)q(e)h(noti\014ed)h(of)e
(rev)o(o)q(cation,)g(so)g(that)g(it)h(can)f Fn(r)n(elo)n(c)n(ate)79
2292 y Fo(its)k(names.)28 b(F)l(or)18 b(example,)h(a)f(pro)q(cess)g(using)h
(ph)o(ysical)g(page)f(\\5")g(in)h(virtual)f(mappings)h(will)h(ha)o(v)o(e)79
2349 y(this)f(information)f(scattered)f(throughout)h(its)g(address)g(space,)g
(whic)o(h)h(remo)o(v)o(es)e(an)o(y)h(p)q(ossibilit)o(y)i(of)79
2405 y(the)e(k)o(ernel)f(relo)q(cating)h(it.)26 b(This)17 b(issue)h(can)f(b)q
(e)h(view)o(ed)g(as)e(who)h(con)o(trols)g(the)g(\\con)o(text")f(in)i(whic)o
(h)79 2462 y(names)e(are)f(resolv)o(ed:)20 b(con)o(trol)15
b(o)o(v)o(er)f(the)h(con)o(text)g(determines)h(who)f(can)g(sensibly)i(alter)f
(it.)150 2518 y(If)j(rev)o(o)q(cation)f(happ)q(ens)i(visibly)l(,)h(then)e
(relo)q(cation)g(do)q(es)g(not)f(p)q(ose)h(additional)h(problems:)27
b(the)79 2574 y(op)q(erating)15 b(system)f(will)j(explicitly)g(comm)o
(unicate)e(with)g(applications)h(at)e(rev)o(o)q(cation)g(time)h(an)o(yw)o(a)o
(y)l(,)79 2631 y(so)f(relo)q(cation)h(adds)f(no)g(new)g(constrain)o(ts.)19
b(Ho)o(w)o(ev)o(er,)13 b(there)h(exist)h(situations)f(where)g(ph)o(ysical)h
(nam-)79 2687 y(ing)i(should)f(b)q(e)h(used)f(but)g(deallo)q(cation)h(is)f
(not)f(explicit.)24 b(F)l(or)15 b(instance,)h(a)f(graceful)h(ab)q(ort)f
(proto)q(col)957 2817 y(38)p eop
%%Page: 39 41
39 40 bop 79 34 a Fo(ma)o(y)13 b(deallo)q(cate)i(a)e(resource)h(\\b)o(y)f
(force")g(if)h(a)f(pro)q(cess)h(exceeds)h(the)e(time-limit)j(it)e(had)f(to)g
(deallo)q(cate)79 90 y(a)18 b(resource.)28 b(Unfortunately)l(,)18
b(in)h(the)f(presence)h(of)e(ph)o(ysical)i(names,)f(this)h(resource)f(is)g
(still)h(named)79 147 y(throughout)g(the)g(application's)i(con)o(text:)27
b(nothing)20 b(go)q(o)q(d)f(can)h(come)f(of)g(this.)33 b(T)l(o)19
b(mesh)g(ph)o(ysical)79 203 y(names)e(with)f(in)o(visible)j(deallo)q(cation)f
(an)f(auxiliary)g(data)f(structure,)g(a)g Fn(r)n(elo)n(c)n(ation)g(ve)n(ctor)
p Fo(,)g(m)o(ust)g(b)q(e)79 260 y(in)o(tro)q(duced.)22 b(When)15
b(a)g(resource)g(is)g(deallo)q(cated)i(b)o(y)e(the)g(op)q(erating)g(system,)g
(this)g(fact)g(is)g(registered)79 316 y(in)k(the)f(v)o(ector)f(and)h(the)g
(application)i(receiv)o(es)e(a)g(\\relo)q(cation")g(exception)h(\(to)e(allo)o
(w)h(it)g(to)f(up)q(date)79 373 y(an)o(y)j(mappings)g(that)f(uses)h(the)f
(resource\).)33 b(Since)21 b(this)f(situation)g(will)h(not)e(arise)h(frequen)
o(tly)l(,)h(the)79 429 y(v)o(ector)c(can)h(b)q(e)g(small;)h(furthermore,)e
(since)h(lo)q(okup)g(do)q(es)g(not)f(ha)o(v)o(e)g(to)g(b)q(e)h(e\016cien)o
(t,)g(its)g(structure)79 486 y(can)e(b)q(e)g(simple)g(as)f(w)o(ell.)79
606 y Fl(Virtual)k(naming)79 692 y Fo(A)14 b(virtual)g(naming)g(sc)o(heme)g
(adds)g(a)f(lev)o(el)i(of)e(indirection)i(b)q(et)o(w)o(een)f(a)f(name)h(used)
g(b)o(y)f(an)h(application)79 748 y(and)j(the)f(real,)g(ph)o(ysical)h(name)f
(of)f(the)h(resource.)23 b(A)16 b(familiar)g(example)h(of)f(this)g(is)h
(virtual)f(memory)l(.)79 804 y(This)11 b(lev)o(el)h(of)e(indirection)i
(\(called)g(a)e Fn(c)n(ontext)g Fo([85)o(]\))f(can)i(b)q(e)g(p)q(er-pro)q
(cess,)h(p)q(er-system,)f(or)f(an)o(y)g(range)g(in)79 861 y(b)q(et)o(w)o
(een.)20 b(The)14 b(primary)g(adv)m(an)o(tage)f(of)g(virtual)h(naming)g
(springs)g(from)f(the)h(transparen)o(t)f(relo)q(cation)79 917
y(it)j(allo)o(ws.)k(F)l(or)15 b(example,)h(if)g(an)f(op)q(erating)g(system)g
(con)o(trols)g(the)h(mappings)g(of)f(virtual)g(to)g(ph)o(ysical)79
974 y(names,)g(it)h(do)q(es)f(not)g(ha)o(v)o(e)g(to)f(explicitly)k(comm)o
(unicate)e(with)f(applications)i(on)e(rev)o(o)q(cation.)150
1030 y(Virtual)h(naming's)f(main)g(costs)g(are)g(the)g(resources)g(consumed)h
(b)o(y)f(the)g(mapping)g(structure)g(and)79 1087 y(the)k(o)o(v)o(erhead)f(of)
f(translating)i(virtual)f(to)g(ph)o(ysical)i(names.)28 b(If)19
b(translation)f(do)q(es)h(not)e(ha)o(v)o(e)h(to)g(b)q(e)79
1143 y(e\016cien)o(t,)g(it)f(can)g(b)q(e)h(made)f(quite)g(simple)i(\(e.g.,)c
(a)i(v)o(ector)f(of)h(tuples\).)25 b(T)o(ypically)l(,)19 b(ho)o(w)o(ev)o(er,)
d(trans-)79 1200 y(lation)g(m)o(ust)e(b)q(e)h(e\016cien)o(t,)g(whic)o(h)h
(leads)f(to)f(complex)i(mapping)f(structures)f(\(e.g.,)f(page-table-based)79
1256 y(virtual)18 b(memory)f(systems)f(are)h(notoriously)g(complicated\).)27
b(F)l(urthermore,)17 b(the)g(state)f(required)i(to)79 1313
y(p)q(erform)h(this)h(mapping)f(can)g(b)q(e)h(quite)g(large.)31
b(Some)19 b(resources,)g(on)g(the)g(other)g(hand,)h(are)e(easily)79
1369 y(asso)q(ciated)g(with)h(virtual)f(names.)27 b(F)l(or)18
b(instance,)g(con)o(text-iden)o(ti\014ers)h(are)f(small)g(in)h(n)o(um)o(b)q
(er,)f(and)79 1425 y(th)o(us)d(require)i(few)e(resources)g(to)f(map)h
(e\016cien)o(tly)l(.)150 1482 y(The)c(use)g(of)g(virtual)g(naming)h(allo)o
(ws)f(some)f(op)q(erating)h(system)g(optimizations)h(that)e(are)g(otherwise)
79 1538 y(di\016cult.)32 b(F)l(or)17 b(instance,)j(disk)f(compaction)g(is)g
(v)o(ery)f(easy)g(with)h(the)g(use)f(of)g(virtual)h(names,)g(since)79
1595 y(applications)k(and)e(higher-lev)o(el)i(\014lesystems)e(do)f(not)h
(need)g(to)f(b)q(e)i(in)o(v)o(olv)o(ed)f(in)h(the)e(pro)q(cess)h([30)o(].)79
1651 y(Ho)o(w)o(ev)o(er,)15 b(the)g(use)h(of)f(suc)o(h)h(a)f(\\logical)i
(disk")f(to)f(map)g(disk)h(blo)q(c)o(ks)g(can)g(require)g(o)o(v)o(er)f(4)g
(megab)o(ytes)79 1708 y(of)g(ph)o(ysical)i(memory)d(for)h(disks)h(of)f(ev)o
(en)g(mo)q(derate)g(size)h([30)o(].)79 1828 y Fl(Summ)o(ary)79
1914 y Fo(The)11 b(cost)f(of)g(virtual)h(naming)g(is)f(the)h(asso)q(ciated)f
(loss)h(of)f(information)g(and)h(the)f(computation)g(required)79
1970 y(to)18 b(map)g(the)g(virtual)g(name)g(to)g(the)g(corresp)q(onding)h(ph)
o(ysical)g(name.)28 b(F)l(urthermore,)18 b(its)g(strength,)79
2026 y(transparen)o(t)13 b(rev)o(o)q(cation,)h(is)g(often)g(irrelev)m(an)o
(t:)20 b(application-lev)o(el)d(resource)d(managers)g(will)h
Fn(want)f Fo(to)79 2083 y(b)q(e)i(noti\014ed)h(when)e(rev)o(o)q(cation)g
(happ)q(ens)i(\(e.g.,)c(the)i(deallo)q(cation)i(of)e(a)g(ph)o(ysical)h
(page\).)150 2139 y(An)k(exok)o(ernel)g(attempts)e(to)h(use)h(ph)o(ysical)g
(names)g(whenev)o(er)f(p)q(ossible.)35 b(Because)20 b(the)f(use)h(of)79
2196 y(ph)o(ysical)d(names)f(at)f(application-lev)o(el)j(eliminates)g(the)d
(need)i(for)d(k)o(ernel)j(name)e(managemen)o(t)g(\(e.g.,)79
2252 y(translation)g(and)g(relo)q(cation\),)f(w)o(e)h(b)q(eliev)o(e)h(that)e
(it)h(is)g(the)f(cornerstone)h(of)f(ligh)o(t-w)o(eigh)o(t)h(application)79
2309 y(resource)h(managemen)o(t.)79 2430 y Fp(2.5.3)56 b(Allo)r(cation)17
b(b)n(y)i(name)79 2516 y Fo(Names)d(encapsulate)g(useful)h(resource)f
(attributes.)k(F)l(or)15 b(example,)h(the)g(p)q(osition)h(of)e(a)g(disk)h
(blo)q(c)o(k)h(in)79 2573 y(relation)h(to)e(the)g(curren)o(t)h(p)q(osition)g
(of)f(the)h(disk)g(arm)f(determines)i(ho)o(w)e(quic)o(kly)i(it)f(can)g(b)q(e)
g(written.)79 2629 y(Allo)q(cating)22 b(a)e(a)f(disk)i(blo)q(c)o(k)f(b)o(y)g
(name)g(allo)o(ws)g(a)g(more)f(e\016cien)o(t)i(\014le-system)g(to)e(b)q(e)i
(constructed.)79 2686 y(F)l(urthermore,)14 b(names)h(ha)o(v)o(e)f(p)q(o)o(w)o
(er.)20 b(F)l(or)14 b(instance,)h(in)h(a)e(system)h(with)g(direct)g(mapp)q
(ed)h(cac)o(hes,)e(the)957 2817 y(39)p eop
%%Page: 40 42
40 41 bop 79 34 a Fo(name)17 b(of)f(the)h(ph)o(ysical)h(page)e(\(i.e.,)h(the)
f(page-n)o(um)o(b)q(er\))h(determines)g(where)g(it)g(maps)f(in)i(the)f(cac)o
(he.)79 90 y(Tw)o(o)d(pages)g(with)h(names)g(that)e(fall)j(in)f(the)g(same)f
(\\page-color")g(equiv)m(alence)j(class)e(will)h(con)o(tend)f(for)79
147 y(the)h(same)f(regions)g(of)g(the)h(cac)o(he)f([83)o(].)20
b(If)15 b(applications)i(can)f(request)f(sp)q(eci\014c)i(ph)o(ysical)g
(pages,)d(they)79 203 y(can)j(minimize)h(their)f(con\015ict)f(b)q(et)o(w)o
(een)h(already)f(o)o(wned)g(pages)g(and)g(b)q(et)o(w)o(een)h(the)f(pages)f
(allo)q(cated)79 260 y(elsewhere)k(in)g(the)f(system.)26 b(T)l(raditionally)l
(,)20 b(op)q(erating)e(systems)f(ha)o(v)o(e)g(not)h(pro)o(vided)g(an)o(y)f
(supp)q(ort)79 316 y(for)e(direct)h(request)f(of)g(resources)g(b)o(y)g(name)h
(\(e.g.,)d(ph)o(ysical)k(page)e(\\42"\).)150 373 y(A)o(t)h(\014rst)g(glance,)
g(useful)i(name-based)e(allo)q(cation)i(app)q(ears)e(to)f(require)i(substan)o
(tial)g(mac)o(hinery)l(.)79 429 y(F)l(or)c(example,)h(to)e(return)h(to)g(our)
g(disk)h(arm)e(example,)i(applications)h(ma)o(y)d(w)o(an)o(t)g(to)h(phrase)g
(questions)79 486 y(suc)o(h)i(as)e(\\allo)q(cate)i(a)e(blo)q(c)o(k)i(close)f
(to)g(sector)f(10)g(or)h(20,)f(whic)o(hev)o(er)i(is)f(less)h(fragmen)o(ted.")
j(Ob)o(viously)l(,)79 542 y(suc)o(h)i(queries)g(can)f(get)g(arbitrarily)g
(complicated)h(and)g(baro)q(que.)31 b(F)l(ortunately)l(,)20
b(a)e(complex)i(query)79 599 y(engine)c(is)f(completely)h(a)o(v)o(oidable:)k
(if)c(the)e(k)o(ernel)i(publishes)g(the)f(data)f(it)h(w)o(ould)g(use)g(to)f
(satisfy)g(suc)o(h)79 655 y(requests,)21 b(applications)h(can)e(satisfy)g
(extremely)g(detailed)i(and)e(v)o(olatile)h(predicates)g(without)f(an)o(y)79
711 y(op)q(erating)14 b(system)f(in)o(teraction.)20 b(F)l(or)12
b(instance,)i(if)g(the)f(op)q(erating)h(system)f(publishes)i(the)f(disk)g
(blo)q(c)o(k)79 768 y(\\free)k(list")g(and)f(estimation)h(of)f(disk)h(arm)f
(p)q(osition,)h(then)g(applications)h(decide)g(whic)o(h)g(disk)f(blo)q(c)o(k)
79 824 y(\014ts)i(their)g(requiremen)o(ts.)34 b(This)21 b(functionalit)o(y)f
(is)h(extremely)f(simple)h(to)e(pro)o(vide)h(and)g(will)i(lik)o(ely)79
881 y(exceed)c(the)e(sophistication)h(of)f(query)g(mec)o(hanisms)h(pro)o
(vided)g(b)o(y)f(the)g(k)o(ernel.)24 b(The)16 b(one)g(dra)o(wbac)o(k)79
937 y(of)h(suc)o(h)f(a)g(metho)q(d)h(is)g(that)f(it)g(is)h(not)f(atomic:)22
b(b)q(et)o(w)o(een)17 b(the)g(time)f(an)h(application-lev)o(el)i(OS)e(scans)
79 994 y(a)e(freelist)i(and)e(requests)g(a)g(resource,)g(the)g(resource)h
(could)g(ha)o(v)o(e)f(b)q(een)h(allo)q(cated.)21 b(Ho)o(w)o(ev)o(er,)14
b(suc)o(h)i(a)79 1050 y(situation)g(will)h(probably)f(b)q(e)g(v)o(ery)f
(infrequen)o(t.)79 1172 y Fp(2.5.4)56 b(Aegis)79 1258 y Fo(Aegis)16
b(attempts)d(to)h(use)h(ph)o(ysical)h(names)e(whenev)o(er)h(p)q(ossible.)22
b(Ph)o(ysical)15 b(pages)f(are)h(named)f(explic-)79 1314 y(itly)l(,)20
b(as)d(are)g(time-slices)j(and)e(TLB)g(en)o(tries.)28 b(Aegis)18
b(allo)o(ws)g(resources)g(to)f(b)q(e)h(requested)g(b)o(y)g(name;)79
1371 y(as)h(suggested)g(ab)q(o)o(v)o(e,)h(this)g(facilit)o(y)g(is)g(made)f
(more)g(useful)h(b)o(y)f(exp)q(osing)h(the)g(curren)o(t)f(free-list)h(to)79
1427 y(applications,)j(whic)o(h)d(giv)o(es)g(them)g(a)f(high)i(probabilit)o
(y)g(of)e(success)h(in)h(their)f(allo)q(cation)h(requests.)79
1484 y(Resources)16 b(that)f(are)g(already)g(allo)q(cated)h(will)h(not)e(b)q
(e)h(rev)o(ok)o(ed)f(to)f(satisfy)h(suc)o(h)h(requests.)150
1540 y(As)c(discussed)h(ab)q(o)o(v)o(e,)f(ph)o(ysical)h(names)f(and)g
(name-driv)o(en)g(allo)q(cation)h(enable)g(a)f(large)g(n)o(um)o(b)q(er)g(of)
79 1596 y(optimizations.)20 b(F)l(or)12 b(instance,)h(applications)h(ma)o(y)e
(w)o(an)o(t)f(to)h(construct)g(runs)h(of)f(con)o(tiguous)g(ph)o(ysical)79
1653 y(pages)i(to)e(allo)o(w)i(larger)f(page)g(sizes)h(to)e(b)q(e)i(mapp)q
(ed)g(in)g(the)g(TLB)f(or)g(to)f(allo)o(w)i(larger)f(DMA)g(transfers.)150
1709 y(Con)o(text-iden)o(ti\014er)g(names)f(are)f(virtual.)19
b(Because)13 b(our)f(curren)o(t)f(mac)o(hines)i(only)f(supp)q(ort)g(a)g
(small)79 1766 y(n)o(um)o(b)q(er)k(of)e(iden)o(ti\014ers)j(\(64\),)c(frequen)
o(t)i(rev)o(o)q(cations)g(can)g(o)q(ccur.)20 b(Additionally)l(,)e(con)o(text)
c(iden)o(ti\014ers)79 1822 y(m)o(ust)e(b)q(e)h(returned)g(promptly)f(on)h
(rev)o(o)q(cation)f(if)h(the)f(system)g(is)h(to)f(mak)o(e)f(progress)h(or)g
(if)h(a)f(\\graceful")79 1879 y(deallo)q(cation)17 b(p)q(olicy)g(is)f(to)e(o)
q(ccur)i(with)g(an)o(y)e(regularit)o(y)l(.)79 2022 y Fu(2.6)70
b(Protection)79 2123 y Fo(Because)16 b(an)e(exok)o(ernel)h(explicitly)j(allo)
q(cates)d(ph)o(ysical)h(resources)e(and)h(attempts)e(to)h(mo)o(v)o(e)g(all)h
(man-)79 2180 y(agemen)o(t)c(of)g(these)g(resources)g(to)f(the)h
(application,)j(protection)d(assumes)g(a)f(more)h(explicit)i(and)e(cen)o
(tral)79 2236 y(role)17 b(than)e(in)i(a)e(traditional)i(high-lev)o(el)h(op)q
(erating)e(system.)21 b(Ho)o(w)o(ev)o(er,)15 b(the)h(issues)h(w)o(e)e
(discuss)i(here)79 2293 y(are)f(hardly)g(unique)h(to)e(exok)o(ernels:)22
b(w)o(e)15 b(discuss)i(them)f(b)q(ecause)g(they)g(are)f(so)h(cen)o(tral,)f
(not)g(b)q(ecause)79 2349 y(of)g(unique)h(tradeo\013s.)j(Protection)14
b(is)i(a)e(w)o(ell-kno)o(wn)i(area:)j(our)c(discussion)h(is)g(based)f(mainly)
h(on)e(the)79 2406 y(literature.)21 b(W)l(e)15 b(elide)i(man)o(y)e(details;)h
(for)e(a)h(general)h(discussion,)g(consult)g(Saltzer)g([86)o(].)79
2527 y Fp(2.6.1)56 b(T)-5 b(radeo\013s)79 2613 y Fo(A)o(t)22
b(a)f(high-lev)o(el,)26 b(there)c(are)f(t)o(w)o(o)g(protection)h(sc)o(hemes)g
(w)o(e)f(consider:)34 b(access)22 b(con)o(trol)g(lists)g(and)79
2670 y(capabilities)h([86)o(].)35 b(Both)20 b(asso)q(ciate)h(guards)f(with)g
(resources:)31 b(when)20 b(principals)j(attempt)c(to)h(use)957
2817 y(40)p eop
%%Page: 41 43
41 42 bop 79 34 a Fo(a)18 b(resource)h(\(or)e(enco)q(de)i(a)f(binding)i(in)o
(v)o(olving)g(it\))e(these)g(guards)g(c)o(hec)o(k)h(access)f(righ)o(ts.)29
b(A)o(CLs)18 b(are)79 90 y(simply)i(lists)e(of)g(principals)i(allo)o(w)o(ed)e
(to)g(use)g(a)f(giv)o(en)i(resource.)28 b(A)o(CLs)18 b(cannot)g(b)q(e)g
(circum)o(v)o(en)o(ted:)79 147 y(the)e(k)o(ernel)g(has)f(absolute)h(con)o
(trol)f(o)o(v)o(er)g(access)g(righ)o(ts.)20 b(F)l(urthermore,)15
b(the)g(exact)g(list)h(of)f(principals)79 203 y(that)h(can)h(access)f(a)g
(resource)h(can)f(b)q(e)i(con)o(trolled)f(completely)l(.)25
b(This)17 b(strength)f(is)h(also)f(a)g(w)o(eakness:)79 260
y(sharing)d(m)o(ust)g(in)o(v)o(olv)o(e)g(the)f(k)o(ernel.)20
b(In)14 b(con)o(trast,)d(capabilities)k(are)d(a)h(tic)o(k)o(et-based)g
(approac)o(h,)f(where)79 316 y(p)q(ossession)i(of)f(a)g(tic)o(k)o(et)g(is)g
(tak)o(en)g(as)g Fn(prima)i(facie)e Fo(evidence)i(that)d(the)h(principal)j
(has)d(the)g(righ)o(t)g(to)f(use)79 373 y(the)j(resource.)20
b(There)15 b(are)g(n)o(umerous)g(capabilit)o(y)h(sc)o(hemes.)k(W)l(e)15
b(only)h(consider)f Fn(self-authentic)n(ating)79 429 y Fo(capabilities,)k
(whic)o(h)e(are)f(large)g(n)o(um)o(b)q(ers)g(that)g(are)g(unlik)o(ely)i(to)d
(b)q(e)i(guessed)g([21)o(].)22 b(In)17 b(other)f(w)o(ords,)79
486 y(securit)o(y)e(is)g(ac)o(hiev)o(ed)g(through)f(obscurit)o(y)l(.)20
b(Self-authen)o(ticating)15 b(capabilities)g(allo)o(w)f(ease)f(of)g(sharing)
79 542 y(and)19 b(requires)h(only)f(simple)h(protection)e(mac)o(hinery)l(.)31
b(Sharing)19 b(is)g(easy)l(,)g(since)h(capabilities)h(can)e(b)q(e)79
599 y(passed)k(as)e(data)h(b)q(et)o(w)o(een)g(principals)i(without)f(k)o
(ernel)f(in)o(terv)o(en)o(tion.)41 b(Protection)22 b(is)h(simple)g(to)79
655 y(implemen)o(t)c(since)g(the)e(k)o(ernel)h(do)q(es)g(not)f(need)h(to)f
(trac)o(k)g(who)g(has)g(access)h(to)e(what)h(resources:)24
b(the)79 711 y(k)o(ernel)15 b(simply)f(has)f(to)g(c)o(hec)o(k)g(that)g(eac)o
(h)g(use)h(of)f(a)g(resource)g(is)h(b)o(y)f(a)g(principal)i(with)f(the)f
(appropriate)79 768 y(tic)o(k)o(et)j(\(i.e.,)e(with)i(an)f(if-statemen)o
(t\).)79 890 y Fp(2.6.2)56 b(Aegis)79 975 y Fo(Aegis)19 b(uses)f
(capabilities)i(for)d(protection.)28 b(P)o(ages,)18 b(time-slices)i(and)e(en)
o(vironmen)o(ts)g(are)f(asso)q(ciated)79 1032 y(with)j(capabilities.)35
b(Ev)o(ery)19 b(p)q(oin)o(t)h(where)f(a)g(resource)h(can)f(b)q(e)h(used)g(is)
g(asso)q(ciated)f(with)h(a)f(guard.)79 1088 y(When)h(a)f(principal)i(wishes)f
(to)f(use)g(a)g(resource,)h(it)f(presen)o(ts)g(the)h(capabilit)o(y)g(to)f
(the)g(guard.)31 b(The)79 1145 y(guard)16 b(c)o(hec)o(ks)h(the)f(access)h
(righ)o(ts)f(giv)o(en)g(b)o(y)g(the)h(capabilit)o(y)l(.)24
b(If)17 b(the)f(use)h(is)f(allo)o(w)o(ed,)h(the)f(op)q(eration)79
1201 y(is)22 b(allo)o(w)o(ed)g(to)f(pro)q(ceed.)39 b(Otherwise)22
b(an)f(exception)i(is)f(giv)o(en)g(to)e(the)i(clien)o(t.)39
b(Eac)o(h)22 b(resource)f(is)79 1258 y(asso)q(ciated)c(with)g(a)e(read)i(and)
f(a)g(write)g(capabilit)o(y;)i(additionally)l(,)h(eac)o(h)d(allo)q(cated)h
(resource)f(has)h(an)79 1314 y(o)o(wner)d(that)g(ma)o(y)f(free)i(it)f(\(or)g
(c)o(hange)g(its)h(capabilities\).)21 b(En)o(vironmen)o(ts)14
b(are)g(de\014ned)i(hierarc)o(hically)79 1371 y(\(i.e.,)22
b(an)e(en)o(vironmen)o(t)h(that)e(allo)q(cates)i(another)f(o)o(wns)g(it)h
(and)g(all)g(of)f(its)h(asso)q(ciated)f(resources\).)79 1427
y(Capabilities)f(are)d(selected)h(b)o(y)f(the)g(applications)i(themselv)o
(es,)f(allo)o(wing)g(space-e\016cien)o(t)g(enco)q(dings)79
1484 y(\(e.g.,)f(all)i(pages)e(o)o(wned)h(b)o(y)g(a)f(particular)i(pro)q
(cess)f(ma)o(y)f(b)q(e)i(asso)q(ciated)f(with)g(the)g(same)f(capabilit)o(y)79
1540 y(v)m(alue\))k(and)g(a)e(\\public)j(encryption")f(st)o(yle)f(of)g
(sharing)g(\(e.g.,)f(t)o(w)o(o)g(resources)h(ma)o(y)f(agree)h(a)g(priori)79
1596 y(what)13 b(capabilities)i(to)d(use)h(for)f(resources;)i(once)f(these)g
(resources)g(are)f(allo)q(cated,)i(they)f(\\publish")h(the)79
1653 y(names)i(and)f(use)h(them\).)150 1709 y(A)o(t)j(a)h(practical)g(lev)o
(el,)i(the)e(merits)f(of)h(capabilities)i(o)o(v)o(er)d(A)o(CLs)g(for)g
(general-purp)q(ose)i(protec-)79 1766 y(tion)e(are)e(unclear.)30
b(There)18 b(w)o(ere)f(t)o(w)o(o)g(adv)m(an)o(tages)g(of)h(capabilities)i
(that)e(led)h(us)f(to)f(use)h(them)g(o)o(v)o(er)79 1822 y(A)o(CLs.)30
b(The)18 b(\014rst)g(adv)m(an)o(tage)g(capabilities)j(ha)o(v)o(e)d(o)o(v)o
(er)f(A)o(CLs)h(is)h(that)f(with)g(capabilities)j(the)e(k)o(er-)79
1879 y(nel's)f(storage)e(of)h(access)g(righ)o(ts)g(do)q(es)g(not)g(increase)h
(prop)q(ortional)g(to)e(sharing:)24 b(with)17 b(A)o(CLs,)h(ev)o(ery)79
1935 y(additional)g(principal)h(requires)e(more)f(bits)g(to)g(trac)o(k.)22
b(Ho)o(w)o(ev)o(er,)15 b(this)i(adv)m(an)o(tage)f(ma)o(y)f(b)q(e)i(illusory:)
79 1992 y(principals)k(certainly)e(ha)o(v)o(e)e(to)g(trac)o(k)g(o)o(wnership)
i(and)f(so,)g(in)h(practice,)f(total)g(space)g(requiremen)o(ts)79
2048 y(will)g(still)f(gro)o(w)d(with)i(sharing.)22 b(While)17
b(this)f(space)g(requiremen)o(t)h(can)e(b)q(e)i(coun)o(tered)f(b)o(y)f(ha)o
(ving)h(one)79 2105 y(capabilit)o(y)j(con)o(trol)d(more)g(than)h(one)g
(instance)h(of)e(a)g(resource,)h(suc)o(h)g(an)g(approac)o(h)f(is)i(clumsy)l
(.)25 b(The)79 2161 y(second)16 b(adv)m(an)o(tage)e(capabilities)j(ha)o(v)o
(e)d(o)o(v)o(er)f(A)o(CLs)i(is)g(the)f(abilit)o(y)i(to)e(share)h(resources)f
(without)h(k)o(er-)79 2217 y(nel)i(in)o(terv)o(en)o(tion.)22
b(Ho)o(w)o(ev)o(er,)15 b(on)h(a)f(real)h(system)g(with)g(non-trusting)g
(applications,)h(an)f(application)79 2274 y(will)k(not)d(w)o(an)o(t)g(to)g
(\\in)o(visibly")j(share)d(a)h(resource)f(with)h(another,)g(since)h(it)f
(could)h(not)e(prev)o(en)o(t)g(the)79 2330 y(o)o(wner)d(of)g(the)h(resource)f
(from)g(freeing)h(it)g(\\unexp)q(ectedly)l(.")21 b(T)l(o)14
b(prev)o(en)o(t)h(suc)o(h)f(o)q(ccurrences)i(requires)79 2387
y(some)e(form)g(of)g(reference)h(coun)o(ting,)f(whic)o(h)h(will)h(amoun)o(t)e
(to)f(an)i(A)o(CL.)e(Finally)l(,)j(capabilities)h(ha)o(v)o(e)d(a)79
2443 y(practical)i(disadv)m(an)o(tage)f(in)h(terms)e(of)h(b)q(o)q(okk)o
(eeping)h(and)f(in)o(terfaces:)20 b(trac)o(king)14 b(large)h(n)o(um)o(b)q
(ers)g(and)79 2500 y(passing)h(them)f(to)g(system)g(routines)g(can)h(b)q(e)f
(clumsy)l(.)150 2556 y(In)f(the)g(future,)g(w)o(e)f(will)i(lik)o(ely)h(use)e
(an)g(A)o(CL)f(sc)o(heme)h(mo)q(deled)h(on)f(Lampson's)f(\\bitstrings")h([62)
o(])79 2613 y(to)i(protect)f(most)h(resources)g(\(a)f(lik)o(ely)j(exception)f
(will)h(b)q(e)e(disk)h(blo)q(c)o(ks\).)23 b(This)17 b(approac)o(h)e(has)h(b)q
(een)79 2669 y(recen)o(tly)g(used)g(b)q(oth)f(in)h(SP)l(A)o(CE)g([79)o(])e
(and)i(in)g(the)f(Cac)o(he)g(Kernel)i([22)o(].)957 2817 y(41)p
eop
%%Page: 42 44
42 43 bop 79 34 a Fu(2.7)70 b(Device)21 b(Multiplexi)o(ng)79
135 y Fo(Devices)f(are)f(di\016cult)h(to)f(m)o(ultiplex:)29
b(their)19 b(in)o(terfaces)h(are)e(complex)i(and)f(their)h(state)e(extremely)
79 192 y(v)o(olatile.)j(F)l(or)14 b(example,)i(device)g(bu\013er)f(usage)f
(can)h(\015uctuate)g(dramatically)h(within)g(short)e(amoun)o(ts)79
248 y(of)j(time.)27 b(Both)17 b(of)g(these)h(c)o(haracteristics)g(mak)o(e)e
(time-sharing)j(impractical)f(\(con)o(text-switc)o(hing)g(a)79
305 y(large)g(amoun)o(t)e(of)h(device)i(state)d(is)i(exp)q(ensiv)o(e\))g(and)
g(space-sharing)g(c)o(hallenging)h(\(the)e(v)o(olatilit)o(y)h(of)79
361 y(the)12 b(device's)g(state)e(mak)o(es)g(the)h(static)g(divisions)i
(required)f(b)o(y)f(space-sharing)h(di\016cult)h(and)e(exp)q(ensiv)o(e)79
418 y(to)18 b(implemen)o(t\).)29 b(Ho)o(w)o(ev)o(er,)18 b(these)g(implemen)o
(tation)h(issues)g(aside,)g(the)f(main)h(di\016cult)o(y)g(in)g(device)79
474 y(m)o(ultiplexing)25 b(is)d(that)f(asso)q(ciating)h(the)g(input/output)g
(of)f(a)g(device)j(with)e(an)f(o)o(wner)g(\(the)h(basic)79
531 y(requiremen)o(t)g(for)e(m)o(ultiplexing\))j(requires)e(a)g(large)g
(amoun)o(t)f(of)g(application-sp)q(eci\014c)k(kno)o(wledge.)79
587 y(F)l(or)c(example,)j(if)e(the)f(k)o(ernel)h(is)g(to)f(divide)j(the)d
(frame-bu\013er)g(in)i(a)e(reasonable)h(manner)f(it)h(m)o(ust)79
644 y(ha)o(v)o(e)h(a)f(fairly)h(precise)h(notion)e(of)g(\\windo)o(ws,")i
(\\exp)q(osure)e(ev)o(en)o(ts,")h(etc.)39 b(Another)22 b(example)g(is)79
700 y(the)d(net)o(w)o(ork:)24 b(dem)o(ultiplexin)q(g)c(a)e(string)g(of)g
(bits)h(coming)f(in)h(o\013)f(of)f(the)i(wire)f(requires)h(a)f(detailed)79
756 y(kno)o(wledge)e(of)f(net)o(w)o(ork)f(proto)q(cols)h(suc)o(h)h(as)e(TCP)l
(,)h(UDP)l(,)g(etc.)150 813 y(In)h(general,)f(the)h(dem)o(ultiplexing)i
(problem)e(can)f(b)q(e)h(solv)o(ed)g(a)f(n)o(um)o(b)q(er)h(of)f(w)o(a)o(ys.)k
(The)c(\014rst)g(is)h(to)79 869 y(simply)f(enco)q(de)f(the)f(required)h(kno)o
(wledge)g(in)g(a)f(serv)o(er)f(or)h(the)g(k)o(ernel)h(itself.)20
b(In)14 b(some)f(cases)g(this)g(can)79 926 y(b)q(e)k(p)q(erfectly)g
(acceptable;)f(usually)l(,)h(ho)o(w)o(ev)o(er,)e(this)h(enco)q(ding)h
(signi\014can)o(tly)h(reduces)e(the)g(\015exibilit)o(y)79 982
y(of)g(the)g(system.)21 b(A)16 b(more)f(\015exible)j(mec)o(hanism)e(uses)g
Fn(se)n(cur)n(e)g(bindings)f Fo(to)g(asso)q(ciate)g(resources)h(with)79
1039 y(o)o(wners.)150 1095 y(A)i(secure)g(bindings)h(separates)e(resource)h
(protection)f(from)g(managemen)o(t.)26 b(A)17 b(k)o(ey)h(prop)q(ert)o(y)f(is)
79 1152 y(that)h(domain-sp)q(eci\014c)i(kno)o(wledge)f(is)f(only)h(required)g
(to)e(setup)h(the)g(binding,)i(not)e(to)f(main)o(tain)i(it.)79
1208 y(The)f(abilit)o(y)g(to)e(implemen)o(t)j(protection)e(without)g(an)g
(understanding)h(of)e(the)h(underlying)i(resource)79 1265 y(seman)o(tics)i
(is)g(extremely)g(p)q(o)o(w)o(erful.)37 b(F)l(or)20 b(our)g(purp)q(oses,)i
(the)f(most)f(in)o(teresting)h(feature)f(is)h(that)79 1321
y(application-lev)o(el)e(resource)d(managemen)o(t)e(can)i(b)q(e)g(implemen)o
(ted)h(with)f(great)e(freedom.)21 b(T)l(o)15 b(clarify)79 1377
y(this)e(admittedly)g(v)m(ague)f(discussion,)i(consider)f(virtual)f(memory)g
(managemen)o(t.)18 b(T)l(raditional)13 b(virtual)79 1434 y(memory)e(implemen)
o(tations)g(serv)o(e)g(the)f(t)o(w)o(o)g(functions)h(of)f(protection)h(and)g
(managemen)o(t.)17 b(An)11 b(OS)g(can)79 1490 y(directly)k(clea)o(v)o(e)e
(these)g(functions)h(b)o(y)f(allo)o(wing)g(applications)i(to)d(generate)h
(address)f(translations)h(and)79 1547 y(then)i(simply)h(ensuring)g(that)e(a)g
(giv)o(en)h(translation)g(is)g(allo)o(w)o(ed.)20 b(By)15 b(restricting)g(its)
f(atten)o(tion)g(to)g(the)79 1603 y(secure)i(binding)h(of)e(address)g
(mappings,)g(an)g(op)q(erating)g(system)g(allo)o(ws)g(applications)i(to)d
(implemen)o(t)79 1660 y(their)19 b(o)o(wn)e(page-tables)h(and)g(ha)o(v)o(e)f
(complete)h(con)o(trol)g(o)o(v)o(er)e(their)j(address)e(space)h(structures.)
27 b(F)l(or)79 1716 y(more)14 b(complicated)h(resources)f(\(i.e.,)f
(devices\))i(a)f(common)f(implemen)o(tation)j(gran)o(ts)c(a)i(set)f(of)h
(serv)o(ers)79 1773 y(the)20 b(righ)o(t)e(to)h(bind)h(applications)h(to)d(a)h
(particular)g(resource;)i(once)e(this)h(binding)h(is)e(in)h(place,)g(the)79
1829 y(k)o(ernel)e(\(or)d(hardw)o(are\))h(can)g(c)o(hec)o(k)h(access)g(righ)o
(ts.)23 b(W)l(e)17 b(lo)q(ok)g(at)e(exactly)i(ho)o(w)f(this)h(can)g(b)q(e)g
(realized)79 1886 y(b)q(elo)o(w.)27 b(The)18 b(imp)q(ortan)o(t)f(p)q(oin)o(t)
g(here)h(is)g(that)e(access)i(con)o(trol)f(is)h(the)f(only)h(function)g(of)f
(the)g(serv)o(er:)79 1942 y(the)k(application)h(has)f(complete)g(discretion)h
(in)g(managemen)o(t)d(and)i(usage)g(of)f(the)g(resource,)i(once)79
1998 y(allo)q(cated.)30 b(Separating)19 b(protection)f(from)g(managemen)o(t)f
(in)i(this)g(manner)f(allo)o(ws)g(applications)i(to)79 2055
y(ha)o(v)o(e)15 b(a)g(large)g(degree)h(of)f(freedom)g(in)h(resource)f
(managemen)o(t.)k(The)d(utilit)o(y)g(of)f(this)g(idea)h(is)g(large.)79
2177 y Fp(2.7.1)56 b(F)-5 b(rame-bu\013er)79 2262 y Fo(Enco)q(ding)19
b(detailed)f(kno)o(wledge)f(of)g(a)f(windo)o(wing)i(system)f(in)g(the)g(k)o
(ernel)h(is)f(not)g(desirable.)26 b(There)79 2319 y(are)20
b(a)f(n)o(um)o(b)q(er)i(of)e(metho)q(ds)h(used)g(to)g(a)o(v)o(oid)f(this)h
(problem.)35 b(The)20 b(most)f(common)g(solution)i(is)f(to)79
2375 y(memory-map)f(the)f(device)i(bu\013er)f(in)o(to)f(user-space)i(where)e
(a)h(serv)o(er)f(can)h(manipulate)g(it)g(directly)l(.)79 2432
y(Unfortunately)l(,)c(this)g(still)h(requires)f(that)f(applications)i(go)e
(through)g(a)g(cen)o(tralized)i(serv)o(er)e(to)g(access)79
2488 y(the)20 b(frame-bu\013er.)33 b(An)20 b(in)o(triguing)h(solution)g(tak)o
(en)e(b)o(y)g(Silicon)j(Graphics)f(can)e(b)q(e)i(view)o(ed)f(as)g(an)79
2545 y(instance)c(of)e(secure)h(bindings.)22 b(The)14 b(hardw)o(are)g(asso)q
(ciates)h(eac)o(h)f(pixel)j(with)e(a)f(con)o(text)g(iden)o(ti\014er;)i(a)79
2601 y(pro)q(cess)h(that)f(has)h(the)g(same)f(con)o(text-iden)o(ti\014er)i
(as)e(the)h(pixel)h(can)f(write)f(directly)i(to)e(its)h(memory)l(.)79
2658 y(This)d(pro)q(cess)g(is)g(b)q(oth)f(\015exible)j(and)d(e\016cien)o(t.)
20 b(The)14 b(only)f(system)g(in)o(v)o(olv)o(emen)o(t)h(is)g(at)e(binding)k
(setup,)957 2817 y(42)p eop
%%Page: 43 45
43 44 bop 79 34 a Fo(when)14 b(a)g(serv)o(er)f(sets)g(the)h(con)o(text)e
(iden)o(ti\014er)k(of)d(the)g(required)i(pixels)g(to)e(that)f(of)i(the)f(pro)
q(cess)1739 18 y Fh(1)1759 34 y Fo(.)19 b(This)79 90 y(same)c(tec)o(hnique)i
(is)f(also)f(used)h(for)e(the)h(sound)h(p)q(ort.)150 147 y(The)k(disadv)m(an)
o(tage)f(to)g(these)h(approac)o(hes)f(is)h(that)e(their)i(implemen)o(tation)h
(consumes)e(a)g(large)79 203 y(amoun)o(t)i(of)f(silicon.)39
b(A)20 b(more)h(\\lo)o(w-tec)o(h")f(approac)o(h)h(is)g(to)f(allo)o(w)h(a)g
(windo)o(w)g(serv)o(er)f(pro)q(cess)h(to)79 260 y(do)o(wnload)12
b(pieces)g(of)f(co)q(de)h(in)o(to)f(the)g(k)o(ernel;)i(these)f(pieces)g(can)g
(b)q(e)f(called)i(b)o(y)e(applications)i(to)e(p)q(erform)79
316 y(op)q(erations)18 b(that)e(they)i(require.)26 b(Protection)17
b(can)h(b)q(e)g(ensured)g(b)o(y)f(b)q(ounding)i(memory)d(op)q(erations)79
373 y(and)g(jumps)g([104)o(])f(and)h(b)o(y)g(limiting)i(resource)d
(consumption)i([31)o(])e(\(e.g.,)f(CPU)i(time)g(and)g(memory\).)79
429 y(The)d(windo)o(w)f(serv)o(er)g(can)g(use)g(this)h(capabilit)o(y)g(to)f
(allo)o(w)g(the)g(applications)i(themselv)o(es)e(to)g(write)g(co)q(de)79
486 y(fragmen)o(ts)17 b(\(sa)o(y)g(to)h(implemen)o(t)h(a)e(particular)i
(clipping)i(algorithm\))c(that)g(it)i(can)f(c)o(hec)o(k)g(for)f(safet)o(y)79
542 y(and)h(then)g(do)o(wnload)g(in)o(to)g(the)f(k)o(ernel.)28
b(This)19 b(functionalit)o(y)f(can)g(b)q(e)g(used)h(to)e(giv)o(e)h
(applications)h(a)79 599 y(wide)e(degree)e(of)g(freedom)g(in)h(what)f(op)q
(erations)g(and)g(optimizations)h(they)g(can)f(p)q(erform.)79
720 y Fp(2.7.2)56 b(Net)n(w)n(ork)79 806 y Fo(There)11 b(are)g(t)o(w)o(o)e
(problems)j(in)f(m)o(ultiplexing)i(a)e(net)o(w)o(orking)f(device:)19
b(sending)12 b(and)f(receiving.)20 b(Sending)79 863 y(is)c(simpler;)g(w)o(e)f
(consider)h(it)g(\014rst.)150 919 y(Multiplexing)f(the)e(send)h(capabilities)
h(of)d(the)h(net)o(w)o(ork)f(device)i(is)g(simply)g(a)e(matter)g(of)g(m)o
(ultiplex-)79 975 y(ing)i(send)g(bu\013ers.)19 b(With)14 b(simple)g(hardw)o
(are)f(supp)q(ort,)g(this)h(is)f(fairly)h(easy)f(to)g(ac)o(hiev)o(e.)19
b(F)l(or)13 b(example,)79 1032 y(one)19 b(solution)h(\(suggested)e(b)o(y)h
(Drusc)o(hel)h([34)o(]\))e(is)h(to)f(map)h(a)f(send)i(bu\013er)f(in)o(to)f
(the)h(address)g(space)79 1088 y(of)e(eac)o(h)f(pro)q(cess.)25
b(These)17 b(bu\013ers)f(can)h(b)q(e)g(allo)q(cated/shared/rev)o(ok)o(ed)g
(in)h(a)e(manner)h(analogous)f(to)79 1145 y(ph)o(ysical)h(memory)l(.)150
1201 y(Dem)o(ultiplexing)d(messages)d(is)g(a)g(more)g(di\016cult)i(problem,)g
(since)f(it)g(requires)g(asso)q(ciating)f(a)g(string)79 1258
y(of)16 b(bits)h(with)f(proto)q(col-sp)q(eci\014c)i(meaning.)23
b(If)16 b(bac)o(kw)o(ards)f(compatibilit)o(y)j(is)e(not)g(a)g(constrain)o(t,)
f(this)79 1314 y(is)23 b(one)f(area)f(where)h(the)f(complete)i(kno)o(wledge)f
(of)f(the)h(domain)g(can)g(b)q(e)g(enco)q(ded)h(easily)g(in)f(the)79
1371 y(k)o(ernel:)d(eac)o(h)12 b(message)g(can)g(b)q(e)g(tagged)f(with)i(a)e
(pro)q(cess)h(iden)o(ti\014er;)j(the)c(k)o(ernel)i(could)g(directly)g(v)o
(ector)79 1427 y(incoming)j(messages)e(to)g(the)h(asso)q(ciated)f(pro)q
(cess.)20 b(This)c(approac)o(h)e(is)h(used)g(in)g([53)o(].)k(Unfortunately)l
(,)79 1484 y(net)o(w)o(orking)14 b(has)g(tremendous)g(bac)o(kw)o(ards)f
(compatibilit)o(y)j(constrain)o(ts.)j(An)14 b(exub)q(eran)o(t)g(alternativ)o
(e)79 1540 y(is)19 b(to)f(treat)f(ev)o(ery)h(pro)q(cess)h(as)e(a)h
(connection)i(p)q(oin)o(t)e(and)h(giv)o(e)f(it)h(its)f(o)o(wn)g(Ethernet)g
(address)g([61)o(].)79 1596 y(This)j(allo)o(ws)g(simple)g(v)o(ectoring)f(and)
h(requires)f(no)g(proto)q(col)h(c)o(hanges.)34 b(Unfortunately)21
b(there)f(are)79 1653 y(reasons)15 b(wh)o(y)g(this)h(cannot,)e(in)i(general,)
g(b)q(e)g(done)f(with)h(impunit)o(y)l(.)150 1709 y(The)c(traditional)h
(compromise)f(b)q(et)o(w)o(een)h(\015exibilit)o(y)h(and)e(bac)o(kw)o(ards)f
(compatibilit)o(y)j(has)e(b)q(een)h(to)79 1766 y(allo)o(w)e(applications)h
(to)e(dem)o(ultiplex)j(the)d(messages)g(themselv)o(es)i(through)e(pac)o(k)o
(et)g(\014lters)h([74)o(].)18 b(P)o(ac)o(k)o(et)79 1822 y(\014lters)c(are)f
(predicates)h(written)g(in)g(a)f(small)h(t)o(yp)q(e-safe)f(language.)20
b(Logically)l(,)15 b(pac)o(k)o(et)e(\014lters)h(examine)79
1879 y(all)19 b(incoming)g(net)o(w)o(ork)d(pac)o(k)o(ets;)i(those)g(messages)
f(that)f(satisfy)i(their)g(predicate)g(are)g(deliv)o(ered)h(to)79
1935 y(the)j(\014lter's)f(asso)q(ciated)h(application.)39 b(The)22
b(ob)o(vious)f(problem)h(with)g(this)g(structure)f(is)g(ensuring)79
1992 y(that)16 b(a)g(\014lter)h(do)q(es)g(not)e(\\lie")j(and)e(accept)h(pac)o
(k)o(ets)e(destined)j(for)e(another)g(pro)q(cess.)23 b(T)l(raditionally)l(,)
79 2048 y(this)g(problem)f(is)g(eliminated)i(in)e(t)o(w)o(o)e(w)o(a)o(ys.)38
b(First,)23 b(eac)o(h)e(\014lter)h(is)g(asso)q(ciated)g(with)g(a)f(priorit)o
(y)l(,)79 2105 y(suc)o(h)d(that)e(\014lters)h(with)g(lo)o(w)o(er-priorit)o(y)
g(cannot)f(in)o(tercept)i(messages)e(destined)i(for)e(higher-priorit)o(y)79
2161 y(\014lters.)29 b(Second,)19 b(only)f(trusted)g(serv)o(ers)f(can)h
(install)h(a)f(pac)o(k)o(et-\014lter)g(\(this)g(is)g(another)f(example)i(of)
79 2217 y(a)g(secure)g(binding\).)32 b(Unfortunately)l(,)20
b(since)g(applications)g(are)e(precluded)j(from)d(installing)j(pac)o(k)o(et)
79 2274 y(\014lters)h(directly)l(,)i(this)d(structure)g(limits)i
(\015exibilit)o(y)l(.)40 b(F)l(or)21 b(instance,)i(applications)f(are)f
(limited)i(to)79 2330 y(those)16 b(proto)q(cols)g(kno)o(wn)g(to)g(the)g(serv)
o(er,)f(whic)o(h)i(remo)o(v)o(es)e(their)i(abilit)o(y)g(to)f(exp)q(erimen)o
(t)h(with)f(no)o(v)o(el)79 2387 y(proto)q(cols.)150 2443 y(F)l(ortunately)l
(,)c(w)o(e)f(ha)o(v)o(e)f(a)h(solution)h(to)f(this)g(situation)h(that)e(is)i
(built)g(up)q(on)g(the)f(simple)i(observ)m(ation)79 2500 y(that)k(most)g
(applications)j(do)d(not)g(care)h(if)g(other)f(applications)j(on)d(the)h
(same)g(no)q(de)g(can)g(view)g(their)p 79 2581 720 2 v 131
2608 a Fg(1)149 2624 y Ff(In)12 b(practice,)h(there)g(are)g(more)f(con)o
(texts)h(than)g(con)o(text)g(iden)o(ti\014ers,)i(so)d(auxiliary)k(tec)o
(hniques)e(are)f(used)g(to)f(enforce)79 2669 y(o)o(wnership.)957
2817 y Fo(43)p eop
%%Page: 44 46
44 45 bop 79 34 a Fo(messages)19 b(\(either)h(b)q(ecause)g(the)f(messages)g
(are)f(encrypted)i(or)f(b)q(ecause)h(they)f(are)g(unin)o(teresting\).)79
90 y(Therefore,)g(as)e(long)h(as)g(other)g(applications)h(cannot)f(consume)g
(a)g(message)g(in)o(tended)h(for)e(another,)79 147 y(it)h(do)q(es)f(not)g
(matter)f(if)h(a)g(message)f(is)i(read.)25 b(W)l(e)17 b(split)h(pac)o(k)o(et)
e(\014lters)i(in)o(to)f(those)f(that)h(care)g(ab)q(out)79 203
y(secrecy)f(\(i.e.,)f(those)g(that)f(consume)i(their)g(messages\))e(and)i
(those)f(that)f(do)h(not)g(\(i.e.,)g(those)g(that)g(do)79 260
y(not)g(consume)f(their)h(messages\).)k(The)c(\014rst)f(grouping)g(has)h
(side-e\013ects,)g(the)f(second)h(is)g(referen)o(tially)79
316 y(transparen)o(t.)41 b(A)22 b(\014lter)h(that)f(consumes)h(its)f(message)
g(can)g(only)h(b)q(e)g(installed)i(through)d(trusted)79 373
y(serv)o(ers;)d(an)o(y)f(pac)o(k)o(et)f(that)g(it)h(accepts)g(cannot)g(b)q(e)
h(claimed)g(b)o(y)f(an)o(y)g(other)f(\014lter.)29 b(Ho)o(w)o(ev)o(er,)17
b(if)i(no)79 429 y(suc)o(h)14 b(\014lter)g(accepts)g(the)f(pac)o(k)o(et,)g
(then)h(the)f(pac)o(k)o(et)g(\014lter)h(engine)h(c)o(hec)o(ks)e(with)h(eac)o
(h)f(non-consuming)79 486 y(\014lter)j(to)f(see)g(if)h(it)f(desires)h(the)g
(pac)o(k)o(et:)j(all)d(those)f(that)g(do)g(are)g(giv)o(en)g(it.)150
542 y(This)20 b(simple)g(distinction)h(allo)o(ws)e(applications)h(that)e(do)h
(not)g(rely)g(on)g(pac)o(k)o(et)f(\014lter)i(measures)79 599
y(for)e(securit)o(y)h(to)e(directly)j(install)g(pac)o(k)o(et)d(\014lters)i
(for)f Fn(any)g Fo(proto)q(col)g(they)g(desire.)30 b(W)l(e)19
b(b)q(eliev)o(e)h(this)79 655 y(will)g(allo)o(w)e(nearly)h(all)g
(applications)g(to)f(exp)q(erimen)o(t)h(at)e(will:)27 b(it)19
b(is)f(v)o(ery)g(rare)f(for)h(applications)h(to)79 711 y(rely)f(on)f(pac)o(k)
o(et)g(\014lter)h(measures,)f(as)g(opp)q(osed)g(to)g(encryption,)h(for)f
(securit)o(y)l(.)26 b(F)l(urthermore,)17 b(giv)o(en)79 768
y(the)e(abilit)o(y)g(of)e(other)h(no)q(des)g(to)g(\\sno)q(op")f(the)h(wire,)g
(these)h(applications)g(lik)o(ely)h(ha)o(v)o(e)d(fault)o(y)h(securit)o(y)79
824 y(assumptions)i(in)f(an)o(y)g(ev)o(en)o(t.)k(In)d(the)f(subsection)h(w)o
(e)f(discuss)h(some)e(practical)i(concerns)f(on)g(making)79
881 y(this)h(pro)q(cess)g(e\016cien)o(t.)79 1003 y Fp(2.7.3)56
b(Aegis)18 b(sp)r(eci\014cs)79 1088 y Fo(W)l(e)c(only)h(lo)q(ok)f(at)f(pac)o
(k)o(et-\014lter)h(issues)h(here.)k(Since)d(eac)o(h)e(\014lter)g(m)o(ust)f(b)
q(e)i(applied)g(to)e(eac)o(h)h(message,)79 1145 y(computation)19
b(rises)h(linearly)g(with)g(the)f(n)o(um)o(b)q(er)g(of)f(pac)o(k)o
(et-\014lters)h(installed.)33 b(F)l(ortunately)l(,)19 b(there)79
1201 y(are)e(v)o(ery)g(e\013ectiv)o(e)h(optimizations)g(that)e(can)h(coun)o
(ter)g(the)h(cost)e(of)h(using)h(pac)o(k)o(et-\014lters.)26
b(W)l(e)17 b(lo)q(ok)79 1258 y(at)e(b)q(oth)g(in)o(tra-\014lter)h([39)o(])f
(and)g(in)o(ter-\014lter)h([109)o(])f(optimizations.)150 1314
y(The)f(most)e(e\013ectiv)o(e)i(in)o(tra-\014lter)g(optimization)h(is)f(to)e
(dynamically)k(generate)d(the)h(mac)o(hine)g(co)q(de)79 1371
y(corresp)q(onding)23 b(to)d(the)i(\014lter.)38 b(Our)22 b(protot)o(yp)q(e)e
(implemen)o(tation)j(sho)o(ws)d(that)h(compiled)i(pac)o(k)o(et)79
1427 y(\014lters)15 b(execute)f(an)f(order)h(of)f(magnitude)h(more)f
(e\016cien)o(tly)i(than)f(when)g(in)o(terpreted)g([39)o(].)19
b(Thekk)m(ath)79 1484 y(suggests)c(this)h(optimization)g(in)g([98)o(],)e(but)
i(do)q(es)f(not)g(implemen)o(t)h(it.)150 1540 y(In)o(ter-\014lter)j
(optimizations)g(rev)o(olv)o(e)f(around)g(the)g(recognition)h(of)f
(commonalities)h(b)q(et)o(w)o(een)f(\014l-)79 1596 y(ters:)k(man)o(y)16
b(\014lters)h(lo)q(ok)f(for)g(similar)h(pac)o(k)o(ets)f(\(e.g.,)f(TCP)l(,)h
(UDP)l(,)f(etc.\))23 b(and)17 b(therefore)f(ha)o(v)o(e)f(large)79
1653 y(o)o(v)o(erlap)21 b([109)o(].)35 b(These)21 b(commonalities)h(can)f(b)q
(e)g(used)g(to)f(collapse)i(similar)g(predicates,)h(allo)o(wing)79
1709 y(man)o(y)15 b(\014lters)h(to)e(b)q(e)i(pruned)g(for)f(eac)o(h)g(failed)
i(condition.)150 1766 y(Unfortunately)l(,)22 b(recognition)f(of)e(o)o(v)o
(erlaps)h(has)g(b)q(een)i(hamp)q(ered)f(b)o(y)f(the)g(lo)o(w-lev)o(el)i
(nature)e(of)79 1822 y(curren)o(t)e(pac)o(k)o(et)e(\014lter)i(languages,)f
(whic)o(h)h(are)f(t)o(ypically)i(pseudo-assem)o(bly)f(languages.)26
b(This)17 b(lo)o(w-)79 1879 y(lev)o(el)g(represen)o(tation)f(allo)o(ws)f(a)g
(rudimen)o(tary)h(in)o(terpreter)f(to)g(run)h(with)f(acceptable)i
(e\016ciency)l(,)f(but)79 1935 y(destro)o(ys)i(high-lev)o(el)i(information)e
(that)f(could)i(b)q(e)g(used)f(b)o(y)g(a)g(sophisticated)h(compiler.)29
b(This)18 b(can)79 1992 y(b)q(e)d(seen)g(in)g(the)f(curren)o(t)g(crop)f(of)h
(in)o(ter-\014lter)h(optimizers,)g(whic)o(h)g(requires)f(that)g(\014lters)g
(b)q(e)h(textually)79 2048 y(equal)22 b(from)e(their)i(initial)h(statemen)o
(t)d(on)o(w)o(ard)g(in)i(order)e(to)h(b)q(e)g(group)q(ed)h(in)f(equiv)m
(alence)j(classes)79 2105 y(with)14 b(other,)f(similar)i(pac)o(k)o(et)e
(\014lters)g(\(indeed,)i(\014lters)f(rev)o(ersed)g(in)g(ev)o(en)f(a)h
Fn(single)d Fo(instruction)k(are)e(not)79 2161 y(recognized)i(as)e(equiv)m
(alen)o(t)h([16]\).)k(Suc)o(h)c(a)f(constrain)o(t)f(is)i(sev)o(erely)g
(limiting)h(on)e(an)g(exok)o(ernel)h(system)79 2217 y(that)h(allo)o(ws)h(m)o
(ultiple)h(applications)g(to)e(write)h(and)f(install)i(their)f(o)o(wn)f(pac)o
(k)o(ets.)20 b(In)c(e\013ect,)f(it)h(w)o(ould)79 2274 y(require)j(eac)o(h)f
(\014lter)h(writer)f(to)f(b)q(e)i(a)o(w)o(are)e(of)g(all)i(other)f(pac)o(k)o
(et)f(\014lters)i(on)f(the)g(system)f(in)i(order)f(to)79 2330
y(write)d(the)g(\014lter)g(in)g(some)f(\\canonical")h(form.)k(W)l(e)c(ha)o(v)
o(e)f(solv)o(ed)h(this)g(problem)g(b)o(y)f(recognizing)i(that)79
2387 y(the)h(o)o(v)o(er-sp)q(eci\014cation)h(of)e(curren)o(t)g(\014lters)h
(is)f(directly)i(due)f(to)f(their)h(lo)o(w-lev)o(el)h(imp)q(erativ)o(e)f
(nature.)79 2443 y(Our)22 b(solution)g(is)g(to)e(use)i(a)f(medium-lev)o(el)i
(declarativ)o(e)f(language)g(\()p Fj(dpf)p Fo(\))e(that)g(do)q(es)i(not)f
(imp)q(ose)79 2500 y(an)f(ordering)g(on)g(its)g(statemen)o(ts.)32
b(Lac)o(k)20 b(of)f(statemen)o(t)g(ordering)h(enables)h(aggressiv)o(e)e(in)o
(ter-\014lter)79 2556 y(optimizations,)k(since)f(functional)g(equiv)m(alence)
h(is)e(no)f(longer)h(obscured)h(b)o(y)e(structural)h(artifacts.)79
2613 y Fj(dpf)c Fo(is)h(not)f(the)h(\014rst)f(declarativ)o(e)h(language)f
(for)g(pac)o(k)o(et-\014lters.)27 b(Ho)o(w)o(ev)o(er,)16 b(the)i(other)f
(declarativ)o(e)79 2669 y(pac)o(k)o(et)g(\014lter)h(language)f(that)g(w)o(e)g
(kno)o(w)f(of)h(\(describ)q(ed)i(in)f(Bailey)h(et)e(al.)g([8)o(]\))g(do)q(es)
g(not)g(utilize)i(the)957 2817 y(44)p eop
%%Page: 45 47
45 46 bop 79 34 a Fo(p)q(o)o(w)o(er)12 b(of)f(declarativ)o(e)h(sp)q
(eci\014cations:)20 b(predicates)12 b(are)g(not)f(re-arranged)g(to)g
(increase)h(commonalities)79 90 y(and)k(similar)g(in)o(ter-\014lter)g
(\\su\016xes")f(are)g(not)g(utilized)j([77)o(].)150 147 y(Once)h(a)e
(destination)h(pro)q(cess)g(is)g(found)g(for)f(a)h(pac)o(k)o(et,)f(the)h
(problem)g(then)g(b)q(ecomes)g(where)g(to)79 203 y(put)g(the)f(message.)25
b(W)l(e)17 b(will)h(allo)o(w)f(pac)o(k)o(et)g(\014lters)g(to)g(determine)h
(destination)g(b)o(y)f(adding)g(supp)q(ort)79 260 y(for)h(computation)g
(within)h(the)g(pac)o(k)o(et)e(\014lter)i(itself)g(\(this)f(p)q(ortion)g(of)g
(the)g(\014lter)h(can)f(b)q(e)h(view)o(ed)g(as)79 316 y(an)d
Fn(active)g(message)e Fo([102)o(]\).)19 b(This)d(abilit)o(y)g(directly)h
(eliminates)f(the)g(cop)o(ying)f(costs)g(asso)q(ciated)g(with)79
373 y(curren)o(t)j(\014lter)h(implemen)o(tations.)29 b(\(Concurren)o(tly)18
b(with)g(our)g(w)o(ork,)f(the)h(SPIN)h(pro)s(ject)e(is)i(adding)79
429 y(activ)o(e)d(message)f(supp)q(ort)g(to)f(the)i(pac)o(k)o(et)e(\014lter)i
(language)f(MPF)g([16)o(].\))79 572 y Fu(2.8)70 b(Global)22
b(Optim)o(i)o(zati)o(on)79 674 y Fo(One)14 b(of)e(the)h(most)f(common)h
(concerns)g(ab)q(out)f(an)h(exok)o(ernel)h(structure)e(is)h(that)f(it)h
(disallo)o(ws)h(e\013ectiv)o(e)79 730 y(global)19 b(optimization.)29
b(W)l(e)18 b(address)f(this)i(concern)f(b)o(y)g(sho)o(wing)g(ho)o(w)f(the)h
(requiremen)o(ts)g(of)g(global)79 787 y(optimization)i(can)f(b)q(e)g
(separated)f(from)g(resource)g(managemen)o(t)g(for)g(three)h(of)f(the)g(most)
g(common)79 843 y(global)c(optimizations)g(done)f(b)o(y)g(traditional)h(op)q
(erating)f(systems:)18 b(trac)o(king)13 b(initialized)j(pages,)d(LR)o(U)79
900 y(page)j(replacemen)o(t,)f(and)g(disk)h(blo)q(c)o(k)g(allo)q(cation.)150
956 y(W)l(e)g(b)q(eliev)o(e)i(that)e(global)g(system)g(optimization)h(do)q
(es)f(not)g(require)h(cen)o(tralized)g(resource)f(man-)79 1013
y(agemen)o(t.)25 b(Of)17 b(all)h(the)e(exok)o(ernel)i(principles,)i(this)d
(is)g(the)g(most)f(con)o(tro)o(v)o(ersial.)25 b(Giv)o(en)17
b(the)g(lac)o(k)g(of)79 1069 y(a)g(mature)g(system)f(it)i(is)f(di\016cult)i
(to)d(v)o(erify;)i(w)o(e)f(brie\015y)h(discuss)g(three)f(situations)h(where)f
(e\013ectiv)o(e)79 1126 y(global)f(optimization)g(can)g(b)q(e)g(realized)g
(without)g(resorting)f(to)f(cen)o(tralized)j(resource)e(managemen)o(t.)79
1247 y Fp(2.8.1)56 b(Simple)16 b(global)i(optimizations)79
1333 y Fo(Man)o(y)11 b(e\013ectiv)o(e)g(global)g(optimizations)h(are)f(quite)
g(simple,)i(and)e(can)g(b)q(e)h(added)f(directly)i(to)d(an)h(exok)o(er-)79
1390 y(nel.)20 b(An)12 b(example)h(is)f(the)g(trac)o(king)g(of)f(zero)q(ed)i
(pages.)18 b(On)13 b(systems)e(with)h(non-trusting)g(applications,)79
1446 y(it)17 b(is)f(imp)q(ortan)o(t)f(that)g(no)h(other)f(application)j(can)e
(read)f(the)h(\\garbage")f(of)g(another.)21 b(Additionally)l(,)79
1502 y(in)g(man)o(y)e(situations,)i(applications)h(desire)f(zero-initialized)
i(pages.)33 b(Without)20 b(op)q(erating)g(system)79 1559 y(supp)q(ort)14
b(these)f(t)o(w)o(o)f(constrain)o(ts)h(will)i(result)e(in)h(double)h
(initializations:)22 b(the)13 b(\014rst)g(pro)q(cess)g(will)i(clear)79
1615 y(its)h(pages)g(of)f(sensitiv)o(e)i(information)f(and)g(the)f(second)h
(with)g(p)q(essimisticall)q(y)i(set)e(its)f(pages)h(to)f(zero.)79
1672 y(Ho)o(w)o(ev)o(er,)f(an)g(op)q(erating)g(system)g(can)g(easily)i(trac)o
(k)d(whic)o(h)i(pages)f(are)g(already)h(initialized)i(and)e(allo-)79
1728 y(cate)h(these)h(to)e(sp)q(eci\014c)j(requests.)23 b(An)16
b(exok)o(ernel)h(can)f(trac)o(k)g(information)g(ab)q(out)g(whic)o(h)h(pages)f
(are)79 1785 y(zero)q(ed)h(as)e(easily)i(as)e(a)g(traditional)h(op)q(erating)
g(system,)f(and)h(so)f(do)q(es)h(not)f(mak)o(e)g(this)h(optimization)79
1841 y(an)o(y)f(more)g(di\016cult.)79 1963 y Fp(2.8.2)56 b(W)-5
b(orking)18 b(set)g(deriv)m(ation)79 2049 y Fo(A)c(more)f(c)o(hallenging)i
(problem)f(is)g(ho)o(w)f(to)g(deriv)o(e)h(the)g(w)o(orking)f(set)g(of)g(v)m
(arious)h(applications)h(so)e(that)79 2105 y(page)j(allo)q(cation)h(can)e(b)q
(e)i(spread)e(equitably)i(among)e(them.)21 b(This)16 b(is)g(a)g(straigh)o
(t-forw)o(ard)d(op)q(eration)79 2162 y(on)21 b(a)e(traditional)i(op)q
(erating)g(system:)29 b(it)20 b(has)g(access)h(to)e(all)i(reference)g(bits)g
(and)f(can)g(determine)79 2218 y(whether)c(page)f(deallo)q(cation)i(causes)e
(an)g(increase)h(in)g(paging)g(activit)o(y)l(.)150 2274 y(An)f(exok)o(ernel)h
(has)f(no)g(in)o(trinsic)i(kno)o(wledge)f(ab)q(out)f(the)g(requiremen)o(ts)h
(and)f(uses)g(of)g(an)o(y)g(appli-)79 2331 y(cation.)24 b(F)l(ortunately)l(,)
16 b(deriv)m(ations)i(of)e(w)o(orking)g(sets)g(do)g(not)g(require)h(suc)o(h)g
(kno)o(wledge.)24 b(Reference)79 2387 y(information)16 b(can)f(b)q(e)h
(garnered)f(b)o(y)h(monitoring)f(TLB)h(insertions.)21 b(The)15
b(fact)g(that)g(page-rev)o(o)q(cation)79 2444 y(induces)f(paging)e(can)g(b)q
(e)g(deriv)o(ed)h(b)o(y)f(monitoring)g(for)f(increased)i(ph)o(ysical-page)g
(allo)q(cation)g(requests.)79 2500 y(The)j(latter)f(action)g(captures)g(the)h
(information)f(giv)o(en)h(b)o(y)f(monitoring)g(paging)h(in)g(a)f(traditional)
g(op-)79 2557 y(erating)f(system.)k(Indiscriminate)e(resource)d(requests)g
(can)h(b)q(e)g(activ)o(ely)g(discouraged)f(b)o(y)h(susp)q(ending)79
2613 y(applications)j(that)e(request)g(a)g(resource)g(that)g(is)g(in)h(short)
f(supply)l(.)957 2817 y(45)p eop
%%Page: 46 48
46 47 bop 79 34 a Fp(2.8.3)56 b(Disk)18 b(utilization)79 120
y Fo(Disk)c(arm)e(latency)i(is)g(the)f(crucial)i(b)q(ottlenec)o(k)e(in)h(a)f
(disk)h(system.)19 b(An)13 b(e\013ectiv)o(e)h(global)f(p)q(olicy)l(,)i(then,)
79 176 y(attempts)g(to)h(ensure)g(that)f(the)h(disk)h(arm)e(do)q(es)h(not)g
(need)g(to)f(mo)o(v)o(e)h(frequen)o(tly)l(.)22 b(This)17 b(can)f(b)q(e)g
(done)79 233 y(b)o(y)g(allo)q(cating)g(\(or)f(migrating\))g(frequen)o(tly)h
(accessed)g(blo)q(c)o(ks)g(along)g(a)f(narro)o(w)f(band)i(\(whic)o(h)g(lo)o
(w)o(ers)79 289 y(seek)g(time)g(to)e(requested)i(blo)q(c)o(ks\))f(and)h
(through)f(the)g(aggressiv)o(e)g(use)g(of)g(\014le-cac)o(hing.)150
346 y(The)h(di\013erence)h(in)g(\014le-cac)o(hing)h(under)e(an)g(exok)o
(ernel)h(system)e(is)i(that)e(the)h(applications)h(them-)79
402 y(selv)o(es)j(manage)f(these)h(cac)o(hes:)28 b(whether)20
b(this)f(is)h(done)g(through)f(pro)o(xy)g(serv)o(ers)g(or)f(directly)j(is)f
(of)79 459 y(little)f(concern)f(|)g(the)g(c)o(haracteristics)f(and)h
(e\013ectiv)o(eness)g(of)f(this)h(\014le-bu\013er)g(cac)o(hing)g(should)h
(not)79 515 y(su\013er.)150 571 y(The)h(only)g(question,)h(then,)f(is)g(ho)o
(w)f(to)g(ensure)h(that)f(the)h(disk)g(can)g(form)f(\\hot)f(sectors")h(that)
79 628 y(minimize)g(disk)e(arm)e(seeks.)23 b(The)16 b(\014rst)g(step)g(in)h
(this)g(has)f(already)g(b)q(een)h(discussed:)24 b(the)16 b(disk)h(blo)q(c)o
(k)79 684 y(free)k(list)h(and)f(an)g(appro)o(ximation)g(of)g(the)g(disk)g
(arm)g(p)q(osition)h(is)f(published,)k(whic)o(h)d(allo)o(ws)f(disk)79
741 y(managers)15 b(to)g(explicitly)j(allo)q(cate)e(blo)q(c)o(ks)h(close)f
(to)e(the)i(curren)o(t)f(disk)i(arm)d(p)q(osition.)22 b(The)16
b(problem)79 797 y(then)h(b)q(ecomes)f(ho)o(w)g(to)f(m)o(ultiplex)j(this)f
(scarce)f(resource)g(in)h(the)f(face)g(of)f(heated)i(con)o(ten)o(tion.)22
b(This)79 854 y(can)d(b)q(e)g(done)g(in)g(a)f(direct)i(manner)e(b)o(y)h(b)q
(ounding)h(the)e(n)o(um)o(b)q(er)h(of)f(disk)h(blo)q(c)o(ks)g(applications)h
(can)79 910 y(allo)q(cate)c(in)g(hot)f(regions.)150 967 y(Ho)o(w)o(ev)o(er,)i
(w)o(e)g(exp)q(ect)i(that)e(in)h(the)g(common)f(case)h(application-lev)o(el)j
(disk)d(managers)f(will)i(ap-)79 1023 y(proac)o(h)c(go)q(o)q(d)g(global)h
(utilization)h(b)q(ecause)f(of)f(their)h(sophistication.)21
b(In)16 b(the)f(case)g(of)g(the)g(limitation)79 1080 y(of)f(\\go)q(o)q(d")f
(disk)i(blo)q(c)o(ks,)f(disk)g(managers)f(will)j(kno)o(w)d(that)g(these)h
(blo)q(c)o(ks)h(are)e(v)o(ery)h(critical.)20 b(F)l(urther-)79
1136 y(more,)13 b(they)h(will)h(realize)g(that)d(if)i(they)f(allo)q(cate)h
(to)q(o)f(man)o(y)g(of)g(them)g(the)h(disk)g(arm)f(will)i(ha)o(v)o(e)d(to)h
(seek)79 1192 y(to)18 b(another)f(sector)g(and)h(therefore,)g(the)f(disk)i
(blo)q(c)o(ks)f(that)f(w)o(ere)h(so)f(v)m(aluable)i(b)q(efore)f(will)i(b)q
(ecome)79 1249 y(less)c(so.)j(W)l(e)14 b(b)q(eliev)o(e)j(all)e(of)f(these)g
(factors)g(will)i(encourage)e(disk)h(managers)f(to)g(wisely)h(manage)f(their)
79 1305 y(consumption)i(of)f(blo)q(c)o(ks)h(in)g(this)g(v)o(ery)f(attractiv)o
(e)f(territory)l(.)150 1362 y(Finally)l(,)i(the)e(gro)o(wing)f
(sophistication)i(of)f(disks)h(will)g(mak)o(e)f(them)g(relativ)o(ely)h(imp)q
(ervious)g(to)f(an)o(y)79 1418 y(form)i(of)f(disk)i(managemen)o(t)e(\(or)h
(mis-managemen)o(t\))f([57)o(];)h(as)g(suc)o(h,)g(man)o(y)f(of)h(the)g(mec)o
(hanisms)h(w)o(e)79 1475 y(discuss)g(will)g(b)q(ecome)f(irrelev)m(an)o(t)g
(for)e(e\013ectiv)o(e)i(disk)g(p)q(erformance.)79 1618 y Fu(2.9)70
b(Some)20 b(Practical)h(Considerations)79 1719 y Fo(As)c(discussed)h(in)f
(Section)g(2.2)e(cen)o(tralization)i(can)g(ha)o(v)o(e)f(a)g(simplifying)i
(e\013ect)e(on)h(the)f(system)g(as)g(a)79 1776 y(whole.)31
b(This)19 b(section)g(examines)g(t)o(w)o(o)e(areas)h(where)h(this)f
(simplicit)o(y)j(can)e(b)q(e)g(recaptured)f(without)79 1832
y(forfeiting)11 b(the)g(\015exibilit)o(y)i(of)d(a)h(distributed)h(structure.)
18 b(The)11 b(\014rst)f(is)h(structuring)g(an)f(exok)o(ernel-based)79
1889 y(system)j(so)g(that)f(application-lev)o(el)k(op)q(erating)d(system)g
(implemen)o(tations)h(are)e(decoupled)j(from)d(eac)o(h)79 1945
y(other.)19 b(The)13 b(second)g(is)g(the)f(v)o(ery)h(strong)e(role)i(serv)o
(ers)f(can)h(pla)o(y)f(in)i(implemen)o(ting)g(op)q(erating)f(system)79
2002 y(abstractions.)79 2123 y Fp(2.9.1)56 b(Decoupled)17 b(impleme)o(n)n
(tation)79 2209 y Fo(Op)q(erationally)l(,)e(traditional)e(op)q(erating)g
(systems)f(can)g(b)q(e)h(view)o(ed)g(as)f(shared,)h(dynamically)h(link)o(ed)g
(li-)79 2266 y(braries:)19 b(as)12 b(long)g(as)f(agreed)h(up)q(on)h(in)o
(tegers)f(are)f(used)i(for)e(system)g(calls,)i(applications)h(are)e
(e\013ectiv)o(ely)79 2322 y(decoupled)18 b(from)d(the)h(actual)g(op)q
(erating)g(system)g(implemen)o(tation.)23 b(This)16 b(decoupling)i(is)e
(crucial)i(in)79 2379 y(terms)g(of)g(space:)27 b(eac)o(h)18
b(application)i(do)q(es)e(not)g(require)i(its)e(o)o(wn)g(cop)o(y)g(of)g(op)q
(erating)g(system)g(text.)79 2435 y(F)l(urthermore,)13 b(this)g(decoupling)h
(is)f(critical)h(for)e(bac)o(kw)o(ards)g(compatibilit)o(y)i(since)g(it)f
(allo)o(ws)f(the)h(op)q(er-)79 2492 y(ating)i(system)f(to)g(b)q(e)i(dev)o
(elop)q(ed)g(in)g(a)e(totally)h(separate)f(en)o(vironmen)o(t)h(from)f
(applications:)21 b(to)14 b(use)h(a)79 2548 y(new)e(op)q(erating)g(system)f
(implemen)o(tation,)i(applications)g(do)e(not)g(ha)o(v)o(e)g(to)g(b)q(e)h
(re-link)o(ed)h(\(e.g.,)e(binary)79 2604 y(compatibilit)o(y)i(can)e(b)q(e)h
(ac)o(hiev)o(ed)g(b)o(y)f(radically)h(di\013eren)o(t)f(op)q(erating)h(system)
e(implemen)o(tations)i([24]\).)150 2661 y(There)e(are)f(a)h(n)o(um)o(b)q(er)g
(of)f(w)o(a)o(ys)g(that)g(exok)o(ernel-based)i(systems)e(can)h(realize)h
(these)e(same)h(b)q(ene\014ts.)957 2817 y(46)p eop
%%Page: 47 49
47 48 bop 79 34 a Fo(The)15 b(\014rst)f(is)h(that)f(a)g(library)h(op)q
(erating)f(system)g(can)h(use)f(system)g(call)i(forw)o(arding)d(to)h(comm)o
(unicate)79 90 y(with)j(an)g(application)h(strictly)f(through)f(a)g(system)g
(call)h(in)o(terface.)24 b(Serv)o(ers)17 b(can)f(also)h(b)q(e)g(used)g(as)f
(a)79 147 y(primitiv)o(e)d(form)d(of)g(dynamic)i(linking:)20
b(eac)o(h)11 b(serv)o(er)g(represen)o(ts)g(aggregates)e(of)h(co)q(de)i(and)f
(data)f(shared)79 203 y(among)17 b(m)o(ultiple)i(pro)q(cesses,)e(and)h(can)f
(b)q(e)h(accessed)g(through)e(w)o(ell-kno)o(wn)i(IPC)g(p)q(orts.)25
b(Finally)l(,)19 b(a)79 260 y(more)h(customized)g(approac)o(h)f(is)h(to)f
(use)h(real)g(dynamic)h(linking,)h(similar)f(to)e(what)g(some)g(mo)q(dern)79
316 y(ob)s(ject-orien)o(ted)d(systems)e(implemen)o(t.)150 373
y(While)i(the)g(metho)q(ds)f(w)o(e)g(ha)o(v)o(e)f(listed)j(en)o(tail)e(more)g
(sophistication)h(than)f(the)g(traditional)h(in)o(ter-)79 429
y(action)i(b)q(et)o(w)o(een)f(op)q(erating)h(systems)e(and)i(applications,)h
(w)o(e)d(b)q(eliev)o(e)k(that)c(this)i(complication)g(can)79
486 y(b)q(e)e(minimized.)79 607 y Fp(2.9.2)56 b(The)18 b(role)g(of)h(serv)n
(ers)79 693 y Fo(In)g(this)f(subsection)g(w)o(e)f(lo)q(ok)h(at)f(three)g(imp)
q(ortan)o(t)h(functions)g(that)f(ha)o(v)o(e)g(b)q(een)h(p)q(erformed)g(b)o(y)
f(op-)79 750 y(erating)h(systems:)24 b(the)18 b(breaking)g(of)f(self-referen)
o(tial)i(lo)q(ops)f(in)h(applications)g(\(e.g.,)d(an)i(application)79
806 y(cannot)d(\\sw)o(ap)e(itself)i(bac)o(k)f(in"\),)h(atomic)f(actions)g
(and)h(the)f(managemen)o(t)f(of)h(shared,)g(fault-isolated)79
863 y(cac)o(hes.)20 b(An)12 b(exok)o(ernel-based)h(system)f(no)g(longer)g
(has)g(a)g(single,)i(cen)o(tralized)f(op)q(erating)g(system)e(that)79
919 y(kno)o(ws)18 b(the)g(requiremen)o(ts)h(and)f(abstractions)g(of)f(the)i
(applications)g(that)f(utilize)i(it;)f(instead)g(these)79 975
y(functions)d(will)h(ha)o(v)o(e)e(to)f(b)q(e)i(p)q(erformed)f(b)o(y)g
(application-lev)o(el)k(serv)o(ers.)g(Because)d(these)f(serv)o(ers)g(will)79
1032 y(b)q(e)h(critical,)h(w)o(e)e(brie\015y)h(discuss)g(the)f(general)h
(requiremen)o(ts)g(of)f(these)g(functions.)79 1152 y Fl(Self-referen)o(tial)k
(lo)q(ops)79 1238 y Fo(Self-referen)o(tial)h(lo)q(ops)e(o)q(ccur)h(when)f(a)f
(pro)q(cess)h(requires)h(that)e(an)h(op)q(eration)g(b)q(e)g(p)q(erformed)g
(on)g(it)79 1294 y(\\from)f(the)h(outside":)24 b(these)18 b(are,)f(t)o
(ypically)l(,)j(b)q(o)q(ot-strapping)d(requiremen)o(ts.)28
b(F)l(or)16 b(example,)j(for)e(a)79 1351 y(pro)q(cess)f(to)e(b)q(e)i(\\sw)o
(app)q(ed)f(in")h(requires)g(the)f(in)o(tercession)h(of)f(a)g(third)g(part)o
(y)f(that)h(can)g(set)g(up)g(page-)79 1407 y(tables,)i(etc.)24
b(Similarly)l(,)19 b(an)e(application)h(requires)f(help)h(to)e(\\w)o(ak)o(e)f
(up")i(after)f(susp)q(ension.)26 b(Serv)o(ers)79 1464 y(can)16
b(b)q(e)g(used)f(to)g(p)q(erform)g(these)g(functions.)79 1584
y Fl(A)o(tomicit)o(y)79 1669 y Fo(Implemen)o(tation)j(of)f(some)f(op)q
(erations)h(is)g(aided)h(b)o(y)f(atomicit)o(y)g(guaran)o(tees.)23
b(F)l(or)17 b(example,)g(it)g(can)79 1726 y(b)q(e)g(complicated)g(for)d(a)i
(running)g(application)h(to)e(directly)i(restructure)f(its)f(page-table,)h
(since)h(pages)79 1782 y(can)c(b)q(e)h(sw)o(app)q(ed)f(out,)f(mappings)i(can)
f(c)o(hange,)g(etc.)19 b(during)13 b(the)g(pro)q(cess.)20 b(A)12
b(simpler)i(metho)q(dology)79 1839 y(is)g(for)f(the)g(application)h(to)f(b)q
(e)h(susp)q(ended)g(b)o(y)f(a)g(third)h(part)o(y)e(who)h(restructures)g(the)g
(page-table,)g(and)79 1895 y(then)j(unsusp)q(end)h(it.)j(Again,)15
b(this)h(action)f(can)h(b)q(e)g(done)f(b)o(y)g(serv)o(ers.)79
2015 y Fl(Cac)o(he)j(and)g(binding)h(managem)o(en)n(t)79 2101
y Fo(Man)o(y)d(of)g(the)g(issues)h(discussed)h(in)f(this)g(subsection)g(ha)o
(v)o(e)f(arisen)g(previously)i(in)f(micro-k)o(ernel)h(sys-)79
2158 y(tems.)i(W)l(e)15 b(review)h(some)f(of)g(the)g(more)g(subtle)h(issues.)
150 2214 y(While)h(applications)h(can)e(manage)f(shared)h(state)f(directly)l
(,)i(suc)o(h)f(an)g(approac)o(h)g(has)f(p)q(o)q(or)h(fault-)79
2271 y(isolation)h(c)o(haracteristics)f(and,)g(more)f(to)g(the)h(p)q(oin)o
(t,)g(is)g(not)f(viable)i(b)q(et)o(w)o(een)f(applications)i(that)d(do)79
2327 y(not)e(trust)f(one)h(another.)19 b(A)12 b(solution)i(is)f(to)f(use)h(a)
g(shared,)g(fault-isolated)h(cac)o(he)f(that)f(is)h(managed)g(b)o(y)79
2383 y(a)h(trusted)f(\(or)g(at)g(least)h(highly)h(accoun)o(table\))e(en)o
(tit)o(y)l(.)20 b(The)14 b(uses)f(of)h(serv)o(ers)f(to)g(manage)g(cac)o(hes)h
(\(and)79 2440 y(the)j(bindings)h(to)d(them\))h(are)g(signi\014can)o(tly)h
(more)f(subtle)h(than)f(the)g(simple)h(use)g(of)f(b)q(o)q(ot-strapping.)79
2496 y(There)h(are)f(roughly)g(\014v)o(e)g(prop)q(erties)h(that)f(a)f(serv)o
(er)h(can)h(ensure:)22 b(that)15 b(all)i(accesses)g(to)e(it)i(ha)o(v)o(e)e
(the)79 2553 y(appropriate)20 b(access)g(righ)o(ts,)h(that)e(the)h(cac)o(he)g
(is)g(fault-isolated,)i(that)d(op)q(erations)h(on)f(the)h(shared)79
2609 y(state)14 b(are)f(w)o(ell-formed,)i(that)e(shared)h(state)f(is)h(k)o
(ept)g(coheren)o(t,)g(and)g(that)f(appropriate)h(bindings)i(are)79
2666 y(formed)f(and)h(managed.)j(W)l(e)d(consider)g(eac)o(h)f(in)h(turn.)957
2817 y(47)p eop
%%Page: 48 50
48 49 bop 150 34 a Fo(The)16 b(most)f(ob)o(vious)h(role)g(of)g(a)f(serv)o(er)
h(in)g(cac)o(he)g(managemen)o(t)g(is)g(that)f(of)g(guardian:)22
b(the)16 b(serv)o(er)79 90 y(ensures)f(that)e(all)i(op)q(erations)f(to)f(the)
h(shared)g(state)f(are)h(b)o(y)g(applications)h(with)g(appropriate)e(creden-)
79 147 y(tials.)150 203 y(The)18 b(shared)f(cac)o(he)h(can)g(b)q(e)g(view)o
(ed)g(as)f(an)g(ob)s(ject)g(whose)g(in)o(terface)h(is)g(guaran)o(teed)f(b)o
(y)g(its)h(en-)79 260 y(capsulation)h(in)e(the)h(serv)o(er.)25
b(This)17 b(fault-isolation)i(can)e(tak)o(e)f(t)o(w)o(o)g(forms.)24
b(The)18 b(\014rst)e(is)i(simply)g(the)79 316 y(use)d(of)f(address-space)g
(protection)g(to)g(prev)o(en)o(t)g(wild)h(application)h(writes.)k(The)14
b(second)h(is)f(the)g(use)h(of)79 373 y(the)h(serv)o(er's)e(in)o(terface)h
(to)g(ensure)g(that)g(all)g(op)q(erations)h(on)f(this)g(state)f(are)h(w)o
(ell-formed:)21 b(the)15 b(serv)o(er)79 429 y(p)q(erforms)e(all)h(op)q
(erations)f(and,)g(therefore,)g(applications)h(do)f(not)g(ha)o(v)o(e)f(to)g
(b)q(e)i(trusted)e(to)h(acquire)g(ap-)79 486 y(propriate)i(lo)q(c)o(ks,)g(up)
q(date)g(b)q(o)q(ok-k)o(eeping)h(data)e(structures,)g(etc.)20
b(A)15 b(nice)h(prop)q(ert)o(y)e(of)g(this)h(mo)q(del)h(is)79
542 y(that)d(it)h(maps)f(directly)i(on)o(to)d(the)i(op)q(erating)f(system's)g
(traditional)h(role)f(as)g(a)g(trusted)h(manager)e([71)o(].)79
599 y(T)o(ypically)l(,)17 b(serv)o(ers)e(are)f(used)i(to)e(guaran)o(tee)h
(the)g(correctness)g(of)f(op)q(erations)h(to)g(shared)g(state)f(when)79
655 y(a)g(logical)g(structure)f(has)g(b)q(een)i(imp)q(osed)f(on)g(ph)o
(ysical)g(memory;)f(this)h(abstract)f(structure)g(cannot)g(b)q(e)79
711 y(describ)q(ed)20 b(\(and)d(hence,)i(enforced\))f(through)f(the)g
(virtual)h(memory)f(system)g(and)h(so)f(m)o(ust)g(b)q(e)h(syn-)79
768 y(thesized)f(at)e(a)g(\\language)g(lev)o(el.")22 b(F)l(or)14
b(example,)i(database)f(managers)f(ensure)i(that)f(all)h(op)q(erations)79
824 y(to)f(the)g(database)g(are)g(w)o(ell)h(formed.)150 881
y(The)f(role)h(of)f(coherence)h(manager)e(o)q(ccurs)i(when)f(m)o(ultiple)i
(applications)g(cac)o(he)e(certain)h(ob)s(jects)79 937 y(and)d(require)h(a)e
(trusted)g(third)i(part)o(y)d(to)h(manage)g(the)h(up)q(dates)g(b)q(et)o(w)o
(een)g(them.)19 b(F)l(or)12 b(example,)i(if)f(t)o(w)o(o)79
994 y(applications)h(concurren)o(tly)f(read,)f(mo)q(dify)g(and)g(write-bac)o
(k)h(disk)f(blo)q(c)o(k)h(4,)f(one)g(of)f(their)i(c)o(hanges)f(will)79
1050 y(b)q(e)i(o)o(v)o(erwritten.)19 b(This)14 b(calamit)o(y)f(can)g(b)q(e)h
(prev)o(en)o(ted)g(b)o(y)f(either)h(merging)f(the)h(writes)f(or)g(b)o(y)g
(gran)o(ting)79 1107 y(exclusiv)o(e)h(access)e(to)f(the)i(disk)f(blo)q(c)o
(k.)20 b(Either)12 b(metho)q(d)g(can)g(b)q(e)h(safely)f(p)q(erformed)g(b)o(y)
g(a)g(serv)o(er,)g(whic)o(h)79 1163 y(can)18 b(manage)f(a)g(cac)o(he)g(of)g
(\014le-bu\013ers,)h(ensuring)h(coherence,)f(protection)f(and)h
(fault-isolation)g([70)o(].)79 1220 y(The)d(imp)q(ortan)o(t)f(prop)q(ert)o(y)
g(of)h(this)f(con\014guration)h(is)g(that)f(applications)i(do)f(not)f(ha)o(v)
o(e)g(to)g(trust)f(eac)o(h)79 1276 y(other)j(to)e(manage)h(ob)s(jects)g
(correctly)l(.)21 b(F)l(urthermore,)15 b(b)q(o)q(ot-strapping)g(is)h
(simpli\014ed:)23 b(for)15 b(example,)79 1332 y(with)h(a)f(cen)o(tralized)i
(disk)f(blo)q(c)o(k)g(cac)o(he,)g(a)f(reader)g(of)g(a)g(disk)h(blo)q(c)o(k)g
(do)q(es)g(not)f(ha)o(v)o(e)g(to)g(ferret)g(out)g(all)79 1389
y(writers)h(to)e(that)h(disk)h(blo)q(c)o(k.)150 1445 y(Binding)22
b(and)e(the)g(managemen)o(t)f(of)g(bindings)j(is)e(also)g(an)g(imp)q(ortan)o
(t)f(serv)o(er)h(role.)34 b(Bindings)79 1502 y(ha)o(v)o(e)14
b(to)f(do)h(with)h(the)f(gran)o(ting)f(of)h(access)g(righ)o(ts)f(to)h(shared)
g(state:)k(giv)o(en)d(appropriate)f(creden)o(tials,)79 1558
y(a)i(serv)o(er)f(will)i(form)e(a)h Fn(binding)e Fo(b)q(et)o(w)o(een)i(the)g
(application)h(and)f(a)g(resource)f(\(e.g.,)g(p)q(erhaps)h(through)79
1615 y(memory)e(mappings\).)20 b(Managemen)o(t)14 b(of)g(bindings)i(in)o(v)o
(olv)o(e)f(trac)o(king)f(access)g(righ)o(ts)g(and)h(the)f(c)o(hang-)79
1671 y(ing)h(conditions)h(of)e(the)g(cac)o(he.)20 b(F)l(or)14
b(example,)h(a)e(binding)k(formed)d(to)f(a)h(resource)h(with)f(only)h(a)f
(single)79 1728 y(reader)j(ma)o(y)f(need)h(to)f(b)q(e)h(c)o(hanged)g(when)g
(a)f(writer)g(is)h(added;)h(or)e(a)g(binding)i(ma)o(y)e(c)o(hange)g(b)q
(ecause)79 1784 y(the)g(underlying)h(ph)o(ysical)f(resource)f(in)o(v)o(olv)o
(ed)h(c)o(hanges.)j(F)l(or)c(instance,)g(a)g(binding)i(of)e(a)f(logical)i(to)
f(a)79 1841 y(ph)o(ysical)f(disk)e(blo)q(c)o(k)h(ma)o(y)e(need)h(to)f(b)q(e)i
(up)q(dated)g(if)f(the)g(information)g(in)g(the)g(ph)o(ysical)h(blo)q(c)o(k)g
(is)f(mo)o(v)o(ed)79 1897 y(during)k(disk)g(compaction.)k(There)15
b(are)g(man)o(y)f(examples)i(of)e(serv)o(ers)g(as)h(managers)f(of)g
(bindings.)22 b(F)l(or)79 1953 y(example,)16 b(Maeda)e(discusses)h(a)f
(situation)h(where)g(a)f(serv)o(er)g(manages)g(a)g(cac)o(he)h(of)f
(\014le-bu\013ers)i([70)o(].)j(If)79 2010 y(access)e(righ)o(ts)e(are)h(allo)o
(w)o(ed,)g(this)g(serv)o(er)g(binds)h(the)f(\014le-bu\013er)h(to)e(the)h
(application)h(\(i.e.,)f(maps)f(the)79 2066 y(bu\013er)e(in)o(to)g(the)g(pro)
q(cesses)h(address)f(space\);)g(as)g(conditions)h(c)o(hange,)f(the)g(serv)o
(er)g(mo)q(di\014es)h(this)f(bind-)79 2123 y(ing:)27 b(if)19
b(m)o(ultiple)h(readers)e(and)g(writers)g(are)g(manipulating)i(the)e(\014le)i
(the)e(coherency)h(requiremen)o(ts)79 2179 y(are)13 b(di\013eren)o(t)h(than)f
(in)g(the)h(case)f(of)f(a)h(single)i(reader.)k(A)13 b(more)g(simple-minded)j
(binding)f(serv)o(er)d(could)79 2236 y(b)q(e)19 b(a)e(text)g(cac)o(he)g
(manager)g(that)g(dynamically)i(links)g(pro)q(cesses)f(with)f(the)h(ob)s
(ject)f(co)q(de)h(that)e(they)79 2292 y(require.)150 2349 y(In)d(closing,)g
(the)g(reader)f(should)h(note)f(that,)g(parado)o(xically)l(,)i(the)e
(addition)i(of)d(serv)o(ers)h(to)g(a)g(system)79 2405 y(can)f(dramatically)g
(decrease)g(the)f(complexit)o(y)h(of)f(that)g(system.)18 b(Decreasing)10
b(complexit)o(y)h(through)f(the)79 2462 y Fn(addition)15 b
Fo(of)e(en)o(tities)i(is)g(v)o(ery)e(un)o(usual,)i(and)f(deserv)o(es)g(some)g
(though)o(t.)19 b(In)14 b(this)h(case,)f(it)g(results)g(from)79
2518 y(the)19 b(cen)o(tralization)h(serv)o(ers)e(can)h(ha)o(v)o(e)f(on)h(a)f
(system:)26 b(serv)o(ers)18 b(can)h(condense)h(di\013use)f(distributed)79
2574 y(con)o(trol)13 b(in)o(to)g(a)f(single,)i(cen)o(tralized)g(mec)o
(hanism,)g(with)f(the)f(exp)q(ected)i(simpli\014cation)h(of)d(in)o
(teraction.)79 2631 y(The)k(judicious)i(use)e(of)f(serv)o(ers)g(will)i(allo)o
(w)f(an)g(exok)o(ernel)g(system)f(to)g(approac)o(h)g(the)h(simplicit)o(y)i
(of)d(a)79 2687 y(cen)o(tralized)i(system)e(without)g(sacri\014cing)i
(application-lev)o(el)h(resource)d(managemen)o(t.)957 2817
y(48)p eop
%%Page: 49 51
49 50 bop 79 34 a Fu(2.10)70 b(Summ)n(ary)79 135 y Fo(Exp)q(orting)23
b(hardw)o(are)e(to)g(applications)i(in)o(v)o(olv)o(es)g(making)f(tradeo\013s)
f(in)h(a)g(design)h(space)f(that)f(is)79 192 y(radically)g(di\013eren)o(t)e
(from)f(that)g(explored)h(in)h(traditional)f(op)q(erating)g(systems.)30
b(This)19 b(c)o(hapter)g(has)79 248 y(discussed)f(a)d(v)m(ariet)o(y)h(of)f
(design)i(p)q(oin)o(ts)f(in)g(this)g(space)g(and)g(has)f(articulated)i(a)e
(set)g(of)h(explicit)h(prin-)79 305 y(ciples)g(that)e(can)g(guide)i(the)e
(design)h(and)f(implemen)o(tation)i(of)e(an)g(exok)o(ernel.)957
2817 y(49)p eop
%%Page: 50 52
50 51 bop eop
%%Page: 51 53
51 52 bop 79 345 a Fi(Chapter)35 b(3)79 553 y Fm(An)40 b(Exok)m(ernel)h
(System)79 775 y Fo(This)21 b(c)o(hapter)f(describ)q(es)h(t)o(w)o(o)e(no)o(v)
o(el)h(and)g(in)o(teresting)h(soft)o(w)o(are)d(systems)h(whose)h
(organization)g(is)79 832 y(built)f(up)q(on)e(the)g(simple)i(principle)g(of)e
(exp)q(osing)h(all)g(hardw)o(are)e(functionalit)o(y:)24 b Fn(A)n(e)n(gis)p
Fo(,)16 b(a)g(protot)o(yp)q(e)79 888 y(exok)o(ernel,)21 b(and)f
Fn(ExOS)p Fo(,)f(a)g(protot)o(yp)q(e)g(library)h(op)q(erating)g(system.)32
b(Aegis)20 b(is)g(fundamen)o(tally)h(dif-)79 945 y(feren)o(t)c(from)e
Fn(any)h Fo(op)q(erating)h(system,)f(past)f(or)h(presen)o(t;)h(as)f(suc)o(h,)
g(the)h(implemen)o(tation)g(details)h(w)o(e)79 1001 y(giv)o(e)g(should)f(pro)
o(vide)h(the)f(reader)f(with)i(a)e(\014rm)h(grasp)f(of)g(what)h(an)g(exok)o
(ernel)g(actually)h(lo)q(oks)f(lik)o(e.)79 1058 y(F)l(urthermore,)c(man)o(y)g
(of)g(the)h(issues)g(that)e(arise)i(in)g(an)f(exok)o(ernel)h(are)g(in)o
(triguing)g(in)g(their)g(o)o(wn)f(righ)o(t.)79 1114 y(The)20
b(most)e(un)o(usual)i(asp)q(ect)f(of)g(ExOS)g(is)h(that)e(it)i(manages)e
(fundamen)o(tal)i(op)q(erating)f(system)f(ab-)79 1171 y(stractions)g(\(e.g.,)
f(virtual)i(memory)e(and)h(pro)q(cess)g(mec)o(hanisms\))h Fn(at)g(applic)n
(ation-level)p Fo(,)e(completely)79 1227 y(within)j(the)e(address)g(space)g
(of)g(the)g(application)i(that)d(is)h(using)h(it.)29 b(T)l(o)17
b(the)i(b)q(est)f(of)f(our)h(kno)o(wlege)79 1283 y(ExOS)f(is)f(one)g(of)f
(the)h(\014rst)f(general-purp)q(ose)i(library)g(op)q(erating)f(system)f
(implemen)o(ted)j(in)e(a)g(m)o(ulti-)79 1340 y(programming)f(en)o(vironmen)o
(t.)21 b(\(The)16 b(Cac)o(he)f(Kernel)i(is)f(in)o(v)o(estigating)g(this)g
(approac)o(h)f(concurren)o(tly)79 1396 y(with)20 b(our)g(w)o(ork)e([22)o
(].\))32 b(F)l(or)19 b(this)h(reason,)g(the)f(implemen)o(tation)i(tec)o
(hniques)g(w)o(e)e(describ)q(e)i(should)79 1453 y(w)o(arren)o(t)c(the)i
(atten)o(tion)e(of)h(the)h(reader.)28 b(Finally)l(,)21 b(this)d(c)o(hapter)g
(describ)q(es)i(some)e(implemen)o(tation)79 1509 y(considerations)g(that,)e
(while)i(w)o(ell)g(kno)o(wn)e(to)g(some)g(designers)i(in)f(the)g(comm)o(unit)
o(y)l(,)g(ha)o(v)o(e)f(not)g(b)q(een)79 1566 y(recorded:)31
b(the)20 b(sp)q(eci\014c)i(details)f(of)f(user-lev)o(el)i(traps,)e(design)h
(tradeo\013s)e(in)i(soft)o(w)o(are)e(TLBs,)i(and)79 1622 y(exception)c
(handling)g(con)o(v)o(en)o(tions.)150 1679 y(This)g(c)o(hapter)f(is)h(a)f
(\\snapshot")g(of)g(the)g(curren)o(t)g(implemen)o(tation,)i(pro)o(vided)f(to)
f(mak)o(e)g(the)g(on-)79 1735 y(going)j(discussion)g(more)f(concrete,)h(not)e
(as)h(a)g(a)g(\014nal)g(implemen)o(tation:)27 b(the)19 b(protot)o(yp)q(e)e
(curren)o(tly)79 1792 y(mak)o(es)j(little)i(pro)o(visions)f(for)e(device)j
(in)o(terrupts)f(and)f(has)g(only)h(rudimen)o(tary)g(IPC)f(binding)i(and)79
1848 y(system)d(call)h(in)o(terp)q(osition)h(facilities.)34
b(F)l(urthermore,)19 b(this)h(implemen)o(tation)g(is)g(primarily)g(an)f(ex-)
79 1904 y(ploratory)d(one:)22 b(w)o(e)16 b(ha)o(v)o(e)g(not)f(attempted)h(to)
g(mak)o(e)f(the)i(v)m(arious)f(pieces)i(\014t)e(in)h(a)f(cohesiv)o(e,)h
(uni\014ed)79 1961 y(whole.)29 b(Rather,)18 b(w)o(e)g(ha)o(v)o(e)f(concen)o
(trated)h(on)g(exp)q(osing)g(the)g(functionalit)o(y)h(of)f(the)g(hardw)o
(are,)f(and)79 2017 y(pro)o(viding)g(the)e(basic)h(primitiv)o(es)g(that)f
(are)g(required.)150 2074 y(Section)i(3.1)d(giv)o(es)i(a)g(brief)g(o)o(v)o
(erview)g(of)f(our)g(platform;)h(Section)g(3.2)f(describ)q(es)i(ev)o(en)o(t)f
(handling)79 2130 y(\(b)q(oth)h(in)g(general)f(and)h(in)g(Aegis\),)f(sp)q
(eci\014cally:)25 b(exception)17 b(forw)o(arding,)f(in)o(terrupt)g(handling,)
i(and)79 2187 y(up)q(calls.)29 b(Section)18 b(3.3)f(discusses)h(the)g(in)o
(ternals)g(of)f(the)h(curren)o(t)f(implemen)o(tation;)j(it)d(explains)i(the)
79 2243 y(data)14 b(structures)f(that)g(de\014ne)i(eac)o(h)f(ob)s(ject.)19
b(Section)c(3.4)e(giv)o(es)h(the)g(curren)o(t)g(\(rudimen)o(tary\))f(system)
79 2300 y(call)24 b(in)o(terface)e(and)g(Section)h(3.5)f(the)g(full)h
(complemen)o(t)g(of)f(privileged)i(op)q(erations)e(that)g(can)g(b)q(e)79
2356 y(p)q(erformed)e(on)f(the)g(mac)o(hine)h(state.)30 b(Section)20
b(3.6)e(highligh)o(ts)i(features)f(of)g(our)f(library)i(op)q(erating)79
2413 y(system,)15 b(ExOS.)g(W)l(e)g(conclude)i(in)f(Section)g(3.7.)957
2817 y(51)p eop
%%Page: 52 54
52 53 bop 79 34 a Fu(3.1)70 b(Platform)79 135 y Fo(An)19 b(exok)o(ernel)g(a)o
(v)o(oids)f(p)q(ortabilit)o(y:)27 b(mac)o(hine)19 b(indep)q(enden)o(t)i(in)o
(terfaces)d(hide)i(p)q(o)o(w)o(er,)e(and)h(require)79 192 y(resources)14
b(to)f(implemen)o(t.)21 b(As)13 b(suc)o(h)h(the)g(arc)o(hitecture)g(for)f
(whic)o(h)i(an)e(exok)o(ernel)h(is)h(designed)g(for)e(has)79
248 y(a)i(profound)h(impact)f(on)g(its)h(structure)f(and)g(in)o(terface.)150
305 y(W)l(e)23 b(base)h(our)f(exok)o(ernel)h(on)f(the)h(MIPS)f(arc)o
(hitecture)h([54)o(];)i(Aegis)e(runs)g(on)f(the)h(DECsta-)79
361 y(tion/MIPS)14 b(family)f([54)o(].)19 b(These)13 b(mac)o(hines)h(ha)o(v)o
(e)e(separate)h(instruction)h(and)f(data)f(cac)o(hes,)h(soft)o(w)o(are)79
418 y(handled)20 b(TLB)e(faults,)g(64)f(con)o(text)g(iden)o(ti\014ers)i(and)f
(a)f(math)h(copro)q(cessor)f(that)g(con)o(trols)g(\015oating-)79
474 y(p)q(oin)o(t)f(op)q(erations.)k(The)15 b(mac)o(hine)g(con\014gurations)g
(that)f(w)o(e)h(use)g(are)g(uni-pro)q(cessor)h(mac)o(hines)f(with)79
531 y(ph)o(ysically)j(indexed)f(cac)o(hes,)f(31)f(general-purp)q(ose)h(and)g
(32)f(\015oating-p)q(oin)o(t)h(application-lev)o(el)j(regis-)79
587 y(ters.)150 644 y(TLB)g(misses)f(and)h(exceptions)g(are)f(handled)i(in)f
(soft)o(w)o(are.)27 b(The)19 b(MIPS)f(arc)o(hitecture)h(sp)q(eci\014es)79
700 y(t)o(w)o(o)11 b(exception)j(handlers:)19 b(the)13 b(\014rst)e(for)h
(user-TLB)h(misses,)g(the)f(second)h(for)f(\\ev)o(erything)g(else")h(\(e.g.,)
79 756 y(k)o(ernel)i(TLB)e(misses,)h(in)o(terrupts,)f(in)o(teger)h(o)o(v)o
(er\015o)o(w,)e(system)h(calls,)h(etc.\).)19 b(The)13 b(MIPS)h(ABI)g(reserv)o
(es)79 813 y(t)o(w)o(o)j(registers)h(for)g(k)o(ernel)h(use:)26
b Fj(k0)18 b Fo(and)g Fj(k1)p Fo(;)h(it)g(\(roughly\))f(divides)i
(general-purp)q(ose)f(and)g(\015oating)79 869 y(p)q(oin)o(t)13
b(register)f(sets)g(b)q(et)o(w)o(een)g(caller)h(and)g(callee)g(sa)o(v)o(ed)f
(registers.)19 b(Register)12 b(zero)g(holds)h(the)f(constan)o(t)79
926 y(0.)150 982 y(All)g(privileged)h(instructions)e(are)f(p)q(erformed)h(b)o
(y)g(co-pro)q(cessor)f(0,)h(and)f(most)g(use)h(the)g(instructions)79
1039 y Fj(mtc0)16 b Fo(\(mo)o(v)o(e)g(to)g(co-pro)q(cessor\))g(and)h
Fj(mfc0)f Fo(\(mo)o(v)o(e)f(from)h(co-pro)q(cessor\).)23 b(Branc)o(hes,)17
b(loads)g(and)f(co-)79 1095 y(pro)q(cessor)f(op)q(erations)h(ha)o(v)o(e)f
(dela)o(y)g(slots;)g(the)g(instruction)h(set)f(is)h(a)f(t)o(ypical)h(RISC.)
150 1152 y(The)g(MIPS)h(TLB)f(hardw)o(are)f(holds)i(64)f(en)o(tries.)23
b(Eac)o(h)15 b(en)o(try)h(consists)g(of)g(t)o(w)o(o)f(w)o(ords:)21
b(the)16 b(\014rst)79 1208 y(con)o(tains)f(a)f(virtual)h(page)g(n)o(um)o(b)q
(er)f(and)h(address)f(space)h(tag,)e(the)i(second)g(the)f(ph)o(ysical)i(page)
e(that)g(it)79 1265 y(maps)d(and)g(the)g(attributes)g(of)f(the)h(mapping.)19
b(Mapping)11 b(attributes)g(con)o(trol)g(whether)g(the)f(mapping)i(is)79
1321 y(cac)o(hed,)h(v)m(alid,)g(dirt)o(y)e(or)g(\\global".)18
b(Global)12 b(mappings)g(do)f(not)g(c)o(hec)o(k)g(the)h(con)o(text)e(iden)o
(ti\014er)j(on)e(TLB)79 1377 y(lo)q(okup;)k(b)q(ecause)h(the)e(global)h
(attributes)f(allo)o(w)h(a)f(TLB)g(en)o(try)g(to)g(matc)o(h)f(an)o(y)h
(application's)i(virtual)79 1434 y(address,)j(it)g(is)f(the)h(only)f
(capabilit)o(y)i(Aegis)f(do)q(es)f(not)g(exp)q(ort)g(to)g(applications.)30
b(\(This)19 b(restriction)79 1490 y(could)f(b)q(e)g(lifted)g(if)f(Aegis)h
(\015ushed)g(the)f(TLB)g(when)g(con)o(text-switc)o(hing)g(from)f(pro)q
(cesses)i(that)e(used)79 1547 y(these)g(bits.\))150 1603 y(The)g(follo)o
(wing)h(sp)q(ecial)h(registers)e(will)h(b)q(e)g(referenced)g(to)e(in)i
(subsequen)o(t)g(discussion)g(\(all)g(infor-)79 1660 y(mation)f(tak)o(en)e
(from)h([54)o(]\):)79 1754 y Fl(status)24 b Fo(:)19 b(the)c(curren)o(t)g(pro)
q(cess)h(status)e(w)o(ord:)19 b(sup)q(ervisor)c(and)h(user)f(mo)q(de)g(bits)g
(and)h(the)f(status)f(of)193 1810 y(in)o(terrupts)i(and)f(co-pro)q(cessors)g
(\(enabled)h(or)f(disabled\).)79 1904 y Fl(tlbhi)25 b Fo(:)19
b(con)o(tains)c(the)f(con)o(text)g(iden)o(ti\014er)i(used)f(to)f(matc)o(h)f
(the)i(virtual)g(address)f(with)h(a)f(TLB)h(en)o(try)193 1960
y(when)h(virtual)g(addresses)f(are)g(presen)o(ted)h(for)e(translation.)79
2054 y Fl(tlblo)25 b Fo(:)e(holds)17 b(the)g(lo)o(w)f(order)h(32)f(bits)h(of)
f(a)g(TLB)h(en)o(try)g(when)g(p)q(erforming)g(TLB)g(read)g(and)f(write)193
2111 y(op)q(erations.)79 2204 y Fl(tlb)q(cxt)25 b Fo(:)32 b(con)o(tains)21
b(a)g(p)q(oin)o(ter)h(to)f(a)g(k)o(ernel)h(virtual)g(page)g(table)f(en)o(try)
g(arra)o(y)g(\(i.e.,)h(page)f(table)193 2261 y(p)q(oin)o(ter\);)f(it)f(is)g
(used)g(in)g(the)g(TLB)g(re\014ll)g(handler.)31 b(On)19 b(all)h(addressing)f
(exceptions)g(\(except)193 2317 y(bus)d(errors\),)f(this)h(register)g(holds)h
(the)f(virtual)g(page)g(n)o(um)o(b)q(er)g(\(VPN\))f(from)g(the)h(most)f
(recen)o(t)193 2374 y(virtual)h(address)f(for)g(whic)o(h)h(the)f(translation)
g(w)o(as)g(in)o(v)m(alid.)79 2468 y Fl(tlbbad)25 b Fo(:)19
b(con)o(tains)c(the)f(virtual)h(address)g(that)e(most)h(recen)o(tly)h(failed)
h(to)e(ha)o(v)o(e)g(a)g(v)m(alid)i(translation.)79 2561 y Fl(ep)q(c)24
b Fo(:)18 b(holds)13 b(the)g(exception)g(program)e(coun)o(ter,)h(i.e.,)h(the)
f(address)g(where)h(pro)q(cessing)g(resumes)f(after)193 2618
y(an)j(exception)i(has)e(b)q(een)h(serviced.)957 2817 y(52)p
eop
%%Page: 53 55
53 54 bop 79 34 a Fl(cause)23 b Fo(:)d(holds)c(the)e(cause)h(of)g(the)g(last)
f(exception)i(or)e(in)o(terrupt.)20 b(General)c(purp)q(ose)f(exceptions)h
(are)193 90 y(v)o(ectored)g(through)h(a)f(common)g(exception)i(handler,)f
(this)g(register)g(is)g(used)g(to)f(disam)o(biguate)193 147
y(whic)o(h)g(particular)g(exception)g(o)q(ccured.)150 241 y(T)l(o)i(reclaim)h
(a)f(con)o(text)f(iden)o(ti\014er)j(or)d(ph)o(ysical)i(page,)g(all)g
(mappings)f(that)f(in)o(v)o(olv)o(e)i(it)f(m)o(ust)g(b)q(e)79
297 y(\015ushed)g(from)e(the)h(TLB.)g(The)g(MIPS)g(hardw)o(are)f(do)q(es)h
(not)g(pro)o(vide)g(primitiv)o(es)h(to)e(do)h(these)g(op)q(er-)79
354 y(ations,)e(so)h(they)f(m)o(ust)g(b)q(e)h(p)q(erformed)g(b)o(y)f(soft)o
(w)o(are.)k(F)l(urthermore,)14 b(the)i(non-coheren)o(t)f(instruction)79
410 y(and)k(data)f(cac)o(hes)h(of)f(the)h(MIPS)g(arc)o(hitecture)g(require)g
(that)f(sp)q(ecial)j(care)d(b)q(e)h(tak)o(en)g(when)g(pages)79
467 y(used)g(for)e(program)f(text)h(are)h(reused.)27 b(F)l(or)17
b(example,)i(as)e(is)i(common)e(on)g(mac)o(hines)i(with)f(split)g(in-)79
523 y(struction)d(and)g(data)f(cac)o(hes,)h(initialization)i(of)d(these)h
(pages)g(will)h(not)e(a\013ect)g(an)o(y)h(instruction)g(cac)o(he)79
579 y(lines)k(that)d(w)o(ere)g(deriv)o(ed)i(from)e(them.)24
b(Therefore,)16 b(if)h(stale)g(v)m(alues)h(for)e(these)h(pages)f(still)i
(reside)g(in)79 636 y(the)f(instruction)h(cac)o(he,)f(a)g(cac)o(he)g(\015ush)
g(is)g(required)h(to)e(ensure)i(that)e(the)g(curren)o(t)h(instructions)h(are)
79 692 y(read.)79 836 y Fu(3.2)70 b(Ev)n(en)n(ts)79 937 y Fo(In)21
b(this)f(section)g(w)o(e)f(de\014ne)i(the)e(actions)h(that)f(o)q(ccur)h(in)g
(Aegis)g(during)h(exception)f(and)g(in)o(terrupt)79 994 y(pro)q(cessing)e
(and)f(what)f(is)i(required)g(to)e(p)q(erform)g(an)h(up)q(call.)27
b(Exceptions)17 b(are)g(sync)o(hronous)g(ev)o(en)o(ts)79 1050
y(corresp)q(onding)h(to)e(the)h(curren)o(t)g(computation)g(\(e.g.,)e(a)i(TLB)
g(miss\).)25 b(In)o(terrupts,)17 b(in)g(con)o(trast,)f(are)79
1106 y(async)o(hronous,)f(and)g(caused)g(b)o(y)g(external)h(ev)o(en)o(ts:)j
(they)c(ma)o(y)f(or)h(ma)o(y)f(not)g(b)q(e)i(asso)q(ciated)f(with)g(the)79
1163 y(curren)o(t)f(pro)q(cess.)19 b(Up)q(calls)c(transfer)e(the)h(program)e
(coun)o(ter)h(from)g(one)g(domain)h(in)o(to)f(another.)19 b(They)79
1219 y(are)c(the)h(building)h(blo)q(c)o(ks)f(of)f(IPC.)150
1276 y(The)23 b(exok)o(ernel)g(forw)o(ards)f(all)i(hardw)o(are)e(exceptions)h
(except)h(system)e(calls)i(and)f(in)o(terrupts.)79 1332 y(Generally)l(,)16
b(eac)o(h)f(exception)g(or)f(in)o(terrupt)h(m)o(ust)f(ha)o(v)o(e)g(a)g
Fn(save)h(ar)n(e)n(a)g Fo(to)e(hold)j(state.)j(W)l(e)14 b(lo)q(ok)h(at)f(t)o
(w)o(o)79 1389 y(metho)q(ds)20 b(for)f(managing)h(these)f(sa)o(v)o(e)g
(areas.)32 b(The)20 b(\014rst)f(metho)q(d)h(is)g(to)f(treat)g(exceptional)i
(ev)o(en)o(ts)79 1445 y(as)e(function)h(calls)g(and)f(dynamically)i(allo)q
(cate)e(an)g(activ)m(ation)h(record)f(as)f(eac)o(h)h(o)q(ccurs.)32
b(Unfortu-)79 1502 y(nately)l(,)21 b(dynamic)f(managemen)o(t)e(adds)h(o)o(v)o
(erhead)f(to)h(the)g(base)g(case)g(\(e.g.,)f(it)h(requires)h(c)o(hec)o(ks)f
(for)79 1558 y(stac)o(k)c(o)o(v)o(er\015o)o(w,)e(etc.\).)19
b(The)c(alternativ)o(e)g(is)g(to)f(disallo)o(w)i(\\recursion")f(in)h(these)f
(ev)o(en)o(ts)f(and)h(to)f(stat-)79 1615 y(ically)j(allo)q(cate)f(an)e(activ)
m(ation)i(record)e(for)h(eac)o(h)f(p)q(ossible)j(ev)o(en)o(t)e(that)f(can)h
(o)q(ccur)g(sim)o(ultaneously)l(.)1860 1598 y Fh(1)79 1671
y Fo(Recursion)j(in)g(this)f(con)o(text)f(means)g(that)g(handlers)i(cannot)e
(cause)h(or)f(incur)h(an)g(exceptional)h(ev)o(en)o(t)79 1727
y(of)f(the)g(t)o(yp)q(e)g(they)g(w)o(ere)f(pro)q(cessing.)26
b(F)l(or)16 b(example,)i(an)f(exception)h(handler)g(dealing)g(with)f(in)o
(teger)79 1784 y(o)o(v)o(er\015o)o(w)d(m)o(ust)h(not)g(itself)h(incur)g(an)f
(in)o(teger)h(o)o(v)o(er\015o)o(w)e(exception.)150 1840 y(The)21
b(exok)o(ernel)h(statically)g(allo)q(cates)f(ev)o(en)o(t)g(activ)m(ation)h
(records.)37 b(These)21 b(activ)m(ation)h(records)79 1897 y(are)c(sp)q
(eci\014ed)j(as)d(ph)o(ysical)h(memory)f(lo)q(cations)h(at)e(pro)q(cess)i
(creation)f(\(they)g(can)g(b)q(e)h(subsequen)o(tly)79 1953
y(c)o(hanged\);)d(they)g(are)f(authorized)i(through)e(capabilities,)j(are)e
(36)f(b)o(ytes)g(in)i(size,)f(and)g(cannot)g(strad-)79 2010
y(dle)k(page)d(b)q(oundaries.)30 b(In)19 b(the)f(case)g(of)g(exceptions,)h
(applications)h(are)d(exp)q(ected)j(to)d(refrain)h(from)79
2066 y(incurring)j(additional)f(exceptions)f(during)h(exception)g(handling.)
31 b(The)19 b(ca)o(v)o(eat)f(to)g(this)h(constrain)o(t)79 2123
y(is)f(user-TLB)h(exceptions.)27 b(It)17 b(w)o(ould)h(b)q(e)g(o)o(v)o(erly)f
(restrictiv)o(e)h(to)f(force)g(applications)i(to)e(a)o(v)o(oid)g(TLB)79
2179 y(misses)g(while)h(pro)q(cessing)f(general)f(exceptions,)i(therefore)d
(Aegis)i(allo)o(ws)f(the)h(de\014nition)h(of)d(a)h(sepa-)79
2236 y(rate)g(TLB)g(miss)g(area.)22 b(In)o(terrupt)16 b(handlers)h(are)e
(either)i(called)h(with)e(the)g(giv)o(en)g(in)o(terrupt)h(disabled)79
2292 y(or)e(m)o(ust)f(arrange)f(that)h(subsequen)o(t)i(in)o(terrupts)e(of)h
(the)f(same)h(t)o(yp)q(e)f(will)j(not)d(o)o(v)o(erwrite)g(the)h(curren)o(t)79
2348 y(in)o(terrupt)20 b(state.)32 b(F)l(or)19 b(example,)i(in)f(the)g(case)f
(of)g(a)g(net)o(w)o(ork)g(in)o(terrupt)g(handler,)j(Aegis)e(will)h(not)79
2405 y(v)o(ector)f(subsequen)o(t)i(net)o(w)o(ork)d(in)o(terrupts)i(to)f(the)h
(application)h(un)o(til)g(the)e(application)j(is)e(\014nished)79
2461 y(pro)q(cessing)c(the)e(previous)h(one.)p 79 2542 720
2 v 131 2569 a Fg(1)149 2585 y Ff(This)j(organization)j(is)e(analogous)h(to)e
(early)h(v)o(ersions)g(of)f(F)o(OR)m(TRAN)f(that,)i(b)q(ecause)g(they)g(did)g
(not)f(supp)q(ort)79 2631 y(recursion,)c(pre-allo)q(cated)g(activ)n(ations)h
(records)d(at)g(compile)i(time.)957 2817 y Fo(53)p eop
%%Page: 54 56
54 55 bop 150 34 a Fo(W)l(e)15 b(note)f(that)g(applications)j(that)d(wish)h
(to)f(extend)h(these)g(seman)o(tics)g(can)g(do)f(so)h(through)f(\\pro-)79
90 y(logue")e(co)q(de)g(that)e(manages)g(a)h(stac)o(k)g(of)f(ev)o(en)o(t)h
(sa)o(v)o(e)g(areas:)17 b(when)11 b(an)g(exception)i(or)d(in)o(terrupt)h(o)q
(ccurs,)79 147 y(its)17 b(state)f(is)h(copied)h(to)d(a)i(new)f(ev)o(en)o(t)h
(activ)m(ation)g(record;)g(after)e(this)i(p)q(oin)o(t,)g(additional)h(ev)o
(en)o(ts)e(can)79 203 y(o)q(ccur)g(without)f(o)o(v)o(erwriting)g(the)g
(previous)h(state.)79 325 y Fp(3.2.1)56 b(Exceptions)79 411
y Fo(T)l(o)15 b(forw)o(ard)f(an)h(exception,)h(Aegis:)148 505
y Fc(\017)22 b Fo(Sa)o(v)o(es)12 b(three)h(scratc)o(h)f(registers)g(in)o(to)h
(an)f(agreed-up)q(on)h(sa)o(v)o(e)f(area.)18 b(T)l(o)13 b(a)o(v)o(oid)f(TLB)h
(exceptions,)193 561 y(Aegis)j(do)q(es)f(this)h(op)q(eration)f(using)h(ph)o
(ysical)h(addresses.)148 655 y Fc(\017)22 b Fo(Loads)f(the)h(exception)g
(program)e(coun)o(ter,)i(the)g(last)f(virtual)h(address)f(that)g(failed)h(to)
f(ha)o(v)o(e)193 711 y(a)e(v)m(alid)i(translation,)f(and)g(the)g(cause)f(of)g
(the)h(exception)g(\(included)i(in)e(this)g(is)g(information)193
768 y(ab)q(out)h(whether)g(the)f(exception)i(o)q(ccurred)g(in)f(a)g(branc)o
(h-dela)o(y)g(slot)g(and,)h(on)f(co-pro)q(cessor)193 824 y(faults,)15
b(whic)o(h)h(co-pro)q(cessor)f(w)o(as)g(resp)q(onsible\).)148
918 y Fc(\017)22 b Fo(Uses)f(the)f(exception)i(cause)f(to)e(p)q(erform)i(an)f
(indirect)i(jump)f(to)f(a)g(user-sp)q(eci\014ed)j(program)193
975 y(coun)o(ter)11 b(v)m(alue;)j(execution)f(resumes)e(with)h(the)g
(appropriate)f(p)q(ermissions)i(set)f(\(e.g.,)e(in)o(terrupts)193
1031 y(are)15 b(re-enabled\).)79 1125 y(The)23 b(application)i(is)e(then)g
(resp)q(onsible)i(for)d(handling)i(the)f(exception)h(and)f(restoring)f(an)o
(y)g(state)79 1181 y(that)17 b(w)o(as)g(sa)o(v)o(ed)g(during)i(exception)f
(forw)o(arding.)27 b(After)17 b(pro)q(cessing)h(the)g(exception,)h
(applications)79 1238 y(resume)e(execution)g(directly)g(or)f(initiate)h(a)f
(system)f(call)j(that)d(will)j(restore)d(sa)o(v)o(ed)h(registers)f(and)i(set)
79 1294 y(the)e(program)e(coun)o(ter)h(to)f(a)h(sp)q(eci\014ed)i(address.)k
(Allo)o(wing)15 b(applications)h(to)e(return)g(from)f(their)i(o)o(wn)79
1351 y(exceptions)20 b(\(without)d(k)o(ernel)i(in)o(terv)o(en)o(tion\))g
(requires)f(that)g(Aegis)g(ensure)h(that)f(all)h(state)e(it)h(sa)o(v)o(es)79
1407 y(b)q(e)d(a)o(v)m(ailable)h(for)e(user)g(reconstruction.)20
b(The)14 b(means)g(that)g(all)h(registers)f(that)g(are)f(sa)o(v)o(ed)h(m)o
(ust)g(b)q(e)h(in)79 1464 y(user-accessible)j(memory)d(lo)q(cations,)g(etc.)
150 1520 y(Curren)o(tly)l(,)e(Aegis)g(dispatc)o(hes)g(exceptions)h(in)f(18)f
(instructions.)20 b(In)13 b(the)g(absence)g(of)f(cac)o(he)h(misses)79
1577 y(these)f(18)f(instructions)h(consume)g(18)f(clo)q(c)o(k)h(cycles.)20
b(Figure)12 b(3-1)f(sho)o(ws)f(the)i(MIPS)g(assem)o(bly)f(required)79
1633 y(to)18 b(do)g(this)h(\(the)e(data-structure)h(\014elds)h(it)g(accesses)
f(are)g(de\014ned)h(in)g(Section)g(3.3\).)28 b(The)18 b(lo)o(w-lev)o(el)79
1689 y(nature)13 b(of)f(Aegis)i(allo)o(ws)f(an)f(extremely)h(e\016cien)o(t)h
(implemen)o(tation:)20 b(exception)14 b(forw)o(arding)e(requires)79
1746 y(almost)21 b Fn(four)i(times)e Fo(few)o(er)f(instructions)j(than)e(the)
g(most)f(highly-tuned)k(implemen)o(tation)e(in)g(the)79 1802
y(literature)15 b([97)o(].)k(P)o(art)12 b(of)i(the)f(reason)h(for)f(this)h
(impro)o(v)o(emen)o(t)f(is)i(that)e(Aegis)h(do)q(es)g(not)f(used)i(mapp)q(ed)
79 1859 y(data)f(structures,)g(and)g(so)g(do)q(es)h(not)f(ha)o(v)o(e)g(to)f
(carefully)j(sep)q(erate)e(out)g(k)o(ernel)h(TLB)g(misses)g(from)e(the)79
1915 y(more)19 b(general)g(class)f(of)h(exceptions)g(in)g(its)g(exception)h
(dem)o(ultiplexing)h(routine.)30 b(Another)19 b(reason)79 1972
y(for)g(the)g(impro)o(v)o(emen)o(t)g(is)g(the)h(w)o(a)o(y)e(in)i(whic)o(h)f
(the)h(ExOS)f(ABI)h(allo)o(ws)f(application-lev)o(el)j(co)q(de)e(to)79
2028 y(manage)15 b(the)g(sa)o(ving)h(and)f(restoring)g(of)g(registers)g(as)g
(needed.)79 2150 y Fp(3.2.2)56 b(TLB)18 b(exceptions)79 2236
y Fo(On)c(the)f(MIPS,)f(the)h(critical)h(b)q(ottlenec)o(k)g(in)f(Aegis)g(is)h
(the)e(handling)j(of)d(user)h(TLB)g(misses:)19 b(the)13 b(en)o(tire)79
2292 y(system)h(will)i(b)q(e)f(un)o(usable)h(if)e(these)h(exceptions)g(are)f
(ine\016cien)o(t.)21 b(W)l(e)14 b(discuss)i(ho)o(w)d(applications)j(can)79
2349 y(e\013ectiv)o(ely)d(handle)h(their)e(o)o(wn)f(TLB)i(misses)f(and)g(ho)o
(w)g(the)g(cost)f(of)h(this)g(handling)i(has)d(b)q(een)i(\(largely\))79
2405 y(eliminated.)79 2525 y Fl(Supp)q(orting)19 b(application-)q(lev)o(el)h
(virtual)f(mem)n(or)o(y)79 2611 y Fo(An)i(application's)g(virtual)g(address)f
(space)g(is)h(partitioned)f(in)o(to)g(t)o(w)o(o)f(segmen)o(ts.)34
b(The)20 b(\014rst)g(holds)79 2667 y(normal)c(application)g(data)f(and)g(co)q
(de.)21 b(The)15 b(second)h(segmen)o(t)f(is)g(used)h(to)f(hold)h(exception)g
(handling)957 2817 y(54)p eop
%%Page: 55 57
55 56 bop 293 576 a Fd(#)12 b(F)m(orw)o(ard)g(an)g(exception)h(to)g(the)g
(curren)o(t)h(en)o(vironmen)o(t.)293 626 y(#)293 725 y(#)e(1.)g(Separate)h
(in)o(terrupts)h(and)e(system)g(calls)g(from)f(user)p Fb(\000)p
Fd(exceptions.)293 775 y(mfc0)48 b(k0,)12 b(c0)p 537 775 13
2 v 15 w(cause)225 b(#)12 b(get)h(cause)h(of)d(exception)293
825 y(nop)511 b(#)12 b(dela)o(y)g(slot)293 875 y(and)62 b(k1,)12
b(k0,)f(~\(8)p Fa(<<)p Fd(2\))i(&)g(255)36 b(#)12 b(mask)f(out)i(syscalls)f
(and)h(in)o(terrupts)293 925 y(b)q(eq)65 b(k1,)12 b(zero,)g(sys)p
642 925 V 16 w(or)p 695 925 V 15 w(in)o(t)113 b(#)12 b(jump)f(to)h(separate)i
(exception)f(handler)293 1024 y(#)f(2.)g(Load)g(p)q(oin)o(ter)g(to)h(curren)o
(t)h(pro)q(cess)293 1074 y(lui)82 b(k1,)12 b(HI\(PSW)p 647
1074 V 15 w(ENV\))205 b(#)12 b(load)g(upp)q(er)i(bits)293 1124
y(lw)87 b(k1,)12 b(LO\(PSW)p 659 1124 V 15 w(ENV\)\(k1\))118
b(#)12 b(load)g(p)q(oin)o(ter)293 1174 y(#)g(3.)g(Index)g(in)o(to)g(user)p
Fb(\000)p Fd(exception)j(v)o(ector)e(to)g(\014nd)f(exception)h(p)q(c)h(and)e
(sa)o(v)o(e)h(area.)293 1223 y(and)62 b(k0,)12 b(k0,)f(254)353
b(#)12 b(remo)o(v)o(e)g(upp)q(er)i(bits)e(of)g(cause)293 1273
y(add)62 b(k0,)12 b(k1,)f(k0)373 b(#)12 b(index)h(to)f(exception)i(handlers)
293 1323 y(lw)87 b(k1,)12 b(GENX)p 614 1323 V 15 w(SA)-5 b(VE)p
737 1323 V 16 w(AREA\(k1\))24 b(#)12 b(load)g(a)g(p)q(oin)o(ter)h(to)f(the)h
(exception)h(sa)o(v)o(e)e(area)293 1373 y(lw)87 b(k0,)12 b(ENV)p
581 1373 V 15 w(XH\(k0\))240 b(#)12 b(load)g(p)q(oin)o(ter)h(to)f(exception)h
(handler)293 1473 y(#)f(4.)g(Sa)o(v)o(e)g(3)g(scratc)o(h)i(registers.)293
1522 y(sw)75 b(a0,)11 b(A0)p 533 1522 V 15 w(SA)-5 b(VE\(k1\))293
1572 y(sw)75 b(a1,)11 b(A1)p 533 1572 V 15 w(SA)-5 b(VE\(k1\))293
1622 y(sw)75 b(a2,)11 b(A2)p 533 1622 V 15 w(SA)-5 b(VE\(k1\))293
1722 y(#)12 b(5.)g(Load)g(exception)h(cause,)g(exception)g(p)q(c)g(and)g
(exception)g(virtual)e(address.)293 1771 y(mfc0)48 b(a0,)12
b(c0)p 536 1771 V 15 w(ep)q(c)194 b(#)12 b(load)g(exception)h(program)e(coun)
o(ter)293 1821 y(mfc0)48 b(a1,)12 b(c0)p 536 1821 V 15 w(tlbbad)136
b(#)12 b(load)g(virtual)g(address)h(of)f(faulting)f(instruction)293
1871 y(mfc0)48 b(a2,)12 b(c0)p 536 1871 V 15 w(cause)158 b(#)12
b(load)g(the)h(cause)h(register)f(again)293 1971 y(#)f(6.)g(Return)h(from)d
(exception)k(\(jump)d(to)h(user)h(co)q(de)h(and)e(reset)i(in)o(terrupts\).)
293 2021 y(j)87 b(k0)273 b(#)12 b(jump)f(to)i(exception)g(handler)293
2070 y(rfe)369 b(#)12 b(return)i(from)d(exception)213 2197
y Fo(Figure)16 b(3-1:)j(Assem)o(bly)d(co)q(de)g(to)e(p)q(erform)h(exception)h
(forw)o(arding)f(\(18)f(instructions\))957 2817 y(55)p eop
%%Page: 56 58
56 57 bop 79 34 a Fo(co)q(de,)13 b(page-tables,)f(etc.)19 b(The)12
b(exok)o(ernel)g(allo)o(ws)g(mappings)g(in)g(the)g(second)g(segmen)o(t)f(to)g
(b)q(e)h(\\pinned")79 90 y(through)k Fn(guar)n(ante)n(e)n(d)f
Fo(mappings.)22 b(A)15 b(miss)h(on)g(a)f(guaran)o(teed)g(mapping)h(will)h(b)q
(e)g(handled)g(b)o(y)e(Aegis,)79 147 y(in)o(visibly)k(to)d(the)g
(application.)24 b(This)17 b(frees)f(the)h(application)g(from)f(dealing)h
(with)g(the)f(in)o(tricacies)i(of)79 203 y(b)q(o)q(ot-strapping)13
b(the)g(TLB)g(and)f(exception)i(handlers)f(that)f(can)h(tak)o(e)e(TLB)i
(misses.)20 b(On)13 b(a)f(TLB)h(miss,)79 260 y(the)j(follo)o(wing)g(actions)f
(o)q(ccur:)135 354 y(1.)22 b(The)f(exok)o(ernel)g(c)o(hec)o(ks)g(whic)o(h)h
(segmen)o(t)e(the)h(virtual)g(address)f(resides)i(in.)37 b(If)21
b(it)g(is)g(in)g(the)193 410 y(standard)15 b(user)g(segmen)o(t,)f(the)i
(exception)g(is)f(forw)o(arded)g(directly)h(to)f(the)g(application.)21
b(If)16 b(it)f(is)193 467 y(in)i(the)g(second)g(region,)g(Aegis)g(\014rst)f
(c)o(hec)o(ks)h(to)e(see)i(if)g(it)g(is)g(a)f(guaran)o(teed)g(mapping:)23
b(if)17 b(so,)f(it)193 523 y(installs)h(the)e(TLB)h(en)o(try)e(and)i(con)o
(tin)o(ues,)f(otherwise)h(it)f(forw)o(ards)f(it)h(to)g(the)g(application.)135
617 y(2.)22 b(The)d(application)i(lo)q(oks)e(up)h(the)f(virtual)h(address)f
(in)h(its)f(page-table)g(structure,)h(and)f(if)g(the)193 673
y(access)d(is)g(not)f(allo)o(w)o(ed)h(raises)f(the)h(appropriate)g(exception)
g(\(e.g.,)e(\\segmen)o(tation)h(fault"\).)20 b(If)193 730 y(the)e(mapping)h
(is)f(v)m(alid,)i(the)f(application)g(constructs)f(the)g(appropriate)g(TLB)g
(en)o(try)g(and)g(its)193 786 y(asso)q(ciated)e(capabilit)o(y)g(and)g(in)o(v)
o(ok)o(es)f(the)g(appropriate)g(exok)o(ernel)h(system)f(routine.)135
880 y(3.)22 b(The)e(exok)o(ernel)f(c)o(hec)o(ks)h(that)e(the)i(giv)o(en)f
(capabilit)o(y)i(corresp)q(onds)e(to)g(the)g(access)g(righ)o(ts)g(re-)193
936 y(quested)f(b)o(y)e(the)h(application.)27 b(If)17 b(so,)g(the)g(mapping)h
(is)f(installed)i(in)f(the)f(TLB)g(and)g(soft)o(w)o(are)193
993 y(TLB)f(\(STLB\))g([9,)f(49];)g(con)o(trol)h(is)h(then)f(returned)g(to)g
(the)g(application.)23 b(Otherwise)17 b(an)f(error)193 1049
y(is)g(returned.)135 1143 y(4.)22 b(The)16 b(application)g(p)q(erforms)f
(clean)o(up)i(and)e(resumes)g(execution.)150 1237 y(The)g(ob)o(vious)g(c)o
(hallenge)i(in)f(supp)q(orting)f(application-lev)o(el)j(virtual)e(memory)e
(is)i(making)f(it)g Fn(fast)p Fo(.)79 1293 y(W)l(e)k(accomplish)h(this)f(b)o
(y)f(o)o(v)o(erla)o(ying)g(the)h(hardw)o(are)f(TLB)h(with)f(a)g(large)h(soft)
o(w)o(are)e(TLB)h(\(STLB\))79 1350 y(to)h(absorb)f(capacit)o(y)h(misses)g([9)
o(,)g(49)o(].)30 b(On)20 b(a)e(TLB)h(miss,)h(Aegis)f(\014rst)f(c)o(hec)o(ks)h
(to)f(see)h(whether)g(the)79 1406 y(required)d(mapping)e(is)h(in)g(the)f
(STLB;)g(if)g(so,)g(Aegis)g(installs)i(it)e(and)g(resumes)g(execution.)21
b(Otherwise,)79 1463 y(the)16 b(miss)g(is)g(forw)o(arded)f(to)g(the)g
(application.)23 b(The)16 b(e\016ciency)h(gains)e(the)h(STLB)g(enables)h(are)
e(b)q(elied)79 1519 y(b)o(y)h(the)f(mo)q(dest)g(exp)q(enditure)i(of)e(memory)
g(it)g(requires.)150 1576 y(W)l(e)i(brie\015y)h(discuss)g(STLB)f(structuring)
g(issues;)h(these)f(insigh)o(ts,)g(while)h(not)f(new,)g(are)f(not)h(dis-)79
1632 y(cussed)23 b(elsewhere)g(in)g(the)e(literature:)34 b(w)o(e)21
b(explore)i(them)f(to)f(remo)o(v)o(e)g(the)h(curren)o(t)f(necessit)o(y)i(of)
79 1689 y(re-in)o(v)o(en)o(ting)17 b(the)e(STLB)h(design)g(space.)150
1745 y(A)o(t)i(a)h(high-lev)o(el)i(there)e(are)g(t)o(w)o(o)e(comp)q(eting)j
(STLB)g(designs:)28 b(a)18 b(uni\014ed)j(STLB,)e(m)o(ultiplexed)79
1802 y(among)e(all)g(applications)i(and)e(a)f(priv)m(ate,)i(p)q(er-pro)q
(cess)g(STLB.)f(The)g(imp)q(ortan)o(t)f(tradeo\013s)g(are)h(dis-)79
1858 y(cussed)f(b)q(elo)o(w.)79 1952 y Fl(Uni\014ed)j(STLB:)k
Fo(this)18 b(structure)g(shares)f(space)h(w)o(ell)h(\(in)f(a)f(manner)h
(similar)h(uni\014ed)g(instruction)193 2008 y(and)13 b(data)f(cac)o(hes\),)h
(and)g(its)g(size)g(and)g(lo)q(cation)h(are)e(easily)i(\\\014xed")f(at)f
(compile)i(time,)g(allo)o(wing)193 2065 y(these)d(v)m(alues)i(to)d(b)q(e)i
(enco)q(ded)h(as)d(constan)o(ts.)18 b(It)11 b(has)g(three)g(main)h(disadv)m
(an)o(tages:)18 b(\(1\))10 b(m)o(ultiple,)193 2121 y(p)q(ossibly)k(similar,)g
(address)e(streams)g(m)o(ust)f(b)q(e)i(merged,)g(increasing)h(the)e
(probabilit)o(y)i(of)e(patho-)193 2178 y(logical)18 b(\\w)o(orst-case")c(b)q
(eha)o(vior;)k(\(2\))d(a)h(more)g(complicated)i(hash)e(function)i(\(since,)f
(again,)f(it)193 2234 y(m)o(ust)d(merge)g(m)o(ultiple)i(address)f(streams\);)
e(and)i(\(3\))e(its)i(large)f(size)h(can)g(mak)o(e)f(\015ushing)h(in)o(v)m
(alid)193 2291 y(mappings)i(exp)q(ensiv)o(e.)79 2384 y Fl(Priv)m(ate)i(STLB:)
23 b Fo(this)d(structure)f(allo)o(ws)g(an)g(e\016cien)o(t)h(hash)f(function)h
(and)f(eliminates)h(the)g(need)193 2441 y(to)15 b(merge)h(m)o(ultiple)i
(address)d(streams.)21 b(Additionally)l(,)d(since)f(the)f(STLB)h(only)f(maps)
g(a)f(single)193 2497 y(address)f(space,)f(the)h(con)o(text)f(iden)o
(ti\014er)i(is)f(implicit)i(in)e(the)f(structure,)h(remo)o(ving)f(the)g
(require-)193 2554 y(men)o(t)j(that)f(the)h(STLB)h(b)q(e)f(\015ushed)h(when)g
(the)f(con)o(text)f(iden)o(ti\014er)j(is)e(reused.)23 b(There)16
b(are)g(t)o(w)o(o)193 2610 y(disadv)m(an)o(tages:)24 b(\(1\))16
b(large)h(priv)m(ate)h(STLBs)g(w)o(aste)e(space)h(and)g(small)h(priv)m(ate)g
(STLBs)f(w)o(aste)193 2667 y(time,)d(and)f(\(2\))f(for)g(e\016cien)o(t)i
(hashing)g(either)g(there)f(can)g(only)h(b)q(e)f(a)g(single)i(STLB)e(size,)h
(\014xed)g(at)957 2817 y(56)p eop
%%Page: 57 59
57 58 bop 193 34 a Fo(compile)16 b(time,)f(or)g(the)g(STLB)g(hash)g(function)
h(m)o(ust)e(b)q(e)h(generated)g(\\on)g(the)g(\015y")f(at)g(run)o(time.)193
90 y(The)g(former)g(approac)o(h)f(is)i(in\015exible;)i(the)d(latter)g(can)g
(increase)h(con)o(text-switc)o(hing)f(costs)g(\(the)193 147
y(MIPS)i(TLB)g(miss)g(handler)h(resides)f(at)f(a)g(\014xed)i(address,)e
(forcing)h(sp)q(ecialized)i(TLB)e(handlers)193 203 y(to)f(b)q(e)h(copied)g
(to)f(this)g(lo)q(cation)h(on)f(ev)o(ery)g(con)o(text-switc)o(h\).)193
279 y(Less)e(imp)q(ortan)o(tly)l(,)g(the)f(simpler)i(hash)e(fucn)o(tion)h
(that)f(can)g(b)q(e)h(used)g(in)g(a)f(priv)m(ate)h(STLB)g(allo)o(ws)193
335 y(ranges)h(of)f(virtual)i(addresses)f(to)g(b)q(e)g(\015ushed)h(more)f
(e\016cien)o(tly)h(than)f(in)h(a)f(uni\014ed)i(STLB.)e(It)g(is)193
391 y(not)h(clear)h(if)f(this)h(di\013erence)g(is)g(imp)q(ortan)o(t)f
(outside)h(the)f(con)o(text)g(of)f(micro-b)q(enc)o(hmarks.)150
485 y(Curren)o(tly)21 b(w)o(e)f(use)g(a)g(uni\014ed)i(STLB.)f(T)l(o)f(impro)o
(v)o(e)g(hashing)h(co)o(v)o(erage)e(and)i(to)f(decrease)g(the)79
542 y(n)o(um)o(b)q(er)h(of)e(TLB)h(\015ushes)h(that)e(o)q(ccur)h(when)h(con)o
(text)e(iden)o(ti\014ers)i(are)f(recycled,)i(eac)o(h)e(pro)q(cess)g(is)79
598 y(asso)q(ciated)d(with)g(an)f(11)g(bit)g(tag)g(\014eld:)23
b(this)17 b(\014eld)g(is)g(constan)o(t)e(o)o(v)o(er)h(the)g(pro)q(cess')g
(life-time,)i(and)f(is)79 655 y(recycled)g(infrequen)o(tly)l(.)k(T)l(o)15
b(decrease)g(the)g(lik)o(eliho)q(o)q(d)j(of)c(\\w)o(orst-case")f(hashing)j
(collisions,)g(the)f(tag)79 711 y(is)g(selected)h(randomly)e(from)g(a)g
(collection)i(of)e(2)914 695 y Fh(11)959 711 y Fc(\000)9 b
Fo(1)14 b(tags.)k(The)d(STLB)g(con)o(tains)f(4096)f(en)o(tries)i(of)f(8)79
768 y(b)o(ytes)i(eac)o(h;)f(it)h(is)h(a)e(direct-mapp)q(ed,)i(resides)f(in)h
(unmapp)q(ed)g(ph)o(ysical)g(memory)l(,)e(and)h(on)f(an)h(STLB)79
824 y(\\hit",)k(replaces)g(the)f(desired)i(mapping)f(in)g(18)e(instructions)i
(|)g(the)f(additional)h(load)g(it)f(adds)g(\(to)79 880 y(c)o(hec)o(k)d(the)g
(virtual)h(address)e(space)h(tag\))f(resides)i(in)f(the)g(same)f(cac)o(he)h
(line)i(as)d(the)h(mapping,)g(and)g(so)79 937 y(do)q(es)g(not)f(add)g
(additional)i(cac)o(he)e(miss)h(o)o(v)o(erhead.)150 993 y(As)h(dictated)g(b)o
(y)g(the)g(exok)o(ernel)g(principle)j(of)c(exp)q(osing)i(k)o(ernel)g(b)q(o)q
(ok-k)o(eeping)g(structures,)e(the)79 1050 y(STLB)j(is)g(mapp)q(ed)g(using)g
(a)e(w)o(ell-kno)o(wn)i(capabilit)o(y)l(,)h(allo)o(wing)f(applications)h(to)e
(e\016cien)o(tly)h(prob)q(e)79 1106 y(for)c(en)o(tries,)g(etc.)150
1163 y(The)h(structure)g(of)f(our)g(STLB)i(is)f(giv)o(en)g(in)h(Figure)f
(3-2;)f(the)h(assem)o(bly)g(co)q(de)g(required)h(to)e(index)79
1219 y(in)o(to)i(it)f(is)g(giv)o(en)h(in)g(Figure)f(3-3.)22
b(T)l(o)16 b(a)o(v)o(oid)g(the)g(w)o(orst-case)f(b)q(eha)o(vior)h(of)g(a)g
(direct)g(mapp)q(ed)h(STLB,)79 1276 y(w)o(e)h(will)h(lik)o(ely)g(mo)o(v)o(e)e
(to)g(a)g(t)o(w)o(o-w)o(a)o(y)e(set-asso)q(ciativ)o(e)j(structure)f(as)h(the)
f(implemen)o(tation)i(matures)79 1332 y(\(as)c(is)h(used)h(in)f(Rialto)g([33)
o(])f(and)h(P)l(A-RISC)h(op)q(erating)f(systems)f([49)o(]\).)20
b(Another)c(alternativ)o(e)f(is)h(the)79 1389 y(use)g(of)f(a)g(\\victim)h
(cac)o(he")f([52)o(])g(to)f(absorb)h(STLB)h(con\015icts.)150
1445 y(As)i(noted)g(in)g(Huc)o(k)g([49)o(],)g(a)o(v)o(oiding)g(cac)o(he)g
(misses)h(is)f(crucial)h(for)e(e\016cien)o(t)i(TLB)f(replacemen)o(t.)79
1501 y(This)g(constrain)o(t)f(can)h(ha)o(v)o(e)f(a)g(noticeable)i(impact)e
(on)h(TLB)g(lo)q(okup.)27 b(F)l(or)16 b(example,)j(curren)o(tly)f(w)o(e)79
1558 y(exp)q(end)13 b(one)d(cycle)i(aligning)h(the)d Fj(tlbctx)g
Fo(register)h(to)f(8-b)o(ytes;)h(this)h(instruction)f(could)h(b)q(e)f
(eliminated)79 1614 y(b)o(y)k(separating)f(the)g(STLB)h(tag)e(from)g(the)i
(en)o(try)e(it)i(maps.)k(Ho)o(w)o(ev)o(er,)13 b(doing)i(so)f(w)o(ould)g(put)g
(them)h(on)79 1671 y(di\013eren)o(t)h(cac)o(he)f(lines)i(and)f(could)g(th)o
(us)f(result)g(in)h(an)g(additional)g(cac)o(he)g(miss.)150
1727 y(As)f(a)f(philosophical)k(tie-in,)e(the)f(reader)g(should)h(carefully)g
(note)e(the)h(large)g(n)o(um)o(b)q(er)g(of)g(tradeo\013s)79
1784 y(in)o(v)o(olv)o(ed)f(in)f(realizing)h(an)f(abstraction)f(as)g(simple)h
(as)g(an)f(STLB:)h(the)f(tradeo\013s)f(made)i(in)g(implemen)o(t-)79
1840 y(ing)j(traditional,)g(high-lev)o(el)h(op)q(erating)f(system)e
(abstractions)h(should)h(b)q(e)g(frigh)o(tening!)150 1897 y(The)j(STLB)g(is)h
(the)e(largest)h(\\non-essen)o(tial")g(abstraction)f(in)i(Aegis.)31
b(Unfortunately)l(,)19 b(despite)79 1953 y(the)f(tradeo\013s)f(in)i(its)f
(design,)h(it)f(app)q(ears)g(to)f(b)q(e)h(required.)29 b(T)l(o)18
b(put)g(a)f(sharp)h(p)q(oin)o(t)g(on)g(it:)25 b(w)o(e)18 b(eat)79
2010 y(dinner)f(with)f(the)f(devil,)h(but)g(hop)q(e)g(the)f(sp)q(o)q(on)g(is)
h(long.)79 2131 y Fp(3.2.3)56 b(In)n(terrupts)79 2217 y Fo(In)o(terrupts)22
b(are)f(caused)h(b)o(y)f(external)h(ev)o(en)o(ts)f(\(e.g.,)h(timers,)h(I/O)f
(devices\).)39 b(F)l(or)21 b(our)g(purp)q(oses,)79 2274 y(the)16
b(only)h(di\013erence)g(b)q(et)o(w)o(een)f(in)o(terrupts)g(and)g(exceptions)h
(is)g(that)e(in)o(terrupts)h(in)o(v)o(olv)o(e)g(sc)o(heduling)79
2330 y(decisions:)32 b(either)21 b(the)f(destination)h(pro)q(cess)f(is)h(\\w)
o(ok)o(en)e(up")i(or)e(the)h(in)o(terrupt)h(is)f(enqueued)i(for)79
2386 y(later)16 b(deliv)o(ery)l(.)23 b(Curren)o(tly)l(,)16
b(Aegis)g(handles)h(only)f(timer)g(in)o(terrupts.)21 b(As)15
b(it)h(is)g(extended)h(to)e(include)79 2443 y(disk)i(and)f(net)o(w)o(ork)f
(driv)o(ers,)g(time-slices)j(will)g(b)q(e)e(accorded)g(a)g(mo)q(dicum)g(of)g
(con)o(trol)f(o)o(v)o(er)g(in)o(terrupt)79 2499 y(deliv)o(ery:)21
b(a)13 b(sequence)h(of)f(bits)g(will)i(b)q(e)f(asso)q(ciated)f(with)h(eac)o
(h)f(time-slice)i(indicating)h(whether)d(it)g(can)79 2556 y(b)q(e)j
(pre-empted)g(b)o(y)g(a)e(particular)i(in)o(terrupt.)150 2612
y(Timer)k(in)o(terrupts)g(denote)f(the)h(b)q(eginning)i(and)d(end)i(of)e
(time-slices,)j(and)e(are)f(deliv)o(ered)i(in)g(a)79 2669 y(manner)d(similar)
i(to)d(exceptions:)26 b(a)18 b(register)g(is)g(sa)o(v)o(ed)f(in)i(the)f(\\in)
o(terrupt)g(sa)o(v)o(e)f(area",)h(the)f(excep-)957 2817 y(57)p
eop
%%Page: 58 60
58 59 bop 193 92 a Fe(struct)11 b Fd(stlb)i Fb(f)293 142 y
Fd(/)p Fb(\003)f Fd(STLB)h(tag:)e(the)i(con)o(ten)o(ts)h(of)e(the)h(TLB)g
(con)o(text)g(register)h(\(c0)p 1346 142 13 2 v 15 w(tlb)q(ctx\))f
Fb(\003)p Fd(/)293 192 y(unsigned)100 b(:2,)552 242 y(vpn:19,)11
b(/)p Fb(\003)h Fd(bad)g(virtual)g(page)g(n)o(um)o(b)q(er)g
Fb(\003)p Fd(/)552 291 y(tag:11;)e(/)p Fb(\003)i Fd(11)g(bit)h(tag)f(asso)q
(ciated)h(\(pseudo)p Fb(\000)p Fd(randomly\))f(with)g(eac)o(h)h(pro)q(cess)h
Fb(\003)p Fd(/)293 341 y(/)p Fb(\003)e Fd(TLB)h(en)o(try)g
Fb(\003)p Fd(/)293 391 y(unsigned)100 b(:8,)91 b(/)p Fb(\003)12
b Fd(reserv)o(ed)i Fb(\003)p Fd(/)552 441 y(g:1,)70 b(/)p Fb(\003)12
b Fd(Global:)e(TLB)j(ignores)f(the)h(PID)g(matc)o(h)e(req)i
Fb(\003)p Fd(/)552 491 y(v:1,)69 b(/)p Fb(\003)12 b Fd(V)m(alid:)e(if)i(not)g
(set,)h(TLBL)g(or)f(TLBS)h(miss)e(o)q(ccurs)p Fb(\003)p Fd(/)552
540 y(d:1,)68 b(/)p Fb(\003)12 b Fd(Dirt)o(y)f Fb(\003)p Fd(/)552
590 y(n:1,)68 b(/)p Fb(\003)12 b Fd(Non)p Fb(\000)p Fd(cac)o(heable.)h
Fb(\003)p Fd(/)552 640 y(pfn:20;)e(/)p Fb(\003)h Fd(P)o(age)g(frame)f(n)o(um)
o(b)q(er)h Fb(\003)p Fd(/)193 690 y Fb(g)p Fd(;)704 817 y Fo(Figure)k(3-2:)j
(STLB)d(structure)79 950 y(tion)h(program)d(coun)o(ter)i(is)g(loaded,)h(and)f
(Aegis)g(jumps)g(to)f(user-sp)q(eci\014ed)j(in)o(terrupt)e(handling)i(co)q
(de)79 1007 y(with)f(in)o(terrupts)g(re-enabled.)25 b(The)17
b(application's)h(handlers)f(are)g(resp)q(onsible)h(for)e(general-purp)q(ose)
79 1063 y(con)o(text-switc)o(hing:)29 b(sa)o(ving)20 b(and)g(restoring)f(liv)
o(e)i(registers,)f(releasing)g(lo)q(c)o(ks,)h(etc.)33 b(The)20
b(time)f(the)79 1120 y(application)i(has)d(to)g(sa)o(v)o(e)g(its)h(state)f
(is)h(b)q(ounded:)28 b(if)19 b(this)h(limit)g(is)f(exceeded,)h(Aegis)g
(destro)o(ys)d(the)79 1176 y(application.)33 b(In)20 b(a)f(more)f(mature)h
(implemen)o(tation)h(the)f(k)o(ernel)h(will)g(simply)h(con)o(text-switc)o(h)d
(the)79 1233 y(application)f(\\b)o(y)e(hand.")79 1354 y Fp(3.2.4)56
b(Up)r(calls)79 1440 y Fo(Aegis)13 b(pro)o(vides)g(an)f Fn(up)n(c)n(al)r(l)g
Fo([25)o(])g(mec)o(hanism)h(as)f(a)f(substrate)h(for)g(implemen)o(ting)i
(e\016cien)o(t)f(IPC)f(mec)o(h-)79 1497 y(anisms)21 b(\(e.g.,)d([12)o(,)h
(48,)g(67]\).)33 b(An)20 b(up)q(call)i(is)e(a)f(ligh)o(t-w)o(eigh)o(t,)j
(cross-domain)e(calling)h(mec)o(hanism.)79 1553 y(Op)q(erationally)l(,)c(an)e
(up)q(call)i(c)o(hanges)f(the)f(v)m(alue)h(of)f(the)g(PC)g(in)h(the)f(caller)
i(to)d(an)h(agreed-up)q(on)h(v)m(alue)79 1609 y(in)j(the)e(callee)i(\(the)e
(\\gate")f([62)o(]\),)h(donates)g(the)h(curren)o(t)f(time-slice,)j(and)d
(installs)i(the)f(destination)79 1666 y(domain's)e(con)o(text)e(\(con)o(text)
h(iden)o(ti\014er,)h(address)f(space)h(tag,)e(and)h(pro)q(cess)g(status)g(w)o
(ord\).)150 1722 y(Tw)o(o)h(\015a)o(v)o(ors)g(of)h(up)q(calls)h(are)f(pro)o
(vided:)24 b Fn(synchr)n(onous)17 b Fo(and)g Fn(asynchr)n(onous)p
Fo(.)24 b(Sync)o(hronous)18 b(up-)79 1779 y(calls)j(transfer)f(o)o(wnership)g
(of)g(the)g(curren)o(t)f(time-slice)j(to)e(the)g(callee;)j(the)d(callee)h
(can)g(return)e(the)79 1835 y(time-slice)24 b(via)e(a)f(sync)o(hronous)h(up)q
(call)h(bac)o(k)e(in)o(to)h(the)f(original)i(caller.)40 b(Async)o(hronous)22
b(up)q(calls)79 1892 y(simply)17 b(donate)f(the)g(remainder)g(of)f(the)h
(curren)o(t)f(time-slice)j(to)d(the)h(callee.)23 b(Both)15
b(implemen)o(tations)79 1948 y(guaran)o(tee)h(t)o(w)o(o)f(imp)q(ortan)o(t)h
(prop)q(erties:)24 b(\(1\))15 b(to)h(applications,)i(an)e(up)q(call)j(is)e
(atomic:)22 b(once)17 b(b)q(egun,)79 2005 y(it)d(will)h(arriv)o(e)f(at)f(the)
g(callee's)i(gate;)e(\(2\))f(the)i(exok)o(ernel)g(will)h(not)e(o)o(v)o
(erwrite)g(an)o(y)g(application-visib)q(le)79 2061 y(register.)23
b(Among)15 b(their)i(adv)m(an)o(tages,)e(these)h(prop)q(erties)h(allo)o(w)f
(the)h(v)m(ast)e(register)h(state)g(of)f(mo)q(dern)79 2118
y(pro)q(cessors)g(to)g(b)q(e)h(used)g(as)e(a)h(temp)q(orary)g(message)g
(bu\013er)g([23)o(].)150 2174 y(Curren)o(tly)l(,)g(our)f(sync)o(hronous)h(up)
q(call)h(implemen)o(tation)g(costs)e(30)g(instructions.)21
b(Because)15 b(Aegis)79 2230 y(implemen)o(ts)k(the)e(bare)g(minim)o(um)h
(required)h(for)d(an)o(y)h(IPC)g(mec)o(hanism,)h(applications)h(can)e(pa)o(y)
g(for)79 2287 y(just)c(the)g(functionalit)o(y)h(they)f(require.)20
b(This)14 b(is)f(a)g(v)o(ery)f(imp)q(ortan)o(t)h(prop)q(ert)o(y)l(,)g(since)h
(it)f(allo)o(ws)g(IPC)g(to)79 2343 y(b)q(e)18 b(optimized)g(for)e
(application-sp)q(eci\014c)k(conditions.)25 b(F)l(or)16 b(example,)h(up)q
(calls)i(b)q(et)o(w)o(een)e(clien)o(ts)g(and)79 2400 y(trusted)i(serv)o(ers)f
(can)g(b)q(e)h(optimized)h(b)o(y)f(allo)o(wing)g(the)f(serv)o(er)h(to)e(sa)o
(v)o(e)h(and)h(restore)e(an)o(y)i(registers)79 2456 y(that)e(it)g(uses,)g
(rather)g(than)f(requiring)j(that)d(the)h(clien)o(t)h(sa)o(v)o(e)e(and)i
(restore)e(its)h(en)o(tire)g(register)g(state)79 2513 y(on)g(ev)o(ery)f(IPC.)
g(T)l(o)g(the)g(b)q(est)h(of)f(our)g(kno)o(wlege,)g(Aegis)h(is)g(the)f
(\014rst)g(op)q(erating)g(system)g(whose)g(IPC)79 2569 y(seman)o(tics)g(allo)
o(w)f(suc)o(h)h(conditions)g(to)f(b)q(e)h(exploited.)150 2626
y(Appro)o(ximately)j(a)f(third)i(of)e(the)g(IPC)h(cost)f(is)h(due)g(to)f(the)
h(fact)f(that)g(the)g(MIPS)h(arc)o(hitecture)79 2682 y(requires)j(that)d(the)
h(system)g(call)i(\\exception")e(b)q(e)h(disam)o(biguated)h(from)d(other)h
(hardw)o(are)f(excep-)957 2817 y(58)p eop
%%Page: 59 61
59 60 bop 293 377 a Fd(#)12 b(Soft)o(w)o(are)g(re\014ll)g(of)g(TLB:)h(uses)g
(an)g(STLB)f(cac)o(he.)293 476 y(#)g(1.)g(Compute)f(hash)i(function)293
526 y(mfc0)48 b(k0,)12 b(c0)p 537 526 13 2 v 15 w(tlb)q(cxt)137
b(#)12 b(get)h(virtual)f(page)p Fb(\000)p Fd(n)o(um)o(b)q(er)g(and)g(11)p
Fb(\000)p Fd(bit)g(pro)q(cess)i(tag)293 576 y(mfc0)48 b(k1,)12
b(c0)p 537 576 V 15 w(tlb)q(cxt)137 b(#)12 b(t)o(wice)293 676
y(#)37 b(Our)13 b(hash)f(function)h(com)o(bines)e(pro)q(cess)k(tag)d(with)g
(the)h(lo)o(w)o(er)f(bits)h(of)f(the)h(virtual)293 725 y(#)37
b(page)12 b(n)o(um)o(b)q(er)g(\(VPN\))h(that)g(missed:)293
775 y(#)99 b(\(\(\(c0)p 516 775 V 16 w(tlb)q(cxt)12 b Fa(<<)h
Fd(17)f(^)h(c0)p 856 775 V 15 w(tlb)q(ctx\))g Fa(>>)g Fd(16)f(\))g(&)h(STLB)p
1320 775 V 15 w(MASK&~7\))293 825 y(sll)88 b(k0,)12 b(k0,)f(17)330
b(#)12 b(mo)o(v)o(e)f(VPN)i(up)293 875 y(xor)69 b(k1,)12 b(k0,)f(k1)329
b(#)12 b(com)o(bine)f(with)h(pro)q(cess)j(tag)293 925 y(srl)84
b(k1,)12 b(k1,)f(16)330 b(#)12 b(mo)o(v)o(e)f(do)o(wn)h(\(8)g(b)o(yte)h
(align\))293 974 y(andi)49 b(k0,)12 b(k1,)f(STLB)p 664 974
V 16 w(MASK)i(&)f(~7)25 b(#)12 b(remo)o(v)o(e)f(upp)q(er)j(and)e(lo)o(w)o(er)
g(bits.)293 1074 y(#)g(2.)g(Index)g(in)o(to)g(STLB)293 1124
y(lui)82 b(k1,)12 b(HI\(stlb\))150 b(#)12 b(load)f(STLB)i(\(at)f(kno)o(wn)h
(lo)q(cation\))293 1174 y(add)62 b(k1,)12 b(k0,)f(k1)186 b(#)12
b(index)g(in)o(to)g(STLB)293 1273 y(#)g(3.)g(Load)g(the)h(ph)o(ysical)f(page)
g(en)o(try)h(and)g(STLB)f(tag)293 1323 y(lw)74 b(k0,)12 b(LO\(stlb\)+4\(k1\))
75 b(#)12 b(TLB)h(en)o(try)293 1373 y(lw)74 b(k1,)12 b(LO\(stlb\)+0\(k1\))75
b(#)12 b(STLB)h(tag)293 1473 y(#)f(4.)g(Load)g(TLB:)g(w)o(e)h(\014rst)g(load)
e(the)j(fetc)o(hed)f(TLB)g(en)o(try)g(in)o(to)f(tlblo)f(\(but)i(do)f(not)h
(write)293 1522 y(#)49 b(this)13 b(register)g(in)o(to)f(the)h(TLB\);)g(w)o(e)
f(then)i(re)p Fb(\000)p Fd(fetc)o(h)g(tlb)q(cxt)f(in)f(preparation)g(to)h
(its)293 1572 y(#)49 b(comparison)11 b(to)i(the)g(STLB)g(tag.)293
1622 y(m)o(tc0)48 b(k0,)12 b(c0)p 539 1622 V 15 w(tlblo)162
b(#)12 b(\(optimistically\))d(load)j(TLB)h(en)o(try)293 1672
y(mfc0)50 b(k0,)12 b(c0)p 539 1672 V 15 w(tlb)q(cxt)138 b(#)12
b(get)g(con)o(text)i(again)293 1722 y(nop)438 b(#)12 b(dela)o(y)g(slot)293
1821 y(#)g(5.)g(Chec)o(k)h(tag)f(\(do)q(es)h(not)g(matc)o(h)e
Fb(\000)p Fa(>)i Fd(jump)e(to)h(miss)f(handler\))293 1871 y(bne)72
b(k0,)12 b(k1,)f(stlb)p 631 1871 V 15 w(miss)86 b(#)13 b(compare)e(tags)i(to)
f(see)i(if)e(w)o(e)g(got)g(a)h(hit)293 1921 y(mfc0)48 b(k1,)12
b(c0)p 537 1921 V 15 w(ep)q(c)200 b(#)13 b(get)f(exception)i(program)c(coun)o
(ter)293 2021 y(#)i(6.)g(T)m(ags)f(matc)o(hed:)h(install)f(en)o(try)i(in)o
(to)f(the)h(TLB)293 2070 y(tlb)o(wr)336 b(#)12 b(write)h(tlblo)e(to)i(TLB)293
2170 y(#)f(7.)g(Return)h(from)d(exception)293 2220 y(j)87 b(k1)273
b(#)12 b(jump)f(to)i(resumption)e(address)293 2270 y(rfe)369
b(#)12 b(return)i(from)d(exception)102 2397 y Fo(Figure)k(3-3:)20
b(Assem)o(bly)c(co)q(de)f(used)h(b)o(y)f(Aegis)h(to)f(lo)q(okup)h(mapping)g
(in)g(STLB)f(\(18)g(instructions\).)957 2817 y(59)p eop
%%Page: 60 62
60 61 bop 79 34 a Fo(tions.)37 b(The)21 b(remaining)h(t)o(w)o(en)o(t)o(y)d
(instructions)j(can)f(b)q(e)g(sligh)o(tly)h(reduced)g(with)f(straigh)o(t)f
(forw)o(ard)79 90 y(optimizations.)h(The)16 b(assem)o(bly)f(co)q(de)h(for)e
(sync)o(hronous)i(up)q(calls)h(is)e(giv)o(en)h(in)g(Figure)g(3-4.)79
234 y Fu(3.3)70 b(Ob)t(jects)79 335 y Fo(Curren)o(tly)l(,)19
b(Aegis)g(supp)q(orts)f(\014v)o(e)g(ob)s(jects:)25 b(capabilities,)20
b(time-slices,)h(pages,)d(con)o(text)f(iden)o(ti\014ers,)79
392 y(and)f(en)o(vironmen)o(ts.)22 b(This)16 b(section)g(in)o(tro)q(duces)h
(the)e(data)g(structures)h(and)f(op)q(erations)h(that)f(can)h(b)q(e)79
448 y(p)q(erformed)g(on)e(these)i(ob)s(jects.)j(In)c(general)h(the)f(design)g
(has)g(emphasized)i(simplicit)o(y)l(.)22 b(F)l(or)14 b(example,)79
505 y(static)19 b(allo)q(cation)h(is)g(used)f(throughout)f(the)h(implemen)o
(tation,)i(in)f(a)e(manner)h(similar)h(to)e([22)o(,)h(78)o(].)79
561 y(Also,)c(the)f(Aegis)g(implemen)o(tation)i(is)e(completely)h(unmapp)q
(ed)h(\(b)q(oth)e(co)q(de)g(and)g(data\),)f(eliminating)79
617 y(the)j(complication)g(\(and)g(ine\016ciency\))h(of)e(virtual)g(memory)l
(.)79 739 y Fp(3.3.1)56 b(Capabilities)79 825 y Fo(Capabilities)18
b(consist)d(of)f(the)i(resource)f(name)g(and)g(a)g(random)f(sequence)i(of)f
(bits;)g(they)g(are)g(un)o(t)o(yp)q(ed)79 881 y(and)i(ma)o(y)e(b)q(e)i
(passed)g(freely)g(as)f(data.)22 b(Capabilities)c(are)e Fn(applic)n(ation-sp)
n(e)n(ci\014e)n(d)p Fo(:)21 b(at)15 b(allo)q(cation,)i(the)79
938 y(application)g(presen)o(ts)e(the)g(capabilities)j(to)c(whic)o(h)i(it)f
(w)o(an)o(ts)f(the)h(ob)s(ject)g(to)f(b)q(e)i(b)q(ound.)21
b(This)15 b(allo)o(ws)79 994 y(\\w)o(ell-kno)o(wn")k(capabilities)h(to)d(b)q
(e)h(used)h(to)e(access)h(resources,)g(enabling)h(a)f(distributed)h(notion)f
(of)79 1051 y(sharing.)i(The)13 b(o)o(wner)f(of)h(the)g(resource)g(can)g(c)o
(hange)g(an)o(y)f(of)h(the)f(capabilities)k(\(or)c(delete)i(the)f(ob)s
(ject\);)79 1107 y(there)18 b(are)f(no)g(pro)o(visions)h(\(y)o(et\))e(to)h
(ha)o(v)o(e)g(more)f(than)h(one)h(o)o(wner)f(or)f(to)h(transfer)g(o)o
(wnership.)26 b(The)79 1164 y(curren)o(t)16 b(implemen)o(tation)h(uses)f
(32-bit)f(capabilities;)j Fn(this)e(smal)r(l)h(size)e(has)i(b)n(e)n(en)e
(chosen)h(strictly)g(for)79 1220 y(c)n(onvenienc)n(e)e(in)i(writing)g(the)h
(assembly)e(language)h(r)n(outines)g(that)h(use)f(c)n(ap)n(abilities)p
Fo(.)i(The)e(structures)79 1277 y(in)o(v)o(olv)o(ed)h(are)d(giv)o(en)i(in)g
(Figure)g(3-5.)150 1333 y(Capabilit)o(y)c(c)o(hec)o(ks)f(o)q(ccur)g(at)f
(resource-usage)h(p)q(oin)o(ts.)19 b(Because)12 b(these)f(c)o(hec)o(ks)g(can)
g(add)g(o)o(v)o(erhead)79 1390 y(to)k(certain)g(op)q(erations,)f(Aegis)i
(allo)o(ws)e(certain)i(uses)f(to)f(b)q(e)h Fn(b)n(ound)p Fo(.)20
b(F)l(or)14 b(example,)h(applications)h(can)79 1446 y(insert)21
b(bindings)h(of)e(virtual)h(to)e(ph)o(ysical)j(pages)e(in)h(the)f(TLB)h
(rather)e(than)h(ha)o(v)o(e)g(ev)o(ery)g(memory)79 1502 y(access)d(require)g
(a)g(capabilit)o(y)g(c)o(hec)o(k.)24 b(Less)17 b(ob)o(vious)g(areas)f
(include)j(the)d(exception)i(sa)o(v)o(e)d(areas)h(and)79 1559
y(guaran)o(teed)f(mappings.)21 b(Logically)l(,)16 b(all)g(bindings)i(are)c
(\015ushed)j(when)e(the)h(resource)f(is)h(deallo)q(cated.)79
1681 y Fp(3.3.2)56 b(Time-Sli)o(ces)150 1766 y Fo(The)18 b(time-slice)i
(structure)e(is)h(sho)o(wn)e(in)i(Figure)g(3-6.)28 b(The)18
b(CPU)g(is)g(represen)o(ted)h(as)e(sequence)79 1823 y(of)g(time-slices;)j
(the)e(n)o(um)o(b)q(er)f(of)g(time-slices)i(is)f(a)f(compile-time)i
(parameter.)25 b(Eac)o(h)17 b(time-slice)j(has)79 1879 y(the)d(length)h(of)e
(the)h(con\014gured)h(clo)q(c)o(k)f(gran)o(ularit)o(y)g(\(in)g(the)g(curren)o
(t)g(implemen)o(tation,)h(15.625)d(mil-)79 1936 y(liseconds\).)21
b(Usable)14 b(time-slices)h(are)d(asso)q(ciated)h(with)g(an)g(en)o(vironmen)o
(t:)19 b(a)13 b(n)o(ull)h(en)o(vironmen)o(t)f(v)m(alue)79 1992
y(causes)j(the)g(time-slice)i(to)d(b)q(e)i(skipp)q(ed.)23 b(P)o(ossessors)15
b(of)g(the)h(write)g(capabilit)o(y)h(\()p Fj(wc)p Fo(\))e(can)h(c)o(hange)f
(the)79 2049 y(en)o(vironmen)o(t)h(whic)o(h)g(will)h(b)q(e)f(resumed)f(when)h
(the)f(time-slice)j(is)d(initiated.)150 2105 y(The)22 b(imp)q(ortan)o(t)g
(\014elds)i(in)f(the)f(time-slice)i(structure)e(are)g Fj(ticks)f
Fo(and)i Fj(int)p Fo(.)40 b Fj(ticks)21 b Fo(is)i(used)79 2162
y(to)d(pro)o(vide)h(fairness)g(b)o(y)f(b)q(ounding)i(the)e(time)h(an)f
(application)i(tak)o(es)d(to)h(sa)o(v)o(e)f(its)i(con)o(text:)29
b(eac)o(h)79 2218 y(subsequen)o(t)16 b(timer)e(in)o(terrupt)h(is)g(recorded,)
f(and)h(when)g(a)f(threshold)h(is)g(exceeded,)h(the)e(en)o(vironmen)o(t)79
2274 y(is)h(destro)o(y)o(ed.)k(When)14 b(a)f(time-slice)j(is)e(selected)h(to)
e(run,)h Fj(ticks)f Fo(is)i(c)o(hec)o(k)o(ed:)k(if)14 b(its)g(v)m(alue)h(is)g
(non-zero,)79 2331 y Fj(ticks)20 b Fo(is)g(decremen)o(ted)h(and)f(the)g
(time-slice)i(is)e(skipp)q(ed;)k(if)c(its)g(v)m(alue)h(is)f(zero,)h(the)f
(time-slice)i(is)79 2387 y(initiated.)g Fj(int)14 b Fo(indicates)h(whether)g
(the)f(time-slice)i(can)f(b)q(e)g(pre-empted)g(due)g(to)f(a)g(device)h(in)o
(terrupt)79 2444 y(\(curren)o(tly)h Fj(int)f Fo(is)g(un)o(used\).)150
2500 y(The)e(represen)o(tation)g(of)f(the)h(CPU)g(that)f(Aegis)h(uses)g
(\(i.e.,)f(as)h(a)f(v)o(ector)g(of)h(time-slices\))h(is)f(unique;)79
2557 y(an)i(imp)q(ortan)o(t)f(prop)q(ert)o(y)g(\(discussed)i(previously\))f
(is)g(the)g(notion)f(of)g Fn(p)n(osition)g Fo(that)g(it)h(enco)q(des.)20
b(The)79 2613 y(exok)o(ernel)e(cycles)g(through)f(the)g(time-slices)i(in)e(a)
g(round-robin)h(sequence.)26 b(This)18 b(simple)g(sc)o(heduler)79
2670 y(can)g(supp)q(ort)g(a)g(wide)g(range)g(of)f(higher-lev)o(el)j(sc)o
(heduling)g(p)q(olicies.)30 b(F)l(or)17 b(example,)i(a)e(serv)o(er)g(could)
957 2817 y(60)p eop
%%Page: 61 63
61 62 bop 293 303 a Fd(#)12 b(P)o(erform)f(a)i(sync)o(hronous)g(up)q(call)f
(b)q(et)o(w)o(een)i(en)o(vironmen)o(ts.)293 353 y(#)e(Get)g(rid)h(of)f(at)g
(least)h(6)f(instructions;)h(bias)f(to)o(w)o(ards)g(IPC)h(rather)g(than)293
403 y(#)f(exceptions)h(\(can)g(get)g(rid)f(of)g(status)i(register?\))293
453 y(#)293 502 y(#)e(1.)g(Separate)h(in)o(terrupts)h(and)e(system)g(calls)g
(from)f(user)p Fb(\000)p Fd(exceptions)k(\(5)d(instructions\).)293
552 y(mfc0)48 b(k0,)12 b(c0)p 537 552 13 2 v 15 w(cause)232
b(#)13 b(get)f(cause)i(of)e(exception)293 602 y(nop)518 b(#)13
b(dela)o(y)f(slot)293 652 y(and)62 b(k1,)12 b(k0,)f(~\(8)p
Fa(<<)p Fd(2\))i(&)g(255)43 b(#)13 b(mask)e(out)h(syscalls)h(and)f(in)o
(terrupts)293 702 y(b)q(eq)65 b(k1,)12 b(zero,)g(sys)p 642
702 V 16 w(or)p 695 702 V 15 w(in)o(t)120 b(#)13 b(jump)d(to)j(separate)g
(exception)h(handler)293 752 y(lui)82 b(k1,)12 b(HI\(PSW)p
647 752 V 15 w(ENV\))112 b(#)13 b(load)e(upp)q(er)j(bits)e(to)h(pro)q(cess)h
(status)f(w)o(ord)293 851 y(...)23 b Fa(<<)13 b Fd(exception)h(handling)d(co)
q(de)i Fa(>>)g Fd(...)193 951 y(sys)p 249 951 V 16 w(or)p 302
951 V 15 w(in)o(tx:)293 1001 y(#)f(2.)g(Separate)h(in)o(terrupts)h(from)c
(system)j(calls.)293 1050 y(and)62 b(k0,)12 b(k0,)f(254)293
1100 y(b)q(eq)65 b(k0,)12 b(zero,)g(in)o(terrupt)176 b(#)12
b(in)o(terrupt)i(has)e(co)q(de)i(=)e(0)293 1150 y(andi)50 b(k0,a0,0x007f)274
b(#)12 b(force)h(legal)f(IPC)g(index)293 1200 y(b)q(eq)65 b(t0,)12
b(AE)p 544 1200 V 15 w(IPC,)g(ip)q(c)216 b(#)12 b(sp)q(ecial)h(case)h
(syscall:)d(c)o(hec)o(k)j(to)e(see)i(if)e(IPC)293 1250 y(sll)89
b(k0,k0,ENV)p 624 1250 V 14 w(SHIFT)p 764 1250 V 15 w(BITS)50
b(#)12 b(shift)h(index)293 1299 y(j)116 b(sysx)426 b(#)12 b(some)g(other)h
(system)f(call)293 1349 y(nop)293 1399 y(#)g(3.)g(P)o(erform)f(IPC)i(\(hea)o
(vily)e(sc)o(heduled)j(co)q(de\))193 1449 y(ip)q(c:)293 1499
y(#)e(4.)g(Load)g(and)g(install)f(destination)i(Con)o(text)f(\(20)g
(instructions\))293 1549 y(la)107 b(t0,)11 b(en)o(v)369 b(#)12
b(load)g(en)o(vironmen)o(t)f(p)q(oin)o(ter)293 1598 y(addu)50
b(k0,)11 b(k0,t0)333 b(#)12 b(index)h(in)o(to)e(it)293 1648
y(lb)105 b(t0,)11 b(ENV)p 585 1648 V 16 w(CID\(k0\))173 b(#)12
b(get)h(destination)f(con)o(text)h(id)293 1698 y(lw)98 b(a0,)11
b(LO\(CUR)p 666 1698 V 15 w(ENV\)\(k1\))64 b(#)12 b(load)g(p)q(oin)o(ter)g
(to)h(curren)o(t)h(en)o(viron)293 1748 y(bltz)71 b(t0,)11 b(cid)p
548 1748 V 15 w(deallo)q(cated)159 b(#)12 b(mak)o(e)f(sure)j(it)e(has)g(a)h
(CID)293 1798 y(sw)94 b(k0,)11 b(LO\(CUR)p 667 1798 V 15 w(ENV\)\(k1\))63
b(#)12 b(psw)p 1042 1798 V 15 w(en)o(v)h(=)g(e)293 1847 y(sll)100
b(t0,)11 b(TLB)p 580 1847 V 16 w(HI)p 642 1847 V 15 w(PID)p
732 1847 V 15 w(SHIFT)53 b(#)12 b(line)g(up)h(pid)f(bits)293
1897 y(m)o(tc0)50 b(t0,)11 b(c0)p 534 1897 V 16 w(tlbhi)290
b(#)12 b(assert)i(new)f(pid)293 1947 y(lh)105 b(k1,)11 b(ENV)p
591 1947 V 16 w(T)m(A)o(G\(k0\))154 b(#)12 b(load)g(address)h(tag)293
1997 y(lb)105 b(a0,)11 b(ENV)p 590 1997 V 15 w(ENVN\(a0\))126
b(#)12 b(load)g(en)o(viron)g(iden)o(ti\014er)293 2047 y(sll)100
b(k1,)11 b(k1,)h(PTEBase)p 738 2047 V 16 w(SHIFT)46 b(#)12
b(mo)o(v)o(e)f(tag)h(in)o(to)g(correct)i(lo)q(cation)293 2096
y(m)o(tc0)50 b(k1,)11 b(c0)p 540 2096 V 15 w(tlb)q(cxt)263
b(#)12 b(set)h(new)g(con)o(text)293 2146 y(lw)98 b(k1,)11 b(ENV)p
591 2146 V 16 w(GA)m(TE\(k0\))125 b(#)12 b(load)g(gate)293
2196 y(lw)98 b(k0,)11 b(ENV)p 591 2196 V 16 w(ST)m(A)m(TUS\(k0\))82
b(#)12 b(load)g(status)h(register)293 2246 y(m)o(tc0)50 b(k0,)11
b(c0)p 540 2246 V 15 w(status)263 b(#)12 b(set)h(status)h(register)293
2296 y(j)127 b(k1)448 b(#)12 b(gate\(psw\))293 2346 y(rfe)385
2473 y Fo(Figure)j(3-4:)20 b(Assem)o(bly)c(co)q(de)f(to)g(p)q(erform)g(a)g
(sync)o(hronous)g(up)q(call)957 2817 y(61)p eop
%%Page: 62 64
62 63 bop 193 92 a Fe(struct)11 b Fd(auth)h Fb(f)293 142 y
Fd(unsigned)100 b(n:12,)229 b(/)p Fb(\003)12 b Fd(name)f Fb(\003)p
Fd(/)552 192 y(prot:2,)197 b(/)p Fb(\003)12 b Fd(page)p Fb(\000)p
Fd(protection)h Fb(\003)p Fd(/)552 242 y(cap:A)o(UTHSZ;)62
b(/)p Fb(\003)12 b Fd(capabilit)o(y)f Fb(\003)p Fd(/)193 291
y Fb(g)p Fd(;)600 418 y Fo(Figure)k(3-5:)20 b(Capabilit)o(y)c(represen)o
(tations)193 527 y Fe(struct)11 b Fd(slice)i Fb(f)293 577 y
Fe(struct)e Fd(auth)70 b(w)o(c,)g(/)p Fb(\003)12 b Fd(write)g(capabilit)o(y)f
Fb(\003)p Fd(/)582 626 y(rc;)83 b(/)p Fb(\003)12 b Fd(read)h(capabilit)o(y)e
Fb(\003)p Fd(/)293 676 y Fe(struct)g Fd(en)o(v)91 b Fb(\003)p
Fd(e;)78 b(/)p Fb(\003)12 b Fd(asso)q(ciated)h(en)o(vironmen)o(t)e(\(n)o(ull)
h(if)g(no)g(one\))h Fb(\003)p Fd(/)293 726 y(unsigned)g(short)25
b(next,)38 b(/)p Fb(\003)12 b Fd(next)h(slice)f Fb(\003)p Fd(/)582
776 y(prev,)38 b(/)p Fb(\003)12 b Fd(previous)g(slice)h Fb(\003)p
Fd(/)582 826 y(tic)o(ks,)34 b(/)p Fb(\003)12 b Fd(tic)o(ks)g(consumed)h(in)f
(in)o(terrupts)h Fb(\003)p Fd(/)582 876 y(in)o(t:1;)34 b(/)p
Fb(\003)12 b Fd(whether)h(it)g(can)f(b)q(e)h(pre)p Fb(\000)p
Fd(empted)h(on)e(in)o(terrupts)i Fb(\003)p Fd(/)193 925 y Fb(g)p
Fd(;)666 1052 y Fo(Figure)i(3-6:)j(Slice)e(data)e(structure)79
1186 y(enforce)j(prop)q(ortional)h(sharing)f(\(p)q(erhaps)g(through)f
(lottery)h(sc)o(heduling)h([105)o(]\))e(on)h(a)f(collection)j(of)79
1242 y(sub-pro)q(cesses)15 b(b)o(y)e(allo)q(cating)i(a)e(n)o(um)o(b)q(er)h
(of)f(time-slices;)i(as)e(eac)o(h)h(time-slice)h(is)f(initiated)h(the)f(serv)
o(er)79 1299 y(\014rst)22 b(determines)g(whic)o(h)h(of)e(its)h(sub-pro)q
(cess)g(should)h(run)f(and)g(then)g(enables)h(it)e(b)o(y)h(p)q(erforming)79
1355 y(a)f Fj(yield)g Fo(system)g(call)h(to)f(the)g(c)o(hosen)g(pro)q(cess.)
39 b(The)21 b(exok)o(ernel's)g(e\016cien)o(t)h(implemen)o(tation)h(of)79
1412 y Fj(yield)14 b Fo(allo)o(ws)g(high-lev)o(el)j(sc)o(hedulers)f(to)d(p)q
(erform)h(their)h(op)q(erations)f(with)h(minimal)h(o)o(v)o(erhead)d(\(this)79
1468 y(o)o(v)o(erhead)i(is)h(measured)f(in)h(Section)h(4.3\).)79
1590 y Fp(3.3.3)56 b(P)n(age)150 1676 y Fo(The)17 b(page)g(structure)g(is)h
(giv)o(en)g(in)g(Figure)f(3-7.)25 b(Eac)o(h)17 b(ph)o(ysical)i(page)e(has)g
(an)g(asso)q(ciated)g Fj(page)79 1732 y Fo(structure;)e(the)g(\014nest)h
(gran)o(ularit)o(y)f(of)f(allo)q(cation)j(is)f(a)e(single)j(page.)j(The)15
b(minim)o(um)h(state)f(for)f(eac)o(h)79 1788 y(page)k(is)g(quite)h(simple:)26
b(capabilities)20 b(for)d(read)h(and)g(write)g(accesses.)27
b(Applications)20 b(that)d(ha)o(v)o(e)g(the)79 1845 y(capabilities)k(for)c(a)
h(giv)o(en)h(page)e(can)i(install)g(TLB)f(bindings,)j(issue)e(DMA)e(op)q
(erations,)i(and)f(use)g(it)79 1901 y(for)d(exception)h(sa)o(v)o(e)f(areas.)
150 1958 y(T)l(o)k(supp)q(ort)g(t)o(w)o(o)e(64-bit)i(capabilities)i(p)q(er)f
(page)e(requires)i(16)e(b)o(ytes)h(p)q(er)g(page;)h(assuming)f(4K)79
2014 y(pages,)c(this)h(translates)e(in)o(to)i(an)f(o)o(v)o(erhead)g(of)f(16)p
Fk(=)p Fo(4096)d(=)i(0)p Fk(:)p Fo(4\045.)193 2159 y Fd(/)p
Fb(\003)f Fd(page)h(structure)h Fb(\003)p Fd(/)193 2208 y Fe(struct)d
Fd(page)h Fb(f)293 2258 y Fe(struct)f Fd(auth)62 b(w)o(c,)g(/)p
Fb(\003)12 b Fd(write)h(capabilit)o(y)e Fb(\003)p Fd(/)574
2308 y(rc;)75 b(/)p Fb(\003)12 b Fd(read)h(capabilit)o(y)e
Fb(\003)p Fd(/)193 2358 y Fb(g)p Fd(;)664 2485 y Fo(Figure)16
b(3-7:)j(P)o(age)c(data)f(structure)957 2817 y(62)p eop
%%Page: 63 65
63 64 bop 79 34 a Fp(3.3.4)56 b(Con)n(text)18 b(iden)n(ti\014er)79
120 y Fo(Con)o(text)d(iden)o(ti\014ers)j(are)e(not)f(asso)q(ciated)h(with)h
(capabilities)h(but)e(are)g(instead)g(n)o(um)o(b)q(ered)h(b)o(y)f(small)79
176 y(in)o(tegers.)33 b(Eac)o(h)19 b(en)o(vironmen)o(t)h(can)f(allo)q(cate)i
(a)e(small)h(n)o(um)o(b)q(er)f(of)g(CIDs;)i(they)f(are)f(installed)i(via)79
233 y(a)d(system)f(call.)29 b(The)18 b(abilit)o(y)h(to)e(explicitly)k(switc)o
(h)d(con)o(text)f(iden)o(ti\014ers)i(allo)o(ws)f(an)g(application)h(to)79
289 y(c)o(heaply)e(switc)o(h)e(b)q(et)o(w)o(een)h(m)o(ultiple)h(protection)e
(domains)g(within)i(itself.)150 346 y(A)o(tten)o(tiv)o(e)e(readers)h(will)h
(recognize)f(that)f(the)h(represen)o(tation)g(of)f(con)o(text)g(iden)o
(ti\014ers)i(violates)f(a)79 402 y(n)o(um)o(b)q(er)f(of)f(exok)o(ernel)h
(principles)i(\(e.g.,)c(that)g(rev)o(o)q(cation)i(is)f(visible)j(and)d
(naming)h(is)g(ph)o(ysical\).)20 b(W)l(e)79 459 y(ha)o(v)o(e)d(made)f(these)h
(violations)g(with)g(full)h(a)o(w)o(areness:)k(they)16 b(are)h(necessary)f
(to)g(allo)o(w)h(e\016cien)o(t,)g(\015uid)79 515 y(reclamation.)k(These)15
b(reasons)g(are)g(discussed)i(more)d(thoroughly)i(in)g(Section)g(2.4.)79
637 y Fp(3.3.5)56 b(En)n(vironmen)n(t)79 723 y Fo(An)12 b(en)o(vironmen)o(t)f
(is)h(the)f(unit)h(of)f(accoun)o(tabilit)o(y)h(in)g(Aegis:)18
b(all)12 b(resource)g(consumption)g(is)f(asso)q(ciated)79 779
y(with)16 b(an)f(en)o(vironmen)o(t.)150 835 y(En)o(vironmen)o(ts)j(con)o
(tain)g(the)h(con)o(texts)e(required)i(to)f(de\014ne)h(an)f(address)h(space)f
(and)g(execution)79 892 y(en)o(vironmen)o(t;)h(they)e(are)g(the)g(most)f
(complicated)j(en)o(tities)f(Aegis)g(supp)q(orts.)26 b(F)l(our)16
b(distinct)j(ev)o(en)o(ts)79 948 y(can)12 b(happ)q(en)g(during)g(program)e
(execution:)19 b(an)11 b(exception,)i(an)e(in)o(terrupt,)h(an)f(up)q(call,)i
(and)e(an)g(address)79 1005 y(translation.)20 b(En)o(vironmen)o(ts)13
b(m)o(ust)g(con)o(tain)h(the)f(four)h(con)o(texts)e(required)j(to)e(supp)q
(ort)g(these)h(ev)o(en)o(ts.)79 1061 y(Therefore,)k(at)e(a)h(high-lev)o(el,)j
(an)d(en)o(vironmen)o(t)h(exactly)g(represen)o(ts)f(the)g(binding)i(of)e(the)
h(follo)o(wing)79 1118 y(con)o(texts:)148 1212 y Fc(\017)k
Fo(An)16 b Fn(exc)n(eption)h(c)n(ontext)f Fo(that)f(includes)j(v)m(alues)f
(that)f(the)g(program)f(coun)o(ter)h(should)h(b)q(e)f(set)g(to)193
1268 y(when)g(a)f(giv)o(en)h(exception)h(o)q(ccurs)f(\()p Fj(xh)p
Fo(\))e(and)i(p)q(oin)o(ters)g(to)f(ph)o(ysical)i(memory)e(where)h(registers)
193 1324 y(can)f(b)q(e)h(sa)o(v)o(ed)f(when)h(an)f(exception)h(o)q(ccurs)g
(\()p Fj(tlbx_save_area)d Fo(and)i Fj(genx_save_area)p Fo(\).)148
1418 y Fc(\017)22 b Fo(An)f Fn(exe)n(cution)g(c)n(ontext)e
Fo(that)h(sp)q(eci\014es)i(PC)e(v)m(alues)i(to)e(b)q(oth)g(initiate)i(\()p
Fj(pro)p Fo(\))d(and)i(complete)193 1475 y(\()p Fj(epi)p Fo(\))16
b(time-slices,)k(a)d(register)g(sa)o(v)o(e)g(area)g(\()p Fj(intx_save_area)p
Fo(\))d(for)j(timer)h(in)o(terrupts,)f(and)h(a)193 1531 y(status)12
b(register)g(\(con)o(trolling)g(what)g(co-pro)q(cessors)g(and)h(in)o
(terrupts)f(are)g(enabled\).)20 b(As)12 b(devices)193 1588
y(are)j(included)j(in)o(to)d(Aegis,)g(this)h(con)o(text)f(will)h(b)q(e)g
(expanded.)148 1681 y Fc(\017)22 b Fo(An)g Fn(up)n(c)n(al)r(l)f(c)n(ontext)g
Fo(that)g(sp)q(eci\014es)i(legal)f(PC)f(v)m(alues)i(for)d(sync)o(hronous)i
(\()p Fj(sync_gate)p Fo(\))d(and)193 1738 y(async)o(hronous)13
b(\()p Fj(async_gate)p Fo(\))e(up)q(calls.)21 b(Curren)o(tly)l(,)13
b(Aegis)h(do)q(es)f(not)f(manage)h(IPC)g(bindings.)193 1794
y(This)f(implies)i(that)d(an)o(y)g(en)o(vironmen)o(t)h(can)f(call)i(in)o(to)f
(an)o(y)f(other)g(|)h(access)f(con)o(trol)h(is)g(managed)193
1851 y(b)o(y)j(the)h(application)g(itself.)21 b(Exp)q(erience)c(will)g
(indicate)g(whether)e(this)h(task)e(is)i(to)q(o)f(di\016cult.)148
1945 y Fc(\017)22 b Fo(An)14 b Fn(addr)n(essing)g(c)n(ontext)g
Fo(that)f(consists)h(of)f(a)g(set)h(of)f(guaran)o(teed)h(mappings)g(\()p
Fj(xl)p Fo(,)f(used)h(to)g(map)193 2001 y(the)h(en)o(vironmen)o(t's)g
(page-table,)g(exception)h(handling)h(co)q(de\),)e(exception)h(stac)o(ks,)e
(an)g(address)193 2058 y(space)h(iden)o(ti\014er)i(\()p Fj(cid)p
Fo(\))c(and)i(a)g(tag)f(used)h(to)f(hash)h(in)o(to)g(the)g(system)g(STLB)g
(\()p Fj(tag)p Fo(\).)k(T)l(o)14 b(switc)o(h)193 2114 y(from)19
b(one)g(en)o(vironmen)o(t)h(to)f(another,)h(Aegis)f(m)o(ust)g(install)i
(these)f(v)m(alues)g(\(and)g(that)e(of)h(the)193 2170 y(status)14
b(register\).)79 2264 y(These)d(are)f(the)g(base)h(set)f(of)g(con)o(texts)f
(required)j(to)d(de\014ne)j(a)e(pro)q(cess.)18 b(All)12 b(con)o(texts)d
(require)j(the)e(others)79 2321 y(for)15 b(v)m(alidit)o(y:)22
b(for)15 b(example,)h(an)f(addressing)h(con)o(text)f(do)q(es)h(not)f(mak)o(e)
g(sense)h(without)f(an)g(execution)79 2377 y(or)k(exception)g(con)o(text.)30
b(Curren)o(tly)l(,)19 b(it)g(is)g(not)f(p)q(ossible)i(to)e(selectiv)o(ely)j
(substitute)e(con)o(texts.)29 b(F)l(or)79 2434 y(example,)17
b(it)e(is)h(not)f(p)q(ossible)j(to)c(ha)o(v)o(e)i(m)o(ultiple)h(exception)f
(con)o(texts)f(within)i(the)f(same)f(addressing)79 2490 y(con)o(text:)23
b(to)16 b(ac)o(hiev)o(e)h(this)g(structure,)f(the)h(application)h(m)o(ust)e
(either)i(em)o(ulate)f(it,)f(or)h(create)f(a)g(new)79 2547
y(en)o(vironmen)o(t.)21 b(W)l(e)15 b(ha)o(v)o(e)g(not)g(found)g(it)h(useful)g
(to)e(separate)h(these)g(con)o(texts.)150 2603 y(The)h(read)g(and)g(write)f
(capabilities)k(\()p Fj(rc)c Fo(and)h Fj(wc)p Fo(\))f(allo)o(w)h(an)f(en)o
(vironmen)o(t)h(to)f(alter)h(the)g(\014elds)h(of)79 2659 y(another.)j(This)15
b(enables)h(a)f(serv)o(er)g(pro)q(cess)g(to)f(con)o(trol)h(an)g(en)o
(vironmen)o(t's)f(exception)i(con)o(text,)e(base)957 2817 y(63)p
eop
%%Page: 64 66
64 65 bop 193 428 a Fd(/)p Fb(\003)206 478 y(\003)12 b Fd(exception)h
(handler)g(t)o(yp)q(e:)206 527 y Fb(\003)74 b Fd(ep)q(c)14
b(is)e(the)h(exception)g(p)q(c;)206 577 y Fb(\003)74 b Fd(cause)14
b(is)e(the)h(exception)g(cause;)206 627 y Fb(\003)74 b Fd(badaddr)13
b(is)f(the)h(last)f(bad)h(virtual)e(address.)206 677 y Fb(\003)p
Fd(/)193 727 y Fe(t)o(yp)q(edef)g Fd(v)o(oid)g(\()p Fb(\003)p
Fd(exh)p 551 727 13 2 v 16 w(t\)\(unsigned)i(ep)q(c,)g(unsigned)g(cause,)g
(addr)p 1248 727 V 15 w(t)f(badaddr\);)193 826 y(/)p Fb(\003)g
Fd(in)o(terrupt)h(handler:)g(ep)q(c)g(holds)f(the)h(exception)h(program)d
(coun)o(ter.)i Fb(\003)p Fd(/)193 876 y Fe(t)o(yp)q(edef)e
Fd(v)o(oid)g(\()p Fb(\003)p Fd(in)o(th)p 561 876 V 15 w(t\)\(unsigned)i(ep)q
(c\);)193 976 y(/)p Fb(\003)f Fd(up)q(call:)g(caller)g(is)g(the)i(en)o
(vironmen)o(t)d(id)h(of)g(calling)f(en)o(vironmen)o(t.)g Fb(\003)p
Fd(/)193 1026 y Fe(t)o(yp)q(edef)g Fd(v)o(oid)g(\()p Fb(\003)p
Fd(up)q(call)p 598 1026 V 15 w(t\)\(unsigned)i(caller\);)193
1125 y Fe(struct)e Fd(en)o(v)i Fb(f)280 1175 y Fe(struct)e
Fd(auth)p 501 1175 V 15 w(t)50 b(w)o(c,)63 b(/)p Fb(\003)12
b Fd(W)m(rite)g(capabilit)o(y.)e Fb(\003)p Fd(/)580 1225 y(rc;)76
b(/)p Fb(\003)12 b Fd(Read)g(capabilit)o(y.)e Fb(\003)p Fd(/)293
1275 y(exh)p 358 1275 V 15 w(t)45 b(xh[NEX];)99 b(/)p Fb(\003)12
b Fd(Hardw)o(are)h(exception)g(handlers.)f Fb(\003)p Fd(/)293
1324 y(in)o(th)p 368 1324 V 14 w(t)36 b(pro,)76 b(/)p Fb(\003)12
b Fd(Prologue)g(co)q(de.)h Fb(\003)p Fd(/)432 1374 y(epi,)83
b(/)p Fb(\003)12 b Fd(Epilogue)g(co)q(de.)h Fb(\003)p Fd(/)432
1424 y(init;)73 b(/)p Fb(\003)12 b Fd(Called)g(to)g(initiate)g(en)o(vironmen)
o(t)f(and)h(hold)g(con)o(tin)o(uation.)f Fb(\003)p Fd(/)293
1474 y(addr)p 378 1474 V 15 w(t)25 b(tlb)o(x)p 506 1474 V 14
w(sa)o(v)o(e)p 595 1474 V 15 w(area,)125 b(/)p Fb(\003)12 b
Fd(Sa)o(v)o(e)g(area)h(for)f(TLB)h(re\014ll)f(exceptions.)h
Fb(\003)p Fd(/)432 1524 y(genx)p 518 1524 V 15 w(sa)o(v)o(e)p
608 1524 V 15 w(area,)112 b(/)p Fb(\003)12 b Fd(Sa)o(v)o(e)g(area)h(for)f
(general)h(hardw)o(are)g(exceptions.)g Fb(\003)p Fd(/)432 1573
y(in)o(tx)p 506 1573 V 14 w(sa)o(v)o(e)p 595 1573 V 15 w(area;)125
b(/)p Fb(\003)12 b Fd(Sa)o(v)o(e)g(area)h(for)f(timer)p Fb(\000)p
Fd(in)o(terrupts.)h Fb(\003)p Fd(/)293 1623 y(/)p Fb(\003)305
1673 y(\003)f Fd(The)h(follo)o(wing)d(four)i(\014elds)h(are)g(clustered)i(to)
d(b)q(e)h(on)f(the)h(same)f(cac)o(he)h(line\(s\);)g(they)305
1723 y Fb(\003)f Fd(completely)g(c)o(haracterize)i(the)f(con)o(text)g(of)f
(the)h(en)o(vironmen)o(t.)24 b(These)14 b(\014elds)e(are)h(what)305
1773 y Fb(\003)f Fd(is)h(installed)f(on)g(con)o(text)p Fb(\000)p
Fd(switc)o(hing)h(b)o(y)f(Aegis.)305 1823 y Fb(\003)p Fd(/)293
1872 y(signed)g(c)o(har)84 b(cid;)235 b(/)p Fb(\003)12 b Fd(Address)j(space)e
(iden)o(ti\014er.)g Fb(\003)p Fd(/)293 1922 y(unsigned)g(c)o(har)37
b(en)o(vn;)203 b(/)p Fb(\003)12 b Fd(En)o(vironmen)o(t)g(n)o(um)o(b)q(er.)f
Fb(\003)p Fd(/)293 1972 y(unsigned)127 b(tag:11;)176 b(/)p
Fb(\003)12 b Fd(11)g(bit)h(tag.)e Fb(\003)p Fd(/)293 2022 y(unsigned)127
b(status;)180 b(/)p Fb(\003)12 b Fd(Status)h(register.)h Fb(\003)p
Fd(/)293 2072 y(up)q(call)p 405 2072 V 14 w(t)146 b(sync)p
660 2072 V 16 w(gate,)117 b(/)p Fb(\003)12 b Fd(Sync)o(hronous)i(up)q(call)e
(en)o(try)h(p)q(oin)o(t.)e Fb(\003)p Fd(/)579 2121 y(async)p
681 2121 V 16 w(gate;)96 b(/)p Fb(\003)12 b Fd(Async)o(hronous)i(up)q(call)e
(en)o(try)h(p)q(oin)o(t.)f Fb(\003)p Fd(/)293 2171 y Fe(struct)f
Fd(tlb)99 b(xl[MAXXL];)73 b(/)p Fb(\003)12 b Fd(Guaran)o(teed)h
(translations.)f Fb(\003)p Fd(/)193 2221 y Fb(g)p Fd(;)583
2348 y Fo(Figure)k(3-8:)j(En)o(vironmen)o(t)c(data)g(structure)957
2817 y(64)p eop
%%Page: 65 67
65 66 bop 79 34 a Fo(mappings,)20 b(etc.)31 b(More)19 b(p)q(o)o(w)o(erfully)l
(,)h(it)f(allo)o(ws)g(en)o(vironmen)o(ts)g(to)f(allo)q(cate)i(resources)f
(and)g(c)o(harge)79 90 y(them)d(to)g(another)f(en)o(vironmen)o(t.)23
b(The)16 b Fj(rc)g Fo(capabilit)o(y)h(allo)o(ws)f(the)g(named)h(resource)f
(to)f(b)q(e)i(read)f(b)o(y)79 147 y(a)f(giv)o(en)h(en)o(vironmen)o(t.)150
203 y(The)11 b Fj(envn)f Fo(\014eld)i(stores)e(the)h(curren)o(t)g(en)o
(vironmen)o(t)g(n)o(um)o(b)q(er:)18 b(this)11 b(is)h(simply)g(a)e(time)h
(optimization)79 260 y(for)k(up)q(calls.)79 402 y Fu(3.4)70
b(System)20 b(Calls)79 503 y Fo(The)c(follo)o(wing)g(are)f(a)g(subset)g(of)g
(the)g(system)g(calls)h(pro)o(vided)g(b)o(y)f(Aegis:)79 553
y Fj(int)24 b(yield\(int)f(who\))261 634 y Fo(Yield)18 b(the)f(curren)o(t)f
(time-slice)i(to)e(en)o(vironmen)o(t)g Fj(who)p Fo(;)g(the)h(\015ag)f
Fj(AE_RANDOM)f Fo(causes)193 684 y(the)k(destination)h(to)e(b)q(e)i(c)o
(hosen)f(randomly)l(.)32 b(When)19 b(the)g(yielding)j(application's)e(next)
193 734 y(time-slice)d(is)f(initiated,)g(its)f(execution)h(resumes)g(on)f
(the)g(instruction)h(after)e(the)h(system)193 784 y(call,)h(without)f(going)h
(through)e(prologue)i(co)q(de.)79 865 y Fj(int)24 b(sync_upcall\(int)e(who\))
261 946 y Fo(P)o(erform)10 b(a)g(sync)o(hronous)g(up)q(call)j(in)o(to)d(en)o
(vironmen)o(t)h Fj(who)p Fo(.)18 b(The)10 b(curren)o(t)h(time-slice)h(is)193
996 y(donated)i(un)o(til)i(the)e(callee)h(re-donates)f(the)h(time-slice)h
(\(through)d(either)i(a)f(sync)o(hronous)193 1046 y(up)q(call)21
b(bac)o(k)d(or)g(explicit)j(donation\).)29 b(The)19 b(up)q(call)h(fails)g(if)
f Fj(who)f Fo(do)q(es)g(not)h(exist)f(\(e.g.,)193 1096 y(it)h(has)f(b)q(een)h
(deallo)q(cated\).)30 b(The)18 b(exok)o(ernel)h(do)q(es)f(not)g(alter)g(an)o
(y)g(application-visibl)q(e)193 1146 y(registers)g(on)f(this)h(call,)h(allo)o
(wing)g(all)f(registers)g(to)e(b)q(e)j(used)f(to)f(pass)g(messages.)27
b(Once)193 1196 y(initiated,)17 b(the)e(call)h(completes)g(in)g(the)f
(destination)h(address)g(space.)79 1277 y Fj(int)24 b(async_upcall\(int)e
(who\))261 1358 y Fo(P)o(eform)13 b(an)h(async)o(hronous)f(up)q(call)j(in)o
(to)e(en)o(vironmen)o(t)g Fj(who)p Fo(.)19 b(The)14 b(remainder)g(of)g(the)
193 1408 y(curren)o(t)j(time-slice)h(is)g(yielded)g(to)e(the)h(callee;)i
(execution)e(resumes)g(at)f(the)h(instruction)193 1458 y(after)c(the)h
(system)f(call,)i(without)f(going)g(through)f(the)h(prologue)g(co)q(de.)20
b(The)14 b(up)q(call)i(fails)193 1508 y(if)k Fj(who)g Fo(do)q(es)g(not)f
(exist)h(\(e.g.,)g(it)g(has)f(b)q(een)i(deallo)q(cated\).)35
b(The)20 b(exok)o(ernel)g(do)q(es)g(not)193 1557 y(touc)o(h)c(an)o(y)g
(user-visible)j(registers)d(on)g(this)h(call,)g(allo)o(wing)h(all)f
(registers)f(to)g(b)q(e)h(used)f(to)193 1607 y(pass)k(messages.)34
b(Once)21 b(initiated,)h(the)f(up)q(call)h(will)f(complete)g(in)g(the)f
(other)g(address)193 1657 y(space.)79 1738 y Fj(int)k(alloc\(int)f(type,)g
(auth)g(c,)h(void)f(*obj\))261 1819 y Fo(Allo)q(cate)17 b(a)e(resource)g(of)g
(t)o(yp)q(e)h Fj(type)e Fo(to)h(o)o(wner)g Fj(c)g Fo(initialized)k(to)c(the)g
(v)m(alues)h(in)h Fj(obj)p Fo(.)193 1869 y(The)f(follo)o(wing)g(resources)f
(can)h(b)q(e)g(allo)q(cated:)21 b(pages,)14 b(en)o(vironmen)o(ts,)i
(time-slices,)h(and)193 1919 y(con)o(text)11 b(iden)o(ti\014ers.)20
b Fj(type)11 b Fo(giv)o(es)g(the)g(t)o(yp)q(e)h(of)f(resource)g(to)g(allo)q
(cate:)18 b Fj(AE_PAGE)p Fo(,)10 b Fj(AE_ENV)p Fo(,)193 1969
y Fj(AE_SLICE)20 b Fo(and)h Fj(AE_CID)p Fo(.)e Fj(c)h Fo(giv)o(es)h(the)g
(write)g(capabilit)o(y)h(for)e(the)h(en)o(vironmen)o(t)g(that)193
2019 y(will)f(b)q(e)e(c)o(harged)g(for)f(the)h(resource.)28
b(If)18 b Fj(c)g Fo(is)g(set)g(to)f(-1,)h(then)g(the)g(ob)s(ject)f(is)i(allo)
q(cated)193 2069 y(to)j(the)h(curren)o(t)f(en)o(vironmen)o(t.)42
b Fj(obj)22 b Fo(holds)h(the)g(address)g(of)f(a)g(page,)i(time-slice)g(or)193
2118 y(en)o(vironmen)o(t)17 b(structure)f(\(it)g(is)g Fj(NULL)g
Fo(when)h(allo)q(cating)g(con)o(text)f(iden)o(ti\014ers\).)24
b(Ob)s(jects)193 2168 y(can)14 b(b)q(e)h(requested)f(b)o(y)g(name)f(\(e.g.,)g
(page)g(5\).)19 b(The)14 b(exok)o(ernel)h(publishes)h(the)e(\\free)f(list")
193 2218 y(asso)q(ciated)i(with)g(eac)o(h)g(ob)s(ject,)f(allo)o(wing)i
(applications)g(to)e(deriv)o(e)i(an)e(accurate)h(picture)193
2268 y(of)g(whic)o(h)h(resources)f(are)g(a)o(v)m(ailable.)22
b(On)15 b(success,)h(the)f(ob)s(ject)g(name)g(is)h(returned.)79
2349 y Fj(int)24 b(dealloc\(int)e(type,)h(struct)h(auth)f(c\))261
2430 y Fo(Deallo)q(cate)16 b(ob)s(ject)f Fj(c)g Fo(of)g(t)o(yp)q(e)g
Fj(type)p Fo(.)79 2512 y Fj(int)24 b(dma_cpy\(auth)e(dst,)h(auth)h(src,)f
(int)h(flags\))261 2593 y Fo(P)o(age-sized)c(DMA)e(\(p)q(ossibly)i(soft)o(w)o
(are-em)o(ulated\):)26 b Fj(dst)19 b Fo(is)g(the)g(write)g(capabilit)o(y)193
2643 y(for)g(the)h(destination)h(page,)f Fj(src)g Fo(the)f(read)h(capabilit)o
(y)h(for)e(the)h(source)g(page.)34 b Fj(flags)193 2692 y Fo(indicates)17
b(whether)e(the)g(source)h(or)e(destination)i(should)h(b)q(e)f(cac)o(hed)f
(or)g(not.)957 2817 y(65)p eop
%%Page: 66 68
66 67 bop 79 34 a Fj(int)24 b(dma_set\(auth)e(dst,)h(unsigned)g(val,)h(int)f
(flags\))261 121 y Fo(P)o(age-sized)g(DMA)e(\(p)q(ossibly)h(soft)o(w)o
(are-em)o(ulated\):)32 b Fj(dst)21 b Fo(holds)h(the)g(destination)193
171 y(page's)e(write)h(capabilit)o(y)l(,)i Fj(val)e Fo(the)g(v)m(alue)h(to)e
(b)q(e)h(written,)h(and)f Fj(flags)f Fo(whether)h(the)193 221
y(write)15 b(will)i(b)q(e)f(cac)o(hed.)79 308 y Fj(int)24 b(getrate\(void\))
261 395 y Fo(Returns)16 b(the)f(curren)o(t)g(clo)q(c)o(k)h(rate)f(in)h
(milliseconds.)79 482 y Fj(struct)24 b({unsigned)e(hi,)i(lo;)f(})48
b(gettick\(void\))261 570 y Fo(Returns)16 b(the)f(curren)o(t)g(clo)q(c)o(k)h
(tic)o(k.)79 690 y Fl(Errors)79 775 y Fo(The)g(follo)o(wing)g(errors)e(can)i
(b)q(e)f(pro)q(duced)i(exok)o(ernel)f(system)e(calls:)79 869
y Fj(AE)p 130 869 15 2 v 17 w(PERM)p 243 869 V 17 w(DENIED)p
Fl(:)21 b Fo(The)16 b(appropriate)f(capabilit)o(y)i(w)o(as)d(not)h(pro)o
(vided.)79 963 y Fj(AE)p 130 963 V 17 w(BOGUS)p 267 963 V 17
w(NAME)p Fl(:)22 b Fo(The)15 b(giv)o(en)h(resource)f(do)q(es)h(not)e(exist.)
79 1057 y Fj(AE)p 130 1057 V 17 w(BOGUS)p 267 1057 V 17 w(TYPE)p
Fl(:)22 b Fo(The)15 b(requested)h(t)o(yp)q(e)f(do)q(es)h(not)e(exist.)79
1151 y Fj(AE)p 130 1151 V 17 w(DEAD)p 243 1151 V 17 w(ENV)p
Fl(:)22 b Fo(The)15 b(called)i(en)o(vironmen)o(t)f(has)f(b)q(een)h
(terminated.)79 1244 y Fj(AE)p 130 1244 V 17 w(NO)p 195 1244
V 17 w(FREE)p Fl(:)22 b Fo(There)15 b(are)g(no)g(unallo)q(cated)i(instances)f
(of)f(the)g(resource.)79 1388 y Fu(3.5)70 b(Primi)o(ti)o(v)n(e)19
b(Op)r(erations)79 1489 y Fo(The)d(exok)o(ernel)h(supplies)g(a)f(n)o(um)o(b)q
(er)g(of)f Fn(primitive)i(op)n(er)n(ations)e Fo(that)g(should)i(b)q(e)f(view)
o(ed)g(as)g(pseudo-)79 1546 y(instructions)h(\(similar)f(to)f(the)g(Alpha's)h
(use)g(of)f(P)l(ALco)q(de)i([88)o(]\).)i(Eac)o(h)d(op)q(eration)f(is)h
(guaran)o(teed)f(to)79 1602 y(not)k(alter)g(the)g(v)m(alue)h(of)e(an)o(y)h
(application)h(register:)27 b(as)19 b(suc)o(h)g(it)g(can)g(b)q(e)h(used)f(to)
g(read)f(and)h(write)79 1658 y(mac)o(hine)13 b(state)f(without)g(requiring)h
(the)f(sa)o(ving)g(and)h(restoring)f(of)f(appropriate)h(registers,)h(etc.)18
b(Some)79 1715 y(of)d(these)f(instructions)i(are)e(aggregates)f(of)h
(underlying)j(hardw)o(are)c(instructions:)21 b(they)14 b(are)h(pro)o(vided)79
1771 y(to)h(meet)g(atomicit)o(y)h(requiremen)o(ts)f(\(e.g.,)f(writing)i(to)f
(the)g(TLB)h(is)g(a)f(single)i(op)q(eration\).)23 b(With)16
b(the)79 1828 y(abilit)o(y)e(to)e(do)o(wnload)g(application)i(co)q(de)f(in)o
(to)f(the)g(k)o(ernel,)h(these)g(op)q(erations)f(w)o(ould)h(b)q(e)g
(unnecessary)l(.)79 1884 y(In)o(terestingly)l(,)19 b(the)e(abilit)o(y)h(to)e
(do)o(wnload)h(co)q(de)g(in)o(to)g(the)g(k)o(ernel)h([13)o(,)e(31,)g(36,)g
(104)o(])h(w)o(ould)g Fn(simplify)79 1941 y Fo(the)h(in)o(terface:)25
b(Aegis)18 b(w)o(ould)g(not)f(ha)o(v)o(e)g(to)g(pro)o(vide)h(all)h
(\\reasonable")e(mac)o(hine)i(instructions)f(and)79 1997 y(their)f
(aggregates)d(but,)h(instead,)h(w)o(ould)g(just)f(mak)o(e)g(the)h(underlying)
i(hardw)o(are)d(securely)h(visible)i(to)79 2054 y(applications.)150
2110 y(An)i(imp)q(ortan)o(t)f(implemen)o(tation)i(note)e(is)i(that)e(the)g
(MIPS)h(ABI)g(splits)h(the)f(register)f(set)g(in)o(to)79 2167
y(callee-)e(and)f(caller-sa)o(v)o(ed)g(registers.)k(T)l(o)15
b(e\016cien)o(tly)i(implemen)o(t)f(primitiv)o(e)h(op)q(erations)e(requires)i
(ei-)79 2223 y(ther)12 b(that)e(the)h(op)q(eration)h(b)q(e)f(co)q(ded)h(in)g
(assem)o(bly)g(or)e(that)h(the)g(calling)i(con)o(v)o(en)o(tions)e(b)q(e)h(c)o
(hanged)f(\(i.e.,)79 2280 y(so)18 b(that)e(caller-sa)o(v)o(ed)j(registers)e
(are)g(not)g(o)o(v)o(erwritten\).)26 b(F)l(ortunately)l(,)17
b(the)h(GNU)f(C)g(compiler)i([90)o(])79 2336 y(allo)o(ws)13
b(command)f(line)i(alterations)e(of)g(the)g(register)g(con)o(v)o(en)o(tion.)
19 b(This)13 b(allo)o(ws)g(primitiv)o(e)g(op)q(erations)79
2392 y(\(and)k(other)f(routines)h(that)e(m)o(ust)h(assume)h(all)g(registers)f
(are)h(\\liv)o(e"\))f(to)g(b)q(e)h(co)q(ded)g(in)h(ANSI)f(C)f(and)79
2449 y(still)g(ha)o(v)o(e)e(guaran)o(tees)g(that)f(they)h(will)i(not)e
(trample)h(caller-sa)o(v)o(ed)g(registers.)k(As)14 b(a)g(\014nal)h(implemen-)
79 2505 y(tation)h(note,)g(Aegis)h(will)h(lik)o(ely)f(remo)o(v)o(e)f(the)g
(need)h(to)e(c)o(hec)o(k)i(for)e(error)h(co)q(des)g(in)h(these)g(op)q
(erations:)79 2562 y(those)c(that)f(complete)h(successfully)i(will)f(resume)f
(execution)h(with)f(the)g(PC)f(set)h(to)f(three)h(instructions)79
2618 y(b)q(ey)o(ond)k(their)f(call)h(site;)f(those)f(that)g(fail)i(will)g
(resume)f(execution)h(immediately)g(after)e(the)h(call)g(site.)79
2675 y(This)g(con)o(v)o(en)o(tion)g(will)g(allo)o(w)g(v)o(ery)f(ligh)o(t-w)o
(eigh)o(t)g(error)g(detection.)957 2817 y(66)p eop
%%Page: 67 69
67 68 bop 150 34 a Fo(The)16 b(pro)o(vided)g(op)q(erations)g(are)f(in)h
(relation)h(to)d(the)i(curren)o(t)f(pro)q(cess;)h(in)g(the)g(future,)f(a)h
(la)o(y)o(er)f(of)79 90 y(indirection)i(ma)o(y)c(b)q(e)i(added)g(to)e(allo)o
(w)h(serv)o(er)g(pro)q(cesses)h(to)e(more)h(easily)h(con)o(trol)f(their)g
(dep)q(enden)o(ts.)79 230 y Fj(int)24 b(mfc0\(int)f(reg\))261
317 y Fo(Copro)q(cessor)15 b(0)g(is)h(the)f(conduit)i(of)d(all)j(privileged)g
(instructions.)22 b(Its)15 b(registers)g(hold)193 367 y(man)o(y)h(useful)i(v)
m(alues)g(\(e.g.,)d(the)i(pro)q(cess)g(status)e(w)o(ord,)h(etc.\).)24
b(Applications)18 b(can)f(read)193 416 y(an)o(y)e(of)g(these)g(registers)g
(using)h(this)g(primitiv)o(e)g(op)q(eration.)k(The)c(sp)q(eci\014c)h
(register)e(to)f(b)q(e)193 466 y(read)g(is)f(sp)q(eci\014ed)j(b)o(y)d
Fj(reg)p Fo(,)g(whic)o(h)i(is)f(a)f(\015ag)g(formed)g(b)o(y)g(capitalizing)j
(the)d(register)h(name)193 516 y(as)j(giv)o(en)h(in)g([54)o(])f(and)h(prep)q
(ending)h Fj(AE_)e Fo(\(e.g.,)f Fj(AE_CONTEXT)p Fo(,)g Fj(AE_ERROR)p
Fo(,)f Fj(AE_STATUS)p Fo(,)193 566 y Fj(AE_BADVADDR)p Fo(,)e(etc.\).)79
652 y Fj(int)24 b(tlbwr\(unsigned)e(hi,)h(unsigned)g(lo,)h(auth)f(c\))261
739 y Fo(Insert)f(the)g(giv)o(en)h(virtual)f(to)f(ph)o(ysical)i(translation)f
(in)h(a)e(pseudo-random)h(TLB)193 788 y(en)o(try)l(.)k(The)18
b(exok)o(ernel)g(prob)q(es)g(the)f(TLB)h(and)f(deletes)i(the)e(mapping)h(if)g
(it)g(is)g(already)193 838 y(presen)o(t.)79 925 y Fj(int)24
b(tlbwi\(int)f(index,)g(unsigned)f(hi,)i(unsigned)f(lo,)g(auth)g(c\))261
1011 y Fo(Insert)e(the)f(giv)o(en)h(virtual)g(to)f(ph)o(ysical)i(translation)
e(at)g(the)h(hardw)o(are)e(TLB)i(line)193 1061 y(giv)o(en)15
b(b)o(y)g Fj(index)p Fo(.)k(The)14 b(exok)o(ernel)i(prob)q(es)f(the)f(TLB)h
(and)g(deletes)h(the)e(mapping)h(if)g(it)g(is)193 1111 y(already)h(presen)o
(t.)79 1197 y Fj(int)24 b(tlb_vadelete\(unsigned)d(hi\))261
1283 y Fo(Delete)16 b(the)f(indicated)i(virtual)f(mapping;)g(returns)f(the)g
(mapping)h(or)f(-1.)79 1370 y Fj(int)24 b(tlb_padelete\(unsigned)d(pfn\))261
1456 y Fo(Delete)16 b(the)f(indicated)i(ph)o(ysical)g(page.)79
1543 y Fj(int)24 b(tlb_probe\(unsigned)d(hi\))261 1629 y Fo(Prob)q(e)16
b(for)e(a)h(particular)h(mapping;)f(returns)h(the)f(lo)o(w)g(part)f(of)h(the)
h(mapping)f(or)g(-1.)79 1716 y Fj(struct)24 b({)f(unsigned)g(hi,)g(lo;)h(})g
(tlbr\(int)e(index\))261 1802 y Fo(Read)g(indexed)h(hardw)o(are)e(TLB)g(en)o
(try;)j(it)d(is)h(returned)f(in)h(indicated)h(structure.)193
1852 y(\(The)d(STLB)h(can)f(b)q(e)h(mapp)q(ed)g(b)o(y)f(applications,)i(remo)
o(ving)e(the)g(need)h(to)f(pro)o(vide)g(a)193 1902 y(similar)d(instruction)f
(for)e(it.\))79 1988 y Fj(int)24 b(tlb_dirty\(unsigned)d(hi\))261
2074 y Fo(Delete)c(dirt)o(y)f(bit)h(in)g(virtual)f(mapping)h
Fj(hi)p Fo(;)f(returns)g(previous)g(v)m(alue)i(or)d(-1)h(if)h(there)193
2124 y(w)o(as)e(no)g(matc)o(h.)79 2211 y Fj(int)24 b(tlb_cache\(unsigned)d
(hi,)j(int)f(cache\))261 2297 y Fo(Change)14 b(cac)o(he)f(bit)h(in)g(virtual)
g(mapping)h Fj(hi)p Fo(;)e(returns)g(previous)h(v)m(alue)h(or)e(-1)g(if)h
(there)193 2347 y(w)o(as)h(no)g(matc)o(h.)79 2433 y Fj(int)24
b(tlb_hwflush\(unsigned)d(lo,)j(unsigned)e(hi\))261 2520 y
Fo(Flush)16 b(all)g(hardw)o(are)f(TLB)g(mappings)h(from)f Fj(lo)g
Fo(to)f Fj(hi)h Fo(\(inclusiv)o(e\).)79 2606 y Fj(tlb_swflush\(unsigned)22
b(lo,)h(unsigned)g(hi\))261 2692 y Fo(Flush)16 b(soft)o(w)o(are)e(TLB)h
(mappings)h(from)e Fj(lo)h Fo(to)g Fj(hi)g Fo(\(inclusiv)o(e\).)957
2817 y(67)p eop
%%Page: 68 70
68 69 bop 557 1092 a @beginspecial 0 @llx 0 @lly 450 @urx 540
@ury 2100 @rwi @setspecial
%%BeginDocument: vaspace.ps
%!
%%Title: /tmp/xfig-export014789
%%Creator: fig2dev
%%CreationDate: Fri Jan  6 19:21:08 1995
%%For: engler@amsterdam (Dawson R. Engler,520,6172537436,6174979175)
%%BoundingBox: 0 0 450 540
%%Pages: 0
%%EndComments
/$F2psDict 6400 dict def 
$F2psDict begin
$F2psDict /mtrx matrix put
/l {lineto} bind def
/m {moveto} bind def
/s {stroke} bind def
/n {newpath} bind def
/gs {gsave} bind def
/gr {grestore} bind def
/clp {closepath} bind def
/graycol {dup dup currentrgbcolor 4 -2 roll mul 4 -2 roll mul
4 -2 roll mul setrgbcolor} bind def
/col-1 {} def
/col0 {0 0 0 setrgbcolor} bind def
/col1 {0 0 1 setrgbcolor} bind def
/col2 {0 1 0 setrgbcolor} bind def
/col3 {0 1 1 setrgbcolor} bind def
/col4 {1 0 0 setrgbcolor} bind def
/col5 {1 0 1 setrgbcolor} bind def
/col6 {1 1 0 setrgbcolor} bind def
/col7 {1 1 1 setrgbcolor} bind def
	end
/$F2psBegin {$F2psDict begin /$F2psEnteredState save def} def
/$F2psEnd {$F2psEnteredState restore end} def
%%EndProlog

$F2psBegin
0 setlinecap 0 setlinejoin
-72 18 translate
0.0 540.0 translate 0.900 -0.900 scale
0.500 setlinewidth
% Polyline
n 579 619 m 579 19 l  199 19 l  199 619 l 
 clp gs col-1 s gr
% Polyline
n 579 619 m 579 19 l  199 19 l  199 619 l 
 clp gs 0.70 setgray fill gr
gs col-1 s gr
2.000 setlinewidth
% Polyline
n 199 119 m 579 119 l gs 0.70 setgray fill gr
gs col-1 s gr
% Polyline
n 199 199 m 579 199 l gs 0.70 setgray fill gr
gs col-1 s gr
% Polyline
n 199 339 m 579 339 l gs 0.70 setgray fill gr
gs col-1 s gr
% Polyline
n 199 479 m 579 479 l gs 0.70 setgray fill gr
gs col-1 s gr
/Times-Roman findfont 20.00 scalefont setfont
219 379 m 
gs 1 -1 scale (Exception area; pinned; holds the three) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
219 405 m 
gs 1 -1 scale (exception save areas \(128 bytes in size\) ) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
219 431 m 
gs 1 -1 scale (and 3 exception stacks \(1024 bytes in size\)) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
219 239 m 
gs 1 -1 scale (Page-table area; allows contigious page ) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
219 265 m 
gs 1 -1 scale (tables; mapped using guarenteed mappings) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
219 159 m 
gs 1 -1 scale (Mapped exception code \(context-switching,) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
219 185 m 
gs 1 -1 scale (TLB handler and general exception handlers\)) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
239 559 m 
gs 1 -1 scale (Unmapped) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
279 79 m 
gs 1 -1 scale (Rest of user address space) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
79 119 m 
gs 1 -1 scale (0x00401000) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
79 199 m 
gs 1 -1 scale (0x00400000) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
79 339 m 
gs 1 -1 scale (0x00006000) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
79 479 m 
gs 1 -1 scale (0x00005000) col-1 show gr
/Times-Roman findfont 20.00 scalefont setfont
79 39 m 
gs 1 -1 scale (0x80000000) col-1 show gr
$F2psEnd
%%EndDocument
 @endspecial 302 1240 a Fo(Figure)15 b(3-9:)20 b(The)15 b(address)g(space)h
(structure)f(of)f(ExOS-based)j(applications)79 1373 y Fj(int)24
b(cid_switch\(unsigned)d(cid\))261 1461 y Fo(Install)c(the)e(con)o(text)g
(iden)o(ti\014er)h Fj(cid)p Fo(.)79 1548 y Fj(int)24 b(fpu_mod\(int)e(flag\))
261 1635 y Fo(Enable)12 b(or)e(disable)i(the)f(\015oating-p)q(oin)o(t)g
(co-pro)q(cessor.)19 b(Returns)11 b(the)g(previous)g(v)m(alue.)79
1722 y Fj(void)24 b(int_rfe\(unsigned)d(epc\))261 1809 y Fo(Return)14
b(from)f(in)o(terrupt.)19 b(Restores)14 b(the)f(system)g(call)h(index)h
(register)e(and)h(the)f(argu-)193 1859 y(men)o(t)i(zero)g(register;)g(this)h
(primitiv)o(e)h(is)e(used)h(if)g(the)f(application)i(is)f(not)f(able)h(to)f
(sim)o(ul-)193 1909 y(taneously)j(restore)f(in)o(terrupt)h(state)f(while)i
(jumping)g(to)e(the)h(in)o(terrupt)g(site.)28 b(\(Similar)193
1959 y(functions)16 b(are)f(pro)o(vided)h(for)f(general)g(exceptions)h(and)g
(TLB)f(exceptions.\))79 2139 y Fu(3.6)70 b(ExOS:)23 b(A)g(Simpl)o(e)d
(Library)j(Op)r(erating)g(System)79 2241 y Fo(This)f(section)g(giv)o(es)g(a)f
(few)g(details)i(of)e(our)g(protot)o(yp)q(e)f(library)i(op)q(erating)g
(system:)32 b(ExOS.)21 b(The)79 2297 y(curren)o(t)g(system)g(supp)q(orts)f
(time-sharing,)j(exceptions,)g(virtual)e(memory)g(and)g(pro)q(cess)g
(creation.)79 2354 y(W)l(e)16 b(brie\015y)g(discuss)g(these)g(issues)g(b)q
(elo)o(w.)79 2475 y Fp(3.6.1)56 b(ExOS)18 b(ABI)h(con)n(v)n(en)n(tions)79
2561 y Fo(The)f(virtual)g(address)f(space)g(structure)g(is)h(giv)o(en)f(in)h
(Figure)g(3-9.)25 b(An)17 b(imp)q(ortan)o(t)g(implemen)o(tation)79
2618 y(p)q(oin)o(t)23 b(is)f(that)f(the)g(exception)i(and)f(in)o(terrupt)g
(\\sa)o(v)o(e)e(areas")h(are)g(lo)q(cated)i(in)f(the)g(lo)o(w)o(er)f(15)g
(bits)79 2674 y(of)f(the)f(virtual)h(address)g(space.)33 b(This)20
b(allo)o(ws)g(loads)g(and)f(stores)g(to)g(b)q(e)h(done)g(directly)h(using)f
(the)957 2817 y(68)p eop
%%Page: 69 71
69 70 bop 79 34 a Fo(\\zero")12 b(register)h(\(instead)g(of)f(loading)i(an)e
(o\013set)g(register)h(with)g(the)f(sa)o(v)o(e)g(area)g(p)q(oin)o(ter)h(and)g
(someho)o(w)79 90 y(restoring)19 b(it\).)30 b(This)19 b(allo)o(ws)f
(e\016cien)o(t)i(exception)f(handling)h(and)f(easy)f(state)g(restoration)g
(after)g(an)79 147 y(exception)f(has)e(b)q(een)h(pro)q(cessed.)150
203 y(The)k(MIPS)f(ABI)h(reserv)o(es)f(the)g(registers)g Fj(k0)g
Fo(and)h Fj(k1)f Fo(for)f(the)i(op)q(erating)f(system.)32 b(Since)20
b(the)79 260 y(application-lev)o(el)25 b(op)q(erating)c(system)g(has)g(to)f
(p)q(erform)h(most)f(of)h(the)g(functions)h(that)e(motiv)m(ated)79
316 y(these)i(registers,)f(ExOS)h(extends)f(the)g(MIPS)g(ABI)h(to)e(include)k
(t)o(w)o(o)19 b(application-lev)o(el)24 b(op)q(erating)79 373
y(system)16 b(registers:)23 b Fj(u0)16 b Fo(and)g Fj(u1)g Fo(\(these)h(w)o
(ere)f(formerly)g(the)g(callee-sa)o(v)o(ed)i Fj(s6)e Fo(and)h
Fj(s7)f Fo(registers\).)23 b(In)79 429 y(our)13 b(exp)q(erience,)i(compilers)
f(on)f(the)g(MIPS)g(do)g(not)f(mak)o(e)h(e\013ectiv)o(e)g(use)g(of)g(all)g
(callee-sa)o(v)o(ed)i(registers)79 486 y(an)o(yw)o(a)o(y)l(,)e(so)h(this)g
(is)h(not)f(a)f(traumatic)h(mo)q(di\014cation)h(\(and)f(has)g(the)g(small)h
(added)g(b)q(ene\014t)g(of)e(making)79 542 y(con)o(text-switc)o(hing)j
(faster\).)79 664 y Fp(3.6.2)56 b(The)18 b(liv)n(e-register)e(problem)79
750 y Fo(This)d(section)g(discusses)h(ho)o(w)d(an)i(application)h(can)e
(return)g(from)g(an)g(exception)h(or)f(in)o(terrupt)g(without)79
806 y(k)o(ernel)17 b(in)o(terv)o(en)o(tion.)23 b(In)16 b(the)g(follo)o(wing)h
(discussion)h(w)o(e)d(use)h(the)h(term)e(exception)i(to)e(refer)h(to)f(b)q
(oth)79 863 y(in)o(terrupts)h(and)f(exceptions.)150 919 y(As)j(a)g(general)g
(rule,)i(exceptions)f(and)f(in)o(terrupts)g(can)g(o)q(ccur)h(when)f(all)h
(registers)f(are)g(liv)o(e.)30 b(T)l(o)79 975 y(resume)13 b(execution)h
(after)e(pro)q(cessing)i(an)e(exception,)i(the)f(application)h(needs)g(to)e
(jump)h(to)f(the)g(excep-)79 1032 y(tion)k(address)f(using)h(a)e(register)h
(while)i(sim)o(ultaneously)f(restoring)f(this)g(register.)20
b(This)c(requiremen)o(t)79 1088 y(raises)g(t)o(w)o(o)d(c)o(hallenges:)21
b(the)15 b(\014rst)g(is)g(ho)o(w)g(to)f(restore)g(the)h(register)g(without)g
(requiring)h Fn(another)g Fo(reg-)79 1145 y(ister)j(\(whic)o(h)f(in)h(turn)f
(w)o(ould)g(ha)o(v)o(e)g(to)f(b)q(e)i(restored,)e(whic)o(h)i(requires)g
(another)e(register,)i(...\).)26 b(The)79 1201 y(second)18
b(is)f(ho)o(w)g(to)f(sim)o(ultaneously)i(restore)f(a)f(register)h(and)g(p)q
(erform)g(a)g(jump)g(using)g(it.)26 b(The)17 b(\014rst)79 1258
y(problem)f(can)g(b)q(e)g(solv)o(ed)g(directly:)21 b(b)q(ecause)16
b(ExOS)g(de\014nes)g(sa)o(v)o(e)f(areas)g(lo)o(w)g(in)h(the)f(address)h
(space,)79 1314 y(registers)f(can)g(b)q(e)g(restored)g(using)g(register)g
(zero)f(as)h(the)g(o\013set)e(register;)i(this)g(register)g(alw)o(a)o(ys)f
(holds)79 1371 y(the)i(constan)o(t)e(zero)h(and)g(so)g(do)q(es)h(not)e(need)i
(to)f(b)q(e)h(restored.)j(F)l(or)c(example,)g(to)g(restore)f(register)h
Fj(r1)p Fo(:)293 1487 y Fd(lw)74 b(r1,)12 b(R1)p 524 1487 13
2 v 14 w(SA)-5 b(VE)p 646 1487 V 16 w(AREA\(zero\))26 b(#)12
b(restore)j(r1)d(at)g(constan)o(t)h(o\013set)h(R1)p 1522 1487
V 14 w(SA)-5 b(VE)p 1644 1487 V 16 w(AREA)912 1537 y(#)12 b(\(this)h(constan)
o(t)g(m)o(ust)f(b)q(e)h Fb(\024)f Fd(2^15\))79 1660 y Fo(The)19
b(second)f(problem)h(app)q(ears)f(to)f(ha)o(v)o(e)h(an)g(easy)g(solution)h
(as)e(w)o(ell:)27 b(on)18 b(the)g(MIPS,)g(jumps)g(ha)o(v)o(e)79
1716 y(dela)o(y)g(slots.)23 b(Therefore,)17 b(the)g(co)q(de)g(sequence)g(to)f
(jump)h(and)g(restore)f(a)g(register)h(\\sim)o(ultaneously")79
1772 y(could)g(lo)q(ok)e(lik)o(e)i(\(again,)d(w)o(e)h(use)h
Fj(r1)p Fo(\):)293 1889 y Fd(j)103 b(r1)466 b(#)12 b(jump)f(using)h(r1)293
1939 y(lw)74 b(r1,)12 b(R1)p 524 1939 V 14 w(SA)-5 b(VE)p 646
1939 V 16 w(AREA\(zero\))26 b(#)12 b(restore)j(r1)d(in)g(the)h(dela)o(y)f
(slot)79 2061 y Fo(Unfortunately)l(,)j(loads)f(ha)o(v)o(e)g(a)f(dela)o(y)i
(slot)f(as)g(w)o(ell.)20 b(This)15 b(implies)h(that)d(the)h(b)q(eha)o(vior)h
(of)f(the)g(jump's)79 2118 y(destination)19 b(will)g(b)q(e)f(unde\014ned)h
(if)f(it)g(uses)g Fj(r1)p Fo(.)26 b(Therefore,)17 b(w)o(e)h(need)g(to)f
(guaran)o(tee)f(the)i(in)o(v)m(arian)o(t)79 2174 y(that)i(the)g(destination)h
(instruction)g(cannot)f(use)g(the)g(register)g(restored)g(in)h(the)f(dela)o
(y)h(slot.)34 b(This)79 2231 y(in)o(v)m(arian)o(t)21 b(is)g(guaran)o(teed)f
(using)h(t)o(w)o(o)e(mec)o(hanisms:)31 b(the)20 b(\014rst)g(relates)h(to)f
(application)i(co)q(de,)f(the)79 2287 y(second)d(to)f(library)h(op)q(erating)
f(system)g(co)q(de.)26 b(The)17 b(ExOS)h(ABI)f(prohibits)i(application)f(co)q
(de)g(from)79 2344 y(using)f Fj(u0)p Fo(.)23 b(Therefore,)16
b(if)h(w)o(e)f(return)g(from)f(an)h(exception)i(using)e(this)h(register,)f(w)
o(e)g(are)g(guaran)o(teed)79 2400 y(that)i(if)g(application)i(co)q(de)f
(initiated)h(the)e(exception,)h(there)f(will)i(b)q(e)f(no)f(con\015ict.)29
b(The)19 b(other)e(case)79 2457 y(w)o(e)d(m)o(ust)g(handle)h(is)g(when)g(the)
f(library)h(op)q(erating)f(system)g(itself)h(causes)f(an)g(exception.)21
b(W)l(e)14 b(handle)79 2513 y(this)19 b(case)e(b)o(y)h(simply)h(ensuring)f
(that)f(a)g(piece)i(of)e(exception)i(handling)g(co)q(de)g(that)e(uses)g
Fj(u0)h Fo(cannot)79 2569 y(tak)o(e)g(an)g(exception.)30 b(This)19
b(co)q(de)g(is)f(exp)q(ected)i(to)d(a)o(v)o(oid)h(the)h(general)f(hardw)o
(are)g(exceptions)h(\(e.g.,)79 2626 y(in)o(teger-o)o(v)o(er\015o)o(w,)13
b(unaligned)i(p)q(oin)o(ter)e(accesses,)h(etc\).)k(T)l(o)13
b(prev)o(en)o(t)g(TLB)g(exceptions,)i(all)f(co)q(de)f(that)79
2682 y(uses)21 b Fj(u0)g Fo(m)o(ust)f(b)q(e)h(mapp)q(ed)h(using)f(a)f
(\\guaran)o(teed)g(mapping")h(\(ensuring)h(that)e(it)h(will)h(not)e(tak)o(e)
957 2817 y(69)p eop
%%Page: 70 72
70 71 bop 193 71 a Fd(#)12 b(exception)h(handler)g(to)f(deal)h(with)f
(unaligned)g(p)q(oin)o(ters)193 121 y(unaligned)p Fb(\000)p
Fd(handler:)293 171 y(...)f(pro)q(cess)j(exception)f(...)293
221 y(j)87 b(rfe)p Fb(\000)p Fd(tramp)q(oline)123 b(#)12 b(call)g(tramp)q
(oline)f(to)h(restore)i(exception)f(state)293 271 y(nop)193
370 y(#)f(a0)g(holds)g(exception)i(p)q(c:)e(restore)i(this)f(and)f(jump)f(to)
i(the)g(v)n(alue)e(it)i(holds)193 420 y(rfe)p Fb(\000)p Fd(tramp)q(oline:)293
470 y(mo)o(v)o(e)48 b(u0,)12 b(a0)325 b(#)12 b(mo)o(v)o(e)f(a0)h(to)g(u0)293
520 y(lw)101 b(a0,)11 b(A0)p 555 520 13 2 v 15 w(SA)-5 b(VE\(zero\))90
b(#)12 b(restore)i(a0)293 570 y(j)130 b(u0)391 b(#)12 b(jump)f(to)h
(exception)h(p)q(c)293 619 y(nop)341 796 y Fo(Figure)j(3-10:)j(Return)d(from)
e(exception)j(using)f(a)e(tramp)q(oline)j(function)79 930 y(an)h
(application-visib)q(le)k(TLB)c(exception\).)29 b(Ob)o(viously)19
b(mapping)g(all)g(the)f(application)i(and)e(ExOS)79 986 y(exception)h
(handling)g(co)q(de)g(using)f(guaran)o(teed)f(mappings)h(w)o(ould)g(consume)g
(signi\014can)o(t)h(resources.)79 1042 y(T)l(o)c(prev)o(en)o(t)h(this)f
(situation,)h(a)f(small)h(\\tramp)q(oline")f(function)h(is)g(used)g(to)f
(restore)f(exception)j(state:)79 1099 y(general)h(exception)g(handlers)g(do)f
(not)g(use)g Fj(u0)g Fo(or)g(restore)f(their)i(o)o(wn)e(state)h(but,)g
(instead,)h(jump)f(to)79 1155 y(this)i(function)g(to)e(restore)h(the)g
(execution)h(con)o(text)f(\(this)g(co)q(de)g(is)h(giv)o(en)g(in)g(Figure)f
(3-10\).)27 b(In)19 b(this)79 1212 y(manner,)c(v)o(ery)g(little)i(co)q(de)f
(m)o(ust)e(b)q(e)i(mapp)q(ed)g(and)g(exceptions)g(are)f(handled)h(extremely)g
(quic)o(kly)l(.)150 1268 y(V)l(arian)o(ts)h(of)g(the)g(ab)q(o)o(v)o(e)g
(metho)q(d)h(has)f(b)q(een)h(used)g(b)o(y)f(Bedic)o(hek)i([11)o(])e(and)h
(Thekk)m(ath)f([96)o(].)26 b(An)79 1325 y(alternativ)o(e)20
b(solution)h(is)f(to)g(return)f(con)o(trol)h(using)g(the)g(k)o(ernel.)35
b(Giv)o(en)20 b(the)g(exok)o(ernel's)g(e\016cien)o(t)79 1381
y(system)15 b(call)i(dispatc)o(hing,)f(this)f(metho)q(d)h(ma)o(y)e(not)h(b)q
(e)h(unacceptable)h(for)d(real)i(applications.)79 1503 y Fp(3.6.3)56
b(Time-sharing)79 1589 y Fo(As)11 b(discussed)h(previously)l(,)h(Aegis)e
(calls)g(application-suppli)q(ed)j(prologue)d(and)f(epilogue)i(co)q(de)g(on)e
(time-)79 1645 y(slice)16 b(initiation)g(and)e(completion,)h(resp)q(ectiv)o
(ely)l(.)21 b(ExOS)15 b(do)q(es)f(not)g(stac)o(k)f(in)o(terrupts,)h(so)f(sa)o
(ving)h(and)79 1702 y(restoring)e(state)f(is)i(more)e(complicated)i(than)f
(necessary)l(.)19 b(The)13 b(problem)f(that)f(m)o(ust)h(b)q(e)g(solv)o(ed)h
(is)f(that)79 1758 y(a)i(timer-in)o(terrupt)h(can)f(o)q(ccur)g(while)i(the)e
(application)i(con)o(text)d(is)h(b)q(eing)i(restored.)j(In)14
b(practice)h(this)79 1815 y(means)j(that)f(some)g(of)h(the)f(registers)h
(will)h(ha)o(v)o(e)f(b)q(een)g(restored)g(to)f(their)h(correct)f(v)m(alue,)i
(while)g(the)79 1871 y(others)13 b(will)h(ha)o(v)o(e)e(garbage)f(left)i(o)o
(v)o(er)f(from)g(the)g(previous)i(application.)20 b(If)13 b(the)g(epilogue)h
(co)q(de)f(blindly)79 1927 y(sa)o(v)o(ed)g(all)i(registers)e(it)h(w)o(ould)g
(o)o(v)o(erwrite)e(correct)h(v)m(alues)i(with)f(these)f(garbage)g(v)m(alues.)
20 b(T)l(o)13 b(solv)o(e)h(this)79 1984 y(problem,)g(the)g(epilogue)g(co)q
(de)g(simply)h(c)o(hec)o(ks)e(to)g(see)g(if)h(the)f(program)f(coun)o(ter)h(w)
o(as)f(in)i(the)g(prologue.)79 2040 y(If)21 b(it)f(w)o(as,)h(then)f(the)g
(epilogue)i(do)q(es)f(not)e(sa)o(v)o(e)h(the)g(application's)h(state)f(and)g
(returns)g(con)o(trol)g(to)79 2097 y(the)d(op)q(erating)g(system.)23
b(A)16 b(\014nal)i(problem)f(that)f(m)o(ust)g(b)q(e)h(solv)o(ed)g(is)g(that)e
(an)i(in)o(terrupt)f(can)h(o)q(ccur)79 2153 y(when)g(pro)q(cessing)g
(exceptions,)g(in)h(whic)o(h)f(case)f(the)g(t)o(w)o(o)f(registers)h
Fj(u0)g Fo(and)h Fj(u1)f Fo(could)h(b)q(e)g(liv)o(e.)24 b(This)79
2210 y(situation)19 b(is)f(a)f(v)m(arian)o(t)h(of)f(the)h(liv)o(e-register)h
(problem)g(discussed)g(in)g(the)e(previous)i(subsection.)28
b(It)79 2266 y(is)19 b(solv)o(ed)g(b)o(y)g(requiring)g(that)f(all)h(co)q(de)g
(that)f(uses)h Fj(u0)f Fo(or)g Fj(u1)g Fo(b)q(e)h(placed)h(at)d(the)i(b)q
(eginning)h(of)e(the)79 2323 y(text)c(segmen)o(t.)20 b(This)15
b(organization)f(allo)o(ws)h(ExOS)g(to)f(p)q(erform)g(a)g(simple)i
(conditional)g(c)o(hec)o(k)f(on)f(the)79 2379 y(program)j(coun)o(ter)h(to)f
(see)i(if)f(it)g(lies)h(in)g(this)g(region)f(or)f(not.)28 b(If)18
b(the)g(PC)g(p)q(oin)o(ts)g(to)g(an)f(instruction)79 2436 y(in)f(this)f
(segmen)o(t,)f(ExOS)h(returns)f(con)o(trol)g(to)g(the)h(application)h(using)f
(the)g(exok)o(ernel's)f Fj(rfe)g Fo(routine.)79 2492 y(Otherwise,)i(it)g
(restores)e(the)h(application's)i(state)d(using)i Fj(u0)f Fo(and)g
Fj(u1)g Fo(and)h(returns)f(directly)l(.)150 2548 y(It)f(should)h(b)q(e)f
(noted)g(that)f(this)h(complication)h(is)f(in)o(tro)q(duced)h(as)f(an)f
(optimization:)20 b(ExOS)14 b(could)79 2605 y(alw)o(a)o(ys)h(return)f(using)i
(the)f Fj(rfe)f Fo(system)h(call.)21 b(As)14 b(w)o(e)h(iden)o(tify)h(the)f(b)
q(ottlenec)o(ks)g(in)h(the)f(system,)f(this)79 2661 y(optimization)j(ma)o(y)d
(w)o(ell)i(b)q(e)g(dropp)q(ed.)957 2817 y(70)p eop
%%Page: 71 73
71 72 bop 79 34 a Fp(3.6.4)56 b(Exceptions)79 120 y Fo(With)21
b(the)e(exception)i(of)f(system)f(calls,)j(applications)f(receiv)o(e)g(all)g
(exceptions)g(directly)l(.)35 b(The)20 b(ex-)79 176 y(ok)o(ernel)d(dem)o
(ultiplexes)h(the)e(exception)g(cause)g(and)g(transfers)f(con)o(trol)h(to)f
(an)g(application-sp)q(eci)q(\014ed)79 233 y(exception)e(handler.)20
b(Applications)14 b(are)e(then)g(resp)q(onsible)i(for)d(handling)j(the)e
(cause)g(of)f(the)h(exception)79 289 y(and)h(resuming)g(execution.)20
b(In)13 b(the)g(future,)g(to)e(allo)o(w)i(simple)h(decoupling)g(b)q(et)o(w)o
(een)f(applications)h(and)79 346 y(their)g(library)g(op)q(erating)g(systems,)
e(the)i(exok)o(ernel)f(will)i(allo)o(w)f(system)e(calls)j(to)d(b)q(e)i(v)o
(ectored)f(directly)79 402 y(to)i(an)g(application-lev)o(el)k(handler.)150
459 y(Exceptions)12 b(are)e(forw)o(arded)g(v)o(ery)g(e\016cien)o(tly;)k(w)o
(e)c(measure)h(and)g(discuss)g(uses)g(for)g(fast)e(exceptions)79
515 y(in)17 b(Section)f(3.2.1.)79 637 y Fp(3.6.5)56 b(Virtual)18
b(memory)79 723 y Fo(ExOS)d(pro)o(vides)f(a)f(rudimen)o(tary)h(virtual)h
(memory)e(system)g(\(its)h(size)g(is)h(appro)o(ximately)f(400)f(lines)i(of)79
779 y(co)q(de\).)22 b(Its)16 b(t)o(w)o(o)e(main)i(limitations)h(are)f(that)f
(it)h(do)q(es)g(not)f(handle)i(sw)o(apping)f(and)g(that)f(page-tables)79
835 y(are)e(implemen)o(ted)h(as)e(a)h(linear)h(v)o(ector)d(\(address)i
(tranlations)f(are)h(lo)q(ok)o(ed)g(up)g(in)g(this)g(structure)g(using)79
892 y(binary)f(searc)o(h\).)17 b(Barring)11 b(these)g(t)o(w)o(o)e(implemen)o
(tation)j(constrain)o(ts,)f(its)f(in)o(terface)h(is)g(ric)o(her)g(than)g(an)o
(y)79 948 y(other)k(virtual)h(memory)f(system)f(w)o(e)h(kno)o(w)g(of:)k(it)d
(pro)o(vides)f(\015exible)j(supp)q(ort)d(for)g(aliasing,)h(sharing,)79
1005 y(disabling)i(and)d(enabling)i(of)e(cac)o(hing)h(on)f(a)g(p)q(er-page)g
(basis,)h(sp)q(eci\014c)h(page-allo)q(cation,)f(DMA,)e(etc.)150
1061 y(The)i(cost)g(of)g(application-lev)o(el)j(virtual)e(memory)f(is)g
(measured)h(in)g(Section)g(4.6;)e(w)o(e)h(also)g(detail)79
1118 y(a)f(m)o(yriad)h(of)e(uses)i(for)e(\015exible)k(application-lev)o(el)g
(virtual)e(memory)l(.)79 1239 y Fp(3.6.6)56 b(Pro)r(cess)18
b(creation)79 1325 y Fo(ExOS)12 b(pro)o(vides)f(sev)o(eral)h
Fj(fork)e Fo(v)m(arian)o(ts)h(\(similar)h(in)f(spirit)h(to)f(the)g(Plan9)g
Fj(rfork)f Fo(mec)o(hanisms)i([100)o(]\).)79 1382 y(F)l(ork)19
b(requires)h(a)f(few)g(h)o(undred)h(lines)h(of)e(co)q(de,)h(most)e(deal)i
(with)g(duplication)h(of)e(the)g(page-table.)79 1438 y(F)l(ork)c(is)h(in)o
(teresting)h(since)f(it)g(requires)g(that)f(the)h(executing)h(pro)q(cess)e
(create)h(a)f(clone)h(of)g(itself)g(while)79 1495 y(running)j(and)f(do)f(so)h
(without)f(directly)i(manipulating)g(ph)o(ysical)g(memory)l(.)27
b(The)18 b(latter)f(constrain)o(t)79 1551 y(can)g(b)q(e)h(dealt)f(with)g
(e\013ectiv)o(ely)h(using)f(Aegis')g(DMA)f(supp)q(ort.)25 b(DMA)16
b(is)h(not)f(only)i(e\016cien)o(t)f(but)g(is)79 1608 y(also)i(a)f
(simplifying)j(primitiv)o(e)f(since)g(temp)q(orary)d(virtual)i(address)g
(mappings)g(do)f(not)h(need)g(to)f(b)q(e)79 1664 y(installed)g(for)c(a)h
(single)i(cop)o(y)e(and)g(then)h(deleted.)79 1807 y Fu(3.7)70
b(Summ)n(ary)79 1909 y Fo(W)l(e)17 b(ha)o(v)o(e)e(describ)q(ed)j(t)o(w)o(o)d
(no)o(v)o(el)h(soft)o(w)o(are)e(systems,)h(Aegis)i(and)f(ExOS,)g(and)g(some)g
(pragmatic)g(dis-)79 1965 y(cussion)h(of)e(their)g(realization.)22
b(Aegis)16 b(is)g(an)f(existence)i(pro)q(of)e(that)f(an)h(exok)o(ernel)h(is)g
(not)f(di\016cult)i(to)79 2022 y(implemen)o(t;)d(ExOS)e(is)h(an)e(existence)i
(pro)q(of)e(that)g(an)h(exok)o(ernel)g(is)g(not)g(di\016cult)h(to)e(use.)19
b(The)12 b(most)e(in-)79 2078 y(teresting)k(feature)e(of)h(these)g(systems)f
(are)h(that)f(virtual-memory)l(,)i(pro)q(cess)f(and)g(trap)g(managemen)o(t)f
(is)79 2134 y(lo)q(cated)k(en)o(tirely)g(in)f(application-space,)i(allo)o
(wing)f(an)e(unpreceden)o(ted)j(degree)e(of)f(application-lev)o(el)79
2191 y(con)o(trol)h(o)o(v)o(er)g(ho)o(w)f(fundamen)o(tal)i(system)f
(abstractions)g(are)f(implemen)o(ted.)957 2817 y(71)p eop
%%Page: 72 74
72 73 bop eop
%%Page: 73 75
73 74 bop 79 345 a Fi(Chapter)35 b(4)79 553 y Fm(Application-l)q(ev)m(el)44
b(Implemen)m(tations)79 677 y(of)d(Basic)f(OS)g(Abstractions)79
900 y Fo(The)11 b(exok)o(ernel)h(exp)q(orts)e(hardw)o(are)g(in)o(terfaces)h
(directly)h(to)e(application)j(lev)o(el,)f(allo)o(wing)g(e\016cien)o(t)f(and)
79 956 y(\015exible)j(implemen)o(tation)f(and)e(rede\014nition)i(of)e
(traditionally)i(k)o(ernel-lev)o(el)g(services.)20 b(In)12
b(this)g(c)o(hapter)79 1013 y(w)o(e)21 b(motiv)m(ate)g(the)g(need)h(for)e
(more)h(\015exible)i(and)e(e\016cien)o(t)h(implemen)o(tations)g(of)f(basic)g
(op)q(erating)79 1069 y(system)15 b(services:)21 b(IPC,)15
b(virtual)g(memory)l(,)g(pro)q(cess)g(creation,)g(exception)h(handling)h(and)
e(protection)79 1126 y(domains.)30 b(F)l(or)17 b(eac)o(h)i(of)e(the)i
(examples)g(w)o(e)e(measure)i(the)f(k)o(ey)g(op)q(erations)g(that)g(they)g
(dep)q(end)i(on;)79 1182 y(these)13 b(results)f(are)f(compared)h(against)f
(those)h(obtained)g(on)g(a)g(mature)f(monolithic)i(op)q(erating)f(system.)150
1239 y(While)j(all)f(of)f(the)h(examples)g(sho)o(w)f(can)h(b)q(e)g(implemen)o
(ted)h(directly)g(in)f(application-space)h(on)f(top)79 1295
y(of)k(the)h(exok)o(ernel,)g(the)g(ma)s(jorit)o(y)e(cannot)h(b)q(e)h
(implemen)o(ted)h(e\016cien)o(tly)g(\(or)e(at)f(all\))i(on)g(an)o(y)f(other)
79 1352 y(curren)o(t)e(op)q(erating)g(system.)21 b(There)16
b(are)g(four)f(basic)i(reasons)e(for)g(this)i(inabilit)o(y)l(.)24
b(First,)15 b(traditional)79 1408 y(OS-enforced)k(abstractions)d(of)g(hardw)o
(are)g(resources)h(hide)h(v)m(aluable)h(information,)e(giving)h(applica-)79
1464 y(tions)11 b(v)o(ery)f(little)h(con)o(trol)f(o)o(v)o(er)g(hardw)o(are)f
(resources.)18 b(Second,)12 b(op)q(erating)f(systems)e(necessarily)j(mak)o(e)
79 1521 y(trade-o\013s)18 b(in)i(implemen)o(ting)g(abstraction.)30
b(Since)20 b(man)o(y)e(trade-o\013s)g(are)g(application-dep)q(e)q(nden)o(t,)
79 1577 y(this)c(leads)f(to)g(p)q(o)q(or)g(p)q(erformance)g(in)g
(applications)i(that)d(w)o(ere)h(neglected)h(or)e(not)h(an)o(ticipated)h(b)o
(y)e(the)79 1634 y(k)o(ernel)17 b(arc)o(hitects)f(\(e.g.,)f(LR)o(U)i(and)f
(MR)o(U)g(page)g(replacemen)o(t)g(p)q(olicies\).)25 b(Third,)16
b(OS)h(abstractions)79 1690 y(ha)o(v)o(e)d(to)g(b)q(e)g(more)g(general)h(and)
f(th)o(us)g(more)f(exp)q(ensiv)o(e)j(than)e(sp)q(ecialized,)j(tuned)e
(implemen)o(tations.)79 1747 y(F)l(ourth,)k(extensions)g(to)f(traditional)h
(OS)g(abstractions)f(can)h(only)g(b)q(e)g(implemen)o(ted)h(b)o(y)f(k)o(ernel)
g(ar-)79 1803 y(c)o(hitects.)33 b(In)20 b(the)f(real)h(w)o(orld)f(this)g(mak)
o(es)g(c)o(hange)g(v)o(ery)g(slo)o(w:)28 b(creating)19 b(su\016cien)o(t)h
(incen)o(tiv)o(e)h(for)79 1860 y(k)o(ernel)16 b(arc)o(hitects)g(to)e(incorp)q
(orate)i(a)e(new)i(feature)f(in)o(to)g(an)g(already)g(bloated,)h(complex)g
(and)f(fragile)79 1916 y(op)q(erating)h(system)f(is)g(di\016cult.)150
1973 y(This)h(c)o(hapter)f(tests)f(three)h(h)o(yp)q(otheses.)21
b(First,)14 b(lo)o(w-lev)o(el)i(m)o(ultiplexing)i(is)e(not)e(exp)q(ensiv)o
(e:)22 b(i.e.,)79 2029 y(the)d(cost)g(of)f(\015exibilit)o(y)k(in)d(an)g(exok)
o(ernel)h(system)e(is)h(either)h(negligible)i(or)c(easily)i(recoup)q(ed.)32
b(Sec-)79 2085 y(ond,)15 b(basic)g(system)f(abstractions)g(can)g(b)q(e)h
(implemen)o(ted)h(at)e(application)i(lev)o(el)g(in)f(a)f(direct)h(manner.)79
2142 y(Finally)l(,)k(sp)q(ecialization)g(and)e(extensibilit)o(y)i(of)d(these)
h(abstractions)g(can)f(cause)h(substan)o(tial)g(p)q(erfor-)79
2198 y(mance)c(impro)o(v)o(emen)o(ts.)19 b(The)13 b(follo)o(wing)h(sections)f
(test)f(eac)o(h)h(h)o(yp)q(othesis)g(for)f(a)h(particular)g(op)q(erating)79
2255 y(system)h(abstraction:)19 b(Section)c(4.2)e(discusses)i(pro)q(cesses,)f
(Section)h(4.3)e(IPC,)h(Section)g(4.4)f(protection)79 2311
y(domains,)18 b(Section)g(4.5)e(exceptions,)i(and)g(Section)g(4.6)e(virtual)i
(memory)l(.)25 b(Eac)o(h)17 b(section)h(is)f(divided)79 2368
y(in)o(to)j(three)g(parts.)33 b(The)20 b(\014rst)f(pro)o(vides)h(a)g(brief)g
(discussion)h(of)f(exok)o(ernel)g(capabilities)i(in)f(imple-)79
2424 y(men)o(ting)c(eac)o(h)f(abstraction.)22 b(The)16 b(second)h(presen)o
(ts)f(a)f(n)o(um)o(b)q(er)i(of)e(motiv)m(ating)i(examples)f(that)g(are)79
2481 y(enabled)k(b)o(y)d(an)h(exok)o(ernel)g(structure.)27
b(The)18 b(third)g(giv)o(es)g(a)f(set)g(of)h(measuremen)o(ts)f(demonstrating)
79 2537 y(that)i(the)g(examples)h(w)o(e)f(discuss)h(can)f(b)q(e)h(implemen)o
(ted)g(b)q(oth)g(e\016cien)o(tly)g(and)f(w)o(ell)h(on)f(top)g(of)g(an)79
2594 y(exok)o(ernel.)150 2650 y(It)14 b(is)g(v)o(ery)g(imp)q(ortan)o(t)f(to)g
(note)h(that)f(the)h(exok)o(ernel)h(w)o(e)e(measure)h(is)g(curren)o(tly)h(a)e
Fn(toy)j(implemen-)957 2817 y Fo(73)p eop
%%Page: 74 76
74 75 bop 179 -6 1601 2 v 178 54 2 60 v 204 37 a Fl(Mac)o(hine)p
834 54 V 463 w(OS)p 1076 54 V 174 w(Sp)q(ecIn)o(t89)p 1353
54 V 1390 26 a(~)1379 37 y(MIPS)p 1537 54 V 49 w(Memor)o(y)p
1779 54 V 179 55 1601 2 v 178 112 2 57 v 204 95 a Fo(DECstation)14
b(2100)g(\(12.5)g(MHz\))p 834 112 V 72 w(Ultrix)i(4.2)p 1076
112 V 218 w(8.7)p 1353 112 V 137 w(11)p 1537 112 V 108 w(12)e(MB)p
1779 112 V 179 113 1601 2 v 178 170 2 57 v 204 153 a(DECstation)g(3100)g
(\(16.67)g(MHz\))p 834 170 V 49 w(Ultrix)i(4.2)p 1076 170 V
195 w(11.8)p 1353 170 V 137 w(15)p 1537 170 V 108 w(24)e(MB)p
1779 170 V 179 172 1601 2 v 626 249 a(Figure)h(4-1:)20 b(Exp)q(erimen)o(tal)c
(platforms)79 382 y Fn(tation)p Fo(:)28 b(it)20 b(has)f(no)g(disk)h(supp)q
(ort,)g(and)f(only)h(rudimen)o(tary)f(soft)o(w)o(are.)30 b(While)21
b(w)o(e)e(do)g(not)g(exp)q(ect)79 439 y(these)d(additions)g(to)e(cause)h
(large)g(\015uctuations)h(in)f(our)g(measuremen)o(ts,)f(w)o(e)h(emphasize)h
(that)e(ours)h(is)79 495 y Fn(not)j Fo(a)g(widely-used,)i(robust)e(implemen)o
(tation:)26 b(the)18 b(en)o(tire)h(user)f(comm)o(unit)o(y)g(is,)g(at)g(the)g
(momen)o(t,)79 552 y(three)e(p)q(eople.)79 695 y Fu(4.1)70
b(Exp)r(erime)o(n)n(tal)20 b(en)n(vironmen)n(t)150 796 y Fo(W)l(e)e(run)f
(exp)q(erimen)o(ts)h(within)h(the)f(DECstation/MIPS)e(family;)j(the)e(mac)o
(hine)h(con\014gurations)79 853 y(w)o(e)c(use)g(are)f(sho)o(wn)g(in)i(Figure)
f(4-1.)19 b(The)14 b(t)o(w)o(o)e(mac)o(hine)i(con\014gurations)g(are)f(used)i
(to)e(get)g(a)g(ten)o(tativ)o(e)79 909 y(measure)j(of)f(the)h(scalabilit)o(y)
h(of)e(the)h(exok)o(ernel.)21 b(All)c(times)f(are)f(measured)h(using)g(the)g
(\\w)o(all-clo)q(c)o(k.")79 966 y(W)l(e)j(used)g Fj(clock)f
Fo(on)g(the)h(Unix)g(implemen)o(tations)h(and)e(a)g(micro-second)i(coun)o
(ter)e(on)g(the)h(exok)o(er-)79 1022 y(nel.)31 b(The)18 b(exok)o(ernel's)h
(time-quan)o(tum)f(w)o(as)g(set)g(at)g(15.625)e(milliseconds.)32
b(All)20 b(b)q(enc)o(hmarks)f(w)o(ere)79 1078 y(compiled)g(using)f(an)f(iden)
o(tical)h(compiler)h(and)e(\015ags:)23 b Fj(gcc)16 b Fo(v)o(ersion)h(2.6)f
(with)h(optimization)h(\015ags)f(\\-)79 1135 y(O2".)31 b(None)19
b(of)g(the)g(b)q(enc)o(hmarks)g(use)h(\015oating-p)q(oin)o(t)f(instructions;)
i(w)o(e)e(do)g(not,)g(therefore,)g(sa)o(v)o(e)79 1191 y(\015oating-p)q(oin)o
(t)d(state.)j(Both)c(systems)g(w)o(ere)g(run)g(in)h(\\single-user")h(mo)q
(de.)150 1248 y(All)g(exp)q(erimen)o(ts)f(w)o(ere)f(measured)h(b)o(y)f(p)q
(erforming)h(a)f(large)h(n)o(um)o(b)q(er)f(of)g(trials)h(and)g(dividing)i(b)o
(y)79 1304 y(this)f(n)o(um)o(b)q(er)f(to)g(get)f(the)h(base)g(cost)g(of)f(a)h
(single)h(op)q(eration.)23 b(None)16 b(of)f(the)h(exp)q(erimen)o(ts)h(used)g
(lo)q(op)79 1361 y(unrolling)g(to)d(minimize)j(lo)q(oping)e(o)o(v)o(erhead.)
20 b(Since)c(this)f(o)o(v)o(erhead)f(is)h(equiv)m(alen)o(t)h(on)f(b)q(oth)f
(systems,)79 1417 y(it)20 b(understates)f(the)g(p)q(erformance)h(gains)f
(that)g(our)g(system)g(obtains)g(o)o(v)o(er)f(Ultrix.)33 b(Because)20
b(suc)o(h)79 1474 y(measuremen)o(ts)f(do)g(not)f(consider)i(cold)f(start)e
(or)i(capacit)o(y)g(misses)g(in)g(the)g(cac)o(he)g(or)f(TLB)h(misses,)79
1530 y(they)c(represen)o(t)f(a)g(\\b)q(est)h(case".)k(Ho)o(w)o(ev)o(er,)13
b(Ultrix)i(has)f(a)g(m)o(uc)o(h)h(larger)f(cac)o(he)h(and)f(virtual)h(memory)
79 1587 y(fo)q(otprin)o(t)20 b(than)g(Aegis,)h(again)f(making)g(this)g(form)f
(of)g(measuremen)o(t)h(more)f(fa)o(v)o(orable)g(to)h(it)g(than)79
1643 y(to)c(the)g(exok)o(ernel.)22 b(W)l(e)16 b(therefore)g(b)q(eliev)o(e)i
(that)d(the)h(di\013erence)h(in)g(p)q(erformance)f(b)q(et)o(w)o(een)g(the)g
(t)o(w)o(o)79 1699 y(systems)i(is)h(a)e(conserv)m(ativ)o(e)i(one.)29
b(Finally)l(,)20 b(w)o(e)d(note)h(that)g(Ultrix,)h(despite)g(its)f(p)q(o)q
(or)g(p)q(erformance)79 1756 y(relativ)o(e)k(to)e(Aegis,)i(is)g
Fn(not)e Fo(a)h(p)q(o)q(orly)g(tuned)g(system.)37 b(It)20 b(is)i(a)e(mature)g
(monolithic)j(system)d(that)79 1812 y(p)q(erforms)g(quite)h(w)o(ell)g(in)f
(comparison)g(to)g(other)f(researc)o(h)h(op)q(erating)g(systems.)33
b(F)l(or)20 b(example,)h(it)79 1869 y(p)q(erforms)c(t)o(w)o(o)f(to)h(three)g
(times)g(b)q(etter)g(than)g(Mac)o(h)g(3.0)f(in)i(a)f(set)g(of)f(I/O)i(b)q
(enc)o(hmarks)f([75)o(].)25 b(Also,)79 1925 y(its)19 b(virtual)f(memory)f(p)q
(erformance)h(\(measured)g(in)h(Section)g(4.6\))d(is)j(appro)o(ximately)f(t)o
(wice)g(that)f(of)79 1982 y(Mac)o(h)e(2.5)f(and)i(three)f(times)h(that)e(of)h
(Mac)o(h)g(3.0.)150 2038 y(A)h(few)h(of)f(the)g(Aegis)h(b)q(enc)o(hmarks)g(w)
o(ere)f(extremely)h(sensitiv)o(e)g(to)f(instruction)h(cac)o(he)g
(con\015icts.)79 2095 y(In)22 b(some)f(cases)g(the)g(e\013ects)g(amoun)o(ted)
g(to)f(a)h(factor)f(of)g(three)i(p)q(erformance)f(p)q(enalt)o(y)l(.)38
b(A)21 b(minor)79 2151 y(rearrangemen)o(t)f(of)h(ob)s(ject)f(co)q(de)i
(during)f(linking)i(w)o(as)d(su\016cien)o(t)i(to)e(remo)o(v)o(e)h(most)f
(con\015icts.)37 b(A)79 2208 y(happ)o(y)20 b(side-e\013ect)h(of)e(using)i
(application-lev)o(el)i(libraries)e(is)f(that)f(ob)s(ject)g(co)q(de)h
(rearrangemen)o(t)f(is)79 2264 y(extremely)h(straigh)o(t)e(forw)o(ard)g
(\(i.e.,)h(a)g(\\mak)o(e\014le")g(edit\).)32 b(F)l(urthermore,)19
b(with)g(instruction)h(cac)o(he)79 2320 y(to)q(ols,)14 b(all)h(con\015icts)f
(b)q(et)o(w)o(een)g(application)i(and)e(library)g(op)q(erating)g(system)f(co)
q(de)i(could)g(b)q(e)f(remo)o(v)o(ed)79 2377 y(automatically)e(|)g(an)g
(option)f(not)g(a)o(v)m(ailable)i(to)e(applications)i(using)g(traditional)f
(op)q(erating)f(systems!)79 2433 y(W)l(e)16 b(b)q(eliev)o(e)h(that)e(the)g
(large)g(impact)h(of)f(instruction)h(cac)o(he)f(con\015icts)h(is)g(due)g(to)f
(the)g(fact)g(that)f(most)79 2490 y(Aegis)j(op)q(erations)f(are)f(p)q
(erformed)h(at)g(near)f(hardw)o(are)g(sp)q(eed.)23 b(As)16
b(suc)o(h,)g(ev)o(en)g(minor)g(con\015icts)h(are)79 2546 y(noticeable.)150
2603 y(The)12 b(base)g(cost)f(for)g(a)h(n)o(ull)h(pro)q(cedure)g(and)f
(system)f(calls)i(are)e(giv)o(en)h(in)h(Figure)f(4-2.)18 b(The)12
b(n)o(ull)i(pro-)79 2659 y(cedure)g(call)h(is)e(presen)o(ted)h(as)f(a)g
(sanit)o(y)g(c)o(hec)o(k:)19 b(giv)o(en)13 b(its)h(minimal)g(op)q(erating)g
(system)e(requiremen)o(ts,)957 2817 y(74)p eop
%%Page: 75 77
75 76 bop 213 44 1534 2 v 212 100 2 57 v 238 83 a Fl(Mac)o(hine)p
455 100 V 451 w(OS)p 974 100 V 50 w(pro)q(cedure)17 b(call)p
1348 100 V 52 w(syscall)h(\(getpid\))p 1745 100 V 213 102 1534
2 v 212 159 2 57 v 242 142 a Fo(DEC2100)p 455 159 V 340 w(Ultrix4.2)p
974 159 V 316 w(.57)p 1348 159 V 315 w(32.2)p 1745 159 V 212
215 V 242 198 a(DEC2100)p 455 215 V 111 w(Aegis)e(\(path1:)j(stac)o(k\))p
974 215 V 315 w(.56)p 1348 215 V 338 w(4.7)p 1745 215 V 212
271 V 242 255 a(DEC2100)p 455 271 V 48 w(Aegis)d(\(path2:)j(no)c(stac)o(k\))p
974 271 V 315 w(.56)p 1348 271 V 338 w(3.2)p 1745 271 V 213
273 1534 2 v 212 330 2 57 v 242 313 a(DEC3100)p 455 330 V 340
w(Ultrix4.2)p 974 330 V 316 w(.42)p 1348 330 V 315 w(33.7)p
1745 330 V 212 386 V 242 369 a(DEC3100)p 455 386 V 111 w(Aegis)h(\(path1:)j
(stac)o(k\))p 974 386 V 315 w(.42)p 1348 386 V 338 w(3.5)p
1745 386 V 212 442 V 242 426 a(DEC3100)p 455 442 V 48 w(Aegis)d(\(path2:)j
(no)c(stac)o(k\))p 974 442 V 315 w(.42)p 1348 442 V 338 w(2.9)p
1745 442 V 213 444 1534 2 v 275 521 a(Figure)g(4-2:)20 b(Null)d(pro)q(cedure)
f(and)f(system)g(call;)h(times)f(are)g(in)h(micro-seconds)79
655 y(it)e(should)f(b)q(e)h(\(and)f(is\))g(the)g(same)f(on)h(b)q(oth)g(op)q
(erating)g(systems.)19 b(It)13 b(obliquely)i(sho)o(ws)d(that)g(for)g(Aegis')
79 711 y(\015exibili)q(t)o(y)j(do)q(es)f(not)f(add)h(o)o(v)o(erhead)f(to)g
(base)g(op)q(erations.)20 b(Aegis)14 b(has)f(t)o(w)o(o)f(system)h(call)i
(paths.)k(Both)79 768 y(p)q(erform)14 b(the)f(same)g(initial)j(dem)o
(ultiplexing)g(actions)e(required)g(b)o(y)f(the)h(MIPS)f(arc)o(hitecture:)20
b(a)13 b(series)79 824 y(of)k(branc)o(hes)h(to)e(determine)j(the)e(cause)h
(of)e(the)i(exception)g(and)f(whether)h(the)f(system)g(call)h(index)h(is)79
881 y(to)q(o)c(large,)h(and)g(an)f(indirect)i(jump)f(through)g(a)f(jump)h
(table)g(to)f(v)o(ector)g(the)g(PC)h(to)f(the)g(appropriate)79
937 y(v)m(alue.)21 b(The)13 b(di\013erence)i(b)q(et)o(w)o(een)e(them)h(is)f
(that)g(path1)g(uses)g(a)g(stac)o(k,)g(while)h(path2)f(do)q(es)h(not.)k(P)o
(ath1)79 993 y(p)q(erforms)11 b(an)h(additional)g(jump)g(through)f(a)g(jump)g
(table)h(and)g(has)f(the)g(additional)i(o)o(v)o(erhead)e(of)g(sa)o(ving)79
1050 y(and)i(restoring)f(a)g(few)g(registers)g(and)g(loading)h(the)f(exok)o
(ernel)h(stac)o(k.)18 b(With)13 b(the)f(exception)h(of)f(up)q(calls,)79
1106 y(whic)o(h)k(are)f(sp)q(ecial-cased)i(for)e(e\016ciency)l(,)h(all)g
(Aegis)f(system)g(calls)h(are)f(v)o(ectored)g(along)g(one)g(of)f(these)79
1163 y(paths.)24 b(It)16 b(is)h(not)f(clear)h(whether)f(Ultrix's)h
Fj(getpid)e Fo(routine)i(uses)g(a)f(stac)o(k)f(or)h(not;)g(regardless,)g(it)h
(is)79 1219 y(appro)o(ximately)h(an)g(order)f(of)g(magnitude)h(slo)o(w)o(er)f
(than)h(the)g(either)g(of)f(the)h(t)o(w)o(o)e(system)h(call)i(paths)79
1276 y(on)e(the)f(exok)o(ernel)h(|)f(this)h(suggests)e(that)h(the)g(base)g
(cost)g(of)g(dem)o(ultiplexing)j(system)d(calls)h(will)h(b)q(e)79
1332 y(noticeably)f(higher)e(on)g(Ultrix.)20 b(P)o(art)14 b(of)g(the)h
(reason)g(Ultrix)g(is)h(so)e(m)o(uc)o(h)h(less)g(e\016cien)o(t)h(on)f(this)g
(basic)79 1389 y(op)q(eration)h(is)g(that)f(it)g(is)h(required)h(to)e(p)q
(erform)g(a)g(more)g(exp)q(ensiv)o(e)i(dem)o(ultiplexing)h(op)q(eration.)j(F)
l(or)79 1445 y(example,)c(page-table)f(misses)g(during)g(TLB)h(re\014lls)g
(are)e(v)o(ectored)g(through)h(this)g(exception)g(handler)79
1502 y(and)21 b(so)e(Ultrix)i(m)o(ust)e(tak)o(e)g(great)g(care)h(not)f(to)g
(disturb)i(an)o(y)e(registers)h(that)f(will)j(b)q(e)e(required)h(to)79
1558 y(\\patc)o(h)14 b(up")g(an)f(in)o(terrupted)i(TLB)f(miss.)20
b(Because)14 b(Aegis)h(do)q(es)f(not)f(map)h(its)g(data-structures)f(\(and)79
1614 y(has)j(no)h(page-tables\))f(it)g(can)g(a)o(v)o(oid)g(suc)o(h)h(in)o
(tricacies.)24 b(W)l(e)16 b(exp)q(ect)h(that)e(this)i(will)h(b)q(e)f(the)f
(common)79 1671 y(case)g(with)g(all)h(exok)o(ernels,)f(since)h(they)f(should)
h(b)q(e)f(quite)g(small)h(and)f(therefore)f(not)h(require)g(paging)79
1727 y(of)f(k)o(ernel)h(text)f(and)g(co)q(de.)79 1871 y Fu(4.2)70
b(Pro)r(cesses)79 1972 y Fo(This)21 b(section)f(discusses)i(pro)q(cess)e(sc)o
(heduling,)i(pro)q(cess)f(creation,)g(and)f(con)o(text)f(switc)o(hing)i(on)f
(an)79 2029 y(exok)o(ernel.)79 2150 y Fp(4.2.1)56 b(Pro)r(cess)18
b(sc)n(heduling)79 2236 y Fo(The)g(exok)o(ernel)g(represen)o(ts)g(the)f(CPU)g
(as)g(a)h(linear)g(v)o(ector)f(of)g(time-slices.)28 b(A)18
b(crucial)h(prop)q(ert)o(y)e(of)79 2293 y(this)h(represen)o(tation)f(is)g
Fn(p)n(osition)p Fo(,)g(whic)o(h)h(enco)q(des)g(an)f(ordering)g(\(and)g(an)g
(appro)o(ximate)f(guaran)o(tee)79 2349 y(of)d(when)g(the)g(time-slice)i(will)
f(b)q(e)g(run\).)19 b(P)o(osition)13 b(can)g(b)q(e)g(used)h(to)e(meet)g
(deadlines,)j(to)d(trade)h(latency)79 2405 y(for)j(throughput,)f(and)h(to)g
(order)f(pro)q(cess)h(initiations.)24 b(As)16 b(discussed)h(in)g(Section)g
(3.3.2,)d(this)i(simple)79 2462 y(sc)o(heduler)h(can)e(e\016cien)o(tly)i
(supp)q(ort)e(a)g(broad)g(range)g(of)g(higher-lev)o(el)i(sc)o(hedulers.)957
2817 y(75)p eop
%%Page: 76 78
76 77 bop 79 34 a Fp(4.2.2)56 b(Pro)r(cess)18 b(Creation)79
120 y Fo(T)l(raditionally)l(,)g(op)q(erating)d(system)g(supp)q(ort)h(for)f
(pro)q(cess)g(creation)h(has)f(b)q(een)i(ine\016cien)o(t.)22
b(This)16 b(fact)79 176 y(results)k(from)f(the)g(fact)g(that)f(pro)q(cesses)i
(ha)o(v)o(e)f(t)o(ypically)h(b)q(een)h(created)e(using)h(a)f(single)h
(primitiv)o(e,)79 233 y Fj(fork\(\))p Fo(,)i(in)o(tended)g(mainly)g(for)e(m)o
(ultiprogramming.)37 b(The)21 b(upshot)g(of)f(this)i(ine\016ciency)h(is)e
(that)79 289 y(creating)16 b(a)f(new)g(address)g(space)h(or)f(protection)g
(domain)g(has)h(b)q(een)g(v)o(ery)f(exp)q(ensiv)o(e.)150 346
y(Since)g(the)f(exok)o(ernel)h(exp)q(orts)f(the)f(bare)h(minim)o(um)h
(required)g(to)e(construct)h(threads)g(\(i.e.,)f(time-)79 402
y(slices\))20 b(and)e(address)h(spaces)f(\(i.e.,)g(en)o(vironmen)o(ts\),)h
(applications)h(ha)o(v)o(e)d(an)i(enormous)e(amoun)o(t)h(of)79
459 y(freedom)e(in)g(ho)o(w)f(high-lev)o(el)i(pro)q(cess)f(abstractions)f
(are)g(implemen)o(ted.)22 b(Some)15 b(examples)h(are)f(giv)o(en)79
515 y(b)q(elo)o(w:)150 571 y Fl(E\016cien)o(t)i(fault-isolati)q(on)p
Fo(.)23 b(Applications)16 b(can)e(isolate)h(un)o(trusted)g(co)q(de)g(\(e.g.,)
e(an)h(RPC)h(com-)79 628 y(ing)20 b(in)g(o\013)f(of)g(the)g(wire\))g(b)o(y)h
(executing)g(it)f(in)i(its)e(o)o(wn)g(address-space/protection-domain.)33
b(This)79 684 y(\015a)o(v)o(or)20 b(of)f(fault-isolation)j(is)e(directly)i
(enabled)g(b)o(y)e(e\016cien)o(t)h(pro)q(cess)f(creation)h(\(i.e.,)f(the)h
(time)f(to)79 741 y(create)15 b(a)g(new)h(address)f(space)g(is)h(lo)o(w\).)
150 797 y Fl(Expressiv)o(e)c(pro)q(cess)g(creation)p Fo(.)20
b(Application-lev)o(el)15 b(pro)q(cess)d(creation)f(allo)o(ws)h(a)f(great)g
(deal)h(of)79 854 y(\015exibili)q(t)o(y)h(in)f(implemen)o(tation;)i
(furthermore,)d(as)f(w)o(e)h(discussed)i(previously)l(,)g(since)f(the)f
(implemen)o(ta-)79 910 y(tion)i(of)f(these)g(abstractions)g(do)q(es)h(not)f
(require)h(sp)q(ecial)h(privileges,)g(go)q(o)q(d)f(ideas)g(can)f(b)q(e)h
(incorp)q(orated)79 967 y(in)k(systems)d(other)h(than)g(those)g(that)g(they)g
(originated)h(on)f(\(e.g.,)e(Plan9's)i Fj(rfork)g Fo([100)o(]\).)150
1023 y Fl(Sp)q(ecialized)i Fj(fork)d Fl(implem)o(en)o(tations)p
Fo(.)j(Man)o(y)12 b(micro-k)o(ernels)h(omit)g(e\013ectiv)o(e)g(optimizations)
79 1080 y(that)j(w)o(ould)g(complicate)i(their)e(virtual)h(memory)f(system.)
22 b(F)l(or)16 b(example,)g(QNX)h(do)q(es)g(not)e(supp)q(ort)79
1136 y(cop)o(y-on-write,)f(ev)o(en)h(though)e(that)g(could)i(sp)q(eed)g(up)f
(pro)q(cess)g(creation)g(b)o(y)g(an)f(order)h(of)f(magnitude.)79
1192 y(Since)18 b(applications)g(completely)g(con)o(trol)e(these)h(implemen)o
(tations)h(on)e(top)g(of)g(the)g(exok)o(ernel,)h(they)79 1249
y(can)f(incorp)q(orate)f(\(or)g(neglect\))g(optimizations)h(as)f(they)g(see)h
(\014t.)79 1371 y Fp(4.2.3)56 b(E\016cien)n(t)17 b(timer)g(in)n(terrupts)79
1456 y Fo(The)j(exok)o(ernel)g(forw)o(ards)e(all)i(exceptions)g(and)f(in)o
(terrupts)g(to)g(applications.)33 b(A)20 b(sp)q(eci\014c)h(case)e(w)o(e)79
1513 y(consider)j(here)f(is)f(timer)h(in)o(terrupts;)i(when)d(a)g(time)h
(slice)h(expires)f(\(i.e.,)g(a)f(pro)q(cess')h(time-slice)h(is)79
1569 y(complete\))12 b(the)g(k)o(ernel)g(forw)o(ards)e(a)h(timer-in)o
(terrupt)h(to)f(application-space.)21 b(This)12 b(in)o(terrupt)f(handler)79
1626 y(is)19 b(resp)q(onsible)i(for)d(sa)o(ving)g(application)i(state)e(and)h
(p)q(erforming)f(an)o(y)h(necessary)f(clean-up)i(actions)79
1682 y(b)q(efore)c(the)f(pro)q(cess)h(is)f(susp)q(ended.)22
b(This)16 b(\015exibilit)o(y)i(allo)o(ws)d(a)g(n)o(um)o(b)q(er)g(of)g(simple)
i(optimizations:)150 1739 y Fl(F)l(ast)24 b(pro)q(cess)f(con)o(text)h(switc)o
(hing)p Fo(.)38 b(Con)o(text-switc)o(hing)21 b(costs)f(can)h(b)q(e)g(reduced)
h(b)o(y)f(not)79 1795 y(sa)o(ving)d(\015oating-p)q(oin)o(t)f(registers)g(if)h
(they)f(ha)o(v)o(e)g(not)g(b)q(een)h(used.)26 b(This)18 b(w)o(ell-kno)o(wn)g
(tec)o(hnique)g(can)79 1852 y(substan)o(tially)c(reduce)f(the)g(cost)f(of)g
(con)o(text)g(switc)o(hes)h([72)o(].)19 b(Information)12 b(ab)q(out)h(the)f
(use)h(of)f(\015oating-)79 1908 y(p)q(oin)o(t)24 b(can)f(either)g(b)q(e)h
(deduced)g(statically)g(\(e.g.,)f(through)f(application-sp)q(eci)q(\014c)k
(kno)o(wledge\))d(or)79 1965 y(dynamically)l(.)37 b(Dynamic)20
b(detection)h(can)f(b)q(e)g(done)h(in)f(a)g(n)o(um)o(b)q(er)g(of)g(w)o(a)o
(ys.)33 b(The)20 b(most)f(common)79 2021 y(tec)o(hnique)f(marks)d(the)i
(\015oating-p)q(oin)o(t)f(hardw)o(are)g(as)g(un)o(usable:)23
b(subsequen)o(t)16 b(use)h(will)h(generate)e(an)79 2077 y(exception,)f(whic)o
(h)g(is)f(used)h(to)e(indicate)i(that)f(con)o(text)f(switc)o(hing)i(should)f
(sa)o(v)o(e)g(\015oating)f(p)q(oin)o(t)i(state.)79 2134 y(Applications)j(can)
d(use)h(this)f(tec)o(hnique)i(in)f(an)f(analogous)g(manner.)150
2190 y Fl(F)l(ast)f(user-lev)o(el)g(thread)g(con)o(text)h(switc)o(hing)p
Fo(.)k(The)13 b(metho)q(ds)f(used)h(to)f(dynamically)i(detect)79
2247 y(\015oating-p)q(oin)o(t)22 b(usage)f(ha)o(v)o(e)f(not)h(traditionally)h
(b)q(een)g(made)f(accessible)i(to)d(applications.)39 b(When)79
2303 y(\015oating-p)q(oin)o(t)16 b(usage)e(cannot)g(b)q(e)i(determined)f
(statically)l(,)h(thread)e(con)o(text)g(switc)o(hing)i(at)d(user)i(lev)o(el)
79 2360 y(has)e(therefore)g(b)q(een)h(ine\016cien)o(t.)21 b(If)13
b(the)g(dynamic)h(detection)f(of)g(\015oating-p)q(oin)o(t)g(usage)g(w)o(ere)g
(p)q(ossible)79 2416 y(at)g(application)i(lev)o(el,)g(thread)e(pac)o(k)m
(ages)g(could)i(impro)o(v)o(e)e(e\016ciency)i(through)e(the)h(use)f(of)g
(this)h(simple)79 2473 y(tec)o(hnique.)150 2529 y Fl(Sc)o(heduler)j(activ)m
(ations)p Fo(.)k(The)15 b(ine\016ciency)i(of)d(the)h(pro)q(cess)f
(abstraction)g(has)h(led)g(to)f(a)g(prolif-)79 2586 y(eration)e(of)g
(user-lev)o(el)h(ligh)o(t)o(w)o(eigh)o(t)f(pro)q(cesses)g(or)f(threads.)19
b(Unfortunately)l(,)12 b(since)h(user-lev)o(el)h(threads)79
2642 y(are)h(in)o(visible)i(to)c(the)i(op)q(erating)f(system,)g(their)h(use)g
(can)f(result)h(in)g(b)q(oth)g(p)q(erformance)f(and)h(correct-)957
2817 y(76)p eop
%%Page: 77 79
77 78 bop 79 34 a Fo(ness)14 b(problems)g([4)o(].)19 b(F)l(or)12
b(example,)i(consider)g(the)f(case)h(where)f(t)o(w)o(o)f(threads)h(are)f(m)o
(ultiplexed)k(on)d(top)79 90 y(of)18 b(a)f(hea)o(vy-w)o(eigh)o(t)g(pro)q
(cess:)25 b(if)18 b(one)f(thread)h(causes)f(a)h(page-fault,)f(the)h(OS)g
(will)h(blo)q(c)o(k)f(the)g(en)o(tire)79 147 y(pro)q(cess,)f(rather)f(than)g
(letting)h(the)f(other)g(thread)g(run.)23 b(Handling)18 b(this)f(problem)g
(is)f(made)h(p)q(ossible)79 203 y(through)e(the)h(exok)o(ernel)g(structure,)e
(whic)o(h)i(exp)q(oses)g(the)f(ph)o(ysical)i(resources)e(and)g(their)h(asso)q
(ciated)79 260 y(exceptions)h(\(TLB)e(misses,)g(CPU)g(time-outs,)g(etc.\))20
b(to)14 b(the)i(running)g(en)o(vironmen)o(t.)150 316 y Fl(F)l(ast)22
b(m)o(utual)e(exclusion)p Fo(.)31 b(The)19 b(explicit)i(forw)o(arding)e(of)f
(timer-in)o(terrupts)h(to)g(application-)79 373 y(lev)o(el)g(allo)o(ws)e(the)
g(exception)i(program)d(coun)o(ters)h(v)m(alue)h(at)e(in)o(terrupt)i(to)e(b)q
(e)i(used)g(to)e(implemen)o(t)j(a)79 429 y(v)m(ariet)o(y)e(of)e(simple)j
(optimizations.)23 b(F)l(or)15 b(example,)i(it)f(allo)o(ws)g(e\016cien)o(t)h
(uni-pro)q(cessor)g(sync)o(hroniza-)79 486 y(tion)e(through)f
(critical-section)j(a)o(w)o(are)c(con)o(text-switc)o(hing)i(co)q(de)g(that)e
(can)i(\\p)q(c-luser")g(the)g(program)79 542 y(coun)o(ter)h(out)e(of)h
(critical)i(sections)e(at)g(con)o(text-switc)o(hing)h(time)f([15)o(].)150
599 y Fl(Fine-grained)h(PC-sampling)p Fo(.)i(E\016cien)o(t)13
b(timer)g(in)o(terrupts)g(allo)o(w)g(fast)e(\(and)i(th)o(us)f(more)h(\014ne-)
79 655 y(grained\))21 b(PC-sampling,)h(a)d(pro\014ling)j(tec)o(hnique)f
(based)g(on)f(the)g(simple)i(observ)m(ation)e(that,)g(since)79
711 y(the)g(program)e(coun)o(ter)h(will)i(most)e(frequen)o(tly)h(ha)o(v)o(e)f
(v)m(alues)h(on)f(the)h(critical)h(path,)e(recording)h(\(or)79
768 y(sampling\))11 b(the)g(program)e(coun)o(ter)h(v)m(alues)i(at)d(eac)o(h)i
(timer-in)o(terrupt)f(can)h(closely)g(appro)o(ximate)f(actual)79
824 y(execution)k(time)e([41)o(].)19 b(This)13 b(tec)o(hnique)g(is)g(m)o(uc)o
(h)f(more)g(e\016cien)o(t)h(than)f(a)g(deterministic)i(metho)q(d)e(suc)o(h)79
881 y(as)j(describ)q(ed)i(b)o(y)f(Larus)f([10)o(];)f(furthermore,)h(it)g(do)q
(es)h(not)e(require)i(compiler)h(supp)q(ort.)79 1003 y Fp(4.2.4)56
b(Exp)r(erime)o(n)n(ts)79 1088 y Fo(W)l(e)18 b(v)o(erify)g(that)f(the)h(use)g
(of)g(prologue)g(and)g(epilogue)h(co)q(de)g(do)q(es)f(not)f(in)o(tro)q(duce)i
(noticeable)g(o)o(v)o(er-)79 1145 y(head.)k(This)17 b(can)f(b)q(e)h(seen)f
(in)h(Figure)f(4-2,)g(whic)o(h)h(measured)f(the)g(time)h(to)e(p)q(erform)h(a)
f(function)i(call)79 1201 y(ten)i(million)i(calls.)31 b(This)20
b(measuremen)o(t)e(includes)j(a)d(large)h(n)o(um)o(b)q(er)g(of)f
(application-lev)o(el)k(con)o(text)79 1258 y(switc)o(hes,)17
b(and)g(is)g(sligh)o(tly)h(faster)d(than)h(the)h(same)f(op)q(eration)h(under)
g(Ultrix,)g(whic)o(h)h(p)q(erforms)e(\\in-)79 1314 y(k)o(ernel")i(con)o(text)
f(switc)o(hes.)27 b(The)18 b(lac)o(k)f(of)g(di\013erence)i(should)f(b)q(e)g
(attributed)g(to)e(the)i(fact)f(that)f(the)79 1371 y(time-quan)o(ta)h
(\(15.625)e(milliseconds\))k(is)e(fairly)g(large)g(relativ)o(e)h(to)e(the)g
(extra)g(o)o(v)o(erhead)h(induced)i(b)o(y)79 1427 y(allo)o(wing)e
(applications)f(themselv)o(es)g(to)f(con)o(text)f(switc)o(h.)79
1570 y Fu(4.3)70 b(IPC)79 1672 y Fo(F)l(ast)13 b(IPC)h(is)h(crucial)g(for)e
(a)g(e\016cien)o(t,)i(decoupled)h(system)d([12)o(,)g(48,)g(67].)19
b(As)13 b(describ)q(ed)j(in)f(Chapter)e(3,)79 1728 y(the)g(Aegis)h(up)q(call)
g(mec)o(hanism)f(is)h(an)e(e\016cien)o(t)i(substrate)e(for)g(implemen)o(ting)
j(fast)c(IPC)i(mec)o(hanisms.)79 1785 y(W)l(e)j(en)o(umerate)f(some)g(IPC)g
(mec)o(hanisms)h(that)e(can)i(b)q(e)g(constructed)f(on)g(top)g(of)g(it.)150
1841 y Fl(T)l(rusted)f(LRPC)p Fo(.)f(IPC)g(to)f(a)g(trusted)h(domain)g(can)g
(b)q(e)g(optimized.)21 b(F)l(or)12 b(example,)i(a)e(clien)o(t)i(that)79
1898 y(trusts)f(a)g(serv)o(er)g(ma)o(y)l(,)f(instead)i(of)f(a)g(sa)o(ving)g
(and)g(then)h(restoring)f(its)g(en)o(tire)g(register)h(state,)e(allo)o(w)h
(the)79 1954 y(serv)o(er)j(to)f(sa)o(v)o(e)g(and)h(restore)f(the)h(registers)
g(it)g(needs)g([48)o(].)21 b(Because)c(the)f(mac)o(hine)g(state)f(of)h
(curren)o(t)79 2011 y(RISC)h(mac)o(hines)f(is)f(gro)o(wing)g(larger)g([76)o
(],)f(this)i(optimization)g(is)g(crucial)g(for)f(go)q(o)q(d)g(p)q
(erformance.)150 2067 y Fl(E\016cien)o(t)21 b(LRPC)p Fo(.)d(As)g(w)o(e)g(sho)
o(w)g(b)o(y)g(exp)q(erimen)o(t,)h(the)f(e\016ciency)i(of)e(the)g(up)q(call)i
(mec)o(hanism)79 2123 y(can)c(b)q(e)g(used)f(to)g(implemen)o(t)i(a)d(v)o(ery)
h(e\016cien)o(t)h(RPC)g(with)f(traditional)h(seman)o(tics)f([12)o(].)79
2245 y Fp(4.3.1)56 b(IPC)19 b(Exp)r(erime)o(n)n(ts)79 2331
y Fo(Measuremen)o(ts)c(section)h(IPC)f(is)h(measured)f(in)h(four)f(w)o(a)o
(ys:)150 2387 y Fl(up)q(call)p Fo(:)30 b(measures)18 b(the)h(\\bare-b)q
(ones")g(cost)g(of)f(the)h(exok)o(ernel's)h(up)q(call)g(mec)o(hanism.)32
b(Times)79 2444 y(are)19 b(giv)o(en)g(in)h(micro-seconds,)g(and)f(w)o(ere)f
(deriv)o(ed)i(b)o(y)f(dividing)i(the)d(time)h(to)g(p)q(erform)f(a)g(call)i
(and)79 2500 y(reply)14 b(b)o(y)e(2)g(\(i.e.,)g(w)o(e)g(measure)h(the)f(time)
h(to)e(p)q(erform)i(a)f(uni-directional)j(up)q(call\).)20 b(Un)o(trusted)13
b(up)q(calls)79 2557 y(sa)o(v)o(e)k(callee-sa)o(v)o(ed)h(registers)e(accross)
g(calls;)j(trusted)d(up)q(calls)j(trust)d(the)g(called)j(serv)o(er)d(to)g(sa)
o(v)o(e)g(and)79 2613 y(restore)j(an)o(y)g(registers)h(that)e(it)i(uses.)33
b(These)19 b(times)h(are)f(conserv)m(ativ)o(e)h(in)g(that)f(they)h(include)h
(the)79 2670 y(o)o(v)o(erhead)15 b(to)g(incremen)o(t)h(a)f(coun)o(ter)g(and)g
(p)q(erform)g(a)g(branc)o(h.)20 b(These)c(times)f(are)g(one)g(to)g(t)o(w)o(o)
f(orders)957 2817 y(77)p eop
%%Page: 78 80
78 79 bop 291 44 1378 2 v 290 103 2 60 v 355 87 a Fl(OS)p 447
103 V 357 w(Mac)o(hine)p 997 103 V 1035 76 a(~)1023 87 y(MIPS)p
1181 103 V 49 w(un)o(trusted)p 1453 103 V 49 w(trusted)p 1667
103 V 291 105 1378 2 v 290 162 2 57 v 316 145 a Fo(Aegis)p
447 162 V 161 w(DEC2100/12.5MHz)p 997 162 V 136 w(11)p 1181
162 V 213 w(5.9)p 1453 162 V 132 w(2.89)p 1667 162 V 290 218
V 372 201 a(L3)p 447 218 V 318 w(486/50MHz)p 997 218 V 137
w(10)p 1181 218 V 225 w(10)p 1453 218 V 144 w(n/a)p 1667 218
V 290 274 V 372 258 a(L3)p 447 274 V 73 w(486)14 b(50MHz\(normalized\))p
997 274 V 139 w(10)p 1181 274 V 213 w(9.1)p 1453 274 V 143
w(n/a)p 1667 274 V 291 276 1378 2 v 290 333 2 57 v 316 316
a(Aegis)p 447 333 V 139 w(DEC3100/16.67)o(MHz)p 997 333 V 136
w(15)p 1181 333 V 213 w(4.4)p 1453 333 V 155 w(2.2)p 1667 333
V 290 389 V 372 372 a(L3)p 447 389 V 318 w(486/50MHz)p 997
389 V 137 w(10)p 1181 389 V 225 w(10)p 1453 389 V 144 w(n/a)p
1667 389 V 290 446 V 372 429 a(L3)p 447 446 V 50 w(486/50MHz)g
(\(normalized\))p 997 446 V 139 w(10)p 1181 446 V 190 w(6.67)p
1453 446 V 143 w(n/a)p 1667 446 V 291 447 1378 2 v 393 524
a(Figure)h(4-3:)20 b Fj(upcall)14 b Fo(Benc)o(hmark;)h(times)g(are)g(in)h
(micro-seconds)p 274 636 1411 2 v 273 692 2 57 v 299 675 a
Fl(Mac)o(hine)p 517 692 V 159 w(OS)p 743 692 V 50 w(Unoptimized)h(\(usec\))p
1242 692 V 50 w(Optimized)g(\(usec\))p 1684 692 V 274 694 1411
2 v 273 750 2 57 v 303 733 a Fo(DEC2100)p 517 750 V 48 w(Ultrix4.2)p
743 750 V 430 w(334)p 1242 750 V 371 w(n/a)p 1684 750 V 273
807 V 303 790 a(DEC2100)p 517 807 V 118 w(Aegis)p 743 807 V
418 w(30.9)p 1242 807 V 360 w(24.8)p 1684 807 V 274 808 1411
2 v 273 865 2 57 v 303 848 a(DEC3100)p 517 865 V 48 w(Ultrix4.2)p
743 865 V 430 w(231)p 1242 865 V 371 w(n/a)p 1684 865 V 273
921 V 303 904 a(DEC3100)p 517 921 V 118 w(Aegis)p 743 921 V
418 w(22.6)p 1242 921 V 360 w(18.6)p 1684 921 V 274 923 1411
2 v 417 1000 a(Figure)e(4-4:)k Fj(pipe)c Fo(Benc)o(hmark;)g(times)h(are)e(in)
i(micro-seconds)79 1135 y(of)g(magnitude)g(faster)e(than)i(an)o(y)f(similar)i
(op)q(eration)e(a)o(v)m(ailable)j(under)e(Ultrix)g(\(in)g(fact,)f(they)g(are)
h(an)79 1191 y(order)f(of)g(magnitude)h(more)f(e\016cien)o(t)h(than)f
Fj(getpid)p Fo(!\).)150 1248 y(W)l(e)d(do)h(an)f(appro)o(ximate)g(comparison)
g(of)g(our)g(up)q(call)i(to)e(L3's)f(RPC)i(mec)o(hanism)g(|)f(whic)o(h)i(is)e
(the)79 1304 y(fastest)k(in)h(the)g(w)o(orld)f([67)o(])g(|)h(b)o(y)f(scaling)
h(L3's)f(times)h(to)f(the)g(MIPS)h(of)f(our)g(DECstation.)22
b(Aegis's)79 1361 y(up)q(call)15 b(mec)o(hanism)f(p)q(erforms)e(w)o(ell:)20
b(the)13 b(un)o(trusted)g(up)q(call)h(is)g(appro)o(ximately)f(30\045)f
(faster)g(than)h(L3,)79 1417 y(and)j(the)g(trusted)f(up)q(calls)j(appro)o
(ximately)e Fn(2)h(times)e Fo(faster.)20 b(W)l(e)c(ha)o(v)o(e)f(not)g(tuned)i
(the)e(Aegis)i(up)q(call)79 1474 y(aggressiv)o(ely:)28 b(arc)o(hitectural)20
b(c)o(haracteristics)f(of)g(the)g(MIPS)h(are)f(one)g(of)f(the)i(main)f
(determinan)o(ts)79 1530 y(of)f(our)f(b)q(etter)h(p)q(erformance)g(relativ)o
(e)g(to)f(L3.)27 b(F)l(or)17 b(example,)i(L3)e(pa)o(ys)h(a)f(hea)o(vy)g(p)q
(enalt)o(y)i(to)e(en)o(ter)79 1587 y(and)h(lea)o(v)o(e)g(the)g(k)o(ernel)g
(\(71)f(and)h(36)f(cycles,)i(resp)q(ectiv)o(ely\).)28 b(While)19
b(our)f(base)f(cost)g(is)i(not)e(so)g(high,)79 1643 y(m)o(uc)o(h)e(of)g(the)g
(Aegis)g(co)q(de)h(do)q(es)f(deal)h(with)f(required)h(op)q(erations:)k(dem)o
(ultiplexing)e(the)d(system)f(call)79 1699 y(exception)k(and)f(setting)g(the)
f(status,)g(co-pro)q(cessor)h(and)g(address)f(tag)g(registers.)24
b(F)l(urthermore,)16 b(for)79 1756 y(the)h(trusted)e(measuremen)o(ts,)h
(application-lev)o(el)j(co)q(de)e(m)o(ust)e(sa)o(v)o(e)g(8)h(general-purp)q
(ose)h(callee-sa)o(v)o(ed)79 1812 y(registers.)150 1869 y Fl(pip)q(e)p
Fo(:)33 b(measures)21 b(the)g(time)h(needed)h(to)d(send)i(a)f(w)o(ord-sized)h
(message)f(from)f(one)i(pro)q(cess)f(to)79 1925 y(another)15
b(using)h(pip)q(es.)22 b(It)15 b(w)o(as)g(measured)g(b)o(y)g(\\ping-p)q
(onging")i(a)e(coun)o(ter)g(b)q(et)o(w)o(een)h(t)o(w)o(o)d(pro)q(cesses.)79
1982 y(This)e(exp)q(erimen)o(t)h(is)e(based)h(on)f(Ousterhout's)g(exp)q
(erimen)o(ts)h([76)o(].)18 b(The)11 b(Ultrix)g Fj(pipe)e Fo(implemen)o
(tation)79 2038 y(uses)22 b(the)g(standard)f(UNIX)h(pip)q(e)h(implemen)o
(tation.)40 b(The)22 b(ExOS)f Fj(pipe)g Fo(implemen)o(tation)i(uses)f(a)79
2095 y(shared-memory)f(circular)h(bu\013er.)37 b(W)l(rites)21
b(to)f(full)i(bu\013ers)f(and)g(reads)g(from)f(empt)o(y)g(ones)h(cause)79
2151 y(the)e(curren)o(t)f(time)h(slice)h(to)d(b)q(e)i(yielded)i(b)o(y)d(the)g
(curren)o(t)h(pro)q(cess)f(to)g(the)g(reader)g(or)g(writer)g(of)g(the)79
2208 y(bu\013er,)12 b(resp)q(ectiv)o(ely)l(.)21 b(The)11 b
Fj(pipe)g Fo(implemen)o(tation)i(is)f(an)f(application-lev)o(el)j(library;)f
(the)f(only)g(k)o(ernel)79 2264 y(primitiv)o(es)20 b(used)g(are)e(the)h(the)f
Fj(yield)g Fo(system)g(call)i(and)f(those)f(primitiv)o(es)i(required)g(to)e
(construct)79 2320 y(the)c(application-lev)o(el)i(virtual)d(memory)l(.)19
b(W)l(e)13 b(use)g(t)o(w)o(o)f Fj(pipe)g Fo(implemen)o(tations:)20
b(the)13 b(\014rst)g(is)g(a)g(naiv)o(e)79 2377 y(implemen)o(tation,)22
b(while)e(the)g(second)g(exploits)g(the)f(fact)g(that)f(this)i(library)g
(exists)g(in)g(application)79 2433 y(space)h(b)o(y)g(simply)h(inlining)h(the)
e(read)g(and)f(write)h(calls.)37 b(A)21 b(further)f(optimization)i(\(that)e
(will)i(b)q(e)79 2490 y(p)q(erformed)14 b(in)g(future)f(exp)q(erimen)o(ts\))h
(is)f(to)g(alias)g(the)g(bu\013er,)h(eliminating)h(c)o(hec)o(ks)e(for)g
(messages)f(that)79 2546 y(straddle)19 b(bu\013er)g(b)q(oundaries.)30
b(Both)19 b(exok)o(ernel)g Fj(pipe)e Fo(implemen)o(tations)j(are)e(less)h
(than)f(200)g(lines)79 2603 y(of)i(co)q(de.)35 b(Times)20 b(are)g(giv)o(en)g
(in)h(Figure)f(4-4.)34 b(Aegis')20 b(unoptimized)i Fj(pipe)d
Fo(implemen)o(tation)i(is)g(an)79 2659 y(order)14 b(of)g(magnitude)h(more)f
(e\016cien)o(t)g(than)g(the)h(equiv)m(alen)o(t)h(op)q(eration)e(under)h
(Ultrix.)20 b(Muc)o(h)14 b(of)g(this)957 2817 y(78)p eop
%%Page: 79 81
79 80 bop 583 44 794 2 v 582 100 2 57 v 608 83 a Fl(Mac)o(hine)p
825 100 V 159 w(OS)p 1052 100 V 50 w(Time)16 b(\(usec\))p 1375
100 V 583 102 794 2 v 582 159 2 57 v 612 142 a Fo(DEC2100)p
825 159 V 48 w(Ultrix4.2)p 1052 159 V 255 w(334)p 1375 159
V 582 215 V 612 198 a(DEC2100)p 825 215 V 117 w(Aegis)p 1052
215 V 243 w(12.4)p 1375 215 V 583 217 794 2 v 582 273 2 57
v 612 256 a(DEC3100)p 825 273 V 48 w(Ultrix4.2)p 1052 273 V
255 w(231)p 1375 273 V 582 330 V 612 313 a(DEC3100)p 825 330
V 117 w(Aegis)p 1052 330 V 266 w(9.3)p 1375 330 V 583 331 794
2 v 405 408 a(Figure)f(4-5:)20 b Fj(shmem)14 b Fo(Benc)o(hmark;)h(times)h
(are)e(in)i(micro-seconds)p 502 519 956 2 v 501 575 2 57 v
526 558 a Fl(Mac)o(hine)p 744 575 V 159 w(OS)p 971 575 V 50
w(un)o(trusted)p 1242 575 V 50 w(trusted)p 1457 575 V 502 577
956 2 v 501 633 2 57 v 530 616 a Fo(DEC2100)p 744 633 V 49
w(Ultrix4.2)p 971 633 V 190 w(680.)p 1242 633 V 143 w(n/a)p
1457 633 V 501 690 V 530 673 a(DEC2100)p 744 690 V 118 w(Aegis)p
971 690 V 191 w(13.9)p 1242 690 V 155 w(8.6)p 1457 690 V 502
691 956 2 v 501 748 2 57 v 530 731 a(DEC3100)p 744 748 V 49
w(Ultrix4.2)p 971 748 V 190 w(457.)p 1242 748 V 143 w(n/a)p
1457 748 V 501 804 V 530 787 a(DEC3100)p 744 804 V 118 w(Aegis)p
971 804 V 191 w(10.4)p 1242 804 V 155 w(6.4)p 1457 804 V 502
806 956 2 v 417 883 a(Figure)f(4-6:)k Fj(lrpc)c Fo(Benc)o(hmark;)g(times)h
(are)e(in)i(micro-seconds)79 1018 y(p)q(erformance)g(is)g(due)f(to)g(the)g
(e\016cien)o(t)h(implemen)o(tation)h(of)d Fj(yield)h Fo(on)g(Aegis.)150
1074 y Fl(shmem)n Fo(:)27 b(this)21 b(exp)q(erimen)o(t)h(measures)e(the)h
(time)g(for)f(t)o(w)o(o)f(pro)q(cesses)i(to)f(\\ping-p)q(ong")h(using)79
1131 y(a)d(shared)h(coun)o(ter.)29 b(The)18 b(exok)o(ernel)h(implemen)o
(tation)h(uses)f(the)f Fj(yield)f Fo(system)h(call)i(to)d(yield)j(the)79
1187 y(curren)o(t)15 b(time-slice)h(b)q(et)o(w)o(een)f(partners.)k(Because)c
(Ultrix)g(do)q(es)f(not)g(pro)o(vide)h(a)f(yield-lik)o(e)j(primitiv)o(e,)79
1244 y(acceptable)f(e\016ciency)g(can)f(only)h(b)q(e)f(ac)o(hiev)o(ed)h(b)o
(y)e(using)i(pip)q(es)g(to)e(em)o(ulate)h(the)g(required)g(function-)79
1300 y(alit)o(y)l(.)21 b(Times)14 b(are)f(giv)o(en)i(in)g(Figure)f(4-5;)f(as)
h(in)h(the)f(other)f(IPC)h(tests,)g(the)g(di\013erence)h(b)q(et)o(w)o(een)f
(Aegis)79 1356 y(and)i(Ultrix)g(is)g(large:)j(in)e(this)e(test)g(Aegis)h
(almost)e(a)h(factor)f(of)h(thirt)o(y)g(faster)f(than)h(Ultrix.)150
1413 y Fl(lrp)q(c)p Fo(:)k(RPC)11 b(in)o(to)h(another)f(address)g(space,)h
(incremen)o(t)g(a)f(coun)o(ter)g(and)h(return)f(its)h(v)m(alue.)19
b(ExOS's)79 1469 y Fj(lrpc)14 b Fo(is)h(built)g(on)f(top)g(of)g(the)g(exok)o
(ernel's)g Fj(upcall)f Fo(mec)o(hanism.)21 b(There)14 b(are)g(t)o(w)o(o)f
(implemen)o(tations:)79 1526 y Fj(trusted)h Fo(and)g Fj(untrusted)p
Fo(.)19 b Fj(trusted)13 b Fo(only)i(sa)o(v)o(es)e(and)i(restores)e(the)i
(stac)o(k)e(p)q(oin)o(ter:)20 b(the)14 b(called)i(do-)79 1582
y(main)c(is)g(assumed)g(to)f(b)q(e)h(a)f(trusted)g(serv)o(er)g(that)f(will)k
(restore)c(an)o(y)h(registers)h(that)e(it)i(uses.)19 b Fj(untrusted)79
1639 y Fo(sa)o(v)o(es)c(the)h(general-purp)q(ose)h(callee-sa)o(v)o(ed)g
(registers.)k(Ultrix)16 b(do)q(es)g(not)g(ha)o(v)o(e)f(an)g(RPC)h(mec)o
(hanism,)79 1695 y(w)o(e)e(em)o(ulated)g(RPC)g(functionalit)o(y)h(through)f
(a)f(serv)o(er)h(pro)q(cess)g(that)f(w)o(aited)h(on)f(a)h(w)o(ell)h(kno)o(wn)
e(pip)q(e:)79 1752 y(a)19 b(clien)o(t)i(sends)f(an)f(index,)i(the)f(serv)o
(er)e(calls)j(the)e(appropriate)g(function,)i(and)f(returns)f(the)g(result)79
1808 y(through)c(the)h(pip)q(e.)150 1865 y(Both)22 b(implemen)o(tations)h
(assume)g(that)e(only)i(a)f(singe)g(function)i(is)e(of)g(in)o(terest)g
(\(i.e.,)h(neither)79 1921 y(uses)e(the)f(RPC)g(n)o(um)o(b)q(er)g(to)f(index)
i(in)o(to)f(a)f(table,)j(etc.\))33 b(and)20 b(do)g(not)f(c)o(hec)o(k)h(p)q
(ermissions.)36 b(Both)79 1977 y(implemen)o(tations)15 b(are)e(also)h
(single-threaded.)21 b(Times)14 b(are)f(giv)o(en)h(in)g(Figure)g(4-6.)19
b(ExOS's)13 b(un)o(trusted)79 2034 y Fj(lrpc)19 b Fo(ranges)g(b)q(et)o(w)o
(een)h(49)f(and)g(44)g(fold)h(faster)f(than)g(Ultrix,)i(while)g(the)e
(trusted)g(v)o(ersion)h(ranges)79 2090 y(b)q(et)o(w)o(een)h(79)e(and)h(71)g
(fold)g(faster:)29 b(almost)19 b(a)h(t)o(w)o(o)f(order)g(of)h(magnitude)h
(di\013eren)o(tial.)35 b(The)20 b(most)79 2147 y(imp)q(ortan)o(t)15
b(factor)f(for)h(this)h(di\013erence)g(is)g(the)f(e\016ciency)i(of)e(the)g
(up)q(call)i(mec)o(hanism.)79 2290 y Fu(4.4)70 b(Protection)79
2391 y Fo(Man)o(y)19 b(applications)i(w)o(ould)e(b)q(ene\014t)h(from)f(the)g
(abilit)o(y)h(to)f(use)g(protection)g(domains)h(as)f(\014re-w)o(alls)79
2448 y(for)c(enhanced)h(mo)q(dularit)o(y)f(or)g(to)f(safely)h(execute)h(un)o
(trusted)f(co)q(de)g(via)g(quaran)o(tine)g(\(e.g.,)f(for)g
Fn(fault-)79 2504 y(isolation)e Fo([104)o(]\).)18 b(The)12
b(abilit)o(y)h(to)e(decouple)i(naming)g(from)e(protection)g(is)i(also)f(imp)q
(ortan)o(t)f(in)i(a)e(single)79 2561 y(address)16 b(space)f(op)q(erating)h
(system)f([20)o(].)k(The)d(exok)o(ernel)g(allo)o(ws)f(applications)i(to)e
(de\014ne)h(their)g(o)o(wn)79 2617 y(page-tables)j(and)g(to)f(directly)i
(manipulate)g(con)o(text)e(iden)o(ti\014ers.)31 b(This)19 b(enables)h(b)q
(oth)e(ligh)o(t)o(w)o(eigh)o(t)79 2674 y(protection)e(and)f(the)g(separation)
h(of)e(protection)i(and)f(naming.)957 2817 y(79)p eop
%%Page: 80 82
80 81 bop 79 34 a Fp(4.4.1)56 b(Em)n(b)r(edded)17 b(protection)g(domains)79
120 y Fo(One)g(metho)q(d)f(to)g(allo)o(w)g(un)o(trusted)g(co)q(de)g(to)f(b)q
(e)i(safely)f(imp)q(orted)h(in)o(to)e(an)h(address)g(space)g(is)h(to)e(use)79
176 y Fn(sandb)n(oxing)i Fo([104)o(].)25 b(Sandb)q(o)o(xing)19
b(is)f(a)f(soft)o(w)o(are)e(fault-isolation)k(tec)o(hnique)f(that)f(mak)o(es)
g(co)q(de)h(safe)79 233 y(b)o(y)13 b(b)q(ounding)h(memory)e(op)q(erations)h
(and)f(jumps.)19 b(Unfortunately)l(,)14 b(the)e(a)o(v)o(erage)f(cost)h(of)h
(general)g(pro-)79 289 y(tection)j(\(i.e.,)f(sandb)q(o)o(xing)h(loads,)g
(stores)e(and)i(jumps\))f(is)h(quite)g(high.)22 b(The)16 b(SPEC92)e(b)q(enc)o
(hmarks,)79 346 y(running)21 b(on)e(DEC-MIPS)h(and)f(DEC-ALPHA)h(mac)o
(hines,)h(degrade)e(in)i(a)o(v)o(erage)d(p)q(erformance)i(b)o(y)79
402 y(appro)o(ximately)g(17-20\045)f([104)o(].)32 b(Additional)22
b(costs)d(of)g(sandb)q(o)o(xing)i(include)h(a)d(pair)h(of)f(dedicated)79
459 y(registers)14 b(and,)f(since)h(sandb)q(o)o(xing)g(relies)h(on)e(the)g
(fact)g(that)g(the)g(upp)q(er)h(bits)g(in)g(a)f(protection)g(domain)79
515 y(are)19 b(all)h(the)f(same)g(\(i.e.,)g(there)g(is)h(only)f(one)g(segmen)
o(t\),)g(an)g(increase)h(in)f(the)g(di\016cult)o(y)i(of)d(sharing)79
571 y(across)g(segmen)o(ts.)30 b(Finally)l(,)21 b(sandb)q(o)o(xing)e
(requires)h(a)e(trusted)g(compiler;)k(while)e(this)f(requiremen)o(t)79
628 y(is)e(not)e(great)g(if)h(suc)o(h)h(a)e(compiler)i(already)f(exists,)g
(constructing)g(one)g(from)f(scratc)o(h)h(is)g(tedious)g(and)79
684 y(error-prone.)150 741 y(The)21 b(motiv)m(ation)f(of)g(sandb)q(o)o(xing)h
(is)g(to)e(sim)o(ulate)i(address-space)g(protection)f(domains)h(when)79
797 y(cross-domain)c(calls)g(are)f(exp)q(ensiv)o(e.)24 b(Ho)o(w)o(ev)o(er,)15
b(if)h(application)i(co)q(de)f(can)f(o)o(wn)g(and)g(install)h(sev)o(eral)79
854 y(di\013eren)o(t)i(con)o(text)f(iden)o(ti\014ers,)j(then)d(switc)o(hing)i
(address)e(spaces)h(ma)o(y)f(require)h(only)g(a)f(handful)i(of)79
910 y(cycles)h(\(e.g.,)c(to)h(en)o(ter)h(sup)q(ervisor)h(mo)q(de)f(and)g(c)o
(hange)g(the)g(pro)q(cessor)g(con)o(text)f(iden)o(ti\014er\).)33
b(This)79 967 y(use)16 b(of)f Fn(emb)n(e)n(dde)n(d)h(pr)n(ote)n(ction)g
(domains)f Fo(can)h(sp)q(eed)g(applications)h(up,)e(eliminate)i(the)f(need)g
(to)e(p)q(ost-)79 1023 y(pro)q(cess)20 b(ob)s(ject)f(co)q(de)i(\(whic)o(h)f
(can)f(b)q(e)i(quite)f(c)o(hallenging)i([106)n(]\),)e(and)g(allo)o(w)g(m)o
(ultiple)h(segmen)o(ts)79 1080 y(to)c(b)q(e)h(accessed)g(sim)o(ultaneously)l
(.)28 b(W)l(e)17 b(lo)q(ok)h(at)f(a)g(few)g(examples)h(of)f(where)h(em)o(b)q
(edded)g(protection)79 1136 y(domains)e(w)o(ould)g(b)q(e)f(useful.)150
1192 y Fl(Database)23 b(system)o(s)p Fo(.)k(T)l(o)18 b(eliminate)j(the)d
(cost)h(of)f(cross-domain)g(calls,)j(database)d(programs)79
1249 y(suc)o(h)23 b(as)f(POSTGRES)h([92)o(,)f(104)o(])g(allo)o(w)g(clien)o
(ts)i(to)d(do)o(wnload)h(co)q(de)h(in)o(to)g(their)f(address)h(space.)79
1305 y(Em)o(b)q(edded)17 b(protection)e(domains)h(w)o(ould)f(allo)o(w)h(them)
f(to)f(e\016cien)o(tly)j(isolate)f(clien)o(t)g(co)q(de.)150
1362 y Fl(Clien)o(t/serv)o(er)c(systems)o Fo(.)k(Man)o(y)11
b(clien)o(t/serv)o(er)i(con\014gurations)f(\(e.g.,)f(the)g(Thor)h(system)f
([68)o(]\))79 1418 y(w)o(ould)h(also)g(b)q(ene\014t)h(from)e(the)g(abilit)o
(y)i(to)e(ship)i(clien)o(t)g(co)q(de)f(to)f(the)g(serv)o(er.)19
b(F)l(urthermore,)11 b(the)h(tigh)o(ter)79 1475 y(coupling)20
b(b)q(et)o(w)o(een)e(clien)o(t)g(and)g(serv)o(er)f(allo)o(ws)h(the)g(cost)f
(of)g(marshaling)h(and)g(cop)o(ying)g(\(required)g(if)79 1531
y(IPC)e(is)g(used)f(for)g(cross-domain)g(calls\))h(to)f(b)q(e)h(eliminated.)
150 1588 y Fl(Ligh)o(t-w)o(eigh)o(t)i(application)h(\014re-w)o(alls)p
Fo(.)h(Large)14 b(applications)i(can)e(use)g(di\013eren)o(t)h(addressing)79
1644 y(con)o(texts)10 b(to)g(construct)g(v)o(ery)g(ligh)o(t)o(w)o(eigh)o(t)g
(protection)g(domains.)19 b(In)11 b(e\013ect,)f(this)h(allo)o(ws)f
(\\monolithic")79 1701 y(applications)18 b(\(suc)o(h)d(as)g(large)g(serv)o
(ers\))g(to)g(b)q(e)h(brok)o(en)f(up)h(in)o(to)g(a)f(more)g(\\micro-k)o
(ernel")h(lik)o(e)h(design)79 1757 y(without)f(the)f(p)q(erformance)g(p)q
(enalt)o(y)h(t)o(ypically)h(asso)q(ciated)e(with)h(mo)q(dularit)o(y)l(.)150
1813 y Fl(Fine-grained)21 b(thread)f(access)g(righ)o(ts)p Fo(.)26
b(Cheap,)17 b(plen)o(tiful)j(addressing)d(con)o(texts)g(allo)o(w)g(ap-)79
1870 y(plications)h(to)d(decide)i(on)f(a)f(thread-b)o(y-thread)h(basis)g(the)
f(access)h(righ)o(ts)f(that)g(will)j(b)q(e)e(gran)o(ted)f(to)g(a)79
1926 y(giv)o(en)h(thread.)150 1983 y Fl(Single-address)g(space)g(subsystem)o
(s)p Fo(.)g(The)e(exok)o(ernel)g(exp)q(orts)g(all)g(the)g(primitiv)o(es)g
(required)79 2039 y(to)21 b(construct)g(an)g(address)h(space)f(with)h(a)f
(separate)g(protection)g(domain,)i(directly)f(enabling)h(the)79
2096 y(application-lev)o(el)c(construction)c(of)g(single-address)i(space)e
(subsystems)g([20,)f(85].)79 2239 y Fu(4.5)70 b(Exceptions)79
2340 y Fo(F)l(ast)18 b(user-lev)o(el)h(traps)e(enable)i(a)f(n)o(um)o(b)q(er)g
(of)g(in)o(triguing)h(applications.)29 b(The)18 b(exok)o(ernel)h(structure)79
2397 y(is)e(uniquely)i(suited)e(to)f(e\016cien)o(tly)i(dispatc)o(h)f
(exceptions)h(to)d(user)i(space.)24 b(Its)16 b(lac)o(k)h(of)f(managemen)o(t)
79 2453 y(allo)o(ws)i(exceptions)h(to)d(b)q(e)j(dispatc)o(hed)f(in)g(16)f
(MIPS)h(instructions,)h(four)e(times)g(few)o(er)h(instructions)79
2510 y(than)d(the)g(most)f(e\016cien)o(t)h(implemen)o(tation)h(in)f(the)g
(literature)g(\(an)f(implemen)o(tation)i(that)e(impro)o(v)o(ed)79
2566 y(the)i(do)q(cumen)o(ted)g(state-of-the-art)e(b)o(y)h(an)g(order)g(of)g
(magnitude)g([97)o(]\).)150 2623 y(W)l(e)g(lo)q(ok)h(at)e(a)h(list)h(of)e
(applications)j(and)e(op)q(erations)g(that)g(b)q(ene\014t)h(from)e(e\016cien)
o(t)i(traps.)j(Man)o(y)79 2679 y(of)c(these)h(examples)g(are)f(dra)o(wn)f
(from)h(Thekk)m(ath)g([97)o(].)957 2817 y(80)p eop
%%Page: 81 83
81 82 bop 309 44 1342 2 v 308 100 2 57 v 334 83 a Fl(Mac)o(hine)p
551 100 V 159 w(OS)p 778 100 V 50 w(unaligned)p 1048 100 V
51 w(o)o(v)o(er\015o)o(w)p 1286 100 V 48 w(co-pro)q(c)p 1504
100 V 51 w Fj(prot)p 1649 100 V 309 102 1342 2 v 308 159 2
57 v 338 142 a Fo(DEC2100)p 551 159 V 48 w(Ultrix4.2)p 778
159 V 200 w(n/a)p 1048 159 V 169 w(272)p 1286 159 V 146 w(n/a)p
1504 159 V 64 w(294.)p 1649 159 V 308 215 V 338 198 a(DEC2100)p
551 215 V 117 w(Aegis)p 778 215 V 213 w(2.8)p 1048 215 V 179
w(2.8)p 1286 215 V 159 w(2.8)p 1504 215 V 86 w(3.0)p 1649 215
V 309 217 1342 2 v 308 273 2 57 v 338 256 a(DEC3100)p 551 273
V 48 w(Ultrix4.2)p 778 273 V 200 w(n/a)p 1048 273 V 156 w(200.)p
1286 273 V 146 w(n/a)p 1504 273 V 64 w(242.)p 1649 273 V 308
330 V 338 313 a(DEC3100)p 551 330 V 117 w(Aegis)p 778 330 V
213 w(2.1)p 1048 330 V 179 w(2.1)p 1286 330 V 159 w(2.1)p 1504
330 V 86 w(2.3)p 1649 330 V 309 331 1342 2 v 410 408 a(Figure)16
b(4-7:)j Fj(Trap)c Fo(b)q(enc)o(hmarks;)g(times)h(are)f(in)h(micro-seconds)
150 543 y Fl(Em)o(ulation)22 b(of)g(sub-page)h(protection)e
Fo([97)o(].)32 b(Man)o(y)19 b(applications)i(w)o(ould)f(b)q(ene\014t)g(from)f
(a)79 600 y(page)d(size)g(smaller)g(than)f(that)f(pro)o(vided)i(b)o(y)f
(curren)o(t)g(mac)o(hines)h([5].)150 656 y Fl(E\016cien)o(t)j
(page-protection)h(traps)p Fo(.)j(These)16 b(exceptions)h(are)f(used)g(b)o(y)
g(applications)i(suc)o(h)e(as)79 712 y(distributed)h(shared)e(memory)g
(systems,)f(p)q(ersisten)o(t)i(ob)s(ject)f(stores)f(and)i(garbage)e
(collectors)i([97)o(,)f(5)o(].)150 769 y Fl(Instruction)23
b(em)o(ulation)p Fo(.)30 b(The)19 b(e\016cien)o(t)h(em)o(ulation)g(of)e
(privileged)k(instructions)e(is)f(crucial)79 825 y(for)c(application-lev)o
(el)j(OS)e(em)o(ulation)g(via)g(direct)f(execution.)150 882
y Fl(Un)o(b)q(ounded)h(data-structures)p Fo(.)k(E\016cien)o(t)13
b(unaligned)i(p)q(oin)o(ter)e(traps)g(can)g(b)q(e)h(used)f(to)g(imple-)79
938 y(men)o(t)k(conditional)i(signals)e(of)g(v)m(arious)g(\015a)o(v)o(ors.)24
b(F)l(or)17 b(example,)h(futures)e([29)o(])h(can)g(b)q(e)h(implemen)o(ted)79
995 y(e\016cien)o(tly)i(using)g(unaligned)g(p)q(oin)o(ter)f(traps:)26
b(the)19 b(p)q(oin)o(ter)g(of)f(an)g(unresolv)o(ed)i(future)f(to)e(its)i(v)m
(alue)79 1051 y(is)e(made)g(to)e(b)q(e)i(unaligned.)26 b(References)17
b(to)f(an)g(outstanding)h(future)f(will)i(trap,)e(and)g(the)h(accessing)79
1108 y(thread)f(can)g(then)g(b)q(e)g(susp)q(ended.)23 b(When)16
b(the)g(v)m(alue)g(is)h(a)o(v)m(ailable,)g(the)e(p)q(oin)o(ter)h(is)g(set)g
(to)f(it)h(and)g(all)79 1164 y(accesses)g(to)f(this)g(\\resolv)o(ed")g
(future)g(then)h(pro)q(ceed)g(normally)l(.)150 1221 y(In)h(general,)g(most)e
(of)h(these)h(op)q(erations)g(could)g(b)q(e)g(done)g(b)o(y)f(inserting)i
(explicit)g(c)o(hec)o(ks)f(in)g(co)q(de)79 1277 y(\(e.g.,)e(futures)h(can)g
(b)q(e)h(implemen)o(ted)h(b)o(y)e(c)o(hec)o(king)h(ev)o(ery)f(load)g(and)g
(store)f(to)h(determine)h(if)f(it)h(is)f(to)79 1333 y(an)e(unresolv)o(ed)g
(future\).)19 b(The)14 b(ob)o(vious)f(adv)m(an)o(tage)g(to)g(using)h
(exceptions)g(instead)g(of)f(explicit)i(c)o(hec)o(ks)79 1390
y(is)k(e\016ciency)l(.)29 b(A)17 b(more)g(subtle)i(adv)m(an)o(tage)e(is)h
(that)f(the)h(use)g(of)f(explicit)j(c)o(hec)o(ks)e(requires)g(compiler)79
1446 y(supp)q(ort.)38 b(W)l(riting)22 b(a)f(w)o(ell-tuned,)i
Fn(c)n(orr)n(e)n(ct)e Fo(compiler)h(that)f(is)g(p)q(ortable)h(and)f
(generates)g(e\016cien)o(t)79 1503 y(co)q(de)14 b(is)g(a)f(di\016cult)h
(problem;)g(eliminating)i(this)d(requiremen)o(t)h(aids)f(the)h(e\016cien)o(t)
f(implemen)o(tation)i(of)79 1559 y(man)o(y)g(op)q(erations.)20
b(F)l(urthermore,)13 b(explicit)k(c)o(hec)o(ks)e(tak)o(e)f(up)h(space)g(in)h
(the)e(program)g(text,)g(p)q(ossibly)79 1616 y(p)q(olluting)k(the)d(cac)o(he)
g(and)h(causing)g(an)f(increase)h(in)g(paging.)79 1737 y Fp(4.5.1)56
b(Exception)17 b(exp)r(erim)o(en)n(ts)79 1823 y Fj(unaligned)p
Fl(:)22 b Fo(Time)h(to)e(tak)o(e)h(an)h(unaligned)h(p)q(oin)o(ter)f(access)g
(trap.)41 b(This)23 b(exception)g(cannot)g(b)q(e)193 1880 y(usefully)17
b(exploited)g(under)f(Ultrix:)22 b(the)15 b(k)o(ernel)h(attempts)f(to)f
(\\\014x)i(up")f(the)h(unaligned)h(access)193 1936 y(and)f(writes)f(an)g
(error)f(message)h(to)g(standard)f(error.)79 2030 y Fj(overflow)p
Fl(:)22 b Fo(Time)15 b(to)g(tak)o(e)f(an)i(o)o(v)o(er\015o)o(w)d(trap.)79
2124 y Fj(co-proc)p Fl(:)22 b Fo(Time)15 b(to)g(tak)o(e)f(a)h(\015oating-p)q
(oin)o(t)h(co-pro)q(cessor)f(un)o(usable)h(trap.)k(This)15
b(exception)i(cannot)193 2180 y(b)q(e)c(caugh)o(t)f(under)h(Ultrix,)g(since)g
(applications)h(cannot)e(mark)f(the)i(\015oating)f(p)q(oin)o(t)h(co-pro)q
(cessor)193 2237 y(as)i(un)o(usable.)79 2331 y Fj(prot)p Fl(:)22
b Fo(Time)16 b(to)e(tak)o(e)h(a)g(page)g(protection)g(fault.)150
2437 y(Times)22 b(are)f(giv)o(en)h(in)g(Figure)g(4-7.)38 b(Careful)22
b(tuning)g(of)f(the)g(exception)i(path)e(\(aided)h(b)o(y)f(the)79
2493 y(minimal)14 b(k)o(ernel)e(functionalit)o(y)h(Aegis)f(pro)o(vides\))f
(allo)o(ws)h(all)h(traps)e(to)f(b)q(e)j(dispatc)o(hed)f(appro)o(ximately)79
2550 y Fn(two)17 b(or)n(ders)g(of)f(magnitude)g Fo(faster)e(than)h(Ultrix.)
957 2817 y(81)p eop
%%Page: 82 84
82 83 bop 79 34 a Fu(4.6)70 b(Virtual)22 b(Memory)79 135 y
Fo(The)e(exok)o(ernel)g(is)g(unique)h(among)e(op)q(erating)h(systems)f(in)h
(that)f(it)h(defers)g(the)f(whole)h(of)f(address)79 192 y(space)j(managemen)o
(t)f(to)f(applications.)40 b(T)l(o)21 b(test)g(the)g(usefulness)i(of)d(this)i
(abilit)o(y)h(w)o(e)e(examine)h(a)79 248 y(n)o(um)o(b)q(er)15
b(of)e(applications)j(that)d(w)o(ould)h(b)q(ene\014t)h(from)e(a)h(tigh)o(ter)
g(in)o(tegration)g(with)g(the)g(virtual)g(mem-)79 305 y(ory)j(system.)25
b(T)l(o)16 b(the)h(b)q(est)h(of)e(our)h(kno)o(wledge,)g(the)g(bulk)h(of)f
(these)g(examples)h(cannot)f(b)q(e)g(done)h(on)79 361 y(an)o(y)h(other)e(op)q
(erating)i(system.)29 b(The)19 b(costs)e(of)h(the)h(in-k)o(ernel)h(primitiv)o
(es)f(discussed)h(in)g(the)e(pap)q(er)79 418 y(are)f(con)o(trasted)g(with)h
(the)f(costs)g(of)g(exok)o(ernel-based,)h(user-lev)o(el)h(implemen)o(tations)
g(of)e(these)g(con-)79 474 y(structs.)k(W)l(e)15 b(break)h(the)f(discussion)j
(in)o(to)d(\014v)o(e)h(subsections:)21 b(the)16 b(e\013ects)f(of)g(exp)q
(osing)i(all)f(hardw)o(are)79 531 y(capabilities)f(are)d(discussed)i(in)f
(Subsection)g(4.6.1;)f(optimizations)h(that)e(can)i(utilize)h(sp)q(eci\014c)g
(ph)o(ysical)79 587 y(page)j(allo)q(cation)h(are)f(examined)g(in)h
(Subsection)g(4.6.2;)e(uses)h(for)f(\015exible)j(address)e(space)g(structure)
79 644 y(are)e(giv)o(en)g(in)h(Subsection)g(4.6.3;)d(the)i(e\013ects)f(of)g
(tigh)o(ter)h(in)o(tegration)g(b)q(et)o(w)o(een)g(the)g(virtual)g(memory)79
700 y(system)k(and)f(application-lev)o(el)k(soft)o(w)o(are)17
b(are)h(elucidated)j(in)e(Subsection)h(4.6.4.)28 b(P)o(age)18
b(size)i(trade)79 756 y(o\013s)12 b(are)h(examined)h(in)g(Subsection)g(4.6.5)
d(and)i(page-table)g(structures)g(in)h(Subsection)g(4.6.6.)j(Finally)l(,)79
813 y(Subsection)h(4.6.7)c(pro)o(vides)i(a)g(n)o(um)o(b)q(er)g(of)g(micro-b)q
(enc)o(hmark)g(measuremen)o(ts)g(of)f(VM)h(system)f(and)79
869 y(the)h(cost)e(of)h(application-lev)o(el)k(virtual)c(memory)l(.)150
926 y(Additional)e(examples)e(of)g(inadequate)h(op)q(erating)f(system)f(supp)
q(ort)h(for)g(application-lev)o(el)j(virtual)79 982 y(memory)h(primitiv)o(es)
i(can)e(b)q(e)h(found)f(in)h([5].)150 1039 y(Applications)h(in)f(the)g(follo)
o(wing)f(subsections)i(mak)o(e)d(use)i(of)f(the)g(follo)o(wing)h(six)f(prop)q
(erties:)148 1133 y Fc(\017)22 b Fo(NOCA)o(CHE:)15 b(the)g(abilit)o(y)i(to)d
(disable)j(cac)o(hing)f(on)f(a)g(p)q(er-page)h(basis;)148 1226
y Fc(\017)22 b Fo(DMA:)13 b(the)i(abilit)o(y)g(to)f(b)o(ypass)g(the)g(memory)
g(hierarc)o(h)o(y)g(and)h(mapping)g(hardw)o(are)e(in)i(order)f(to)193
1283 y(write)h(from)g(one)g(ph)o(ysical)i(address)e(to)g(another;)148
1377 y Fc(\017)22 b Fo(NAME:)15 b(the)g(abilit)o(y)h(to)f(name)g(whic)o(h)h
(ph)o(ysical)h(pages)e(should)h(b)q(e)g(allo)q(cated;)148 1470
y Fc(\017)22 b Fo(USERPT:)15 b(the)h(abilit)o(y)g(to)f(access)g(virtual)h
(memory)e(mappings)i(at)f(application-lev)o(el;)148 1564 y
Fc(\017)22 b Fo(UTLB:)17 b(the)f(abilit)o(y)h(to)f(con)o(trol)g(the)g
(exceptions)i(asso)q(ciated)e(with)h(the)f(TLB)h(\(this)f(is)h(closely)193
1621 y(related)f(to)e(USERPT\);)148 1715 y Fc(\017)22 b Fo(P)l(A)o(GESIZE:)15
b(the)g(abilit)o(y)i(to)d(c)o(hose)h(the)h(size)g(of)e(individual)19
b(pages;)79 1836 y Fp(4.6.1)56 b(Exp)r(osing)17 b(Hardw)n(are)j(Capabilities)
79 1922 y Fo(The)h(exok)o(ernel)g(giv)o(es)f(v)o(ery)g(precise)h(information)
g(of)e(and)i(con)o(trol)f(o)o(v)o(er)f(the)h(mapping)h(hardw)o(are)79
1979 y(to)h(applications)i(\(e.g.,)e(the)h(TLB\).)f(F)l(or)f(example,)k(it)d
(exp)q(orts)g(all)i(privileged)g(instructions)f(and)79 2035
y(page-attributes)16 b(\(suc)o(h)f(as)g(cac)o(hing\))g(and)h(allo)o(ws)f
(applications)i(to)d(securely)j(manipulate)f(the)f(TLB.)79
2091 y(Exp)q(osing)k(the)e(full)i(set)f(of)f(hardw)o(are)g(capabilities)j
(enables)e(op)q(erations)g(that)f(are)g(not)g(p)q(ossible)j(on)79
2148 y(curren)o(t)c(op)q(erating)f(systems:)150 2204 y Fl(Fine-grain)27
b(monitoring)p Fo(.)41 b(The)23 b(tigh)o(t)f(coupling)i(b)q(et)o(w)o(een)f
(applications)h(and)e(the)h(virtual)79 2261 y(memory)15 b(system)g(allo)o(ws)
g(e\016cien)o(t)h(address)f(tracing)g([101)o(].)k(F)l(urthermore,)c
Fn(any)f Fo(application)j(can)f(do)79 2317 y(this)g(at)f(an)o(y)g(time:)20
b(no)15 b(sp)q(ecial)i(dedicated)f(hardw)o(are)f(is)h(needed.)150
2374 y Fl(Exp)q(osure)e(of)h(mem)n(or)o(y)c(attributes)p Fo(.)20
b(F)l(or)12 b(example,)i(reference)f(coun)o(ting)g(and)g(dirt)o(y)f(bits)h
(can)79 2430 y(b)q(e)j(sim)o(ulated)g(in)g(soft)o(w)o(are,)d(once)j
(applications)h(ha)o(v)o(e)e(access)g(to)g(TLB)g(exceptions)h([7].)150
2487 y Fl(Monitoring)g(translation)g(hardw)o(are)p Fo(.)i(TLB)13
b(access)g(patterns)f(can)h(b)q(e)g(used)h(to)e(deriv)o(e)h(w)o(ork-)79
2543 y(ing)k(sets,)e(or)h(to)f(deduce)i(whic)o(h)g(pages)f(tak)o(e)f(frequen)
o(t)h(TLB)g(misses;)h(this)f(enables)h(tec)o(hniques)g(suc)o(h)79
2600 y(as)f(page-migration)h([19)o(].)23 b(Kno)o(wledge)17
b(ab)q(out)f(TLB)h(misses)g(is)g(also)f(useful)h(b)q(ecause)h(they)e(appro)o
(xi-)79 2656 y(mate)e(cac)o(he)g(misses)g([19)o(].)19 b(Application-lev)o(el)
f(op)q(erating)c(systems)f(can)h(use)g(this)g(heuristic)i(to)d(decide)957
2817 y(82)p eop
%%Page: 83 85
83 84 bop 79 34 a Fo(whic)o(h)16 b(pages)e(to)f(mark)h(as)g(uncac)o(hable,)h
(p)q(oten)o(tially)h(impro)o(ving)f(global)f(system)g(p)q(erformance.)20
b(Ad-)79 90 y(ditionally)l(,)j(with)d(a)g(deep)g(memory)f(hierarc)o(h)o(y)l
(,)i(lo)q(cal)g(p)q(erformance)f(ma)o(y)f(impro)o(v)o(e)h(as)f(w)o(ell)i
(\(since)79 147 y(applications)c(will)g(b)o(y)e(pass)g(the)h(cac)o(he)f
(hierarc)o(h)o(y)h(instead)f(of)g(lo)q(oking)h(for)f(data)f(that)h(is)g(not)g
(there\).)150 203 y Fl(DMA)k(op)q(erations)p Fo(.)25 b(The)18
b(exok)o(ernel)f(allo)o(ws)g(applications)h(to)f(initiate)h(DMA)e(op)q
(erations)h(al-)79 260 y(lo)o(wing)h(them)f(to)f(a)o(v)o(oid)h(the)g(memory)f
(subsystem)h(during)h(bulk)g(data)e(transfers,)h(th)o(us)f(eliminating)79
316 y(cac)o(he)h(and)g(TLB)g(p)q(ollution.)26 b(This)17 b(optimization)h(can)
f(aid)g(man)o(y)f(op)q(erations)h(suc)o(h)g(as)f(net)o(w)o(orking)79
373 y(and)g(garbage)e(collection,)j(and)e(more)g(common)g(op)q(erations)g
(suc)o(h)h(as)e Fj(fork\(\))h Fo(and)g Fj(memcpy\(\))p Fo(.)150
429 y Fl(Fine-grained)h(con)o(trol)g(o)o(v)o(er)d(virtual)j(mem)n(or)o(y)c
(attributes)p Fo(.)20 b(Giving)14 b(applications)g(access)79
486 y(to)e(the)h(full)h(complemen)o(t)f(of)f(hardw)o(are)f(facilities)k(allo)
o(ws)d(precise)i(con)o(trol)e(of)g(page)g(information)h(\(e.g.,)79
542 y(reference)g(bits,)g(page-size,)g(cac)o(hing)f(attributes,)g(etc.\).)19
b(Reference)13 b(bits)f(can)g(b)q(e)h(used)f(to)f(trac)o(k)g(writes)79
599 y(to)16 b(memory)f(pages)h(\(useful)h(for)e(garbage-collectors)h([5]\).)
21 b(Application-con)o(trolled)e(cac)o(hing)e(can)f(b)q(e)79
655 y(used)f(to)f(reduce)h(cac)o(he)g(p)q(ollution)h(b)o(y)e(disabling)i(cac)
o(hing)f(for)f(memory)g(that)f(exhibits)j(p)q(o)q(or)e(lo)q(calit)o(y)l(.)79
711 y(F)l(or)19 b(example,)i(a)d(log)i(that)e(absorbs)h(man)o(y)f(writes)h(b)
q(efore)h(b)q(eing)g(\015ushed)h(to)d(disk)i(should)g(not)f(b)q(e)79
768 y(cac)o(hed,)e(since)h(it)f(needlessly)h(evicts)f(cac)o(he)g(en)o(tries)g
(\(not)f(only)h(is)g(the)f(abilit)o(y)i(to)e(disable)i(cac)o(hing)f(a)79
824 y(p)q(erformance)h(optimization,)h(it)f(also)f(aids)h(non-in)o(trusiv)o
(e)h(monitoring\).)27 b(I/O)18 b(in)o(tensiv)o(e)h(programs)79
881 y(and)12 b(compression)g(algorithms)g(could)h(also)e(b)q(ene\014t)i(from)
e(this)h(metho)q(d)g(of)f(reducing)i(cac)o(he)f(p)q(ollution.)79
1003 y Fp(4.6.2)56 b(Sp)r(eci\014c)17 b(P)n(age)j(Allo)r(cation)79
1088 y Fo(An)e(application's)h(abilit)o(y)g(to)d(request)i(sp)q(eci\014c)h
(ph)o(ysical)g(pages)e(enables)i(a)e(large)g(n)o(um)o(b)q(er)h(of)f(opti-)79
1145 y(mizations.)150 1201 y Fl(Cac)o(he)f(conscious)h(data)h(la)o(y)o(out)p
Fo(.)i(Con)o(trol)13 b(o)o(v)o(er)h(the)g(ph)o(ysical)i(page)e(n)o(um)o(b)q
(ers)h(allo)o(ws)f(cac)o(he-)79 1258 y(conscious)e(la)o(y)o(out)e(of)g(data)g
(on)h(systems)f(with)h(ph)o(ysically)i(mapp)q(ed)e(cac)o(hes)g([14)o(,)g(18)o
(,)g(45)o(].)18 b(F)l(or)10 b(example,)79 1314 y(\\page-recoloring")j(can)g
(b)q(e)g(used)g(to)f(reduce)h(cac)o(he)g(con\015icts)g([17].)18
b(This)13 b(metho)q(d)g(is)g(further)f(assisted)79 1371 y(b)o(y)k(the)f
(abilit)o(y)h(of)f(applications)i(to)d(appro)o(ximate)h(the)g(w)o(orking)g
(set)g(using)h(TLB)g(snapshots)f([83)o(].)150 1427 y Fl(Con)o(tiguous)g(ph)o
(ysical)g(page)h(sequences)p Fo(.)i(Applications)c(can)f(use)h(this)f(exok)o
(ernel-b)q(esto)o(w)o(ed)79 1484 y(abilit)o(y)18 b(to)d(request)h(sp)q
(eci\014c)i(ph)o(ysical)f(pages.)23 b(This)16 b(functionalit)o(y)i(can)e(b)q
(e)g(used)h(to)e(construct)h(con-)79 1540 y(tiguous)f(runs)g(of)f(ph)o
(ysical)i(pages.)j(These)c(blo)q(c)o(ks)h(can)e(b)q(e)i(used)f(to)f
(construct)g(sup)q(er-pages)h([94)o(])f(and)79 1596 y(to)h(impro)o(v)o(e)g
(the)g(e\016ciency)i(of)e(DMA)g(op)q(erations)g([34)o(].)150
1653 y Fl(Cac)o(he)e(m)o(ultiplexing)p Fo(.)k(Cac)o(he)11 b(m)o(ultiplexing)j
(is)e(useful)g(in)g(t)o(w)o(o)d(areas:)18 b(\(1\))10 b(to)g(guaran)o(tee)g
(that)h(a)79 1709 y(pro)q(cess)j(has)f(sole)h(access)f(to)f(a)h(piece)i(of)d
(the)i(cac)o(he)f(\(e.g.,)f(for)h(real-time)h(programs)e(p)q(erhaps\))h(and)g
(\(2\))79 1766 y(to)h(limit)i(the)f(cac)o(he)g(p)q(ollution)h(of)f
(applications)h(that)e(exhibit)i(p)q(o)q(or)e(lo)q(calit)o(y)i(\(e.g.,)d(b)o
(y)i(forcing)f(them)79 1822 y(to)h(only)g(use)g(a)g(small)g(section\).)20
b(Cac)o(he)15 b(m)o(ultiplexing)i(can)e(b)q(e)g(done)h(directly)g(via)f
(page-coloring:)20 b(to)79 1879 y(allo)q(cate)d(a)f(sp)q(eci\014c)i(piece)g
(of)e(the)g(cac)o(he)h(to)e(a)h(sp)q(eci\014c)i(pro)q(cess,)e(the)h(OS)f(giv)
o(es)h(that)e(pro)q(cess)i(pages)79 1935 y(of)e(the)h(corresp)q(onding)g
(color;)g(if)g(guaren)o(tees)f(ha)o(v)o(e)g(to)f(b)q(e)j(made)e(that)g(no)g
(other)g(pro)q(cess)h(can)f(access)79 1992 y(this)j(region,)e(the)h(OS)g(do)q
(es)g(not)f(allo)q(cate)i(other)e(applications)i(pages)f(of)f(this)h
(particular)g(color.)24 b(An)79 2048 y(ob)o(vious)15 b(use)f(of)g(this)g(tec)
o(hnique)i(w)o(ould)e(b)q(e)h(to)e(restrict)h(the)g(impact)g(of)g(p)q(o)q(or)
g(lo)q(calit)o(y:)20 b(b)o(y)14 b(allo)q(cating)79 2105 y(the)19
b(data)f(and)g(co)q(de)h(that)f(exhibits)i(p)q(o)q(or)e(lo)q(calit)o(y)i(on)e
(pages)g(of)g(a)h(particular)g(color,)f(the)h(damage)79 2161
y(the)e(they)f(can)h(do)f(to)g(the)g(cac)o(he)h(is)g(restricted.)23
b(An)17 b(imp)q(ortan)o(t)f(adv)m(an)o(tage)g(of)g(this)h(tec)o(hnique)g(o)o
(v)o(er)79 2217 y(just)e(marking)h(pages)f(as)g(uncac)o(hable)h(is)g(that)f
(applications)i(still)f(get)f(the)h(adv)m(an)o(tages)e(of)h(cac)o(he)h(line)
79 2274 y(prefetc)o(hing.)150 2330 y Fl(\\No)g(cac)o(he")g(guaran)o(tees)p
Fo(.)j(The)14 b(correctness)f(of)g(some)g(op)q(erations)g(requires)i
Fn(guar)n(ante)n(es)d Fo(that)79 2387 y(certain)19 b(pieces)h(of)e(data)g(do)
g(not)g(reside)h(in)g(the)g(cac)o(he.)29 b(F)l(or)18 b(example,)h(DMA)f(op)q
(erations)h(b)o(y-pass)79 2443 y(the)14 b(cac)o(he,)g(and)f(th)o(us)g(cause)h
(a)f(coherency)h(problem)g(b)q(et)o(w)o(een)g(the)f(data)g(in)h(the)g(cac)o
(he)f(and)h(the)f(v)m(alue)79 2500 y(in)20 b(main)f(memory:)26
b(to)18 b(ensure)h(correctness)f(applications)i(m)o(ust)e(initiate)i(a)e(cac)
o(he)h(\015ush.)30 b(A)19 b(more)79 2556 y(e\016cien)o(t)f(mec)o(hanism)g(is)
f(to)f(use)h Fn(intentional)g(c)n(ache)g(c)n(on\015icts)f Fo(to)g(ensure)h
(that)g(the)g(cac)o(he)g(do)q(es)g(not)79 2613 y(hold)g(a)d(piece)j(of)e
(data)f(\(i.e.,)h(the)g(\\\015ush")g(b)q(ecomes)h(implicit\).)957
2817 y(83)p eop
%%Page: 84 86
84 85 bop 150 34 a Fl(P)o(erform)o(ance)16 b(debugging)p Fo(.)25
b(Increasingly)l(,)18 b(p)q(erformance)e(anomalies)h(are)f(claimed)i(to)d(b)q
(e)i(in-)79 90 y(struction)e(cac)o(he)g(related)g([104)o(].)k(The)c(con)o
(trol)g(the)f(exok)o(ernel)i(pro)o(vides)f(o)o(v)o(er)f(page)g(selection)i
(allo)o(ws)79 147 y(suc)o(h)g(prop)q(ositions)g(to)f(b)q(e)g(v)o(eri\014ed.)
79 269 y Fp(4.6.3)56 b(Address)19 b(space)f(structure)79 354
y Fo(Application)i(con)o(trol)e(o)o(v)o(er)e(the)i(structure)g(of)f(its)h
(address)f(space)h(allo)o(ws)g(a)g(n)o(um)o(b)q(er)g(of)f(in)o(teresting)79
411 y(tec)o(hniques.)150 467 y Fl(Better)k(static)g(fault-isolat)q(ion)j(tec)
o(hniques)p Fo(.)j(With)18 b(con)o(trol)f(of)g(their)i(address)e(space)h(la)o
(y-)79 524 y(out,)24 b(applications)f(place)g(sensitiv)o(e)g(state)f(in)h
(arbitrary)e(lo)q(cations.)41 b(This)23 b(con)o(trol)f(can)g(b)q(e)h(used)79
580 y(for)c(impro)o(v)o(ed)f(fault)h(isolation,)h(b)o(y)f(reducing)h(the)f(c)
o(hance)g(that)f(a)g(write)h(or)f(read)h(will)h(access)f(this)79
637 y(state;)g(in)f(a)g(sense,)g(the)g(virtual)h(address)f(is)g(a)g
(capabilit)o(y)h([110)o(].)27 b(This)19 b(tec)o(hnique)g(can)f(b)q(e)h(used)f
(to)79 693 y(allo)o(w)i(applications)g(to)e(safely)i(imp)q(ort)f(un)o
(trusted)g(co)q(de)g(\(or)f(to)h(guard)f(against)h(their)g(o)o(wn)g(buggy)79
750 y(algorithms\).)150 806 y Fl(Fine-grain)j(con)o(trol)f(of)f(naming)p
Fo(.)27 b(F)l(or)17 b(example,)i(parallel)g(applications)g(b)q(ene\014t)g
(from)e(the)79 863 y(abilit)o(y)f(to)e(c)o(ho)q(ose)h(whic)o(h)h(data)e(will)
i(b)q(e)f(shared)g(and)g(whic)o(h)g(will)i(b)q(e)e(priv)m(ate:)20
b(without)15 b(con)o(trol)f(o)o(v)o(er)79 919 y(naming,)f(priv)m(ate)g(data)e
(m)o(ust)h(b)q(e)h(sim)o(ulated)g(b)o(y)f(indexing)h(in)o(to)g
(data-structures)e(using)i(their)f(pro)q(cess)79 975 y(iden)o(ti\014cation)j
(n)o(um)o(b)q(er.)k(This)13 b(issue)h(comes)e(up)h(in)g(single-address)h
(space)f(op)q(erating)g(systems:)18 b(with-)79 1032 y(out)c(priv)m(ate)i
(naming,)e(\\priv)m(ate)h(data")e(m)o(ust)h(b)q(e)h(relo)q(cated)g(to)f
(global)h(addresses)f(at)g(load-time)h([20)o(].)79 1088 y(With)h(priv)m(ate)g
(names,)f(this)g(naming)h(can)f(b)q(e)h(done)g(at)e(compile)j(time.)150
1145 y Fl(Con)o(trol)k(o)o(v)o(er)f(la)o(y)o(out)p Fo(.)29
b(The)19 b(abilit)o(y)h(to)e(partition)g(up)h(virtual)g(memory)f(in)h(an)g
(application)79 1201 y(sp)q(eci\014c)26 b(w)o(a)o(y)c(allo)o(ws)i
(dynamically)h(t)o(yp)q(ed)f(languages)g(to)f(partition)h(their)g(ob)s(ject)f
(space)h(\(t)o(yp)q(e-)79 1258 y(segmen)o(tation\))10 b(at)f(di\013eren)o(t)i
(virtual)g(memory)e(segmen)o(ts,)h(in)h(order)f(to)g(ha)o(v)o(e)g(t)o(yp)q
(es)g(b)q(e)h(self-iden)o(tifying)h([42)o(].)79 1314 y(An)19
b(application)h(lev)o(el)g(virtual)f(memory)f(library)h(allo)o(ws)g(this)g
(op)q(eration)g(to)e(b)q(e)j(done)e(m)o(uc)o(h)h(more)79 1371
y(readily)l(.)150 1427 y Fl(Aliasing)p Fo(.)34 b(Man)o(y)19
b(op)q(erations)h(suc)o(h)f(as)g(garbage)g(collection)i(b)q(ene\014t)g(from)e
(aliasing)h([5].)32 b(F)l(or)79 1484 y(example,)17 b(aliasing)g(allo)o(ws)f
(a)f(garbage)g(collector)i(to)e(map)h(the)f(same)h(ph)o(ysical)h(page)f
(using)g(di\013eren)o(t)79 1540 y(virtual)d(memory)e(attributes:)18
b(the)12 b(mapping)g(in)g(the)g(m)o(utator's)e(space)i(can)g(b)q(e)g
(read-protected,)g(while)79 1596 y(the)i(mapping)g(in)h(the)e(collector's)h
(space)g(has)f(normal)g(protections.)20 b(A)13 b(more)g(prosaic)h(example)g
(is)g(the)79 1653 y(simpli\014cation)j(of)c(circular)i(bu\013er)f(algorithms)
g(b)o(y)g(the)g(abilit)o(y)h(to)e(alias)i(memory)e(after)g(the)h(\\tail")g
(of)79 1709 y(the)i(bu\013er)f(to)f(the)h(\\head":)20 b(this)15
b(abilit)o(y)h(can)f(eliminate)i(the)e(need)h(to)e(sp)q(ecial-case)j(memory)e
(copies)79 1766 y(that)g(straddle)h(the)f(circular)h(bu\013er.)79
1888 y Fp(4.6.4)56 b(Tigh)n(ter)18 b(in)n(tegration)79 1973
y Fo(Man)o(y)12 b(applications)h(w)o(ould)f(b)q(ene\014t)h(from)e(a)g(tigh)o
(ter)h(in)o(tegration)g(with)g(the)g(virtual)g(memory)f(system.)79
2030 y(W)l(e)16 b(giv)o(e)f(some)g(examples)h(here.)150 2086
y Fl(TLB)24 b(prefetc)o(hing)p Fo(.)36 b(If)21 b(TLB)f(p)q(enalties)j
(increase,)f(TLB)f(prefetc)o(hing)g(will)h(b)q(ecome)f(imp)q(or-)79
2143 y(tan)o(t)14 b([9)o(].)19 b(Exp)q(osing)c(the)f(TLB)h(to)e(applications)
j(allo)o(ws)e(them)g(to)g(do)g(this)h(optimization)g(simply)g(and)79
2199 y(directly)l(.)150 2256 y Fl(Appropriate)20 b(page)f(replacemen)o(t)f(p)
q(olicy)p Fo(.)26 b(Since)19 b(the)e(exok)o(ernel)h(allo)o(ws)f(applications)
h(to)79 2312 y(con)o(trol)h(paging,)g(they)g(can)f(can)h(implemen)o(t)h(an)e
(application-sp)q(eci\014)q(c)j(paging)e(p)q(olicy)h(\(e.g.,)e(LR)o(U,)79
2369 y(MR)o(U,)h(b)o(y)f(priorities,)i(etc.\).)29 b(F)l(urthermore,)19
b(they)g(can)f(decide)i(what)e(to)g(do)h(with)g(pages)f(that)g(are)79
2425 y(reclaimed.)29 b(F)l(or)17 b(example,)i(garbage)e(collectors)i(do)e
(not)g(need)i(to)e(page)h(out)f(scanned)i(pages,)e(since)79
2481 y(they)d(only)h(con)o(tain)f(garbage.)k(Unfortunately)l(,)c(curren)o(t)g
(OS)g(implemen)o(tations)h(do)f(not)f(supp)q(ort)h(this)79
2538 y(optimization,)i(and)f(therefore)g(garbage-collection)h(results)f(in)h
(a)e(\\\015urry")h(of)f(I/O)h(activit)o(y)l(,)g(b)q(ecause)79
2594 y(the)d(OS)g(VM)f(system)g(do)q(es)g(not)g(realize)i(that)e(while)h(the)
g(page)f(has)g(indeed)i(b)q(een)g(mo)q(di\014ed,)g(it)e(con)o(tains)79
2651 y(garbage)k(and)g(so)g(do)q(es)h(not)e(need)i(to)f(b)q(e)h(stored)f(to)f
(disk)i([26)o(].)957 2817 y(84)p eop
%%Page: 85 87
85 86 bop 150 34 a Fl(P)o(age-prefetc)o(hing)p Fo(.)37 b(A)20
b(scien)o(ti\014c)j(application)f(ma)o(y)e(follo)o(w)g(w)o(ell-de\014ned)k
(access)c(patterns,)79 90 y(allo)o(wing)d(it)e(to)g(predict)h(whic)o(h)g
(pages)f(will)i(b)q(e)e(needed)i([45)o(].)150 147 y Fl(Accurate)j(\\in)h
(core")g(information)p Fo(.)k(Accurate)18 b(kno)o(wledge)g(of)f(whic)o(h)h
(pages)g(are)f(residen)o(t)79 203 y(in)g(memory)f(can)g(b)q(e)g(useful)h(to)e
(man)o(y)h(t)o(yp)q(es)g(of)f(applications.)24 b(F)l(or)15
b(example,)h(a)g(scien)o(ti\014c)i(program)79 260 y(manipulating)c(large)f
(matrices)f(could)h(w)o(ork)f(on)g(those)g(pieces)h(that)f(are)g(\\in)h
(core",)f(while)i(prefetc)o(hing)79 316 y(others.)21 b(Garbage)14
b(collectors)i(can)g(use)f(this)h(information)g(as)f(w)o(ell,)h(b)o(y)f
(reclaiming)i(only)f(the)g(storage)79 373 y(whic)o(h)j(is)g(residen)o(t)f(in)
h(main)f(memory)l(.)27 b(Finally)l(,)20 b(this)e(information)g(is)h(critical)
g(to)e(real-time)i(appli-)79 429 y(cations,)f(whic)o(h)h(m)o(ust)d(meet)i
(deadlines)h(and)f(cannot)f(b)q(e)h(sub)s(ject)f(to)g(the)h(v)m(agaries)f(of)
g(curren)o(t)h(VM)79 486 y(systems.)150 542 y Fl(Pinning)c(pages)p
Fo(.)k(Predicating)12 b(that)e(certain)i(pages)e(are)h(pinned)i(in)e(memory)g
(b)q(efore)g(pro)q(ceeding)79 599 y(can)16 b(allo)o(w)f(real-time)h
(applications)h(to)e(calculate)h(and)g(meet)f(tigh)o(ter)g(deadlines)i([45)o
(].)i(F)l(urthermore,)79 655 y(con)o(trol)13 b(o)o(v)o(er)e(whic)o(h)j(pages)
e(are)g(paged-out)h(can)f(allo)o(w)h(applications)h(to)e(exploit)i
(application-sp)q(eci\014c)79 711 y(kno)o(wledge)j(o)o(v)o(er)f(what)f(pages)
h(should)i(reside)f(in)g(main)g(memory)l(.)22 b(F)l(or)16 b(instance,)h(a)f
(database)f(man-)79 768 y(agemen)o(t)e(system)f(could)i(ensure)g(that)e
(critical)i(pages,)f(suc)o(h)h(as)e(those)h(con)o(taining)g(directories,)h
(reside)79 824 y(in)j(ph)o(ysical)f(memory)f([45)o(].)79 946
y Fp(4.6.5)56 b(P)n(age)19 b(size)f(T)-5 b(rade)19 b(o\013s)79
1032 y Fo(Increasing)e(or)e(decreasing)h(the)f(page)g(size)i(that)d(is)i(b)q
(eing)h(mapp)q(ed)f(a\013ects)e(the)i(amoun)o(t)e(of)h(memory)79
1088 y(needed)f(to)e(map)g(a)g(virtual)h(address)f(space,)h(the)f(base)g
(unit)h(of)f(protection)g(a)o(v)m(ailable,)j(the)d(w)o(orking-set)79
1145 y(size)k([75)o(,)f(93)o(],)f(and)h(the)g(frequency)h(of)e(TLB)i(faults)f
([75)o(,)f(93,)g(94)o(].)20 b(Generally)l(,)c(large-page)f(sizes)g(allo)o(w)
79 1201 y(few)o(er)j(TLB)f(misses)h(and)g(\(p)q(ossibly\))h(smaller)f
(page-tables,)g(but)g(at)e(a)i(cost)f(of)g(larger)g(w)o(orking-sets)79
1258 y(and)i(a)f(coarse)g(grain)h(of)f(protection.)30 b(These)19
b(trade-o\013s)e(are)i(highly)h(application)g(dep)q(enden)o(t,)g(and)79
1314 y(ha)o(v)o(e)15 b(th)o(us)g(far)g(b)q(een)h(p)q(o)q(orly)g(serv)o(ed)f
(b)o(y)g(existing)i(op)q(erating)e(systems)g([94)o(].)150 1371
y(Man)o(y)f(mac)o(hines)i(supp)q(ort)e(m)o(ultiple)j(page-sizes)f([54)o(,)e
(51)o(,)h(94)o(].)k(There)c(are)g(a)f(n)o(um)o(b)q(er)h(of)g(sp)q(eci\014c)79
1427 y(w)o(a)o(ys)g(that)f(page)h(size)h(\015uctuations)g(ma)o(y)e(b)q(e)i
(useful:)150 1484 y Fl(Reduced)21 b(page-table)i(o)o(v)o(erhead)p
Fo(.)j(The)18 b(use)g(of)g(large)g(pages)f(directly)j(reduces)e(the)g(size)h
(of)79 1540 y(page-tables)i(needed)h(to)e(map)g(an)h(address)f(space.)36
b(Giv)o(en)21 b(that)f(address)g(space)h(usage)f(has)g(b)q(een)79
1596 y(gro)o(wing)d(at)f(a)h(rate)f(of)g(a)h(bit)h(and)f(a)f(half)i(p)q(er)f
(y)o(ear)f([20)o(],)h(this)g(is)h(an)f(imp)q(ortan)o(t)f(optimization.)26
b(An)79 1653 y(ob)s(ject-based)12 b(virtual)g(memory)f(system)h(ma)o(y)e
(\014nd)j(v)m(ariable)g(page)e(size)i(useful)g(b)q(oth)e(in)i(the)f
(reduction)79 1709 y(in)19 b(fragmen)o(tation)d(it)i(can)g(bring)g(and)f(in)i
(the)e(space)h(sa)o(vings)g(that)e(can)i(b)q(e)g(had)g(for)f(ob)s(jects)g
(larger)79 1766 y(than)f(the)g(base)g(page)f(size.)23 b(E.g.,)14
b(a)h(large)h(ob)s(ject)f(that)g(is)i(eigh)o(t)f(pages)f(long)h(ma)o(y)f(b)q
(e)i(mapp)q(ed)f(with)79 1822 y(a)f(single)i(page-table)f(en)o(try)e(if)i(8)f
(con)o(tiguous)g(ph)o(ysical)i(pages)e(ma)o(y)f(b)q(e)i(asso)q(ciated)f(with)
h(it.)150 1879 y Fl(Reduced)h(false)f(sharing)h(in)f(parallel)i(systems)o
Fo(.)f(Smaller)e(pages)f(are)g(a)f(space-e\016cien)o(t)i(w)o(a)o(y)79
1935 y(of)i(com)o(bating)g(false)h(sharing)f(in)h(parallel)h(systems.)25
b(Unfortunately)l(,)17 b(applications)i(curren)o(tly)f(ha)o(v)o(e)79
1992 y(no)c(con)o(trol)f(o)o(v)o(er)g(either)i(page)e(size)i(or)e(the)h
(mapping)g(structure,)f(whic)o(h)i(remo)o(v)o(es)e(them)g(from)g(ha)o(ving)79
2048 y(an)o(y)h(useful)h(mec)o(hanism)g(to)e(realize)i(this)g(\(other)e(than)
h(ha)o(ving)g(one)g(ob)s(ject)g(p)q(er)g(page,)g(whic)o(h)h(can)f(get)79
2105 y(exp)q(ensiv)o(e\).)21 b(Small)13 b(pages)f(can)g(b)q(e)h(implemen)o
(ted)g(through)f(either)h(hardw)o(are)e(or)h(em)o(ulation)h([97)o(].)18
b(An)79 2161 y(additional)h(area)e(where)g(false)g(sharing)h(ma)o(y)e(ha)o(v)
o(e)h(o)o(v)o(erhead)g(is)g(on)g(con)o(v)o(en)o(tional)h(shared)f(memory)79
2217 y(mac)o(hines)h(where)g(TLB)f(in)o(v)m(alidates)i(of)e(other)f(pro)q
(cessors)h(m)o(ust)g(b)q(e)g(done)h(on)f(protection)g(c)o(hanges,)79
2274 y(etc.)79 2396 y Fp(4.6.6)56 b(P)n(age-table)18 b(Structures)79
2481 y Fo(P)o(age-tables)i(are)g(used)g(to)g(construct)f(a)h(discrete)h
(function)f(from)g(virtual)g(to)f(ph)o(ysical)j(addresses.)79
2538 y(The)17 b(c)o(haracteristics)f(of)g(this)h(function)g(\(its)f(sparsit)o
(y)l(,)g(the)g(range)g(of)g(inputs)h(and)g(outputs)f(it)g(has)g(to)79
2594 y(pro)q(duce)f(and)f(the)g(n)o(um)o(b)q(er)g(of)f(p)q(oin)o(ts)h(it)g
(ma)o(y)f(b)q(e)h(exp)q(ected)h(to)e(matc)o(h\))g(ha)o(v)o(e)g(a)g(deep)i
(impact)f(on)f(the)79 2651 y(appropriateness)h(of)f(a)h(giv)o(en)g(structure)
f([49)o(].)19 b(Belo)o(w)13 b(w)o(e)h(examine)g(some)f(sp)q(eci\014c)j
(arenas)d(where)g(the)957 2817 y(85)p eop
%%Page: 86 88
86 87 bop 79 34 a Fo(page-table)16 b(structure)f(ma)o(y)g(b)q(e)h(stressed.)
150 90 y Fl(Di\013eren)o(t)e(address)f(space)i(sizes)p Fo(.)j(With)13
b(the)f(adv)o(en)o(t)g(of)g(64-bit)h(mac)o(hines,)g(the)f(consideration)79
147 y(of)h(what)g(address)g(space)g(size)h(is)f(appropriate)g(for)g(a)g(giv)o
(en)g(application)i(should)f(b)q(ecome)g(increasingly)79 203
y(imp)q(ortan)o(t.)21 b(The)16 b(page-table)g(mec)o(hanisms)g(and)g
(structure)f(used)i(to)e(map)g(a)g(sparse)h(64-bit)f(address)79
260 y(space)h(\(i.e.,)f(in)o(v)o(erted)h(page-tables\))g(are)f(di\013eren)o
(t)h(from)f(those)g(appropriate)h(to)f(a)g(dense)i(32-bit)e(ad-)79
316 y(dress)e(space)g(\(e.g.,)f(hierarc)o(hical)i(page-tables\).)19
b(Curren)o(t)12 b(op)q(erating)h(systems)f(\014x)h(a)f(general-purp)q(ose)79
373 y(page-table)19 b(implemen)o(tation)h(for)e(all)h(applications.)31
b(This)18 b(p)q(enalizes)j(those)d(applications)i(that)e(do)79
429 y(not)13 b(\014t)h(within)g(the)f(parameters)g(used)h(to)e(deriv)o(e)i
(the)g(systems)f(page-table)g(structure.)19 b(F)l(or)13 b(example,)79
486 y(an)h(op)q(erating)f(system)g(on)g(a)g(64-bit)h(mac)o(hine)g(will)h(lik)
o(ely)g(c)o(hose)e(a)g(page-table)h(structure)f(that)g(trades)79
542 y(space)k(in)g(mapping)f(large)g(address)g(spaces)g(for)g(sp)q(eed)h(in)f
(mapping)h(small)g(ones.)22 b(This)16 b(tradeo\013)f(is)i(a)79
599 y(needless)h(one,)e(since,)i(if)e(page-table)h(implemen)o(tations)g(can)g
(b)q(e)f(isolated)h(in)g(libraries,)h(applications)79 655 y(can)i(select)g
(\(or)f(ha)o(v)o(e)f(selected)j(for)e(them\))g(an)o(y)g(one)g(of)g(an)g(arra)
o(y)f(of)h(page-table)h(structures.)32 b(F)l(or)79 711 y(instance,)14
b(a)f(sparse)g(64-bit)g(address)g(space)h(could)g(use)f(in)o(v)o(erted)h
(page-tables)f(while)i(a)d(32-bit)h(address)79 768 y(space)k(on)f(the)g(same)
g(system)f(could)i(use)g(hierarc)o(hical)h(page-tables,)e(and)g(a)g
(protected)g(ob)s(ject)f(\(that)79 824 y(ma)o(y)i(b)q(e)h(comprised)h(solely)
f(of)f(t)o(w)o(o)g(or)g(three)g(pages\))g(can)h(use)g(a)f(simple)i(linear)f
(v)o(ector)f(to)g(map)g(its)79 881 y(address)12 b(space.)19
b(A)12 b(single-address)h(space)f(OS)g(subsystem)g(ma)o(y)e(use)i(a)g
(completely)h(radical)f(structure;)79 937 y(so)j(to)q(o)g(migh)o(t)g(a)g(p)q
(ersisten)o(t)g(ob)s(ject)g(store.)150 994 y Fl(E\016cien)o(t)23
b(supp)q(ort)f(for)g(sparsit)o(y)p Fo(.)32 b(Sparse)19 b(address)h(spaces)g
(presen)o(t)f(mapping)h(c)o(hallenges)79 1050 y(in)d(that)f(the)g(function)h
(of)e(virtual)i(to)e(ph)o(ysical)j(mappings)e(m)o(ust)g(b)q(e)g(able)h(to)f
(cop)q(e)g(with)h(large)f(holes)79 1107 y(b)q(et)o(w)o(een)h(v)m(alid)i
(mappings)e(and)g(still)h(remain)f(e\016cien)o(t)g(b)q(oth)g(in)g(space)g
(and)g(time.)24 b(The)17 b(sparsit)o(y)f(of)79 1163 y(the)d(address)g(space)g
(will)h(in\015uence)h(the)d(computation/space)h(tradeo\013s)e(made)i(in)h(a)e
(giv)o(en)h(page-table)79 1220 y(structure.)20 b(Again,)15
b(this)f(is)h(an)g(example)g(of)f(a)g(trade-o\013)g(that,)f(if)i(done)g(in)h
(application)g(space,)e(allo)o(ws)79 1276 y(virtual)i(memory)f(implemen)o
(tations)h(to)f(b)q(e)h(tuned)f(to)g(a)g(sp)q(eci\014c)i(application)g
(domain,)e(rather)g(than)79 1332 y(forcing)h(all)g(applications)h(to)d(use)i
(a)f(general-purp)q(ose)h(implemen)o(tation.)79 1454 y Fp(4.6.7)56
b(Virtual)18 b(memory)d(exp)r(erime)o(n)n(ts)79 1540 y Fo(W)l(e)h(compare)g
(Aegis)g(and)g(ExOS)g(to)f(Ultrix)i(on)f(sev)o(en)g(virtual)g(memory)f(exp)q
(erimen)o(ts,)i(based)f(up)q(on)79 1596 y(those)f(listed)i(in)f([5)o(]:)79
1703 y Fj(dirty)p Fl(:)22 b Fo(Measures)d(the)h(time)g(to)f(query)g(whether)h
(a)f(page)h(is)g(\\dirt)o(y")f(or)g(not.)32 b(Since)21 b(it)f(do)q(es)g(not)
193 1759 y(require)g(examination)g(of)e(the)i(TLB,)f(this)g(measuremen)o(t)g
(is)g(used)h(to)f(test)f(the)h(base)g(cost)g(of)193 1816 y(lo)q(oking)h(up)f
(a)f(virtual)h(address)g(in)h(ExOS's)e(page-table)i(structure.)30
b(This)19 b(op)q(eration)g(is)g(not)193 1872 y(pro)o(vided)d(b)o(y)f(Ultrix.)
79 1966 y Fj(\(un\)prot1)p Fl(:)22 b Fo(Measures)e(the)g(time)h(required)g
(to)f(c)o(hange)g(the)h(page)f(protection)g(of)g(a)g(single)i(page.)193
2022 y(On)15 b(the)f(exok)o(ernel)g(system,)g(this)g(op)q(eration)g(in)o(v)o
(olv)o(es)h(mo)q(difying)g(the)f(page-table,)g(TLB,)g(and)193
2079 y(STLB)i(en)o(tries.)79 2173 y Fj(prot100)p Fl(:)22 b
Fo(Measures)10 b(the)g(time)h(required)g(to)f(\\read-protect")f(100)h(pages.)
18 b(On)11 b(the)f(exok)o(ernel)h(system,)193 2229 y(this)16
b(op)q(eration)f(mo)q(di\014es)h(the)g(page-table,)f(TLB)h(and)f(STLB)h(en)o
(tries.)79 2323 y Fj(unprot100)p Fl(:)22 b Fo(Measures)14 b(the)g(time)h
(required)h(to)e(remo)o(v)o(e)g(read-protections)g(on)h(100)f(pages.)19
b(In)o(v)o(olv)o(es)193 2379 y(up)q(dating)d(the)g(page-table)f(and)h(mo)q
(difying)g(the)f(TLB)h(and)f(STLB)h(en)o(tries.)79 2473 y Fj(trap)p
Fl(:)22 b Fo(Time)16 b(to)e(tak)o(e)h(a)g(page-protection)g(trap.)79
2567 y Fj(appel1)p Fl(:)22 b Fo(Time)d(to)e(access)i(a)f(random)g(protected)g
(page)h(and)f(in)h(the)g(fault-handler,)h(protect)e(some)193
2623 y(other)c(page)g(and)g(unprotect)g(the)g(faulting)h(page)f(\(this)g(b)q
(enc)o(hmark)g(is)h(\\prot1+trap+unprot")193 2680 y(in)h(App)q(el)h(et)e(al.)
g([5]\).)957 2817 y(86)p eop
%%Page: 87 89
87 88 bop 79 48 1957 2 v 78 105 2 57 v 104 88 a Fl(Mac)o(hine)p
322 105 V 51 w(OS)p 549 105 V 158 w(dirt)o(y)p 710 105 V 50
w(\(un\)prot1)p 982 105 V 50 w(prot100)p 1207 105 V 51 w(unprot100)p
1490 105 V 50 w(trap)p 1636 105 V 50 w(app)q(el1)p 1836 105
V 51 w(app)q(el2)p 2035 105 V 79 106 1957 2 v 78 163 2 57 v
108 146 a Fo(DEC2100)p 322 163 V 49 w(Ultrix4.2)p 549 163 V
90 w(n/a)p 710 163 V 191 w(51.6)p 982 163 V 143 w(175.)p 1207
163 V 201 w(175.)p 1490 163 V 64 w(297.)p 1636 163 V 118 w(438.)p
1836 163 V 117 w(392.)p 2035 163 V 78 219 V 108 202 a(DEC2100)p
322 219 V 49 w(Aegis)p 549 219 V 150 w(17.5)p 710 219 V 190
w(32.5)p 982 219 V 143 w(213.)p 1207 219 V 201 w(275.)p 1490
219 V 64 w(13.9)p 1636 219 V 118 w(74.4)p 1836 219 V 117 w(45.9)p
2035 219 V 79 221 1957 2 v 78 277 2 57 v 108 260 a(DEC3100)p
322 277 V 49 w(Ultrix4.2)p 549 277 V 90 w(n/a)p 710 277 V 191
w(47.8)p 982 277 V 143 w(140.)p 1207 277 V 201 w(140.)p 1490
277 V 64 w(240.)p 1636 277 V 118 w(370.)p 1836 277 V 117 w(325.)p
2035 277 V 78 334 V 108 317 a(DEC3100)p 322 334 V 49 w(Aegis)p
549 334 V 150 w(13.1)p 710 334 V 190 w(24.4)p 982 334 V 143
w(156.)p 1207 334 V 201 w(206.)p 1490 334 V 64 w(10.1)p 1636
334 V 141 w(55.)p 1836 334 V 140 w(34.)p 2035 334 V 79 335
1957 2 v 299 413 a(Figure)15 b(4-8:)20 b(Virtual)c(memory)e(b)q(enc)o
(hmarks;)i(times)f(are)g(in)h(micro-seconds)79 546 y Fj(appel2)p
Fl(:)22 b Fo(Time)e(to)f(protect)g(100)g(pages,)h(access)f(eac)o(h)h(page)f
(in)i(a)e(random)g(sequence)i(and,)f(in)g(the)193 602 y(fault-handler,)d
(unprotect)f(the)g(faulting)h(page)f(\(this)g(b)q(enc)o(hmark)g(is)g
(\\protN+trap+unprot")193 659 y(in)g(App)q(el)h(et)e(al.)g([5]\).)79
765 y(The)23 b(exok)o(ernel)h(based)e(virtual)i(memory)e(system)g(resides)h
(en)o(tirely)h(in)f(application-space.)44 b(The)79 822 y(curren)o(t)14
b(page-table)g(structure)g(w)o(e)f(use)h(is)h(a)e(simple)i(linear)g(v)o
(ector:)k(en)o(tries)14 b(are)f(found)h(using)h(binary)79 878
y(searc)o(h.)20 b(Ob)o(viously)l(,)d(these)e(times)h(could)g(b)q(e)g(greatly)
f(impro)o(v)o(ed.)150 935 y Fj(dirty)e Fo(measures)h(the)g(time)g(to)f(parse)
h(the)g(page-table)g(for)g(a)f(random)h(en)o(try)l(.)19 b(If)14
b(w)o(e)g(compare)f(the)79 991 y(time)f(required)g(for)e Fj(dirty)h
Fo(to)f(the)h(time)h(required)g(to)e(p)q(erform)h Fj(\(un\)prot1)p
Fo(,)f(w)o(e)h(can)g(see)g(that)g(o)o(v)o(er)f(half)79 1047
y(the)17 b(time)g(of)f(in)h Fj(\(un\)prot1)e Fo(is)i(due)g(to)f(the)h(o)o(v)o
(erhead)f(of)g(parsing)g(the)h(page-table.)24 b(This)17 b(o)o(v)o(erhead)79
1104 y(can)c(b)q(e)f(directly)h(eliminated)h(through)e(the)g(use)g(of)f(a)h
(data)f(structure)h(more)f(tuned)i(to)e(e\016cien)o(t)i(lo)q(okup)79
1160 y(\(e.g.,)h(a)h(hash-table\).)20 b(Ev)o(en)15 b(with)g(this)g(p)q(enalt)
o(y)l(,)h(our)e(system)h(can)g(p)q(erform)g(these)g(op)q(erations)g(close)79
1217 y(to)j(t)o(w)o(o)e(times)j(more)e(e\016cien)o(tly)i(than)f(Ultrix.)29
b(The)18 b(lik)o(ely)i(reason)d(for)g(this)i(di\013erence)g(is)f(that,)g(as)
79 1273 y(sho)o(wn)f(in)h(Figure)f(4-2,)f(Aegis)i(dispatc)o(hes)f(system)g
(calls)h(an)e(order)h(of)f(magnitude)i(more)e(e\016cien)o(tly)79
1330 y(than)g(Ultrix.)150 1386 y(In)j(general,)g(our)e(exok)o(ernel-based)i
(system)f(p)q(erforms)g(w)o(ell)h(on)f(this)g(set)g(of)f(b)q(enc)o(hmarks.)29
b(The)79 1443 y(sole)16 b(exceptions)g(are)e Fj(prot100)g Fo(and)h
Fj(unprot100)p Fo(.)j(Ultrix)e(is)f(extremely)g(e\016cien)o(t)h(in)f
(protecting)g(and)79 1499 y(unprotecting)d(con)o(tiguous)g(ranges)f(of)g
(virtual)h(addresses:)18 b(it)11 b(p)q(erforms)g(20\045)g(to)g(60\045)f(more)
h(e\016cien)o(tly)79 1556 y(than)19 b(Aegis)f(in)h(these)g(op)q(erations.)29
b(P)o(art)17 b(of)h(this)h(di\013erence)g(is)g(a)f(direct)h(result)g(of)e
(our)h(immature)79 1612 y(implemen)o(tation;)27 b(another)21
b(app)q(ears)h(to)g(b)q(e)g(due)h(to)e(the)h(fact)g(that,)g(on)g(Aegis,)i(c)o
(hanging)e(page-)79 1668 y(protections)e(requires)f(access)h(to)e(t)o(w)o(o)g
(data)g(structures)h(\(Aegis')g(STLB)h(and)f(ExOS's)g(page-table\))79
1725 y(to)i(c)o(hange)g(protection)g(information.)38 b(W)l(e)21
b(an)o(ticipate)g(these)h(times)f(impro)o(ving)h(as)e(w)o(e)h(tune)g(the)79
1781 y(system.)g(F)l(ortunately)l(,)16 b(ev)o(en)g(with)g(p)q(o)q(or)f(p)q
(erformance)h(on)g(these)f(t)o(w)o(o)g(op)q(erations,)g(the)h(b)q(enc)o
(hmark)79 1838 y(that)e(dep)q(ends)i(on)f(this)f(op)q(eration,)h
Fj(appel2)p Fo(,)e(is)i(close)g(to)f(an)g(order)g(of)g(magnitude)h(more)f
(e\016cien)o(t)i(on)79 1894 y(Aegis)g(than)f(on)g(Ultrix.)150
1951 y Fj(trap)j Fo(is)i(another)e(area)h(where)g(the)g(exok)o(ernel)h
(system)e(p)q(erforms)h(extremely)h(w)o(ell)f(\(i.e.,)h(21)e(to)79
2007 y(24)j(times)f(faster)g(than)h(Ultrix\).)36 b(This)22
b(p)q(erformance)e(di\013eren)o(tial)i(is)f(ac)o(hiev)o(ed)h(ev)o(en)f
(though)f(the)79 2064 y Fj(trap)15 b Fo(b)q(enc)o(hmark)h(on)f(Aegis)h(is)g
(implemen)o(ted)h(with)e(standard)g(signal)h(seman)o(tics:)k(for)15
b(example,)h(all)79 2120 y(caller-sa)o(v)o(ed)f(registers)f(are)f(sa)o(v)o
(ed.)19 b(If)14 b(these)g(seman)o(tics)g(w)o(ere)f(violated)i(b)o(y)f(ExOS,)f
(the)h(p)q(erformance)79 2177 y(di\013erence)j(w)o(ould)e(b)q(ecome)h(ev)o
(en)g(larger.)150 2233 y(Finally)l(,)e(the)d(higher-lev)o(el)j(b)q(enc)o
(hmarks,)f Fj(appel1)d Fo(and)i Fj(appel2)p Fo(,)f(also)h(sho)o(w)f
(impressiv)o(e)h(sp)q(eedup:)79 2289 y(up)k(to)f(an)g(order)g(of)g(magnitude)
g(in)h(some)f(cases)g(and)h(nev)o(er)f(less)h(than)f(a)g(factor)f(of)h(\014v)
o(e.)150 2346 y(These)f(n)o(um)o(b)q(ers)g(w)o(ere)g(ac)o(hiev)o(ed)g(ev)o
(en)g(though)g(\(or)f(rather,)g Fn(b)n(e)n(c)n(ause)p Fo(\))f(all)j(virtual)f
(memory)f(man-)79 2402 y(agemen)o(t)18 b(w)o(as)f(p)q(erformed)h(at)g
(application-lev)o(el.)31 b(A)o(t)18 b(\014rst)g(blush)h(the)f(micro-cost)g
(of)g(application-)79 2459 y(lev)o(el)c(virtual)g(memory)e(w)o(ould)h(seem)g
(to)f(add)g(a)h(large)f(o)o(v)o(erhead)h(to)f(basic)h(memory)f(op)q
(erations;)h(these)79 2515 y(b)q(enc)o(hmarks)j(sho)o(w)f(that)f(this)i
(assumption)f(is)h(wrong.)957 2817 y(87)p eop
%%Page: 88 90
88 89 bop 643 44 673 2 v 642 100 2 57 v 668 83 a Fl(Mac)o(hine)p
886 100 V 159 w(OS)p 1112 100 V 50 w(matrix)p 1315 100 V 643
102 673 2 v 642 159 2 57 v 672 142 a Fo(DEC2100)p 886 159 V
48 w(Ultrix4.2)p 1112 159 V 145 w(7.1)p 1315 159 V 642 215
V 672 198 a(DEC2100)p 886 215 V 118 w(Aegis)p 1112 215 V 145
w(7.0)p 1315 215 V 643 217 673 2 v 642 273 2 57 v 672 256 a(DEC3100)p
886 273 V 48 w(Ultrix4.2)p 1112 273 V 145 w(5.2)p 1315 273
V 642 330 V 672 313 a(DEC3100)p 886 330 V 118 w(Aegis)p 1112
330 V 145 w(5.2)p 1315 330 V 643 331 673 2 v 383 411 a(Figure)15
b(4-9:)20 b(150x150)13 b(matrix)i(m)o(ultiplication)j(\(time)d(in)h
(seconds\))79 547 y Fl(The)i(o)o(v)o(erhead)e(of)i(application-)q(lev)o(el)i
(virtual)e(mem)o(or)o(y)79 633 y Fo(The)e(o)o(v)o(erhead)g(of)f
(application-lev)o(el)k(memory)c(is)h(measured)g(b)o(y)f(p)q(erforming)h(a)g
(150)e(b)o(y)i(150)f(matrix)79 689 y(m)o(ultiplication.)45
b(Because)23 b(this)g(naiv)o(e)g(v)o(ersion)g(of)f(matrix)h(m)o(ultiply)h(do)
q(es)f(not)f(use)h(an)o(y)f(of)g(the)79 746 y(sp)q(ecial)c(abilities)g(of)d
(ExOS)h(or)f(Aegis)h(\(e.g.,)e(page-coloring)i(to)f(reduce)i(cac)o(he)f
(con\015icts\),)f(w)o(e)h(exp)q(ect)79 802 y(that)23 b(it)g(will)h(p)q
(erform)f(equiv)m(alen)o(tly)i(on)d(b)q(oth)h(op)q(erating)g(systems.)42
b(The)23 b(times)g(in)h(Figure)f(4-9)79 859 y(giv)o(e)16 b(a)e(ten)o(tativ)o
(e)h(indication)h(that)f(application-lev)o(el)j(virtual)d(memory)g(do)q(es)g
(not)f(add)h(a)g(noticeable)79 915 y(o)o(v)o(erhead)f(to)g(op)q(erations)h
(that)e(ha)o(v)o(e)h(large)h(virtual)g(memory)e(fo)q(otprin)o(ts.)19
b(Of)c(course,)f(this)h(is)g(hardly)79 971 y(a)g(conclusiv)o(e)i(pro)q(of:)j
(w)o(e)15 b(will)i(in)o(v)o(estigate)e(this)g(issue)i(more)d(thoroughly)h(in)
i(future)e(w)o(ork.)79 1115 y Fu(4.7)70 b(Conclusions)79 1216
y Fo(This)15 b(c)o(hapter)f(has)f(demonstrated)h(that)f(the)h(follo)o(wing)g
(h)o(yp)q(otheses)g(hold)h(for)e(an)h(exok)o(ernel)g(system:)148
1310 y Fc(\017)22 b Fo(The)17 b(o)o(v)o(erhead)e(of)h(lo)o(w-lev)o(el)h(m)o
(ultiplexing)i(is)e(either)g(negligible)h(or)e(can)g(b)q(e)h(directly)h(coun)
o(ter)193 1366 y(acted.)23 b(One)17 b(of)f(the)h(most)e(in)o(teresting)i
(results)g(from)e(this)i(c)o(hapter)f(is)h(that)e(application-lev)o(el)193
1423 y(virtual)h(memory)f(can)g(b)q(e)h(implemen)o(ted)h Fn(without)g(appr)n
(e)n(ciable)f(overhe)n(ad)p Fo(.)148 1517 y Fc(\017)22 b Fo(F)l(undamen)o
(tal)c(op)q(erating)f(system)g(abstractions)g(can)h(b)q(e)g(implemen)o(ted)h
(simply)f(and)g(w)o(ell)g(at)193 1573 y(application)c(lev)o(el.)21
b(F)l(urthermore,)12 b(these)g(implemen)o(tations)i(do)e(not)g(require)i(m)o
(uc)o(h)e(e\013ort:)17 b(the)193 1630 y(system)e(w)o(as)f(implemen)o(ted)j(b)
o(y)e(the)h(author)e(in)i(a)f(few)g(mon)o(ths.)148 1723 y Fc(\017)22
b Fo(The)15 b(exok)o(ernel's)g(structure)g(allo)o(ws)g(man)o(y)f(basic)i
(primitiv)o(es)g(and)f(abstractions)f(to)g(b)q(e)i(imple-)193
1780 y(men)o(ted)e(up)g(to)e(t)o(w)o(o)h(orders)g(of)g(magnitude)h(more)f
(e\016cien)o(tly)h(than)g(in)g(a)f(traditional)h(op)q(erating)193
1836 y(system.)150 1930 y(F)l(uture)i(w)o(ork)g(will)i(in)o(v)o(olv)o(e)f(a)f
(more)f(thorough)h(testing)g(of)g(our)g(exok)o(ernel)h(system.)23
b(Tw)o(o)15 b(of)h(the)79 1987 y(most)f(glaring)h(areas)e(are)h(in)h(pro)q
(cess)f(creation)h(and)f(protection)g(domain)h(switc)o(hing.)150
2043 y(The)11 b(single)i(most)d(imp)q(ortan)o(t)h(prop)q(ert)o(y)f(of)h(an)g
(exok)o(ernel)h(is)f(that)g(it)g(allo)o(ws)g(non-privileged)j(appli-)79
2099 y(cations)f(to)e(re-implemen)o(t)j(\(and)e(rede\014ne\))h(basic)g
(system)f(ob)s(jects.)18 b(This)13 b(allo)o(ws)f(systems)g(built)i(up)q(on)79
2156 y(an)19 b(exok)o(ernel)h(to)e(b)q(e)i Fn(fundamental)r(ly)f
Fo(more)f(\015exible)j(than)e(those)g(built)h(on)f(traditional)g(op)q
(erating)79 2212 y(systems.)957 2817 y(88)p eop
%%Page: 89 91
89 90 bop eop
%%Page: 90 92
90 91 bop 79 345 a Fi(Chapter)35 b(5)79 553 y Fm(Related)42
b(W)-10 b(ork)79 794 y Fu(5.1)70 b(Microk)n(ernels:)29 b(The)23
b(Garden)g(P)n(ath)h(of)f(Simpl)o(i)o(ci)o(t)m(y)79 895 y Fo(Micro-k)o
(ernels)17 b(w)o(ere)f(originally)h(in)o(tended)h(to)d(solv)o(e)h(man)o(y)g
(of)f(the)h(problems)h(w)o(e)e(ha)o(v)o(e)h(listed)h(\(p)q(o)q(or)79
952 y(reliabili)q(t)o(y)l(,)f(p)q(o)q(or)e(p)q(erformance)f(and)h(p)q(o)q(or)
g(\015exibilit)o(y\).)22 b(Unfortunately)l(,)14 b(they)g(ha)o(v)o(e)f(fallen)
i(short)e(for)79 1008 y(a)18 b(n)o(um)o(b)q(er)f(of)h(reasons.)26
b(First,)17 b(while)i(they)f(allo)o(w)f(replacemen)o(t)i(of)e(device)i(driv)o
(ers)e(and)h(high-lev)o(el)79 1064 y(serv)o(ers,)12 b(suc)o(h)g(op)q
(erations)f(t)o(ypically)i(can)e(only)h(b)q(e)g(done)g(b)o(y)f(trusted)h
(applications.)20 b(Second,)12 b(they)g(are)79 1121 y(still)k(in)g(the)e
(business)i(of)e(pro)o(viding)i(a)e(virtual)h(mac)o(hine)g(to)f
(applications.)22 b(The)14 b(high-lev)o(el)j(in)o(terface)79
1177 y(that)11 b(they)h(enforce)f(precludes)j(m)o(uc)o(h)d(of)g(the)h(exp)q
(erimen)o(tation)g(that)f(applications)i(desire)f(\(the)g(reader)79
1234 y(is)23 b(in)o(vited)g(to)f(compare)f(the)h(primitiv)o(es)h(describ)q
(ed)h(in)f(Section)g(1.3)e(to)g(curren)o(t)h(micro-k)o(ernels\).)79
1290 y(Third,)e(their)g(rigid)g(in)o(terface)f(tends)g(to)f(b)q(e)h(rudimen)o
(tary)g(or)f(o)o(v)o(erly)h(general)g(when)g(compared)g(to)79
1347 y(their)12 b(monolithic)g(coun)o(terparts;)f(they)g(often)f(ac)o(hiev)o
(e)i(simplicit)o(y)g(b)o(y)f(implemen)o(ting)i(only)e(a)f(small)i(set)79
1403 y(of)i(high-lev)o(el)i(OS)e(abstractions.)19 b(F)l(or)13
b(example,)h(a)f(micro-k)o(ernel)i(ma)o(y)e(ha)o(v)o(e)g(ac)o(hiev)o(ed)i
(simplicit)o(y)h(b)o(y)79 1460 y(dropping)e(supp)q(ort)e(for)g
Fj(mmap)p Fo(,)f(memory-mapp)q(ed)i(I/O,)f(and)h(full-featured)g(virtual)g
(memory)l(,)f(but)h(not)79 1516 y(giv)o(en)f(alternativ)o(e)f(mec)o(hanisms)h
(to)e(implemen)o(t)i(the)f(functionalit)o(y)i(these)e(features)g(pro)o
(vided:)18 b(micro-)79 1573 y(k)o(ernels)h(can)f(giv)o(e)h(applications)g(ev)
o(en)g(less)f(con)o(trol)g(o)o(v)o(er)f(hardw)o(are)g(resources)h(than)g(a)g
(monolithic)79 1629 y(system)d(do)q(es.)150 1685 y(Microk)o(ernel)f(arc)o
(hitects)g(ha)o(v)o(e)f(realized)i(that)e(an)g(op)q(erating)h(system)f
(should)i(b)q(e)f(minimal.)21 b(Ho)o(w-)79 1742 y(ev)o(er,)16
b(the)f(manner)h(in)g(whic)o(h)h(they)e(ha)o(v)o(e)g(attained)h(this)g(goal)f
(has)h(not)f(pro)o(vided)h(applications)h(with)79 1798 y(m)o(uc)o(h)i(more)e
(\015exibilit)o(y)k(than)d(under)h(monolithic)g(systems.)28
b(This)19 b(thesis)f(o\013ers)g(a)f(b)q(etter)h(alterna-)79
1855 y(tiv)o(e)g(metho)q(d)f(to)f(construct)h(minimal)h(op)q(erating)f
(systems.)25 b(An)17 b(OS)h(should)g(b)q(ecome)f(minimal)i(not)79
1911 y(b)o(y)g(enforcing)g(a)g(limited)h(set)f(of)f(op)q(erations,)h(but)g
(instead,)h(through)e(the)h(systematic)f(elimination)79 1968
y(of)h(all)h(op)q(erating)f(system)g(abstractions)f(in)i(order)f(to)f(exp)q
(ose)i(the)f(hardw)o(are)f(to)g(application-lev)o(el)79 2024
y(soft)o(w)o(are;)g(from)f(this)i(primal)g(m)o(ud,)g(applications)g(can)g
(craft)e(their)i(o)o(wn)f(abstractions,)g(c)o(hosen)g(for)79
2081 y(appropriateness)h(and)g(e\016ciency)l(,)h(rather)e(than)g(mak)o(e)g
(do)g(with)h(general-purp)q(ose,)h(ine\016cien)o(t)g(and)79
2137 y(inappropriate)d(abstractions.)79 2280 y Fu(5.2)70 b(Pico-k)n(ernels)79
2382 y Fo(Some)20 b(\\pico-k)o(ernel")g(arc)o(hitectures)f(ha)o(v)o(e)g
(pushed)h(their)g(in)o(terface)f(v)o(ery)g(close)h(to)e(the)i(hardw)o(are.)79
2438 y(Ho)o(w)o(ev)o(er,)10 b(they)h(are)e(t)o(ypically)j(biased)f(to)f(serv)
o(er)f(arc)o(hitectures,)i(restricting)g(the)f(abilit)o(y)i(of)d
Fn(applic)n(ation-)79 2495 y(level)14 b Fo(soft)o(w)o(are)e(to)i(lo)q(cally)i
(manage)d(resources.)20 b(F)l(or)13 b(example,)i(usage)f(of)g(the)g(lo)o
(w-lev)o(el)i(k)o(ernel)f(in)o(ter-)79 2551 y(face)e(is)h(t)o(ypically)g
(restricted)f(to)f(highly)j(privileged)g(serv)o(ers,)d(whic)o(h)i(are)e(exp)q
(ected)i(to)f(b)q(e)g(co)q(op)q(erativ)o(e)79 2608 y(during)k(resource)e
(allo)q(cation)h(and)g(deallo)q(cation.)957 2817 y(90)p eop
%%Page: 91 93
91 92 bop 79 34 a Fp(5.2.1)56 b(The)18 b(pico)g(k)n(ernel)79
120 y Fo(The)f(pico)h(k)o(ernel)f(attempts)e(to)h(pro)o(vide)h(a)f(minimal)j
(set)d(of)g(abstractions:)22 b(virtual)17 b(pro)q(cessors)f(and)79
176 y(protection)e(domains)f([6].)18 b(As)13 b(with)h(the)f(other)g(minimal,)
i(abstraction-based)e(k)o(ernels,)h(the)f(main)h(dif-)79 233
y(ference)h(b)q(et)o(w)o(een)f(it)f(and)h(an)f(exok)o(ernel)i(is)f(that)e(it)
i(is)g(abstraction-based:)19 b(instead)14 b(of)f(concen)o(trating)79
289 y(solely)20 b(on)f(m)o(ultiplexing)j(and)d(exp)q(orting)g(the)g(whole)h
(of)e(hardw)o(are)g(functionalit)o(y)l(,)j(it)e(attempts)f(to)79
346 y(pro)o(vide)g(a)e(small)h(set)g(of)f(abstractions.)24
b(Unfortunately)l(,)17 b(abstractions)f(necessarily)i(hide)g(hardw)o(are)79
402 y(details)f(and)e(con\015ict,)h(at)e(least)i(in)g(some)f(w)o(a)o(ys,)e
(with)j(application)h(requiremen)o(ts.)150 459 y(As)h(in)h(the)f(Ra)o(v)o(en)
g(Kernel)h(\(discussed)h(b)q(elo)o(w\))e(the)g(pico-k)o(ernel)i(designers)f
(ha)o(v)o(e)e(noticed)i(that)79 515 y(application-lev)o(el)f(services)d
(cause)f(less)h(comm)o(unication)g(b)q(et)o(w)o(een)g(the)f(application)i
(and)e(its)h(op)q(erat-)79 571 y(ing)h(system.)79 693 y Fp(5.2.2)56
b(SP)-5 b(A)n(CE)79 779 y Fo(SP)l(A)o(CE)15 b(is)g(an)f(in)o(teresting)h
(\\submicro-k)o(ernel")g(that)f(pro)o(vides)g(only)h(lo)o(w-lev)o(el)h(k)o
(ernel)f(abstractions)79 835 y(de\014ned)20 b(b)o(y)f(the)f(trap)g(and)g(arc)
o(hitecture)h(in)o(terface)g([79)o(].)29 b(Its)18 b(close)h(coupling)h(to)e
(the)g(arc)o(hitecture)79 892 y(has)f(man)o(y)f(similarities)j(to)d(the)g
(philosoph)o(y)i(w)o(e)e(ha)o(v)o(e)g(esp)q(oused.)25 b(Ho)o(w)o(ev)o(er,)16
b(it)g(is)h(di\016cult)h(to)e(ev)m(al-)79 948 y(uate)h(the)g(SP)l(A)o(CE)f
(approac)o(h,)h(since)h(the)f(authors)f(pro)o(vide)h(neither)g(an)g(explicit)
i(metho)q(dology)e(nor)79 1005 y(p)q(erformance)f(results.)79
1127 y Fp(5.2.3)56 b(The)18 b(Ra)n(v)n(en)h(Kernel)79 1212
y Fo(The)c(Ra)o(v)o(en)g(k)o(ernel)g(dislo)q(cates)h(man)o(y)e(traditional)h
(abstractions)g(to)f(user-space)h([82)o(]:)k(tasks,)13 b(excep-)79
1269 y(tion)k(handling)h(and)e(virtual)h(memory)e(are)h(all)h(that)f(is)g
(pro)o(vided)h(b)o(y)f(the)g(k)o(ernel.)24 b(Ho)o(w)o(ev)o(er,)15
b(it)h(do)q(es)79 1325 y(not)i(share)g(our)f(b)q(elief)j(that)d(the)h(op)q
(erating)g(system)f(has)h(no)f(business)i(abstracting)f(the)g(hardw)o(are.)79
1382 y(Rather,)12 b(it)f(views)h(the)f(op)q(erating)g(systems)f(main)i(task)e
(as)g(pro)o(viding)i(a)f(reliable)i(and)e(con)o(v)o(enien)o(t)g(w)o(ork)79
1438 y(en)o(vironmen)o(t:)19 b(the)12 b(\\ra)o(w)f(ph)o(ysical)j(hardw)o(are)
d([is])h(an)g(en)o(vironmen)o(t)g(far)g(to)f(exacting)i(for)e(higher)i(lev)o
(el)79 1495 y(users)i(to)e(deal)i(with")f([82)o(].)19 b(This)c(view)f
(manifests)g(in)h(a)f(simple)h(virtual)g(memory)f(and)g(task)f(in)o(terface)
79 1551 y(that)i(hides)h(man)o(y)f(of)g(the)g(features)g(of)g(the)g
(underlying)i(hardw)o(are.)150 1608 y(An)c(in)o(teresting)g(result)g(of)f
(the)h(Ra)o(v)o(en)f(w)o(ork)g(is)h(that)f(they)g(ha)o(v)o(e)g(found)h(that)f
(simply)i(lo)o(w)o(ering)e(the)79 1664 y(k)o(ernel)h(in)o(terface)f
(increases)g(e\016ciency)l(,)i(since)e(applications)h(do)f(not)f(ha)o(v)o(e)g
(to)g(explicitly)j(comm)o(unicate)79 1720 y(with)i(the)f(k)o(ernel)h(for)f
(man)o(y)g(op)q(erations.)79 1864 y Fu(5.3)70 b(The)23 b(Cac)n(he)f(Kernel)79
1965 y Fo(The)14 b(Cac)o(he)f(Kernel)h([22)o(])f(is)g(a)g(lo)o(w-lev)o(el)i
(k)o(ernel)f(that)e(adheres)h(to)g(some)f(of)h(our)g(precepts)g(for)g(a)g(mo)
q(del)79 2022 y(op)q(erating)f(system.)19 b(The)11 b(di\013erence)i(b)q(et)o
(w)o(een)f(the)g(Cac)o(he)g(Kernel)h(and)e(Aegis)i(is)f(mainly)g(one)g(of)f
(high-)79 2078 y(lev)o(el)22 b(philosoph)o(y:)31 b(the)20 b(Cac)o(he)g
(Kernel)i(fo)q(cuses)e(primarily)i(on)e(reliabilit)o(y)l(,)k(rather)19
b(than)h(securely)79 2134 y(exp)q(orting)i(hardw)o(are)d(resources)i(to)f
(applications.)38 b(F)l(or)20 b(example,)i(the)f(Cac)o(he)f(Kernel)i
(attempts)79 2191 y(to)c(eliminate)i(all)g(dynamic)f(memory)f(allo)q(cation)h
(\(similarly)h(to)e(P)o(op)q(ek)g(and)h(Klines')g(Data)f(Secure)79
2247 y(Unix)i([78)o(]\).)29 b(Unsurprisingly)l(,)21 b(this)e(single)g
(constrain)o(t)f(lo)o(w)o(ers)g(the)h(k)o(ernel)g(in)o(terface)f(as)g
(compared)79 2304 y(to)f(traditional)i(op)q(erating)e(systems.)26
b(Ho)o(w)o(ev)o(er,)17 b(the)h(de-emphasis)h(on)e(application)i(\015exibilit)
o(y)h(and)79 2360 y(extensibili)q(t)o(y)f(is)g(telling;)h(the)d(cac)o(he)h(k)
o(ernel)h(is)f(biased)g(to)o(w)o(ards)e(a)i(serv)o(er-based)g(system)f
(structure)79 2417 y(\(for)e(example,)g(it)h(supp)q(orts)f(only)h(16)e
(\\application-lev)o(el")k(k)o(ernels)e(concurren)o(tly\).)150
2473 y(These)i(quibbles)h(aside,)f(w)o(e)f(b)q(eliev)o(e)i(that)e(with)g(sev)
o(eral)h(straigh)o(t-forw)o(ard)d(c)o(hanges)i(the)h(Cac)o(he)79
2530 y(Kernel)f(w)o(ould)f(\014t)f(\014rmly)g(and)h(w)o(ell)g(within)g(our)f
(de\014nition)i(of)e(an)g(exok)o(ernel.)957 2817 y(91)p eop
%%Page: 92 94
92 93 bop 79 34 a Fu(5.4)70 b(Library)24 b(Op)r(erating)e(Systems)79
135 y Fo(In)17 b(a)f(t)o(w)o(o-page)g(p)q(osition)h(pap)q(er,)g(Anderson)f
(argued)h(for)e(application-lev)o(el)20 b(library)d(op)q(erating)g(sys-)79
192 y(tems.)36 b(T)l(o)21 b(the)g(b)q(est)f(of)h(our)f(kno)o(wledge,)i(he)f
(w)o(as)f(the)h(\014rst)f(to)g(do)h(so.)36 b(He)21 b(also)f(prop)q(osed)h
(that)79 248 y(the)d(k)o(ernel)g(concen)o(trate)f(solely)h(on)g(adjudication)
g(of)f(hardw)o(are)g(resources.)26 b(Ho)o(w)o(ev)o(er,)17 b(he)g(did)i(not)79
305 y(pro)o(vide)c(a)g(design)g(framew)o(ork)e(for)h(suc)o(h)g(a)g(system.)20
b(F)l(or)13 b(example,)i(he)g(did)h(not)e(address)g(ho)o(w)g(secure)79
361 y(m)o(ultiplexing)19 b(of)c(ph)o(ysical)j(resources)d(w)o(ould)i(b)q(e)f
(accomplished.)24 b(In)17 b(addition,)g(he)f(do)q(es)g(not)g(rep)q(ort)79
418 y(on)h(an)g(implemen)o(tation)h(of)e(his)h(ideas.)25 b(Nev)o(ertheless,)
18 b(this)f(pap)q(er)g(can)f(b)q(e)i(considered)g(a)e(\014rst)g(step)79
474 y(in)h(the)e(direction)h(of)f(an)g(exok)o(ernel)h(arc)o(hitecture.)79
617 y Fu(5.5)70 b(SPIN)79 719 y Fo(The)22 b(SPIN)f(pro)s(ject)f(in)o(v)o
(estigates)h(adaptable)g(k)o(ernels)h(that)e(allo)o(w)h(applications)h(to)e
(mak)o(e)h(p)q(olicy)79 775 y(decisions)16 b(e\016cien)o(tly)e([13)o(].)19
b(The)14 b(SPIN)g(system)f(encapsulates)h(p)q(olicies)i(in)e
Fn(spind)r(les)f Fo(that)f(can)i(b)q(e)g(dy-)79 832 y(namically)i(loaded)e
(in)o(to)g(the)f(k)o(ernel.)20 b(T)l(o)14 b(ensure)g(safet)o(y)l(,)f
(spindles)i(will)h(b)q(e)e(written)f(in)i(a)e(p)q(oin)o(ter-safe)79
888 y(language)i(and)g(will)h(b)q(e)f(translated)f(b)o(y)h(a)f(trusted)g
(compiler.)21 b(An)15 b(in)o(teresting)g(result)g(of)f(their)h(imple-)79
945 y(men)o(tation)f(is)h(the)f(p)q(erv)m(asiv)o(e)i(role)e(naming)h(can)f
(pla)o(y)g(in)h(protection:)20 b(con)o(trol)14 b(of)f(what)h(applications)79
1001 y(can)i(name)f(\(and)g(hence)h(manipulate\))g(is,)g(e\013ectiv)o(ely)l
(,)g(protection)f([16)o(].)150 1058 y(The)23 b(SPIN)g(pro)s(ject)f(is)h
(attempting)g(to)f(solv)o(e)h(a)f(di\013eren)o(t)h(from)f(our)g(w)o(ork.)42
b(Namely)l(,)24 b(they)79 1114 y(in)o(v)o(estigate)14 b(the)g(di\016cult)g
(problem)h(of)e(ho)o(w)f(large)i(soft)o(w)o(are)e(systems)g(b)q(e)j
(meaningfully)g(and)f(reliably)79 1171 y(parameterized)g(b)o(y)e(un)o
(trusted)h(applications.)21 b(This)13 b(problem)g(has)g(at)f(its)h(core)f
(e\016cien)o(t,)i(\014ne-grained)79 1227 y(con)o(trol)i(o)o(v)o(er)f(access)h
(righ)o(ts;)f(as)g(suc)o(h)h(it)g(is)g(a)g(v)o(ery)f(general)h(problem)h(and)
e(can)h(ha)o(v)o(e)f(an)h(impact)g(far)79 1283 y(b)q(ey)o(ond)g(the)g(narro)o
(w)e(realm)h(of)g(op)q(erating)g(systems.)150 1340 y(W)l(e)j(view)h(the)g
(SPIN)g(pro)s(ject)e(complemen)o(tary)i(to)e(our)h(exok)o(ernel)h(researc)o
(h,)g(and)f(w)o(e)g(hop)q(e)h(to)79 1396 y(directly)e(use)f(their)f(results)h
(to)e(optimize)j(application-lev)o(el)h(op)q(erating)e(systems.)79
1540 y Fu(5.6)70 b(VM/370)79 1641 y Fo(The)15 b(in)o(terface)g(pro)o(vided)g
(b)o(y)g(the)f(VM/370)f(op)q(erating)i(system)f([27)o(])g(is)h(v)o(ery)g
(similar)g(to)f(what)g(w)o(ould)79 1697 y(b)q(e)h(pro)o(vided)g(b)o(y)f(our)f
(ideal)j(OS:)e(namely)l(,)g(the)g(ra)o(w)f(hardw)o(are.)19
b(Ho)o(w)o(ev)o(er,)13 b(the)h(imp)q(ortan)o(t)f(di\013erence)79
1754 y(is)18 b(that)e(VM/370)g(pro)o(vides)i(this)f(in)o(terface)h(b)o(y)f
Fn(virtualizing)f Fo(the)h(en)o(tire)h(base-mac)o(hine.)26
b(Since)19 b(this)79 1810 y(mac)o(hine)h(can)e(b)q(e)h(quite)g(complicated)h
(and)f(exp)q(ensiv)o(e)h(to)d(em)o(ulate)i(faithfully)l(,)h(virtualization)g
(can)79 1867 y(result)14 b(in)f(a)f(complex)i(and)f(ine\016cien)o(t)h(OS.)f
(In)g(con)o(trast,)e(our)i(approac)o(h)f Fn(exp)n(orts)h Fo(hardw)o(are)e
(resources)79 1923 y(rather)k(than)g(em)o(ulates)h(them,)e(allo)o(wing)i(an)g
(e\016cien)o(t)f(and)h(fast)e(implemen)o(tation.)150 1980 y(The)h(cen)o(tral)
h(tenet)f(of)f(the)i(virtual)f(mac)o(hine)h(mo)o(v)o(emen)o(t)e(\(and)h
(VM/370)f(in)i(particular\))g(is)f(that)79 2036 y(an)f(application)i(should)f
(not)e(b)q(e)i(able)g(to)e(detect)h(that)f(it)i(is)f(not)g(executing)h(on)e
(the)h(nativ)o(e)h(hardw)o(are.)79 2093 y(Supp)q(orting)i(this)f(illusion)i
(aggressiv)o(ely)e(precludes)h(application)h(managemen)o(t:)i(since)c(the)g
(applica-)79 2149 y(tion)g(is)h(not)e(supp)q(osed)i(to)e(see)h(VM/70)f(it)h
(is)g(unable)h(to)e(comm)o(unicate)h(with)g(it)g(o)o(v)o(er)f(suc)o(h)h
(issues)h(as)79 2206 y(explicit)j(allo)q(cation,)e(rev)o(o)q(cation,)f
(naming)h(and)f(sharing)h(\(sharing)f(is)g(particularly)i(di\016cult)f
(across)79 2262 y(virtual)e(mac)o(hines)g([59)o(]\).)79 2405
y Fu(5.7)70 b(Syn)n(thesis)79 2507 y Fo(Syn)o(thesis)22 b(is)f(an)g(inno)o(v)
m(ativ)o(e)g(op)q(erating)g(system)f(that)g(in)o(v)o(estigated)h(the)g
(e\013ects)f(of)h(a)f(tigh)o(t)g(cou-)79 2563 y(pling)e(b)q(et)o(w)o(een)e
(op)q(erating)g(system)g(and)g(compiler.)24 b(In)16 b(particular,)h(Syn)o
(thesis)f(used)h(dynamic)g(co)q(de)79 2620 y(generation)d(to)e(generate)h
(extremely)h(e\016cien)o(t)g(co)q(de)f(sequences)i(for)d(a)h(\014xed,)h
(high-lev)o(el)h(UNIX)f(in)o(ter-)79 2676 y(face)j([72)o(].)23
b(While)17 b(their)g(p)q(erformance)f(impro)o(v)o(emen)o(ts)g(w)o(ere)g
(impressiv)o(e,)i(the)e(\014xed)h(in)o(terface)f(they)957 2817
y(92)p eop
%%Page: 93 95
93 94 bop 79 34 a Fo(pro)o(vided)14 b(precluded)h(m)o(uc)o(h)f
(application-lev)o(el)i(customization.)j(F)l(urthermore,)13
b(an)g(exok)o(ernel's)g(lo)o(w-)79 90 y(lev)o(el)18 b(in)o(terface)f
(directly)h(eliminates)g(the)e(need)i(to)d(partially)j(ev)m(aluate)f(complex)
g(op)q(erating)g(system)79 147 y(functions:)k(all)16 b(functions)g(are)f
(simple)i(and,)e(therefore,)f(quite)i(e\016cien)o(t.)150 203
y(W)l(e)11 b(exp)q(ect)g(to)f(use)h(dynamic)h(co)q(de)f(generation)g(p)q(erv)
m(asiv)o(ely)h(in)g(the)f(optimization)g(of)g(application-)79
260 y(lev)o(el)23 b(op)q(erating)e(systems;)i(the)f(main)f(di\013erence)h
(will)h(b)q(e)f(our)f(reliance)h(on)f(p)q(ortable,)i(high-lev)o(el)79
316 y(metho)q(ds)16 b(for)e(generating)i(co)q(de)g(on)f(the)g(\015y)g
(\(e.g.,)f(as)h(describ)q(ed)i(in)f([39)o(,)f(38)o(]\).)79
460 y Fu(5.8)70 b(HAL)79 561 y Fo(Man)o(y)15 b(op)q(erating)h(systems)f(ha)o
(v)o(e)h(a)f(hardw)o(are)g(abstraction)g(la)o(y)o(er.)21 b(If)16
b(the)f(exok)o(ernel)i(ideas)f(w)o(ork)f(in)79 617 y(practice,)h(these)g(la)o
(y)o(ers)g(could)g(aid)g(the)g(transition)g(from)f(traditional)h(op)q
(erating)g(system)f(structures)79 674 y(to)h(more)g(\015exible,)i(e\016cien)o
(t)f(and)f(simple)h(exok)o(ernels.)24 b(In)16 b(the)g(future,)g(w)o(e)g(hop)q
(e)h(to)e(p)q(erform)h(suc)o(h)h(a)79 730 y(transformation)d(on)h(the)h(co)q
(di\014ed)h(HAL)e(of)g(Windo)o(ws/NT)g([28)o(])79 874 y Fu(5.9)70
b(Extensible)21 b(Op)r(erating)h(Systems)79 975 y Fo(Man)o(y)13
b(early)h(op)q(erating)g(systems)f(pap)q(ers)h(discussed)i(the)d(need)i(for)e
(extendible,)j(\015exible)f(k)o(ernels)g([50)o(,)79 1031 y(65,)20
b(81)o(,)g(107)o(,)g(108)o(].)35 b(Lampson's)20 b(description)h(of)f(the)h
(CAL-TSS)g([60)o(,)f(63)o(])g(and)g(Brinc)o(h)h(Hansen's)79
1088 y(microk)o(ernel)c(pap)q(er)e([43)o(])g(are)g(t)o(w)o(o)f(classic)i
(rationales.)k(Hydra)15 b(w)o(as)f(the)i(most)e(am)o(bitious)h(system)g(to)79
1144 y(ha)o(v)o(e)c(the)g(separation)f(of)h(k)o(ernel)g(p)q(olicy)h(and)f
(mec)o(hanism)h(as)e(one)h(of)f(its)h(cen)o(tral)g(tenets)g([108)n(].)18
b(Mo)q(dern)79 1201 y(revisitations)k(of)e(microk)o(ernels)h(ha)o(v)o(e)g
(also)f(argued)g(for)g(k)o(ernel)i(extensibilit)o(y)h([1)o(,)d(80,)g(84)o(,)g
(95,)g(28)o(].)79 1257 y(Anderson)15 b(and)g(Kiczales)h(et)e(al.)20
b(also)15 b(recen)o(tly)g(argued)f(for)g(minimalism)i(and)f(customizable)g
([3,)f(56)o(].)150 1314 y(The)f(most)e(imp)q(ortan)o(t)h(di\013erence)i(b)q
(et)o(w)o(een)f(our)f(w)o(ork)f(and)i(previous)g(approac)o(hes)f(is)h(the)f
(explicit)79 1370 y(view)j(that)f(the)g(op)q(erating)h(system)f(should)h(not)
f(pro)o(vide)h(abstractions;)f(as)g(a)g(result)h(the)f(in)o(terface)h(in)79
1427 y(these)h(systems)f(is)g(a)g(m)o(uc)o(h)g(higher)h(one)g(\(e.g.,)d
(page-tables)j(are)f(implemen)o(ted)i(b)o(y)e(the)g(k)o(ernel\).)150
1483 y(Curren)o(t)e(attempts)g(include)j(Scout)d([44)o(],)g(Bridge)i([69)o
(],)e(and)h(Vino)g([87)o(].)19 b(Some)13 b(of)h(the)f(tec)o(hniques)79
1540 y(used)24 b(in)f(these)g(systems,)h(suc)o(h)f(as)g(t)o(yp)q(e-safe)f
(languages)h([13)o(,)g(36)o(,)g(74)o(,)f(81])g(and)h(soft)o(w)o(are)e(fault-)
79 1596 y(isolation)e([31)o(,)e(104)o(],)g(are)h(also)f(applicable)j(to)d
(exok)o(ernels.)27 b(These)18 b(systems)f(are)g(just)g(b)q(eginning)j(to)79
1652 y(b)q(e)15 b(constructed,)f(so)g(it)g(is)h(di\016cult)h(to)d(determine)i
(their)g(relationship)h(to)d(exok)o(ernels)i(in)g(general)f(and)79
1709 y(Aegis)i(in)g(particular.)79 1852 y Fu(5.10)70 b(Dynamical)o(ly)20
b(loaded)i(device)g(driv)n(ers)79 1954 y Fo(The)c(commercial)h(w)o(orld)f
(has)f(long)h(lo)q(ok)o(ed)g(at)f(extensibilit)o(y)k(in)d(the)g(form)f(of)g
(dynamically)j(loaded)79 2010 y(device)h(driv)o(ers:)27 b(the)19
b(QNX)g(op)q(erating)g(system)f(allo)o(ws)h(user-lev)o(el)i(handlers)f(for)e
(device)i(I/O)f([47)o(];)79 2067 y(Chorus)12 b(serv)o(ers)f(are)h(loaded)g
(in)o(to)g(the)f(k)o(ernel)i([84)o(];)f(Mac)o(h)f(3.0)g(has)h(migrated)f
(some)g(of)h(the)g(AFS)f(cac)o(he)79 2123 y(manager)h(bac)o(k)h(in)o(to)f
(the)g(k)o(ernel)i([75)o(];)e(Lepreau)i Fn(et.)20 b(al.)f Fo(has)12
b(pro)o(vided)h(a)f(to)q(ol)h(to)f(rein)o(tro)q(duce)h(serv)o(ers)79
2179 y(in)o(to)20 b(Mac)o(h)e(3.0)h([66)o(].)31 b(Dra)o(v)o(es)18
b(has)h(argued)g(for)g(selecting)i(among)d(sev)o(eral)i(implemen)o(tations)g
(of)f(a)79 2236 y(sp)q(eci\014c)d(k)o(ernel)e(abstraction)f(to)g(allo)o(w)h
(customization)g([32)o(].)19 b(Ho)o(w)o(ev)o(er,)12 b(all)i(of)f(these)h
(customizations)79 2292 y(require)j(a)d(v)o(ery)h(high)h(privilege)i(and)d
(none)g(guaran)o(tee)g(the)g(safet)o(y)g(of)f(the)i(co)q(de)f(once)h(in)o
(tro)q(duced.)957 2817 y(93)p eop
%%Page: 94 96
94 95 bop eop
%%Page: 95 97
95 96 bop 79 345 a Fi(Chapter)35 b(6)79 553 y Fm(Conclusions)79
775 y Fo(In)14 b(this)g(c)o(hapter)f(w)o(e)g(summarize)g(the)g(exok)o(ernel)h
(approac)o(h,)f(detail)h(the)f(con)o(tributions)h(of)f(the)g(thesis,)79
832 y(discuss)k(future)e(w)o(ork)f(and)i(conclude.)79 972 y
Fu(6.1)70 b(Summ)n(ary)79 1074 y Fo(T)l(raditional)25 b(op)q(erating)f
(systems)f(encapsulate)h(ph)o(ysical)h(resources)e(in)i(high-lev)o(el)g
(abstractions.)79 1130 y(Th)o(us,)19 b(applications)g(ha)o(v)o(e)f(little)h
(recourse)f(in)h(the)f(face)g(of)f(inappropriate)i(or)e(in\015exible)k(op)q
(erating)79 1187 y(system)15 b(abstractions.)k(The)c(exok)o(ernel)g
(structure)g(prop)q(osed)g(in)g(this)h(thesis)f(attempts)f(to)g(eliminate)79
1243 y(the)20 b(con\015ict)h(b)q(et)o(w)o(een)e(application)i(requiremen)o
(ts)g(and)e(op)q(erating)h(system)f(pro)o(visions)h(b)o(y)g(m)o(ulti-)79
1299 y(plexing)f(the)e(ra)o(w)g(ph)o(ysical)h(resources)f(across)g
(applications.)27 b(Informally)l(,)18 b(an)f(exok)o(ernel)h(striv)o(es)f(to)
79 1356 y(allo)o(w)c(applications)h(to)e(con)o(trol)g(all)h(resources)g(a)o
(v)m(ailable)h(to)e(traditional)h(op)q(erating)g(systems)e(without)79
1412 y(either)k(additional)g(o)o(v)o(erhead)e(or)g(restrictions.)20
b(The)14 b(cen)o(tral)g(principle)i(b)q(ehind)g(an)e(exok)o(ernel)g(is)g
(that)79 1469 y(applications)h(should)f(manage)e(all)i(ph)o(ysical)g
(resources.)19 b(Exok)o(ernels)13 b(manage)g(resources)g(only)g(to)f(the)79
1525 y(exten)o(t)17 b(required)h(b)o(y)f(protection)g(\(e.g.,)e(allo)q
(cation,)j(rev)o(o)q(cation,)f(and)g(o)o(wnership\).)25 b(This)18
b(principle)79 1582 y(is)j(based)f(up)q(on)h(the)f(b)q(elief)j(that)c
(distributed)i(resource)g(managemen)o(t)e(is)h(the)h(b)q(est)f(w)o(a)o(y)f
(to)g(build)79 1638 y(an)g(e\016cien)o(t,)i(\015exible)g(system.)30
b(This)20 b(b)q(elief,)h(in)f(turn,)f(is)h(built)g(up)q(on)g(t)o(w)o(o)d
(simple)k(insigh)o(ts.)31 b(The)79 1695 y(\014rst)17 b(is)h(that,)e(fundamen)
o(tally)l(,)i(there)f(is)h(no)f(\\b)q(est)g(w)o(a)o(y")f(to)g(implemen)o(t)i
(a)f(high-lev)o(el)i(abstraction.)79 1751 y(Therefore,)g(hard-wiring)g(the)g
(implemen)o(tation)g(in)h(the)e(op)q(erating)h(system,)f(where)g(it)h(can)f
(neither)79 1808 y(b)q(e)f(c)o(hanged)f(nor)g(a)o(v)o(oided)g(is)g(a)g
(dangerous)f(practice.)23 b(On)16 b(the)g(other)f(hand,)h(enabling)i
(applications)79 1864 y(to)j(implemen)o(t)h(the)f(abstractions)f(they)h
(require)g(at)f(application-lev)o(el)k(allo)o(ws)d(v)o(ery)g(e\016cien)o(t)g
(and)79 1920 y(\015exible)f(implemen)o(tations.)29 b(The)18
b(second)g(insigh)o(t)h(is)f(that)f(if)h(a)g(k)o(ernel)g(abstraction)g(is)g
(eliminated,)79 1977 y(it)h(can)g(nev)o(er)f(break,)h(consume)g(cycles,)h
(nor)e(con\015ict)h(with)g(application)h(requiremen)o(ts.)30
b(In)19 b(short,)79 2033 y(an)g(exok)o(ernel)f(esc)o(hews)h(OS)f
(abstractions.)29 b(Both)17 b(of)h(these)g(in)o(tuitions)i(motiv)m(ate)e(the)
g(exp)q(osure)h(of)79 2090 y(all)d(hardw)o(are)d(capabilities)k(to)c
(applications.)22 b(F)l(rom)13 b(these)h(hardw)o(are)g(primitiv)o(es,)h
(application-lev)o(el)79 2146 y(libraries)h(and)e(serv)o(ers)g(can)g
(directly)h(implemen)o(t)g(traditional)g(op)q(erating)f(system)f
(abstractions,)h(sp)q(e-)79 2203 y(cialized)k(for)d(appropriateness)g(and)h
(sp)q(eed.)79 2343 y Fu(6.2)70 b(Con)n(tributions)79 2445 y
Fo(This)16 b(thesis)f(has)f(attac)o(k)o(ed)f(three)i(imp)q(ortan)o(t)f
(problems)h(in)h(op)q(erating)e(systems:)19 b(\015exibili)q(t)o(y)l(,)d(p)q
(erfor-)79 2501 y(mance)g(and)f(reliabilit)o(y)l(.)23 b(Its)15
b(sp)q(eci\014c)i(con)o(tributions)f(are)f(listed)h(b)q(elo)o(w:)135
2580 y(1.)22 b(The)f(insigh)o(t)h(that)e(the)h(reason)f(traditional)h(op)q
(erating)g(systems)g(are)f(in\015exible,)25 b(ine\016cien)o(t)193
2636 y(and)15 b(unreliable)j(is)d(b)q(ecause)h(they)f(are)g(designed)h(to)f
(pro)o(vide)g(abstractions)g(of)f(the)i(underlying)193 2693
y(hardw)o(are.)957 2817 y(95)p eop
%%Page: 96 98
96 97 bop 135 34 a Fo(2.)22 b(The)17 b(dev)o(elopmen)o(t)g(of)f(an)g
(explicit)j(metho)q(dology)d(to)g(directly)i(solv)o(e)f(the)f(problems)h(of)f
(tradi-)193 90 y(tional)k(op)q(erating)f(systems.)32 b(Sp)q(eci\014cally)l(,)
23 b(the)c(de\014nition)i(of)e(a)g(new)g(k)o(ernel)h(structure,)f(the)193
147 y(exok)o(ernel,)i(that)e(has)g(as)g(its)h(cen)o(tral)g(tenet)f(the)h
(secure)g(exp)q(ortation)f(of)g(ra)o(w)g(hardw)o(are)f(re-)193
203 y(sources)e(to)g(applications)h(\(i.e.,)f(the)g(full)i(range)d(of)h
(privileged)i(instructions,)f(TLB)g(hardw)o(are,)193 260 y(DMA,)11
b(etc.\).)18 b(The)12 b(principles)j(of)c(an)h(exok)o(ernel)h(structure)e(ha)
o(v)o(e)h(b)q(een)h(en)o(umerated)f(and)g(man)o(y)193 316 y(of)j(the)g
(issues)h(surrounding)g(its)g(design)g(ha)o(v)o(e)f(b)q(een)h(\015eshed)g
(out.)135 406 y(3.)22 b(The)15 b(dev)o(elopmen)o(t)h(of)e(a)h(protot)o(yp)q
(e)f(exok)o(ernel,)h(Aegis,)h(that)e(pro)o(vides)h(a)g(preliminary)i(test)d
(of)193 463 y(the)h(exok)o(ernel)h(approac)o(h.)135 553 y(4.)22
b(The)17 b(dev)o(elopmen)o(t)h(of)e(a)g(protot)o(yp)q(e)h(library)g(op)q
(erating)g(system,)f(ExOS,)h(that)f(is)i(used)f(as)g(an)193
609 y(existence)f(pro)q(of)f(that)f(traditional)h(op)q(erating)g(system)g(ob)
s(jects)f(\(pro)q(cesses,)h(virtual)g(memory)l(,)193 666 y(IPC\))20
b(can)g(b)q(e)h(implemen)o(ted)h(e\013ectiv)o(ely)f(and)f Fn(\015exibly)f
Fo(in)i(application)h(space.)35 b(One)21 b(of)e(the)193 722
y(in)o(teresting)e(results)g(w)o(e)e(sho)o(w)h(is)h(that)e(virtual)i(memory)f
(can)g(b)q(e)h(e\016cien)o(tly)g(implemen)o(ted)h(at)193 779
y(application-lev)o(el.)135 869 y(5.)k(An)16 b(initial)h(quan)o(titativ)o(e)e
(ev)m(aluation)h(of)f(the)g(exok)o(ernel)h(ideas.)21 b(Our)15
b(initial)i(results)f(are)f(quite)193 925 y(promising:)20 b(man)o(y)13
b(of)g(the)g(b)q(enc)o(hmarks)h(either)g(run)g(an)f(order)g(of)g(magnitude)h
(more)f(e\016cien)o(tly)193 982 y(on)22 b(the)h(exok)o(ernel)g(system)f(than)
g(on)h(a)f(mature)g(monolithic)h(OS)g(or,)h(more)e(comp)q(ellingly)l(,)193
1038 y(cannot)15 b(ev)o(en)h(b)q(e)g(done)f(on)g(an)o(y)g(other)g(op)q
(erating)g(system.)79 1180 y Fu(6.3)70 b(F)-6 b(uture)23 b(w)n(ork)79
1281 y Fo(The)16 b(existing)g(exok)o(ernel)f(precepts)h(m)o(ust)e(b)q(e)i
(re\014ned)g(and)f(expanded.)21 b(F)l(or)14 b(example,)h(a)g(more)f(satis-)79
1338 y(factory)h(framew)o(ork)e(for)i(devices)i(is)e(needed.)150
1394 y(A)o(t)h(a)g(practical)h(lev)o(el,)h(a)e(substan)o(tial)h(amoun)o(t)e
(of)h(w)o(ork)g(needs)h(to)f(b)q(e)h(accomplished)h(b)q(efore)f(w)o(e)79
1450 y(will)j(ha)o(v)o(e)c(a)h(mature)g(exok)o(ernel-based)i(system.)26
b(In)18 b(the)f(short)g(term,)g(the)g(\014rst)g(t)o(w)o(o)f(priorities)j(are)
79 1507 y(the)c(implemen)o(tation)i(of)d(disk)i(and)f(net)o(w)o(ork)e(device)
k(driv)o(ers)e(and)g(the)g(higher-lev)o(el)i(soft)o(w)o(are)c(to)h(use)79
1563 y(them.)19 b(In)12 b(the)g(longer)g(term,)f(w)o(e)g(in)o(tend)i(to)d
(implemen)o(t)j(a)e(complete)i(op)q(erating)e(system)g(and)h(services,)79
1620 y(so)i(that)f(the)h(exok)o(ernel)h(ideas)g(can)f(b)q(e)h(tested)e(in)i
(a)f(pro)q(duction)h(en)o(vironmen)o(t.)20 b(V)l(ery)14 b(high)h(emphasis)79
1676 y(will)22 b(b)q(e)e(placed)g(on)g(making)f(the)h(implemen)o(tation)g(as)
f(simple)i(as)e(p)q(ossible.)35 b(F)l(or)19 b(example,)h(m)o(uc)o(h)79
1733 y(of)c(the)h(co)q(de)g(for)f(the)g(libraries)i(and)f(serv)o(ers)f(will)i
(b)q(e)f(tak)o(en)f(from)f(the)i(more)f(stable)g(public)j(domain)79
1789 y(op)q(erating)d(systems.)150 1846 y(The)h(fundamen)o(tal)h(system)e
(restructuring)h(that)f(an)h(exok)o(ernel)h(allo)o(ws)f(will)i(presen)o(t)e
(a)f(n)o(um)o(b)q(er)79 1902 y(of)j(in)o(teresting)h(problems)f(and)g(insigh)
o(ts.)32 b(W)l(e)19 b(in)o(tend)h(to)f(aggressiv)o(ely)g(in)o(v)o(estigate)g
(ho)o(w)f(di\013eren)o(t)79 1959 y(libraries)f(and)f(serv)o(ers)e(can)i(b)q
(e)g(sp)q(ecialized)i(and)d(tuned)h(to)f(di\013eren)o(t)g(application)i
(domains.)150 2015 y(Additionally)l(,)h(w)o(e)e(will)h(b)q(e)g(constructing)f
(sev)o(eral)g(distributed)h(systems)e(based)h(up)q(on)h(the)e(exok-)79
2071 y(ernel.)22 b(The)16 b(ra)o(w)e(p)q(erformance)i(and)f(close)h(in)o
(tegration)g(with)f(the)h(hardw)o(are)f(should)h(go)f(a)g(long)g(w)o(a)o(y)79
2128 y(to)o(w)o(ards)i(pro)o(viding)j(fast,)d(high-bandwidth)k(net)o(w)o(ork)
c(comm)o(unication.)30 b(This)19 b(ra)o(w)e(p)q(o)o(w)o(er)h(can)h(b)q(e)79
2184 y(used)h(as)e(a)g(strong)g(building)k(blo)q(c)o(k)d(for)f(distributed)i
(applications;)i(for)c(example,)i(a)e(v)o(ery)h(e\016cien)o(t)79
2241 y(distributed)j(shared)f(memory)e(system.)35 b(F)l(urthermore,)21
b(it)f(will)i(allo)o(w)f(us)f(to)g(build)i(a)e(completely)79
2297 y(lo)q(cation-transparen)o(t)c(distributed)g(system.)150
2354 y(A)o(t)f(an)h(implemen)o(tation)h(lev)o(el,)g(there)f(are)f(a)g(n)o(um)
o(b)q(er)h(of)g(tec)o(hniques)h(w)o(e)e(will)j(utilize)g(to)d(further)79
2410 y(increase)e(the)f(sp)q(eed)h(of)f(the)g(curren)o(t)g(exok)o(ernel)h
(system.)18 b(The)12 b(\014rst)g(will)h(b)q(e)g(the)f(use)g(of)g(dynamic)h
(co)q(de)79 2467 y(generation)k(to)e(tune)i(TLB)f(handling,)i(exception)f
(forw)o(arding)e(and)h(the)h(Aegis)f(up)q(call.)25 b(The)16
b(second)79 2523 y(tec)o(hnique)h(is)f(the)g(use)g(of)f(do)o(wnloaded)g
(application)j(co)q(de)e(to)e(impro)o(v)o(e)i(p)q(erformance.)k(Do)o
(wnloaded)79 2580 y(application)d(co)q(de)e(can)f(b)q(e)h(used)g(to)f(lo)o(w)
o(er)g(the)h(cost)f(of)g(STLB)h(misses)g(\(and,)f(with)h(careful)g(atten)o
(tion)79 2636 y(eliminate)22 b(the)d(need)h(for)f(it)h(all)g(together\),)f
(batc)o(h)g(system)g(calls)i(and,)f(imp)q(ortan)o(tly)l(,)g(simplify)h(the)79
2693 y(exok)o(ernel)15 b(in)o(terface:)k(man)o(y)14 b(of)f(the)h(system)f
(calls)i(w)o(e)e(require)h(to)g(exp)q(ose)g(the)g(underlying)h(hardw)o(are)
957 2817 y(96)p eop
%%Page: 97 99
97 98 bop 79 34 a Fo(\(e.g.,)18 b(privileged)i(instructions\))f(can)f(b)q(e)h
(directly)h(eliminated,)g(since)f(applications)h(can)e(do)o(wnload)79
90 y(co)q(de)e(to)f(p)q(erform)g(these)g(op)q(erations)h(directly)l(.)79
234 y Fu(6.4)70 b(Close)79 335 y Fo(T)l(raditional)19 b(op)q(erating)f
(systems)f(ha)o(v)o(e)h(b)q(een)g(abstraction-based.)28 b(These)18
b(abstractions)f(ha)o(v)o(e)g(hin-)79 392 y(dered)g(reliabilit)o(y)h(and)d
(e\016ciency)i(and)f(con\015icted)h(with)f(application)h(requiremen)o(ts.)k
(W)l(e)15 b(ha)o(v)o(e)h(pro-)79 448 y(p)q(osed)22 b(a)f(new)g(op)q(erating)g
(system)g(structure)g(to)f(solv)o(e)i(these)f(problems.)38
b(The)21 b(cen)o(tral)g(tenet)h(on)79 505 y(whic)o(h)15 b(this)g(structure)f
(is)g(built)i(is)e(that)g(all)h(hardw)o(are)e(functionalit)o(y)i(should)g(b)q
(e)g(exp)q(osed)g Fn(dir)n(e)n(ctly)e Fo(to)79 561 y(applications)18
b(without)e(either)h(op)q(erating)f(system)g(abstractions)g(or)f(managemen)o
(t.)22 b(This)17 b(exok)o(ernel)79 617 y(arc)o(hitecture)f(represen)o(ts)f(a)
g(fundamen)o(tal)h(shift)f(in)h(ho)o(w)f(op)q(erating)g(systems)g(are)g
(structured.)150 674 y(W)l(e)22 b(ha)o(v)o(e)g(do)q(cumen)o(ted)h(a)f(small)g
(step)g(in)h(the)f(realization)i(of)d(a)h(mature)g(exok)o(ernel)g(system.)79
730 y(While)17 b(initial)g(results)f(are)f(quite)h(promising)g(\(frequen)o
(tly)f(one)h(to)e(t)o(w)o(o)g(orders)h(of)g(magnitude)g(b)q(etter)79
787 y(than)h(a)e(mature)h(monolithic)i(system)e(on)g(basic)h(op)q
(erations\),)e(further)i(ev)m(aluation)g(m)o(ust)f(b)q(e)g(done)h(to)79
843 y(determine)e(whether)f(the)g(exok)o(ernel)h(arc)o(hitecture)f(can)g(b)q
(e)h(a)e(successful)j(guide)f(for)e(the)h(next)g(decades)79
900 y(of)i(op)q(erating)h(system)e(design.)957 2817 y(97)p
eop
%%Page: 98 100
98 99 bop eop
%%Page: 99 101
99 100 bop 79 366 a Fm(Bibli)q(og)q(raph)m(y)125 589 y Fo([1])22
b(M.)11 b(Accetta,)i(R.)f(Baron,)h(W.)f(Bolosky)l(,)h(D.)e(Golub,)j(R.)e
(Rashid,)i(A.)e(T)l(ev)m(anian,)i(and)f(M.)f(Y)l(oung.)196
645 y(Mac)o(h:)18 b(a)13 b(new)h(k)o(ernel)g(foundation)f(for)g(UNIX)h(dev)o
(elopmen)o(t.)j Fn(Pr)n(o)n(c.)d(Summer)h(1986)g(USENIX)196
702 y(Confer)n(enc)n(e)p Fo(,)d(pages)j(93{112,)f(July)i(1986.)125
795 y([2])22 b(W.B.)15 b(Ac)o(k)o(erman)h(and)h(W.W.)e(Plummer.)25
b(An)17 b(implemen)o(taton)g(of)f(a)g(m)o(ultipro)q(cessing)j(com-)196
852 y(puter)c(system.)j Fn(Pr)n(o)n(c)n(e)n(e)n(dings)13 b(of)j(the)g(First)g
(A)o(CM)e(Symp)n(osium)i(on)g(Op)n(er)n(ating)f(Systems)g(Prin-)196
908 y(ciples)p Fo(,)f(Octob)q(er)h(1967.)125 1002 y([3])22
b(T.E.)14 b(Anderson.)23 b(The)16 b(case)g(for)f(application-sp)q(eci\014c)k
(op)q(erating)d(systems.)21 b(In)c Fn(Thir)n(d)g(Work-)196
1059 y(shop)f(on)g(Workstation)h(Op)n(er)n(ating)e(Systems)p
Fo(,)f(pages)h(92{94,)f(1992.)125 1152 y([4])22 b(T.E.)e(Anderson,)j(B.N.)e
(Bershad,)h(E.D.)e(Lazo)o(wsk)m(a,)j(and)e(H.M.)f(Levy)l(.)39
b(Sc)o(heduler)23 b(activ)m(a-)196 1209 y(tions:)c(E\013ectiv)o(e)c(k)o
(ernel)g(supp)q(ort)g(for)f(the)g(user-lev)o(el)i(managemen)o(t)e(of)g
(parallelism.)21 b(In)15 b Fn(Pr)n(o)n(c.)196 1265 y(Thirte)n(enth)g(Symp)n
(osium)h(on)g(Op)n(er)n(ating)f(System)h(Principles)p Fo(,)d(pages)i(95{109,)
e(Octob)q(er)i(1991.)125 1359 y([5])22 b(A.W.)13 b(App)q(el)j(and)f(K.)f(Li.)
20 b(Virtual)15 b(memory)f(primitiv)o(es)i(for)e(user)g(programs.)k(In)d
Fn(Pr)n(o)n(c)n(e)n(e)n(dings)196 1415 y(of)g(the)h(F)m(ourth)g
(International)e(Confer)n(enc)n(e)g(on)h(ASPLOS)p Fo(,)d(pages)j(96{107,)d
(San)o(ta)i(Clara,)g(CA,)196 1472 y(April)i(1991.)125 1566
y([6])22 b(H.)f(Assenmac)o(her,)h(T.)f(Breitbac)o(h,)i(P)l(.)f(Buhler,)h(V.)f
(H)q(\177)-24 b(ubsc)o(h,)23 b(H.)e(P)o(eine,)i(and)f(R.)f(Sc)o(h)o(w)o(arz.)
196 1622 y(Meeting)15 b(the)f(application)j(in)e(user)g(space.)k(In)d
Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)j(the)g(Sixth)g(SIGOPS)e(Eur)n(op)n(e)n
(an)196 1679 y(Workshop)p Fo(,)h(pages)g(82{87,)f(Septem)o(b)q(er)i(1994.)125
1772 y([7])22 b(O.)15 b(Babaoglu)h(and)f(W.)g(Jo)o(y)l(.)20
b(Con)o(v)o(erting)15 b(a)g(sw)o(ap-based)h(system)f(to)f(do)i(paging)f(in)i
(an)e(arc)o(hi-)196 1829 y(tecture)i(lac)o(king)i(page-referenced)g(bits.)28
b(In)18 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(Eighth)g(A)o(CM)e(Symp)n
(osium)196 1885 y(on)f(Op)n(er)n(ating)f(Systems)g(Principles)p
Fo(,)f(pages)h(78{86,)e(P)o(aci\014c)j(Gro)o(v)o(e,)e(CA,)h(Decem)o(b)q(er)g
(1981.)125 1979 y([8])22 b(Mary)c(L.)g(Bailey)l(,)j(Burra)e(Gopal,)g(Mic)o
(hael)h(A.)e(P)o(agels,)h(Larry)g(L.)g(P)o(eterson,)f(and)h(Prasenjit)196
2036 y(Sark)m(ar.)e(P)l(A)l(THFINDER:)d(A)g(pattern-based)h(pac)o(k)o(et)e
(classi\014er.)19 b(In)c Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)k(the)f(First)196
2092 y(Symp)n(osium)h(on)g(Op)n(er)n(ating)g(Systems)f(Design)g(and)i
(Implementation)p Fo(,)d(pages)h(115{123,)d(1994.)125 2186
y([9])22 b(K.)g(Bala,)h(M.F.)e(Kaasho)q(ek,)i(and)f(W.E.)f(W)l(eihl.)42
b(Soft)o(w)o(are)20 b(prefetc)o(hing)j(and)f(cac)o(hing)h(for)196
2242 y(translation)15 b(lo)q(ok)m(aside)h(bu\013ers.)k(In)c
Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)k(the)f(First)g(Symp)n(osium)g(on)g(OSDI)p
Fo(,)e(pages)196 2299 y(243{253,)f(June)j(1994.)102 2393 y([10])22
b(Thomas)e(Ball)i(and)f(James)g(R.)g(Larus.)37 b(Optimally)22
b(pro\014ling)g(and)f(tracing)g(programs.)36 b(In)196 2449
y Fn(Pr)n(o)n(c)n(e)n(e)n(dings)12 b(of)i(the)h(19th)g(A)o(nnual)f(Symp)n
(osium)g(on)g(Principles)g(of)g(Pr)n(o)n(gr)n(amming)g(L)n(anguages)p
Fo(,)196 2506 y(pages)h(59{70,)e(Alb)q(equerque,)k(New)e(Mexico,)g(Jan)o
(uary)g(1992.)102 2599 y([11])22 b(R.)15 b(Bedic)o(hek.)21
b(Priv)m(ate)16 b(Comm)o(unication,)f(Decem)o(b)q(er)h(1994.)957
2817 y(99)p eop
%%Page: 100 102
100 101 bop 102 34 a Fo([12])22 b(B.)f(N.)h(Bershad.)40 b(High)23
b(p)q(erformance)f(cross-address)g(space)g(comm)o(unication.)41
b(T)l(ec)o(hnical)196 90 y(Rep)q(ort)15 b(90-06-02)f(\(PhD)h(Thesis\),)g
(Univ)o(ersit)o(y)h(of)f(W)l(ashington,)f(June)j(1990.)102
184 y([13])22 b(B.N.)14 b(Bershad,)g(C.)g(Cham)o(b)q(ers,)g(S.)h(Eggers,)e
(C.)h(Maeda,)g(D.)g(McNamee,)g(P)l(.)g(P)o(ardy)o(ak,)f(S.)i(Sa)o(v-)196
240 y(age,)f(and)h(E.)f(Sirer.)20 b(SPIN)15 b(-)g(an)f(extensible)j(microk)o
(ernel)f(for)e(application-sp)q(eci\014c)k(op)q(erating)196
296 y(system)c(services.)21 b(TR)16 b(94-03-03,)d(Univ.)j(of)e(W)l
(ashington,)h(F)l(ebruary)g(1994.)102 390 y([14])22 b(B.N.)13
b(Bershad,)h(D.)g(Lee,)g(T.H.)g(Romer,)g(and)g(J.B.)g(Chen.)k(Av)o(oiding)d
(con\015ict)g(misses)g(dynami-)196 446 y(cally)c(in)g(large)g(direct-mapp)q
(ed)h(cac)o(hes.)g(In)f Fn(Sixth)h(International)f(Confer)n(enc)n(e)f(on)h(A)
o(r)n(chite)n(ctur)n(al)196 503 y(Supp)n(ort)17 b(for)f(Pr)n(o)n(gr)n(amming)
g(L)n(anguages)f(and)h(Op)n(er)n(ating)g(Systems)f(\(ASPLOS-VI\))p
Fo(,)d(1994.)102 596 y([15])22 b(B.N.)11 b(Bershad,)i(D.D.)e(Redell,)k(and)d
(J.R.)g(Ellis.)17 b(F)l(ast)11 b(m)o(utual)i(exclusion)g(for)f(unipro)q
(cessors.)k(In)196 652 y Fn(Pr)n(o)n(c.)11 b(of)h(the)h(Conf.)e(on)h(A)o(r)n
(chite)n(ctur)n(al)f(Supp)n(ort)i(for)f(Pr)n(o)n(gr)n(amming)f(L)n(anguages)g
(and)h(Op)n(er)n(ating)196 709 y(Systems)p Fo(,)h(pages)i(223{237,)e(Octob)q
(er)j(1992.)102 802 y([16])22 b(Brian)15 b(N.)g(Bershad.)20
b(Priv)m(ate)c(Comm)o(unication,)f(Decem)o(b)q(er)h(1994.)102
895 y([17])22 b(Brian)16 b(N.)g(Bershad,)g(Dennis)h(Lee,)f(Theo)q(dore)g(H.)g
(Romer,)f(and)i(J.)e(Bradley)i(Chen.)22 b(Av)o(oiding)196 951
y(con\015ict)14 b(misses)g(dynamically)h(in)f(large)g(direct)g(mapp)q(ed)g
(cac)o(hes.)k(In)c Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(Sixth)196
1008 y(International)g(Confer)n(enc)n(e)f(on)i(ASPLOS)p Fo(,)d(pages)i
(158{170,)e(1994.)102 1101 y([18])22 b(Brian)15 b(K.)h(Bra)o(y)l(,)e(William)
j(L.)e(Lync)o(h,)h(and)f(M.)g(J.)g(Flynn.)21 b(P)o(age)14 b(allo)q(cation)j
(to)d(reduce)i(access)196 1157 y(time)f(of)g(ph)o(ysical)h(pages.)k(T)l(ec)o
(hnical)d(Rep)q(ort)f(CSL-TR-90-454,)e(Stanford)h(Univ)o(ersit)o(y)l(,)h
(1990.)102 1250 y([19])22 b(Rohit)15 b(Chandra,)g(Scott)f(Devine,)i(Ben)f(V)l
(erghese,)g(Ano)q(op)g(Gupta,)f(and)i(Mendel)g(Rosen)o(blum.)196
1307 y(Sc)o(heduling)h(and)d(page)h(migration)f(for)g(m)o(ultipro)q(cessor)h
(compute)g(serv)o(ers.)j(In)e Fn(Sixth)f(Interna-)196 1363
y(tional)d(Confer)n(enc)n(e)e(on)i(A)o(r)n(chite)n(ctur)n(al)f(Supp)n(ort)i
(for)f(Pr)n(o)n(gr)n(amming)g(L)n(anguages)f(and)h(Op)n(er)n(ating)196
1420 y(Systems)j(\(ASPLOS-VI\))p Fo(,)d(1994.)102 1513 y([20])22
b(Je\013rey)d(S.)g(Chase,)h(Henry)f(M.)g(Levy)l(,)h(Mic)o(hel)h(Bak)o
(er-Harv)o(ey)l(,)e(and)h(Edw)o(ard)f(D.)f(Lazo)o(wsk)m(a.)196
1569 y(Ho)o(w)c(to)g(use)h(a)f(64-bit)h(virtual)g(address)f(space.)20
b(T)l(ec)o(hnical)c(Rep)q(ort)f(TR)g(92-03-02,)e(Univ)o(ersit)o(y)196
1626 y(of)h(W)l(ashington,)h(1992.)102 1719 y([21])22 b(D.L.)12
b(Chaum)h(and)h(R.S.)f(F)l(abry)l(.)j(Implemen)o(ting)f(capabilit)o(y-based)g
(protection)f(using)g(encryp-)196 1775 y(tion.)k(T)l(ec)o(hnical)e(Rep)q(ort)
e(UCB/ERL)h(M78/46,)d(Univ)o(ersit)o(y)i(of)g(California)h(at)e(Berk)o(eley)l
(,)i(July)196 1832 y(1978.)102 1925 y([22])22 b(D.)14 b(Cheriton)g(and)h(K.)g
(Duda.)k(A)14 b(cac)o(hing)h(mo)q(del)h(of)e(op)q(erating)h(system)f(k)o
(ernel)h(functionalit)o(y)l(.)196 1981 y(In)g Fn(Pr)n(o)n(c)n(e)n(e)n(dings)f
(of)j(the)f(Sixth)g(SIGOPS)f(Eur)n(op)n(e)n(an)h(Workshop)p
Fo(,)g(Septem)o(b)q(er)g(1994.)102 2074 y([23])22 b(D.)c(R.)i(Cheriton.)32
b(An)20 b(exp)q(erimen)o(t)g(using)g(registers)f(for)g(fast)g(message-based)g
(in)o(terpro)q(cess)196 2131 y(comm)o(unication.)h Fn(Op)n(er)n(ating)c
(Systems)f(R)n(eview)p Fo(,)f(18:12{20,)f([10])h(1984.)102
2224 y([24])22 b(D.)12 b(R.)h(Cheriton,)g(G.)f(R.)h(Whitehead,)h(and)f(E.)g
(W.)f(Szn)o(yter.)k(Binary)e(em)o(ulation)f(of)g(unix)h(using)196
2280 y(the)20 b(v)g(k)o(ernel.)36 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)18
b(of)k(the)f(Summer)g(1990)h(USENIX)d(Confer)n(enc)n(e)p Fo(,)g(pages)h
(73{85,)196 2337 y(June)c(1990.)102 2430 y([25])22 b(D.D.)13
b(Clark.)18 b(On)d(the)g(structuring)f(of)g(systems)g(using)i(up)q(calls.)k
(In)15 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(T)m(enth)196
2486 y(A)o(CM)f(Symp)n(osium)h(on)g(Op)n(er)n(ating)g(Systems)f(Principles)p
Fo(,)e(pages)i(171{180,)e(Decem)o(b)q(er)j(1985.)102 2580 y([26])22
b(Eric)13 b(Co)q(op)q(er,)g(Rob)q(ert)g(Harp)q(er,)g(and)f(P)o(eter)h(Lee.)j
(The)d(F)l(o)o(x)f(pro)s(ject:)18 b(Adv)m(anced)c(dev)o(elopmen)o(t)196
2636 y(of)h(systems)g(soft)o(w)o(are.)20 b(T)l(ec)o(hnical)e(Rep)q(ort)e
(CMU-CS-91-178,)e(Carnegie)i(Mellon)h(Univ)o(ersit)o(y)l(,)196
2692 y(Pittsburgh,)e(P)l(A)g(15213,)e(1991.)945 2817 y(100)p
eop
%%Page: 101 103
101 102 bop 102 34 a Fo([27])22 b(R.)16 b(J.)g(Creasy)l(.)23
b(The)17 b(origin)g(of)f(the)g(VM/370)f(time-sharing)i(system.)23
b Fn(IBM)17 b(J.)g(R)n(ese)n(ar)n(ch)f(and)196 90 y(Development)p
Fo(,)e(25\(5\):483{490,)d(Septem)o(b)q(er)16 b(1981.)102 184
y([28])22 b(H.)15 b(Custer.)k Fn(Inside)c(Windows/NT)p Fo(.)k(Microsoft)c
(Press,)f(Redmond,)i(W)-5 b(A,)15 b(1993.)102 278 y([29])22
b(R.H.)14 b(Halstead)h(D.A.)f(Kranz)h(and)g(E.)f(Mohr.)k(Mul-t:)i(A)15
b(high-p)q(erformance)h(parallel)g(lisp.)21 b(In)196 335 y
Fn(Pr)n(o)n(c)n(e)n(e)n(dings)14 b(of)k(the)f(SIGPLAN)e('89)j(Confer)n(enc)n
(e)d(on)i(Pr)n(o)n(gr)n(amming)g(L)n(anguage)f(Design)g(and)196
391 y(Implementation)p Fo(,)e(1989.)102 485 y([30])22 b(Wiebren)13
b(de)g(Jonge,)g(M.)f(F)l(rans)g(Kaasho)q(ek,)h(and)g(Wilson)g(C.)f(Hsieh.)17
b(The)c(logical)g(disk:)20 b(A)12 b(new)196 541 y(approac)o(h)f(to)g(impro)o
(ving)h(\014le)h(systems.)h(In)e Fn(Pr)n(o)n(c)n(e)n(e)n(dings)f(of)i(the)g
(Thirte)n(enth)g(A)o(CM)e(Symp)n(osium)196 598 y(on)16 b(Op)n(er)n(ating)f
(Systems)g(Principles)p Fo(,)f(1993.)102 692 y([31])22 b(P)l(.)13
b(Deutsc)o(h)h(and)g(C.A.)g(Gran)o(t.)i(A)e(\015exible)i(measuremen)o(t)e(to)
q(ol)g(for)f(soft)o(w)o(are)f(systems.)18 b Fn(Infor-)196 748
y(mation)e(Pr)n(o)n(c)n(essing)e(71)p Fo(,)h(1971.)102 842
y([32])22 b(R.)13 b(Dra)o(v)o(es.)j(The)e(case)f(for)g(run-time)h
(replaceable)i(k)o(ernel)e(mo)q(dules.)k(In)c Fn(F)m(ourth)h(Workshop)h(on)
196 898 y(Workstation)g(Op)n(er)n(ating)g(Systems)p Fo(,)e(pages)h(160{165,)e
(Octob)q(er)i(1993.)102 992 y([33])22 b(Ric)o(hard)16 b(Dra)o(v)o(es.)j(Priv)
m(ate)c(Comm)o(unication,)g(Decem)o(b)q(er)h(1994.)102 1086
y([34])22 b(P)o(eter)11 b(Drusc)o(hel,)i(Larry)f(L.)f(P)o(eterson,)h(and)g
(Bruce)h(S.)e(Da)o(vie.)k(Exp)q(eriences)f(with)e(a)f(high-sp)q(eed)196
1142 y(net)o(w)o(ork)j(adaptor:)19 b(A)c(soft)o(w)o(are)e(p)q(ersp)q(ectiv)o
(e.)22 b(In)16 b Fn(SIGCOMM`94)p Fo(,)d(pages)i(2{13,)f(1994.)102
1236 y([35])22 b(D.)10 b(R.)g(Engler,)i(M.)e(F.)g(Kaasho)q(ek,)h(and)g(J.)g
(O'T)l(o)q(ole.)i(The)d(exok)o(ernel)i(approac)o(h)e(to)g(extensibilit)o(y)
196 1293 y(\(abstract\).)18 b(In)e Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)k(the)f
(First)g(Symp)n(osium)g(on)g(OSDI)p Fo(,)e(No)o(v)o(em)o(b)q(er)h(1994.)102
1386 y([36])22 b(D.)10 b(R.)g(Engler,)i(M.)e(F.)g(Kaasho)q(ek,)h(and)g(J.)f
(O'T)l(o)q(ole.)j(The)e(op)q(erating)g(system)f(k)o(ernel)h(as)g(a)f(secure)
196 1443 y(programmable)19 b(mac)o(hine.)34 b(In)21 b Fn(Pr)n(o)n(c)n(e)n(e)n
(dings)d(of)j(the)f(Sixth)h(SIGOPS)e(Eur)n(op)n(e)n(an)h(Workshop)p
Fo(,)196 1499 y(Septem)o(b)q(er)c(1994.)102 1593 y([37])22
b(D.)c(R.)i(Engler,)g(M.)e(F.)h(Kaasho)q(ek,)h(and)f(J.)h(O'T)l(o)q(ole.)32
b(The)20 b(op)q(erating)f(system)g(k)o(ernel)h(as)f(a)196 1650
y(secure)c(programmable)g(mac)o(hine.)21 b(In)16 b Fn(Op)n(er)n(ating)f
(systems)g(r)n(eview)p Fo(,)g(Jan)o(uary)g(1995.)102 1743 y([38])22
b(Da)o(wson)c(R.)i(Engler,)h(Wilson)g(C.)e(Hsieh,)i(and)f(M.)f(F)l(rans)g
(Kaasho)q(ek.)34 b(`C:)18 b(A)i(language)g(for)196 1800 y(high-lev)o(el,)g
(e\016cien)o(t,)g(and)e(mac)o(hine-indep)q(ende)q(n)o(t)i(dynamic)f(co)q(de)g
(generation.)28 b(Submitted)196 1856 y(for)14 b(publication.)102
1950 y([39])22 b(D.R.)e(Engler)i(and)g(T.A.)f(Pro)q(ebsting.)38
b(DCG:)20 b(An)i(e\016cien)o(t,)i(retargetable)d(dynamic)h(co)q(de)196
2007 y(generation)15 b(system.)k Fn(Pr)n(o)n(c)n(e)n(e)n(dings)14
b(of)j(ASPLOS-VI)p Fo(,)12 b(pages)j(263{272,)e(Octob)q(er)j(1994.)102
2100 y([40])22 b(R.)10 b(Goldb)q(erg.)j(Arc)o(hitecture)f(of)e(virtual)h(mac)
o(hines.)i Fn(1973)g(NCC)e(AFIPS)g(Conf.)g(Pr)n(o)n(c.)p Fo(,)g(42:309{)196
2157 y(318,)j(1973.)102 2251 y([41])22 b(Susan)c(L.)f(Graham,)g(P)o(eter)g
(B.)g(Kessler,)i(and)f(M.)f(K.)g(McKusic)o(k.)28 b(gprof:)c(a)17
b(call)i(graph)e(exe-)196 2307 y(cution)h(pro\014ler.)29 b(In)19
b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)i(the)g(A)o(CM)f(SIGPLAN)f('82)i(Symp)n
(osium)g(on)g(Compiler)196 2364 y(Construction)p Fo(,)14 b(pages)h(120{126,)e
(Boston,)h(MA,)g(June)j(1982.)102 2457 y([42])22 b(Da)o(vid)f(Gudeman.)39
b(Represen)o(ting)23 b(t)o(yp)q(e)f(information)g(in)g(dynamically)i(t)o(yp)q
(ed)e(languages.)196 2514 y(T)l(ec)o(hnical)17 b(Rep)q(ort)e(TR)h(93-27,)d
(Univ)o(ersit)o(y)j(of)f(Arizona,)g(Octob)q(er)h(1993.)102
2608 y([43])22 b(P)o(er)14 b(Brinc)o(h)h(Hansen.)20 b(The)14
b(n)o(ucleus)i(of)e(a)g(m)o(ultiprogramming)h(system.)j Fn(Communic)n(ations)
d(of)196 2664 y(the)h(A)o(CM)p Fo(,)e(13\(4\):238{24)o(1,)e(April)k(1970.)945
2817 y(101)p eop
%%Page: 102 104
102 103 bop 102 34 a Fo([44])22 b(J.H.)10 b(Hartman,)g(A.B.)h(Mon)o(tz,)f(Da)
o(vid)h(Mosb)q(erger,)g(S.W.)f(O'Malley)l(,)i(L.L.)f(P)o(eterson,)f(and)h
(T.A.)196 90 y(Pro)q(ebsting.)29 b(Scout:)e(A)18 b(comm)o(unication-orien)o
(ted)i(op)q(erating)f(system.)29 b(T)l(ec)o(hnical)20 b(Rep)q(ort)196
147 y(TR)15 b(94-20,)f(Univ)o(ersit)o(y)i(of)f(Arizona,)g(T)l(ucson,)g(AZ,)g
(June)h(1994.)102 241 y([45])22 b(K.)15 b(Hart)o(y)f(and)h(D.R.)g(Cheriton.)
20 b(Application-con)o(trolled)e(ph)o(ysical)f(memory)d(using)i(external)196
297 y(page-cac)o(he)22 b(managemen)o(t.)39 b(In)23 b Fn(Pr)n(o)n(c)n(e)n(e)n
(dings)d(of)i(the)h(Fifth)f(International)f(Confer)n(enc)n(e)g(on)196
354 y(ASPLOS)p Fo(,)13 b(pages)i(187{199,)d(Octob)q(er)k(1992.)102
447 y([46])22 b(G.)17 b(J.)h(Henry)l(.)29 b(The)19 b(fair)f(share)g(sc)o
(heduler.)30 b Fn(A)m(T&T)17 b(Bel)r(l)i(L)n(ab)n(or)n(atories)f(T)m(e)n
(chnic)n(al)f(Journal)p Fo(,)196 504 y(Octob)q(er)e(1984.)102
598 y([47])22 b(D.)e(Hildebrand.)40 b(An)22 b(arc)o(hitectural)f(o)o(v)o
(erview)g(of)g(QNX.)38 b(In)22 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)i(the)g
(Usenix)196 654 y(Workshop)17 b(on)f(Micr)n(o-kernels)f(and)h(Other)h(Kernel)
e(A)o(r)n(chite)n(ctur)n(es)p Fo(,)f(April)i(1992.)102 748
y([48])22 b(W.C.)15 b(Hsieh,)i(M.F.)e(Kaasho)q(ek,)i(and)f(W.E.)g(W)l(eihl.)
25 b(The)16 b(p)q(ersisten)o(t)h(relev)m(ance)h(of)e(IPC)h(p)q(er-)196
804 y(formance:)30 b(New)21 b(tec)o(hniques)h(for)e(reducing)h(the)g(IPC)g(p)
q(enalt)o(y)l(.)37 b(In)21 b Fn(F)m(ourth)g(Workshop)i(on)196
861 y(Workstation)16 b(Op)n(er)n(ating)g(Systems)p Fo(,)e(pages)h(186{190,)e
(Octob)q(er)i(1993.)102 955 y([49])22 b(J.)f(Huc)o(k)h(and)f(J.)h(Ha)o(ys.)38
b(Arc)o(hitectural)22 b(supp)q(ort)g(for)f(translation)g(table)h(managemen)o
(t)f(in)196 1011 y(large)13 b(address)h(space)g(mac)o(hines.)k(In)c
Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(19th)g(International)f(Symp)n
(osium)h(on)196 1068 y(Computer)i(A)o(r)n(chite)n(ctur)n(e)p
Fo(,)d(1992.)102 1161 y([50])22 b(D.H.R.)15 b(Huxtable)i(and)g(M.T.)e(W)l
(arwic)o(k.)23 b(Dynamic)17 b(sup)q(ervisors)g(|)f(their)h(design)h(and)e
(con-)196 1218 y(struction.)e Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)j(the)g
(First)e(A)o(CM)h(Symp)n(osium)g(on)g(Op)n(er)n(ating)g(Systems)f(Principles)
p Fo(,)196 1274 y(1967.)102 1368 y([51])22 b(SP)l(AR)o(C)e(In)o(ternational.)
35 b Fn(The)21 b(SP)m(AR)o(C)e(A)o(r)n(chite)n(ctur)n(e)h(Manual)h(V)m(erson)
e(8)p Fo(.)35 b(Pren)o(tice)21 b(Hall,)196 1425 y(Englew)o(o)q(o)q(d)15
b(Cli\013s,)h(New)f(Jersey)h(07632,)d(1992.)102 1518 y([52])22
b(Norman)16 b(P)l(.)h(Jouppi.)28 b(Impro)o(ving)18 b(direct-mapp)q(ed)h(cac)o
(he)e(p)q(erformance)h(b)o(y)f(the)g(addition)i(of)196 1575
y(a)h(small)i(fully-asso)q(ciativ)o(e)h(cac)o(he)e(and)h(prefetc)o(h)f
(bu\013ers.)37 b(In)22 b Fn(17th)g(A)o(nnual)f(International)196
1631 y(Symp)n(osium)16 b(on)g(Computer)h(A)o(r)n(chite)n(ctur)n(e)p
Fo(,)d(pages)h(364{373,)e(Ma)o(y)h(1990.)102 1725 y([53])22
b(M.F.)16 b(Kaasho)q(ek,)j(R.)f(v)m(an)h(Renesse,)h(H.)d(v)m(an)i(Sta)o(v)o
(eren,)f(and)h(A.S.)e(T)l(anen)o(baum.)29 b(FLIP:)19 b(an)196
1782 y(in)o(ternet)o(w)o(ork)14 b(proto)q(col)i(for)f(supp)q(orting)h
(distributed)h(systems.)j Fn(A)o(CM)15 b(T)m(r)n(ans.)g(Comp.)i(Syst.)p
Fo(,)196 1838 y(11\(1\):73{10)o(6,)12 b(F)l(eb.)j(1993.)102
1932 y([54])22 b(Gerry)14 b(Kane)i(and)f(Jo)q(e)h(Heinric)o(h.)22
b Fn(MIPS)15 b(RISC)g(A)o(r)n(chite)n(ctur)n(e)p Fo(.)k(Pren)o(tice)d(Hall,)f
(1992.)102 2026 y([55])22 b(J.)14 b(Ka)o(y)f(and)i(P)l(.)e(Lauder.)19
b(A)14 b(fair)g(share)g(sc)o(heduler.)19 b Fn(Communic)n(ations)14
b(of)i(the)f(A)o(CM)p Fo(,)e(Jan)o(uary)196 2082 y(1988.)102
2176 y([56])22 b(G.)14 b(Kiczales,)i(J.)f(Lamping,)h(C.)e(Maeda,)g(D.)h(Kepp)
q(el,)i(and)e(D.)f(McNamee.)19 b(The)d(need)g(for)e(cus-)196
2232 y(tomizable)e(op)q(erating)g(systems.)h(In)f Fn(F)m(ourth)h(Workshop)h
(on)f(Workstation)g(Op)n(er)n(ating)f(Systems)p Fo(,)196 2289
y(pages)j(165{170,)e(Octob)q(er)i(1993.)102 2383 y([57])22
b(Da)o(vid)14 b(Kotz,)g(Song)g(Bac)g(T)l(oh,)g(and)g(Sriram)g(Radhakrishnan.)
20 b(A)14 b(detailed)h(sim)o(ulation)h(mo)q(del)196 2439 y(of)e(the)i(HP)f
(97560)f(disk)i(driv)o(e.)k(T)l(ec)o(hnical)d(Rep)q(ort)f(PCS-TR94-220,)e
(Dartmouth,)f(1994.)102 2533 y([58])22 b(Keith)e(Krueger,)g(Da)o(vid)f
(Loftesness,)h(Amin)g(V)l(ahdat,)g(and)f(Thomas)g(Anderson.)32
b(T)l(o)q(ols)19 b(for)196 2589 y(dev)o(elopmen)o(t)g(of)f(application-sp)q
(eci\014c)k(virtual)d(memory)e(managemen)o(t.)29 b(In)19 b
Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)196 2646 y(OOPSLA)p Fo(,)d(pages)i(48{64,)
e(Octob)q(er)j(1993.)945 2817 y(102)p eop
%%Page: 103 105
103 104 bop 102 34 a Fo([59])22 b(B.)12 b(W.)f(Lampson.)k(Hin)o(ts)e(for)e
(computer)h(system)g(design.)k(In)c Fn(Pr)n(o)n(c)n(e)n(e)n(dings)g(of)h(the)
h(Eighth)g(A)o(CM)196 90 y(Symp)n(osium)i(on)g(Op)n(er)n(ating)g(Systems)f
(Principles)p Fo(,)e(pages)i(33{48,)f(Decem)o(b)q(er)h(1983.)102
184 y([60])22 b(Butler)17 b(W.)f(Lampson.)24 b Fn(Sche)n(duling)16
b(and)i(Pr)n(ote)n(ction)e(in)h(Inter)n(active)g(Multi-Pr)n(o)n(c)n(essing)e
(Sys-)196 241 y(tems)p Fo(.)k(PhD)c(thesis,)h(Berk)o(eley)l(,)g(1967.)102
335 y([61])22 b(Butler)16 b(W.)e(Lampson.)20 b(Priv)m(ate)c(Comm)o
(unication,)f(No)o(v)o(em)o(b)q(er)g(1994.)102 428 y([62])22
b(B.W.)e(Lampson.)37 b(Dynamic)21 b(protection)g(structures.)36
b Fn(AFIPS)20 b(Conf.)h(Pr)n(o)n(c.)g(1969)h(FJCC)p Fo(,)196
485 y(35:27{28,)12 b(1969.)102 579 y([63])22 b(B.W.)f(Lampson.)39
b(On)23 b(reliable)h(and)e(extendable)h(op)q(erating)f(systems.)39
b Fn(State)22 b(of)h(the)g(A)o(rt)196 635 y(R)n(ep)n(ort)p
Fo(,)15 b(1,)f(1971.)102 729 y([64])22 b(B.W.)14 b(Lampson.)21
b(Protection.)f(In)c Fn(Pr)n(o)n(c.)g(5th)h(Princ)n(eton)e(Conf.)h(on)g
(Inform.)g(Sci.)g(and)h(Syst.)p Fo(,)196 785 y(pages)e(437{443,)e(Marc)o(h)h
(1971.)102 879 y([65])22 b(B.W.)16 b(Lampson)h(and)g(H.E.)f(Sturgis.)25
b(Re\015ections)19 b(on)e(an)g(op)q(erating)g(system)f(design.)26
b Fn(Com-)196 936 y(munic)n(ations)15 b(of)i(the)f(A)o(CM)p
Fo(,)e(19\(5\):251{26)o(5,)e(Ma)o(y)i(1976.)102 1029 y([66])22
b(Ja)o(y)16 b(Lepreau,)h(Mik)o(e)f(Hibler,)i(Bry)o(an)e(F)l(ord,)g(and)g
(Je\013)g(La)o(w.)23 b(In-k)o(ernel)18 b(serv)o(ers)e(in)h(Mac)o(h)f(3.0:)196
1086 y(implemen)o(tation)f(and)f(p)q(erformance.)19 b Fn(Pr)n(o)n(c.)14
b(of)i(the)f(Thir)n(d)g(Usenix)g(Mach)g(Symp)n(osium)p Fo(,)f(1993.)102
1180 y([67])22 b(Jo)q(c)o(hen)d(Liedtk)o(e.)30 b(Impro)o(ving)18
b(IPC)g(b)o(y)h(k)o(ernel)g(design.)29 b(In)19 b Fn(Pr)n(o)n(c)n(e)n(e)n
(dings)e(of)i(the)g(F)m(ourte)n(enth)196 1236 y(A)o(CM)c(Symp)n(osium)h(on)g
(Op)n(er)n(ating)g(Systems)f(Principles)p Fo(,)e(pages)i(175{188,)e(1993.)102
1330 y([68])22 b(Barbara)9 b(Lisk)o(o)o(v,)i(Mark)f(Da)o(y)l(,)g(and)g(Liuba)
i(Shrira.)g Fn(Distribute)n(d)g(Obje)n(ct)f(Management)p Fo(,)g(c)o(hapter)
196 1386 y(Distributed)16 b(Ob)s(ject)f(Managemen)o(t)f(in)i(Thor,)f(pages)g
(79{91.)j(Morgan)c(Kaufman,)h(1993.)102 1480 y([69])22 b(Stev)o(en)14
b(Lucco.)19 b(High-p)q(erformance)d(microk)o(ernel)f(systems)f(\(abstract\).)
i(In)f Fn(Pr)n(o)n(c.)g(of)g(the)h(\014rst)196 1537 y(Symp.)g(on)g(OSDI)p
Fo(,)e(No)o(v)o(em)o(b)q(er)h(1994.)102 1631 y([70])22 b(C.)14
b(Maeda.)20 b(Thesis)c(prop)q(osal,)f(Jan)o(uary)g(1994.)102
1724 y([71])22 b(C.)16 b(Maeda)h(and)g(B.)g(N.)g(Bershad.)26
b(Proto)q(col)17 b(service)h(decomp)q(osition)h(for)d(high-p)q(erformance)196
1781 y(net)o(w)o(orking.)g(In)e Fn(Pr)n(o)n(c)n(e)n(e)n(dings)f(of)i(the)g(F)
m(ourte)n(enth)f(A)o(CM)f(Symp)n(osium)i(on)g(Op)n(er)n(ating)f(Systems)196
1837 y(Principles)p Fo(,)f(pages)i(244{255,)e(1993.)102 1931
y([72])22 b(H.)14 b(Massalin.)19 b Fn(Synthesis:)g(an)c(e\016cient)g
(implementation)g(of)h(fundamental)f(op)n(er)n(ating)g(system)196
1988 y(servic)n(es)p Fo(.)j(PhD)d(thesis,)g(Colum)o(bia)h(Univ)o(ersit)o(y)l
(,)g(1992.)102 2081 y([73])22 b(Dylan)17 b(McNamee)g(and)g(Katherine)h
(Armstrong.)23 b(Extending)18 b(the)f(mac)o(h)g(external)g(pager)f(in-)196
2138 y(terface)22 b(to)f(accommo)q(date)h(user-lev)o(el)i(page)e(replacemen)o
(t)h(p)q(olicies.)44 b(In)23 b Fn(Mach)g(Workshop)196 2194
y(Confer)n(enc)n(e)14 b(Pr)n(o)n(c)n(e)n(e)n(dings)p Fo(,)e(pages)j(17{30,)f
(Burlington,)i(VT,)e(Octob)q(er)i(4-5)f(1990.)e(USENIX.)102
2288 y([74])22 b(J.C.)11 b(Mogul,)h(R.F.)g(Rashid,)h(and)f(M.J.)g(Accetta.)i
(The)e(pac)o(k)o(et)g(\014lter:)19 b(An)12 b(e\016cien)o(t)h(mec)o(hanism)196
2345 y(for)i(user-lev)o(el)j(net)o(w)o(ork)d(co)q(de.)24 b(In)17
b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)d(of)k(11th)g(SOSP)p Fo(,)c(pages)i(39{51,)f
(Austin,)i(TX,)196 2401 y(No)o(v)o(em)o(b)q(er)d(1987.)102
2495 y([75])22 b(Da)o(vid)k(Nagle,)i(Ric)o(hard)f(Uhlig,)i(Tim)d(Stanley)l(,)
j(Stuart)d(Sec)o(hrest,)i(T)l(rev)o(or)d(Mudge,)j(and)196 2551
y(Ric)o(hard)20 b(Bro)o(wn.)33 b(Design)20 b(tradeo\013s)e(for)h(soft)o(w)o
(are-managed)f(TLBs.)34 b Fn(20th)21 b(A)o(nnual)e(Inter-)196
2608 y(national)c(Symp)n(osium)i(on)f(Computer)h(A)o(r)n(chite)n(ctur)n(e)p
Fo(,)d(pages)h(27{38,)e(1993.)945 2817 y(103)p eop
%%Page: 104 106
104 105 bop 102 34 a Fo([76])22 b(J.)16 b(K.)g(Ousterhout.)23
b(Wh)o(y)16 b(aren't)g(op)q(erating)g(systems)g(getting)g(faster)f(as)h(fast)
g(as)g(hardw)o(are?)196 90 y(In)f Fn(Pr)n(o)n(c.)h(Summer)h(Usenix)p
Fo(,)c(pages)i(247{256,)e(June)k(1990.)102 183 y([77])22 b(M.)14
b(P)o(agels.)20 b(Priv)m(ate)15 b(Comm)o(unication,)h(Octob)q(er)f(1994.)102
275 y([78])22 b(G.J.)14 b(P)o(op)q(ek)g(et)h(al.)k(UCLA)c(data)f(secure)h
(UNIX.)20 b(In)15 b Fn(Pr)n(o)n(c.)h(of)g(the)g(1979)g(National)g(Computer)
196 331 y(Confer)n(enc)n(e)p Fo(,)c(pages)j(355{364,)e(1979.)102
423 y([79])22 b(D.)14 b(Prob)q(ert,)h(J.L.)g(Bruno,)g(and)h(M.)e(Karzaorman.)
20 b(SP)l(A)o(CE:)15 b(A)g(new)h(approac)o(h)f(to)f(op)q(erating)196
480 y(system)g(abstraction.)20 b(In)c Fn(IWOOS)p Fo(,)e(1991.)102
572 y([80])22 b(R.F.)11 b(Rashid)i(and)f(G.)f(Rob)q(ertson.)k(Accen)o(t:)k(A)
11 b(comm)o(unication)i(orien)o(ted)f(net)o(w)o(ork)f(op)q(erating)196
628 y(system)21 b(k)o(ernel.)40 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)19
b(of)k(the)f(Eighth)h(A)o(CM)e(Symp)n(osium)h(on)g(Op)n(er)n(ating)g(Systems)
196 685 y(Principles)p Fo(,)13 b(pages)i(64{75,)f(Decem)o(b)q(er)h(1981.)102
777 y([81])22 b(D.D.)12 b(Redell,)k(Y.K.)d(Dalal,)i(T.R.)e(Horsley)l(,)h
(H.C.)f(Lauer,)h(W.C.)e(Lync)o(h,)j(P)l(.R.)f(McJones,)f(H.G.)196
833 y(Murra)o(y)l(,)23 b(and)g(S.C.)f(Purcell.)44 b(Pilot:)35
b(An)23 b(op)q(erating)g(system)f(for)g(a)g(p)q(ersonal)i(computer.)196
889 y Fn(Communic)n(ations)15 b(of)i(the)f(A)o(CM)p Fo(,)e(23\(2\):81{92,)d
(F)l(ebruary)k(1980.)102 982 y([82])22 b(Duncan)17 b(Stuart)f(Ritc)o(hie.)27
b(The)17 b(Ra)o(v)o(en)g(k)o(ernel:)24 b(a)17 b(microk)o(ernel)h(for)e
(shared)h(memory)g(m)o(ulti-)196 1038 y(pro)q(cessors.)24 b(T)l(ec)o(hnical)
19 b(Rep)q(ort)e(TR)g(93-36,)f(Univ)o(ersit)o(y)h(of)f(British)i(Colum)o
(bia,)g(V)l(ancouv)o(er,)196 1094 y(B.C.,)c(Canada)g(V6T)h(1Z2,)f(April)j
(1993.)102 1187 y([83])22 b(Theo)q(dore)16 b(H.)f(Romer,)h(Dennis)h(Lee,)g
(Brian)f(N.)g(Bershad,)g(and)g(J.)g(Bradley)h(Chen.)22 b(Dynamic)196
1243 y(page)13 b(mapping)h(p)q(olicies)i(for)d(cac)o(he)g(con\015ict)i
(resolution)f(on)f(standard)g(hardw)o(are.)k(In)d Fn(Pr)n(o)n(c)n(e)n(e)n(d-)
196 1299 y(ings)h(of)h(the)h(First)f(Symp)n(osium)g(on)g(OSDI)p
Fo(,)e(pages)h(255{266,)e(June)j(1994.)102 1391 y([84])22 b(M.)c(Rozier,)i
(V.)e(Abrossimo)o(v,)h(F.)f(Armand,)h(I.)g(Boule,)h(M.)e(Gien,)i(M.)e
(Guillemon)o(t,)i(F.)e(Her-)196 1448 y(rmann,)g(C.)g(Kaiser,)h(S.)f
(Langlois,)i(P)l(.)e(Leonard,)h(and)f(W.)f(Neuhauser.)30 b(Chorus)18
b(distributed)196 1504 y(op)q(erating)d(system.)k Fn(Computing)e(Systems)p
Fo(,)d(1\(4\):305{37)o(0,)e(1988.)102 1596 y([85])22 b(J.)12
b(Saltzer.)k Fn(Naming)d(and)h(Binding)f(of)h(Obje)n(cts)p
Fo(,)d(c)o(hapter)h(3.A.,)g(pages)g(99{208.)i(Lecture)f(Notes)196
1653 y(in)j(Computer)e(Science.)j(Springer-V)l(erlag,)f(1978.)102
1745 y([86])22 b(Jerome)16 b(H.)f(Saltzer)h(and)g(Mic)o(hael)h(D.)e(Sc)o(hro)
q(eder.)22 b(The)16 b(protection)g(of)f(information)h(in)h(com-)196
1801 y(puter)e(systems.)k Fn(Pr)n(o)n(c.)d(of)g(the)h(IEEE)p
Fo(,)d(63\(9\):1278{1)o(308)o(,)e(Septem)o(b)q(er)k(1975.)102
1893 y([87])22 b(Margo)9 b(Seltzer)j(et)e(al.)j(An)e(in)o(tro)q(duction)h(to)
e(the)g(arc)o(hitecture)h(of)g(the)f(VINO)i(k)o(ernel,)g(No)o(v)o(em)o(b)q
(er)196 1950 y(1994.)102 2042 y([88])22 b(R.L.)15 b(Sites.)20
b(Alpha)d(axp)e(arc)o(hitecture.)20 b Fn(Comm.)c(of)g(the)h(A)o(CM)p
Fo(,)d(36\(2\),)f(F)l(ebruary)i(1993.)102 2134 y([89])22 b(M.J.)12
b(Spier,)j(Thomas)d(N.)h(Hastings,)h(and)f(Da)o(vid)h(N.)f(Cutler.)k(An)d
(exp)q(erimen)o(tal)g(implemen)o(ta-)196 2191 y(tion)i(of)g(the)g(k)o
(ernel/domain)i(arc)o(hitecture.)23 b(In)17 b Fn(F)m(ourth)h(Symp)n(osium)f
(on)g(Op)n(er)n(ating)g(Systems)196 2247 y(Principles)p Fo(,)c(Octob)q(er)j
(1973.)102 2339 y([90])22 b(Ric)o(hard)16 b(Stallman.)k(Using)c(and)g(p)q
(orting)f(GCC.)102 2431 y([91])22 b(M.)i(Stonebrak)o(er.)48
b(Op)q(erating)25 b(system)g(supp)q(ort)f(for)h(database)f(managemen)o(t.)47
b Fn(CA)o(CM)p Fo(,)196 2488 y(24\(7\):412{4)o(18,)12 b(July)k(1981.)102
2580 y([92])22 b(Mic)o(hael)17 b(Stonebrak)o(er.)22 b Fn(R)n(e)n(adings)16
b(in)h(Datab)n(ase)g(Systems)p Fo(,)e(c)o(hapter)h(Inclusion)i(of)e(new)g(t)o
(yp)q(es)196 2636 y(in)i(relational)g(data)f(base)g(systems,)h(pages)f
(480{487.)24 b(Morgan)17 b(Kaufmann)g(Publishers)i(Inc.,)196
2693 y(1988.)945 2817 y(104)p eop
%%Page: 105 107
105 106 bop 102 34 a Fo([93])22 b(M.)d(T)l(alluri,)24 b(S.)c(Kong,)h(M.D.)f
(Hill,)j(and)e(D.A.)e(P)o(atterson.)35 b(T)l(radeo\013s)19
b(in)j(supp)q(orting)f(t)o(w)o(o)196 90 y(page)14 b(sizes.)19
b(In)c Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(19th)g(A)o(nnual)f
(International)f(Symp)n(osium)h(on)h(Computer)196 147 y(A)o(r)n(chite)n(ctur)
n(e)p Fo(,)e(pages)h(415{424,)e(Ma)o(y)h(1992.)102 238 y([94])22
b(Madh)o(usudhan)16 b(T)l(alluri)i(and)f(Mark)e(D.)h(Hill.)25
b(Surpassing)16 b(the)h(TLB)f(p)q(erformance)h(of)f(sup)q(er-)196
294 y(pages)h(with)h(less)g(op)q(erating)g(system)f(supp)q(ort.)26
b(In)18 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(Sixth)f(International)
196 350 y(Confer)n(enc)n(e)c(on)i(ASPLOS)p Fo(,)d(1994.)102
441 y([95])22 b(A.S.)k(T)l(anen)o(baum,)k(R.)d(v)m(an)g(Renesse,)k(H.)26
b(v)m(an)h(Sta)o(v)o(eren,)i(G.)e(Sharp,)i(S.J.)e(Mullender,)196
498 y(A.)15 b(Jansen,)g(and)h(G.)f(v)m(an)g(Rossum.)21 b(Exp)q(eriences)c
(with)f(the)f(Amo)q(eba)g(distributed)i(op)q(erating)196 554
y(system.)i Fn(Communic)n(ations)d(of)g(the)g(A)o(CM)p Fo(,)e
(33\(12\):46{63,)d(Decem)o(b)q(er)16 b(1990.)102 645 y([96])22
b(C.)14 b(Thekk)m(ath.)20 b(Priv)m(ate)c(Comm)o(unication,)f(No)o(v)o(em)o(b)
q(er)g(1994.)102 735 y([97])22 b(C.)d(A.)h(Thekk)m(ath)h(and)g(Henry)f(M.)g
(Levy)l(.)36 b(Hardw)o(are)19 b(and)i(soft)o(w)o(are)e(supp)q(ort)h(for)g
(e\016cien)o(t)196 792 y(exception)f(handling.)31 b(In)19 b
Fn(Sixth)h(International)e(Confer)n(enc)n(e)f(on)i(A)o(r)n(chite)n(ctur)n(al)
f(Supp)n(ort)i(for)196 848 y(Pr)n(o)n(gr)n(amming)15 b(L)n(anguages)g(and)i
(Op)n(er)n(ating)e(Systems)g(\(ASPLOS-VI\))p Fo(,)d(1994.)102
939 y([98])22 b(C.A.)f(Thekk)m(ath,)j(T.D.)d(Nguy)o(en,)j(E.)e(Mo)o(y)l(,)h
(and)f(E.)g(Lazo)o(wsk)m(a.)41 b(Implemen)o(ting)24 b(net)o(w)o(ork)196
995 y(proto)q(cols)15 b(at)f(user)i(lev)o(el.)21 b(In)16 b
Fn(SIGCOMM)e('93)p Fo(,)h(pages)g(64{73,)f(1993.)102 1086 y([99])22
b(K.)17 b(Thompson.)25 b(UNIX)18 b(implemen)o(tation.)27 b
Fn(Bel)r(l)18 b(Systems)f(T)m(e)n(chnic)n(al)e(Journal)p Fo(,)j
(57\(6\):1931{)196 1143 y(1946,)13 b(July)k(1978.)79 1233 y([100])22
b(K.)15 b(Thompson,)f(R.)i(Pik)o(e,)f(et)g(al.)20 b(Plan9)c(Man)o(ual)f(P)o
(age,)f(1991.)79 1324 y([101])22 b(Ric)o(hard)e(Uhlig,)i(Da)o(vid)e(Nagle,)h
(T)l(rev)o(or)e(Mudge,)h(and)g(Stuart)f(Sc)o(hrest.)33 b(T)l(rap-driv)o(en)21
b(sim-)196 1380 y(ulation)e(with)g(tap)q(ew)o(orm)f(I)q(I.)31
b(In)19 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)g(Sixth)f(International)f
(Confer)n(enc)n(e)g(on)196 1437 y(A)o(r)n(chite)n(ctur)n(al)c(Supp)n(ort)h
(for)g(Pr)n(o)n(gr)n(amming)f(L)n(anguages)g(and)h(Op)n(er)n(ating)f(Systems)
g(\(ASPLOS-)196 1493 y(VI\))p Fo(,)f(pages)i(132{144,)e(Octob)q(er)j(1994.)79
1584 y([102])22 b(T.)16 b(v)o(on)h(Eic)o(k)o(en,)h(D.E.)e(Culler,)i(S.C.)f
(Goldstein,)h(and)f(K.E.)g(Sc)o(hauser.)26 b(Activ)o(e)18 b(messages:)23
b(a)196 1640 y(mec)o(hanism)12 b(for)f(in)o(tegrated)g(comm)o(unication)i
(and)f(computation.)i(In)e Fn(Pr)n(o)n(c)n(e)n(e)n(dings)e(of)j(the)h(19th)
196 1697 y(International)h(Symp)n(osium)h(on)g(Computer)h(A)o(r)n(chite)n
(ctur)n(e)p Fo(,)d(pages)h(256{267,)e(Ma)o(y)h(1992.)79 1788
y([103])22 b(V.A.)10 b(Vyssotsky)l(,)h(F.J.)f(Corbato',)f(and)i(R.M.)f
(Graham.)i(Structure)f(of)f(the)h(m)o(ultics)h(sup)q(ervisor.)196
1844 y Fn(AFIPS)i(FJCC)h(1965)p Fo(,)h(pages)f(203{212,)e(1965.)79
1935 y([104])22 b(R.)e(W)l(ah)o(b)q(e,)i(S.)e(Lucco,)i(T.)e(Anderson,)i(and)f
(S.)f(Graham.)34 b(E\016cien)o(t)21 b(soft)o(w)o(are-based)e(fault)196
1991 y(isolation.)30 b(In)18 b Fn(Pr)n(o)n(c)n(e)n(e)n(dings)f(of)i(the)h(F)m
(ourte)n(enth)e(A)o(CM)g(Symp)n(osium)h(on)g(Op)n(er)n(ating)g(Systems)196
2048 y(Principles)p Fo(,)13 b(pages)i(203{216,)e(1993.)79 2138
y([105])22 b(Carl)10 b(A.)g(W)l(aldspurger)h(and)g(William)h(E.)e(W)l(eihl.)k
(Lottery)c(sc)o(heduling:)19 b(Flexible)13 b(prop)q(ortional-)196
2195 y(share)20 b(resource)h(managemen)o(t.)36 b(In)22 b Fn(Pr)n(o)n(c)n(e)n
(e)n(dings)d(of)j(the)f(First)g(Symp)n(osium)h(on)f(Op)n(er)n(ating)196
2251 y(Systems)15 b(Design)g(and)i(Implementation)p Fo(,)d(pages)h(1{11,)e
(1994.)79 2342 y([106])22 b(D.W.)15 b(W)l(all.)24 b(Systems)16
b(for)g(late)h(co)q(de)g(mo)q(di\014cation.)24 b Fn(CODE)17
b(91)h(Workshop)g(on)g(Co)n(de)f(Gen-)196 2398 y(er)n(ation)p
Fo(,)d(1991.)79 2489 y([107])22 b(B.A.)14 b(Wic)o(hmann.)21
b(A)15 b(mo)q(dular)h(op)q(erating)f(system.)k Fn(Pr)n(o)n(c.)d(IFIP)f(Cong.)
g(1968)p Fo(,)h(1968.)79 2580 y([108])22 b(W.)e(W)l(ulf,)j(E.)e(Cohen,)h(W.)e
(Corwin,)j(A.)d(Jones,)j(R.)e(Levin,)j(C.)c(Pierson,)j(and)e(F.)g(P)o(ollac)o
(k.)196 2636 y(HYDRA:)16 b(The)g(k)o(ernel)h(of)f(a)g(m)o(ultipro)q(cessing)i
(op)q(erating)e(system.)23 b Fn(Communic)n(ations)16 b(of)h(the)196
2692 y(A)o(CM)p Fo(,)c(17\(6\):337{345,)e(July)17 b(1974.)945
2817 y(105)p eop
%%Page: 106 108
106 107 bop 79 34 a Fo([109])22 b(Y)l(ahara,)f(B.)g(Bershad,)i(C.)d(Maeda,)i
(and)f(E.)g(Moss.)36 b(E\016cien)o(t)22 b(pac)o(k)o(et)e(dem)o(ultiplexing)k
(for)196 90 y(m)o(ultiple)17 b(endp)q(oin)o(ts)f(and)f(large)h(messages.)j
(In)d Fn(Winter)g(USENIX)f(94)p Fo(,)g(1994.)79 184 y([110])22
b(C.)13 b(Y)l(arvin,)h(R.)f(Buk)o(o)o(wski,)h(and)f(T.)g(Anderson.)18
b(Anon)o(ymous)13 b(RPC:)g(Lo)o(w-latency)h(protection)196
241 y(in)j(a)f(64-bit)h(address)g(space.)24 b(In)17 b Fn(Pr)n(o)n(c)n(e)n(e)n
(dings)e(of)j(the)g(Summer)g(1993)g(USENIX)e(Confer)n(enc)n(e)p
Fo(,)196 297 y(June)g(1993.)945 2817 y(106)p eop
%%Trailer
end
userdict /end-hook known{end-hook}if
%%EOF
